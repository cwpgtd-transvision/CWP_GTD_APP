!function(o,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(o._Highcharts,o._Highcharts.dataGrouping.approximations,o._Highcharts.Color,o._Highcharts.SeriesRegistry):"function"==typeof define&&define.amd?define("highcharts/indicators/ichimoku-kinko-hyo",["highcharts/highcharts"],function(o){return t(o,o.dataGrouping,["approximations"],o.Color,o.SeriesRegistry)}):"object"==typeof exports?exports["highcharts/indicators/ichimoku-kinko-hyo"]=t(o._Highcharts,o._Highcharts.dataGrouping.approximations,o._Highcharts.Color,o._Highcharts.SeriesRegistry):o.Highcharts=t(o.Highcharts,o.Highcharts.dataGrouping.approximations,o.Highcharts.Color,o.Highcharts.SeriesRegistry)}("undefined"==typeof window?this:window,(g,d,f,k)=>(()=>{"use strict";var e={512:o=>{o.exports=k},620:o=>{o.exports=f},944:o=>{o.exports=g},956:o=>{o.exports=d}},n={};function i(o){var t=n[o];if(void 0!==t)return t.exports;t=n[o]={exports:{}};return e[o](t,t.exports,i),t.exports}i.n=o=>{var t=o&&o.__esModule?()=>o.default:()=>o;return i.d(t,{a:t}),t},i.d=(o,t)=>{for(var e in t)i.o(t,e)&&!i.o(o,e)&&Object.defineProperty(o,e,{enumerable:!0,get:t[e]})},i.o=(o,t)=>Object.prototype.hasOwnProperty.call(o,t);var o={},t=(i.d(o,{default:()=>u}),i(944)),t=i.n(t),s=i(956),p=i.n(s),s=i(620),s=i.n(s),r=i(512),T=i.n(r);const a=s()["parse"];r=T().seriesTypes.sma;const{defined:O,extend:l,isArray:A,isNumber:h,getClosestDistance:Y,merge:L,objectEach:M}=t();function P(o){return{high:o.reduce(function(o,t){return Math.max(o,t[1])},-1/0),low:o.reduce(function(o,t){return Math.min(o,t[2])},1/0)}}function _(o){const t=o.indicator;t.points=o.points,t.nextPoints=o.nextPoints,t.color=o.color,t.options=L(o.options.senkouSpan.styles,o.gap),t.graph=o.graph,t.fillGraph=!0,T().seriesTypes.sma.prototype.drawGraph.call(t)}class c extends r{constructor(){super(...arguments),this.data=[],this.options={},this.points=[],this.graphCollection=[]}init(){super.init.apply(this,arguments),this.options=L({tenkanLine:{styles:{lineColor:this.color}},kijunLine:{styles:{lineColor:this.color}},chikouLine:{styles:{lineColor:this.color}},senkouSpanA:{styles:{lineColor:this.color,fill:a(this.color).setOpacity(.5).get()}},senkouSpanB:{styles:{lineColor:this.color,fill:a(this.color).setOpacity(.5).get()}},senkouSpan:{styles:{fill:a(this.color).setOpacity(.2).get()}}},this.options)}toYData(o){return[o.tenkanSen,o.kijunSen,o.chikouSpan,o.senkouSpanA,o.senkouSpanB]}translate(){T().seriesTypes.sma.prototype.translate.apply(this);for(const t of this.points)for(const e of this.pointArrayMap){var o=t[e];h(o)&&(t["plot"+e]=this.yAxis.toPixels(o,!0),t.plotY=t["plot"+e],t.tooltipPos=[t.plotX,t["plot"+e]],t.isNull=!1)}}drawGraph(){const e=this,o=e.points,n=e.options,t=e.graph,i=e.color,s={options:{gapSize:n.gapSize}},p=e.pointArrayMap.length,r=[[],[],[],[],[],[]],a={tenkanLine:r[0],kijunLine:r[1],chikouLine:r[2],senkouSpanA:r[3],senkouSpanB:r[4],senkouSpan:r[5]},l=[],h=e.options.senkouSpan,c=h.color||h.styles.fill,u=h.negativeColor,g=[[],[]],d=[[],[]];let f=o.length,k=0,S,y,x,m,v,C,A,Y,P,b,B,G,N;for(e.ikhMap=a;f--;){for(y=o[f],x=0;x<p;x++)S=e.pointArrayMap[x],O(y[S])&&r[x].push({plotX:y.plotX,plotY:y["plot"+S],isNull:!1});var H,X;u&&f!==o.length-1&&(H=a.senkouSpanB.length-1,(X=function(o,t,e,n){if(o&&t&&e&&n){var i=t.plotX-o.plotX,t=t.plotY-o.plotY,s=n.plotX-e.plotX,n=n.plotY-e.plotY,p=o.plotX-e.plotX,e=o.plotY-e.plotY,r=(-t*p+i*e)/(-s*t+i*n),e=(s*e-n*p)/(-s*t+i*n);if(0<=r&&r<=1&&0<=e&&e<=1)return{plotX:o.plotX+e*i,plotY:o.plotY+e*t}}}(a.senkouSpanA[H-1],a.senkouSpanA[H],a.senkouSpanB[H-1],a.senkouSpanB[H]))&&(X={plotX:X.plotX,plotY:X.plotY,isNull:!1,intersectPoint:!0},a.senkouSpanA.splice(H,0,X),a.senkouSpanB.splice(H,0,X),l.push(H)))}if(M(a,(o,t)=>{n[t]&&"senkouSpan"!==t&&(e.points=r[k],e.options=L(n[t].styles,s),e.graph=e["graph"+t],e.fillGraph=!1,e.color=i,T().seriesTypes.sma.prototype.drawGraph.call(e),e["graph"+t]=e.graph),k++}),e.graphCollection)for(const w of e.graphCollection)e[w].destroy(),delete e[w];if(e.graphCollection=[],u&&a.senkouSpanA[0]&&a.senkouSpanB[0]){for(l.unshift(0),l.push(a.senkouSpanA.length-1),G=0;G<l.length-1;G++)if(m=l[G],v=l[G+1],C=a.senkouSpanB.slice(m,v+1),A=a.senkouSpanA.slice(m,v+1),1<=Math.floor(C.length/2)){var j=Math.floor(C.length/2);if(C[j].plotY===A[j].plotY){for(Y=0,P=0,N=0;N<C.length;N++)Y+=C[N].plotY,P+=A[N].plotY;B=Y>P?0:1,g[B]=g[B].concat(C),d[B]=d[B].concat(A)}else B=C[j].plotY>A[j].plotY?0:1,g[B]=g[B].concat(C),d[B]=d[B].concat(A)}else B=C[0].plotY>A[0].plotY?0:1,g[B]=g[B].concat(C),d[B]=d[B].concat(A);["graphsenkouSpanColor","graphsenkouSpanNegativeColor"].forEach(function(o,t){g[t].length&&d[t].length&&(b=0===t?c:u,_({indicator:e,points:g[t],nextPoints:d[t],color:b,options:n,gap:s,graph:e[o]}),e[o]=e.graph,e.graphCollection.push(o))})}else _({indicator:e,points:a.senkouSpanB,nextPoints:a.senkouSpanA,color:c,options:n,gap:s,graph:e.graphsenkouSpan}),e.graphsenkouSpan=e.graph;delete e.nextPoints,delete e.fillGraph,e.points=o,e.options=n,e.graph=t,e.color=i}getGraphPath(o){var t=this;let e=[],n,i;if(o=o||this.points,t.fillGraph&&t.nextPoints){if((n=T().seriesTypes.sma.prototype.getGraphPath.call(t,t.nextPoints))&&n.length){n[0][0]="L",e=T().seriesTypes.sma.prototype.getGraphPath.call(t,o);for(let o=(i=n.slice(0,e.length)).length-1;0<=o;o--)e.push(i[o])}}else e=T().seriesTypes.sma.prototype.getGraphPath.apply(t,arguments);return e}getValues(o,t){const e=t.period,n=t.periodTenkan,i=t.periodSenkouSpanB,s=o.xData,p=o.yData,r=o.xAxis,a=p&&p.length||0,l=Y(r.series.map(o=>o.getColumn("x"))),h=[],c=[];let u,g,d,f,k,S,y,x,m,v;if(!(s.length<=e)&&A(p[0])&&4===p[0].length){var C=s[0]-e*l;for(k=0;k<e;k++)c.push(C+k*l);for(k=0;k<a;k++)k>=n&&(g=P(p.slice(k-n,k)),S=(g.high+g.low)/2),k>=e&&(d=P(p.slice(k-e,k)),y=(d.high+d.low)/2,m=(S+y)/2),k>=i&&(f=P(p.slice(k-i,k)),v=(f.high+f.low)/2),x=p[k][3],u=s[k],void 0===h[k]&&(h[k]=[]),void 0===h[k+e-1]&&(h[k+e-1]=[]),h[k+e-1][0]=S,h[k+e-1][1]=y,(h[k+e-1][2]=void 0)===h[k+1]&&(h[k+1]=[]),h[k+1][2]=x,k<=e&&(h[k+e-1][3]=void 0,h[k+e-1][4]=void 0),void 0===h[k+2*e-2]&&(h[k+2*e-2]=[]),h[k+2*e-2][3]=m,h[k+2*e-2][4]=v,c.push(u);for(k=1;k<=e;k++)c.push(u+k*l);return{values:h,xData:c,yData:h}}}}c.defaultOptions=L(r.defaultOptions,{params:{index:void 0,period:26,periodTenkan:9,periodSenkouSpanB:52},marker:{enabled:!1},tooltip:{pointFormat:'<span style="color:{point.color}">‚óè</span> <b> {series.name}</b><br/>TENKAN SEN: {point.tenkanSen:.3f}<br/>KIJUN SEN: {point.kijunSen:.3f}<br/>CHIKOU SPAN: {point.chikouSpan:.3f}<br/>SENKOU SPAN A: {point.senkouSpanA:.3f}<br/>SENKOU SPAN B: {point.senkouSpanB:.3f}<br/>'},tenkanLine:{styles:{lineWidth:1,lineColor:void 0}},kijunLine:{styles:{lineWidth:1,lineColor:void 0}},chikouLine:{styles:{lineWidth:1,lineColor:void 0}},senkouSpanA:{styles:{lineWidth:1,lineColor:void 0}},senkouSpanB:{styles:{lineWidth:1,lineColor:void 0}},senkouSpan:{styles:{fill:"rgba(255, 0, 0, 0.5)"}},dataGrouping:{approximation:"ichimoku-averages"}}),l(c.prototype,{pointArrayMap:["tenkanSen","kijunSen","chikouSpan","senkouSpanA","senkouSpanB"],pointValKey:"tenkanSen",nameComponents:["periodSenkouSpanB","period","periodTenkan"]}),p()["ichimoku-averages"]=function(){const e=[];let n;return[].forEach.call(arguments,function(o,t){e.push(p().average(o)),n=!n&&void 0===e[t]}),n?void 0:e},T().registerSeriesType("ikh",c);const u=t();return o.default})());