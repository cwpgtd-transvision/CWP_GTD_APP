!function(e,o){"object"==typeof exports&&"object"==typeof module?module.exports=o(e._Highcharts,e._Highcharts.SeriesRegistry):"function"==typeof define&&define.amd?define("highcharts/indicators/supertrend",["highcharts/highcharts"],function(e){return o(e,e.SeriesRegistry)}):"object"==typeof exports?exports["highcharts/indicators/supertrend"]=o(e._Highcharts,e._Highcharts.SeriesRegistry):e.Highcharts=o(e.Highcharts,e.Highcharts.SeriesRegistry)}("undefined"==typeof window?this:window,(c,d)=>(()=>{"use strict";var t={512:e=>{e.exports=d},944:e=>{e.exports=c}},r={};function i(e){var o=r[e];if(void 0!==o)return o.exports;o=r[e]={exports:{}};return t[e](o,o.exports,i),o.exports}i.n=e=>{var o=e&&e.__esModule?()=>e.default:()=>e;return i.d(o,{a:o}),o},i.d=(e,o)=>{for(var t in o)i.o(o,t)&&!i.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:o[t]})},i.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o);var e={},o=(i.d(e,{default:()=>a}),i(944)),o=i.n(o),s=i(512),s=i.n(s);const{atr:S,sma:v}=s().seriesTypes,{addEvent:n,correctFloat:w,isArray:H,isNumber:j,extend:l,merge:D,objectEach:L}=o();function N(e,o){return{index:o,close:e.getColumn("close")[o],x:e.getColumn("x")[o]}}class p extends v{init(){const t=this,r=(super.init.apply(t,arguments),n(this.chart.constructor,"afterLinkSeries",()=>{if(t.options){const e=t.options,o=t.linkedParent.options;e.cropThreshold=o.cropThreshold-(e.params.period-1)}r()},{order:1}))}drawGraph(){const t=this,e=t.options,o=t.linkedParent,r=o.getColumn("x"),i=o?o.points:[],s=t.points,n=t.graph,l=i.length-s.length,p=0<l?l:0,a={options:{gapSize:e.gapSize}},c={top:[],bottom:[],intersect:[]},d={top:{styles:{lineWidth:e.lineWidth,lineColor:e.fallingTrendColor||e.color,dashStyle:e.dashStyle}},bottom:{styles:{lineWidth:e.lineWidth,lineColor:e.risingTrendColor||e.color,dashStyle:e.dashStyle}},intersect:e.changeTrendLine};let h,u,g,x,y,f,m,C,T,b=s.length;for(;b--;)h=s[b],u=s[b-1],g=i[b-1+p],x=i[b-2+p],y=i[b+p],f=i[b+p+1],m=h.options.color,C={x:h.x,plotX:h.plotX,plotY:h.plotY,isNull:!1},!x&&g&&j(r[g.index-1])&&(x=N(o,g.index-1)),!f&&y&&j(r[y.index+1])&&(f=N(o,y.index+1)),!g&&x&&j(r[x.index+1])?g=N(o,x.index+1):!g&&y&&j(r[y.index-1])&&(g=N(o,y.index-1)),h&&g&&y&&x&&h.x!==g.x&&(h.x===y.x?(x=g,g=y):h.x===x.x?(g=x,x={close:o.getColumn("close")[g.index-1],x:r[g.index-1]}):f&&h.x===f.x&&(g=f,x=y)),u&&x&&g?(T={x:u.x,plotX:u.plotX,plotY:u.plotY,isNull:!1},h.y>=g.close&&u.y>=x.close?(h.color=m||e.fallingTrendColor||e.color,c.top.push(C)):h.y<g.close&&u.y<x.close?(h.color=m||e.risingTrendColor||e.color,c.bottom.push(C)):(c.intersect.push(C),c.intersect.push(T),c.intersect.push(D(T,{isNull:!0})),h.y>=g.close&&u.y<x.close?(h.color=m||e.fallingTrendColor||e.color,u.color=m||e.risingTrendColor||e.color,c.top.push(C),c.top.push(D(T,{isNull:!0}))):h.y<g.close&&u.y>=x.close&&(h.color=m||e.risingTrendColor||e.color,u.color=m||e.fallingTrendColor||e.color,c.bottom.push(C),c.bottom.push(D(T,{isNull:!0}))))):g&&(h.y>=g.close?(h.color=m||e.fallingTrendColor||e.color,c.top.push(C)):(h.color=m||e.risingTrendColor||e.color,c.bottom.push(C)));L(c,function(e,o){t.points=e,t.options=D(d[o].styles,a),t.graph=t["graph"+o+"Line"],v.prototype.drawGraph.call(t),t["graph"+o+"Line"]=t.graph}),t.points=s,t.options=e,t.graph=n}getValues(e,o){const t=o.period,r=o.multiplier,i=e.xData,s=e.yData,n=[],l=[],p=[],a=0===t?0:t-1,c=[],d=[];let h,u,g,x,y,f,m,C,T,b;if(!(i.length<=t||!H(s[0])||4!==s[0].length||t<0)){for(h=S.prototype.getValues.call(this,e,{period:t}).yData,b=0;b<h.length;b++)T=s[a+b],C=s[a+b-1]||[],y=c[b-1],f=d[b-1],m=p[b-1],0===b&&(y=f=m=0),u=w((T[1]+T[2])/2+r*h[b]),g=w((T[1]+T[2])/2-r*h[b]),u<y||C[3]>y?c[b]=u:c[b]=y,g>f||C[3]<f?d[b]=g:d[b]=f,m===y&&T[3]<c[b]||m===f&&T[3]<d[b]?x=c[b]:(m===y&&T[3]>c[b]||m===f&&T[3]>d[b])&&(x=d[b]),n.push([i[a+b],x]),l.push(i[a+b]),p.push(x);return{values:n,xData:l,yData:p}}}}p.defaultOptions=D(v.defaultOptions,{params:{index:void 0,multiplier:3,period:10},risingTrendColor:"#06b535",fallingTrendColor:"#f21313",changeTrendLine:{styles:{lineWidth:1,lineColor:"#333333",dashStyle:"LongDash"}}}),l(p.prototype,{nameBase:"Supertrend",nameComponents:["multiplier","period"]}),s().registerSeriesType("supertrend",p);const a=o();return e.default})());