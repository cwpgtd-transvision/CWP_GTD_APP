!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(e._Highcharts,e._Highcharts.SeriesRegistry):"function"==typeof define&&define.amd?define("highcharts/indicators/klinger",["highcharts/highcharts"],function(e){return t(e,e.SeriesRegistry)}):"object"==typeof exports?exports["highcharts/indicators/klinger"]=t(e._Highcharts,e._Highcharts.SeriesRegistry):e.Highcharts=t(e.Highcharts,e.Highcharts.SeriesRegistry)}("undefined"==typeof window?this:window,(E,G)=>(()=>{"use strict";var e,r={512:e=>{e.exports=G},944:e=>{e.exports=E}},i={};function o(e){var t=i[e];if(void 0!==t)return t.exports;t=i[e]={exports:{}};return r[e](t,t.exports,o),t.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var t={},a=(o.d(t,{default:()=>C}),o(944)),a=o.n(a),s=o(512),s=o.n(s);let f=s().seriesTypes["sma"]["prototype"],{defined:y,error:m,merge:v}=a();{var n=e=e||{};let r=["bottomLine"],i=["top","bottom"],o=["top"];function A(e){return"plot"+e.charAt(0).toUpperCase()+e.slice(1)}function P(e,t){let r=[];return(e.pointArrayMap||[]).forEach(e=>{e!==t&&r.push(A(e))}),r}function l(){let r=this,e=r.pointValKey,t=r.linesApiNames,i=r.areaLinesNames,o=r.points,a=r.options,s=r.graph,n={options:{gapSize:a.gapSize}},l=[],p=P(r,e),h=o.length,g;var u,c,d;p.forEach((e,t)=>{for(l[t]=[];h--;)g=o[h],l[t].push({x:g.x,plotX:g.plotX,plotY:g[e],isNull:!y(g[e])});h=o.length}),r.userOptions.fillColor&&i.length&&(u=l[p.indexOf(A(i[0]))],c=1===i.length?o:l[p.indexOf(A(i[1]))],d=r.color,r.points=c,r.nextPoints=u,r.color=r.userOptions.fillColor,r.options=v(o,n),r.graph=r.area,r.fillGraph=!0,f.drawGraph.call(r),r.area=r.graph,delete r.nextPoints,delete r.fillGraph,r.color=d),t.forEach((e,t)=>{l[t]?(r.points=l[t],a[e]?r.options=v(a[e].styles,n):m('Error: "There is no '+e+' in DOCS options declared. Check if linesApiNames are consistent with your DOCS line names."'),r.graph=r["graph"+e],f.drawGraph.call(r),r["graph"+e]=r.graph):m('Error: "'+e+" doesn't have equivalent in pointArrayMap. To many elements in linesApiNames relative to pointArrayMap.\"")}),r.points=o,r.options=a,r.graph=s,f.drawGraph.call(r)}function p(e){let t,r=[],i;if(e=e||this.points,this.fillGraph&&this.nextPoints){if((t=f.getGraphPath.call(this,this.nextPoints))&&t.length){t[0][0]="L",r=f.getGraphPath.call(this,e);for(let e=(i=t.slice(0,r.length)).length-1;0<=e;e--)r.push(i[e])}}else r=f.getGraphPath.apply(this,arguments);return r}function h(t){let r=[];return(this.pointArrayMap||[]).forEach(e=>{r.push(t[e])}),r}function g(){let e=this.pointArrayMap,i,o;i=P(this),f.translate.apply(this,arguments),this.points.forEach(r=>{e.forEach((e,t)=>{o=r[e],null!==(o=this.dataModify?this.dataModify.modifyValue(o):o)&&(r[i[t]]=this.yAxis.toPixels(o,!0))})})}e.compose=function(e){let t=e.prototype;return t.linesApiNames=t.linesApiNames||r.slice(),t.pointArrayMap=t.pointArrayMap||i.slice(),t.pointValKey=t.pointValKey||"top",t.areaLinesNames=t.areaLinesNames||o.slice(),t.drawGraph=l,t.getGraphPath=p,t.toYData=h,t.translate=g,e}}let u=e,{ema:c,sma:d}=s().seriesTypes,{correctFloat:x,error:M,extend:S,isArray:w,merge:b}=a();class D extends d{calculateTrend(e,t){return e[t][1]+e[t][2]+e[t][3]>e[t-1][1]+e[t-1][2]+e[t-1][3]?1:-1}isValidData(e){let t=this.chart,r=this.options,i=this.linkedParent,o=w(e)&&4===e.length,a=this.volumeSeries||(this.volumeSeries=t.get(r.params.volumeSeriesID));return a||M("Series "+r.params.volumeSeriesID+" not found! Check `volumeSeriesID`.",!0,i.chart),!(![i,a].every(function(e){return e&&e.dataTable.rowCount>=r.params.slowAvgPeriod})||!o)}getCM(e,t,r,i,o){return x(t+(r===i?e:o))}getDM(e,t){return x(e-t)}getVolumeForce(e){let t=[],r,i,o=1,a=0,s=e[0][1]-e[0][2],n=0,l;for(;o<e.length;o++)l=this.calculateTrend(e,o),i=this.getDM(e[o][1],e[o][2]),r=this.getCM(a,i,l,n,s),t.push([this.volumeSeries.getColumn("y")[o]*l*Math.abs(2*(i/r-1))*100]),n=l,a=r,s=i;return t}getEMA(e,t,r,i,o,a,s){return c.prototype.calculateEma(s||[],e,void 0===a?1:a,i,t,void 0===o?-1:o,r)}getSMA(e,t,r){return c.prototype.accumulatePeriodPoints(e,t,r)/e}getValues(e,t){let r=[],i=e.xData,o=e.yData,a=[],s=[],n=[],l,p=0,h=0,g,u,c,d=null;if(this.isValidData(o[0])){for(var f=this.getVolumeForce(o),y=this.getSMA(t.fastAvgPeriod,0,f),m=this.getSMA(t.slowAvgPeriod,0,f),v=2/(t.fastAvgPeriod+1),A=2/(t.slowAvgPeriod+1);p<o.length;p++)p>=t.fastAvgPeriod&&(u=h=this.getEMA(f,u,y,v,0,p,i)[1]),p>=t.slowAvgPeriod&&(c=g=this.getEMA(f,c,m,A,0,p,i)[1],n.push(l=x(h-g)),n.length>=t.signalPeriod&&(d=n.slice(-t.signalPeriod).reduce((e,t)=>e+t)/t.signalPeriod),r.push([i[p],l,d]),a.push(i[p]),s.push([l,d]));return{values:r,xData:a,yData:s}}}}D.defaultOptions=b(d.defaultOptions,{params:{fastAvgPeriod:34,slowAvgPeriod:55,signalPeriod:13,volumeSeriesID:"volume"},signalLine:{styles:{lineWidth:1,lineColor:"#ff0000"}},dataGrouping:{approximation:"averages"},tooltip:{pointFormat:'<span style="color: {point.color}">‚óè</span><b> {series.name}</b><br/><span style="color: {point.color}">Klinger</span>: {point.y}<br/><span style="color: {point.series.options.signalLine.styles.lineColor}">Signal</span>: {point.signal}<br/>'}}),S(D.prototype,{areaLinesNames:[],linesApiNames:["signalLine"],nameBase:"Klinger",nameComponents:["fastAvgPeriod","slowAvgPeriod"],pointArrayMap:["y","signal"],parallelArrays:["x","y","signal"],pointValKey:"y"}),u.compose(D),s().registerSeriesType("klinger",D);let C=a();return t.default})());