!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(t._Highcharts,t._Highcharts.SeriesRegistry):"function"==typeof define&&define.amd?define("highcharts/indicators/pivot-points",["highcharts/highcharts"],function(t){return e(t,t.SeriesRegistry)}):"object"==typeof exports?exports["highcharts/indicators/pivot-points"]=e(t._Highcharts,t._Highcharts.SeriesRegistry):t.Highcharts=e(t.Highcharts,t.Highcharts.SeriesRegistry)}("undefined"==typeof window?this:window,(y,g)=>(()=>{"use strict";var a={512:t=>{t.exports=g},944:t=>{t.exports=y}},r={};function o(t){var e=r[t];if(void 0!==e)return e.exports;e=r[t]={exports:{}};return a[t](e,e.exports,o),e.exports}o.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return o.d(e,{a:e}),e},o.d=(t,e)=>{for(var a in e)o.o(e,a)&&!o.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})},o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var t={},e=(o.d(t,{default:()=>f}),o(944)),e=o.n(e),n=o(512),s=o.n(n);function i(t,e){var a=t.series.pointArrayMap;let r,o=a.length;for(s().seriesTypes.sma.prototype.pointClass.prototype[e].call(t);o--;)t[r="dataLabel"+a[o]]&&t[r].element&&t[r].destroy(),t[r]=null}class l extends s().seriesTypes.sma.prototype.pointClass{destroyElements(){i(this,"destroyElements")}destroy(){i(this,"destroyElements")}}var n=l,p=s().seriesTypes["sma"];const{merge:d,extend:h,defined:c,isArray:b}=e();class u extends p{toYData(t){return[t.P]}translate(){const a=this;super.translate.apply(a),a.points.forEach(function(e){a.pointArrayMap.forEach(function(t){c(e[t])&&(e["plot"+t]=a.yAxis.toPixels(e[t],!0))})}),a.plotEndPoint=a.xAxis.toPixels(a.endPoint,!0)}getGraphPath(t){const e=this,a=[[],[],[],[],[],[],[],[],[]],r=e.pointArrayMap.length;let o=e.plotEndPoint,n=[],s,i,l=t.length,p;for(;l--;){for(i=t[l],p=0;p<r;p++)s=e.pointArrayMap[p],c(i[s])&&a[p].push({plotX:i.plotX,plotY:i["plot"+s],isNull:!1},{plotX:o,plotY:i["plot"+s],isNull:!1},{plotX:o,plotY:null,isNull:!0});o=i.plotX}return a.forEach(t=>{n=n.concat(super.getGraphPath.call(e,t))}),n}drawDataLabels(){const a=this,r=a.pointArrayMap;let o,n,s,i;a.options.dataLabels.enabled&&(n=a.points.length,r.concat([!1]).forEach((t,e)=>{for(i=n;i--;)s=a.points[i],t?(s.y=s[t],s.pivotLine=t,s.plotY=s["plot"+t],o=s["dataLabel"+t],e&&(s["dataLabel"+r[e-1]]=s.dataLabel),s.dataLabels||(s.dataLabels=[]),s.dataLabels[0]=s.dataLabel=o=o&&o.element?o:null):s["dataLabel"+r[e-1]]=s.dataLabel;super.drawDataLabels.call(a)}))}getValues(t,e){const a=e.period,r=t.xData,o=t.yData,n=o?o.length:0,s=this[e.algorithm+"Placement"],i=[],l=[],p=[];let d,h,c,u,f,y,g,m;if(!(r.length<a)&&b(o[0])&&4===o[0].length){for(m=a+1;m<=n+a;m+=a)c=r.slice(m-a-1,m),u=o.slice(m-a-1,m),h=c.length,d=c[h-1],y=this.getPivotAndHLC(u),g=s(y),f=i.push([d].concat(g)),l.push(d),p.push(i[f-1].slice(1));return this.endPoint=c[0]+(d-c[0])/h*a,{values:i,xData:l,yData:p}}}getPivotAndHLC(t){var e=t[t.length-1][3];let a=-1/0,r=1/0;return t.forEach(function(t){a=Math.max(a,t[1]),r=Math.min(r,t[2])}),[(a+r+e)/3,a,r,e]}standardPlacement(t){var e=t[1]-t[2];return[null,null,t[0]+e,2*t[0]-t[2],t[0],2*t[0]-t[1],t[0]-e,null,null]}camarillaPlacement(t){var e=t[1]-t[2];return[t[3]+1.5*e,t[3]+1.25*e,t[3]+1.1666*e,t[3]+1.0833*e,t[0],t[3]-1.0833*e,t[3]-1.1666*e,t[3]-1.25*e,t[3]-1.5*e]}fibonacciPlacement(t){var e=t[1]-t[2];return[null,t[0]+e,t[0]+.618*e,t[0]+.382*e,t[0],t[0]-.382*e,t[0]-.618*e,t[0]-e,null]}}u.defaultOptions=d(p.defaultOptions,{params:{index:void 0,period:28,algorithm:"standard"},marker:{enabled:!1},enableMouseTracking:!1,dataLabels:{enabled:!0,format:"{point.pivotLine}"},dataGrouping:{approximation:"averages"}}),h(u.prototype,{nameBase:"Pivot Points",pointArrayMap:["R4","R3","R2","R1","P","S1","S2","S3","S4"],pointValKey:"P",pointClass:n}),s().registerSeriesType("pivotpoints",u);const f=e();return t.default})());