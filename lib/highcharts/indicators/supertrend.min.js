!function(e,o){"object"==typeof exports&&"object"==typeof module?module.exports=o(e._Highcharts,e._Highcharts.SeriesRegistry):"function"==typeof define&&define.amd?define("highcharts/indicators/supertrend",["highcharts/highcharts"],function(e){return o(e,e.SeriesRegistry)}):"object"==typeof exports?exports["highcharts/indicators/supertrend"]=o(e._Highcharts,e._Highcharts.SeriesRegistry):e.Highcharts=o(e.Highcharts,e.Highcharts.SeriesRegistry)}("undefined"==typeof window?this:window,(d,h)=>(()=>{"use strict";var t={512:e=>{e.exports=h},944:e=>{e.exports=d}},r={};function i(e){var o=r[e];if(void 0!==o)return o.exports;o=r[e]={exports:{}};return t[e](o,o.exports,i),o.exports}i.n=e=>{var o=e&&e.__esModule?()=>e.default:()=>e;return i.d(o,{a:o}),o},i.d=(e,o)=>{for(var t in o)i.o(o,t)&&!i.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:o[t]})},i.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o);var e={},o=(i.d(e,{default:()=>a}),i(944)),o=i.n(o),l=i(512),l=i.n(l);let{atr:S,sma:v}=l().seriesTypes,{addEvent:s,correctFloat:w,isArray:H,isNumber:j,extend:n,merge:D,objectEach:L}=o();function N(e,o){return{index:o,close:e.getColumn("close")[o],x:e.getColumn("x")[o]}}class p extends v{init(){let o=this,e=(super.init.apply(o,arguments),s(this.chart.constructor,"afterLinkSeries",()=>{if(o.options){let e=o.options;e.cropThreshold=o.linkedParent.options.cropThreshold-(e.params.period-1)}e()},{order:1}))}drawGraph(){let t=this,e=t.options,o=t.linkedParent,r=o.getColumn("x"),i=o?o.points:[],l=t.points,s=t.graph,n=i.length-l.length,p=0<n?n:0,a={options:{gapSize:e.gapSize}},d={top:[],bottom:[],intersect:[]},h={top:{styles:{lineWidth:e.lineWidth,lineColor:e.fallingTrendColor||e.color,dashStyle:e.dashStyle}},bottom:{styles:{lineWidth:e.lineWidth,lineColor:e.risingTrendColor||e.color,dashStyle:e.dashStyle}},intersect:e.changeTrendLine},c,u,g,x,y,f,m,C,T,b=l.length;for(;b--;)c=l[b],u=l[b-1],g=i[b-1+p],x=i[b-2+p],y=i[b+p],f=i[b+p+1],m=c.options.color,C={x:c.x,plotX:c.plotX,plotY:c.plotY,isNull:!1},!x&&g&&j(r[g.index-1])&&(x=N(o,g.index-1)),!f&&y&&j(r[y.index+1])&&(f=N(o,y.index+1)),!g&&x&&j(r[x.index+1])?g=N(o,x.index+1):!g&&y&&j(r[y.index-1])&&(g=N(o,y.index-1)),c&&g&&y&&x&&c.x!==g.x&&(c.x===y.x?(x=g,g=y):c.x===x.x?(g=x,x={close:o.getColumn("close")[g.index-1],x:r[g.index-1]}):f&&c.x===f.x&&(g=f,x=y)),u&&x&&g?(T={x:u.x,plotX:u.plotX,plotY:u.plotY,isNull:!1},c.y>=g.close&&u.y>=x.close?(c.color=m||e.fallingTrendColor||e.color,d.top.push(C)):c.y<g.close&&u.y<x.close?(c.color=m||e.risingTrendColor||e.color,d.bottom.push(C)):(d.intersect.push(C),d.intersect.push(T),d.intersect.push(D(T,{isNull:!0})),c.y>=g.close&&u.y<x.close?(c.color=m||e.fallingTrendColor||e.color,u.color=m||e.risingTrendColor||e.color,d.top.push(C),d.top.push(D(T,{isNull:!0}))):c.y<g.close&&u.y>=x.close&&(c.color=m||e.risingTrendColor||e.color,u.color=m||e.fallingTrendColor||e.color,d.bottom.push(C),d.bottom.push(D(T,{isNull:!0}))))):g&&(c.y>=g.close?(c.color=m||e.fallingTrendColor||e.color,d.top.push(C)):(c.color=m||e.risingTrendColor||e.color,d.bottom.push(C)));L(d,function(e,o){t.points=e,t.options=D(h[o].styles,a),t.graph=t["graph"+o+"Line"],v.prototype.drawGraph.call(t),t["graph"+o+"Line"]=t.graph}),t.points=l,t.options=e,t.graph=s}getValues(e,o){let t=o.period,r=o.multiplier,i=e.xData,l=e.yData,s=[],n=[],p=[],a=0===t?0:t-1,d=[],h=[],c,u,g,x,y,f,m,C,T,b;if(!(i.length<=t)&&H(l[0])&&4===l[0].length&&!(t<0)){for(b=0,c=S.prototype.getValues.call(this,e,{period:t}).yData;b<c.length;b++)T=l[a+b],C=l[a+b-1]||[],y=d[b-1],f=h[b-1],m=p[b-1],0===b&&(y=f=m=0),u=w((T[1]+T[2])/2+r*c[b]),g=w((T[1]+T[2])/2-r*c[b]),u<y||C[3]>y?d[b]=u:d[b]=y,g>f||C[3]<f?h[b]=g:h[b]=f,m===y&&T[3]<d[b]||m===f&&T[3]<h[b]?x=d[b]:(m===y&&T[3]>d[b]||m===f&&T[3]>h[b])&&(x=h[b]),s.push([i[a+b],x]),n.push(i[a+b]),p.push(x);return{values:s,xData:n,yData:p}}}}p.defaultOptions=D(v.defaultOptions,{params:{index:void 0,multiplier:3,period:10},risingTrendColor:"#06b535",fallingTrendColor:"#f21313",changeTrendLine:{styles:{lineWidth:1,lineColor:"#333333",dashStyle:"LongDash"}}}),n(p.prototype,{nameBase:"Supertrend",nameComponents:["multiplier","period"]}),l().registerSeriesType("supertrend",p);let a=o();return e.default})());