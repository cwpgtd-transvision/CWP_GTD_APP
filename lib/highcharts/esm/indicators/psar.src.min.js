import*as __WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__ from"../highcharts.src.js";import*as __WEBPACK_EXTERNAL_MODULE__modules_stock_src_js_b3d80146__ from"../modules/stock.src.js";var __webpack_require__={n:e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},d:(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const external_highcharts_src_js_default_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default;var external_highcharts_src_js_default_default=__webpack_require__.n(external_highcharts_src_js_default_namespaceObject),x=e=>{var t={};return __webpack_require__.d(t,e),t},y=e=>()=>e;const stock_src_js_namespaceObject=x({}),external_highcharts_src_js_default_SeriesRegistry_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default.SeriesRegistry;var external_highcharts_src_js_default_SeriesRegistry_default=__webpack_require__.n(external_highcharts_src_js_default_SeriesRegistry_namespaceObject);const SMAIndicator=external_highcharts_src_js_default_SeriesRegistry_default().seriesTypes["sma"],merge=external_highcharts_src_js_default_default()["merge"];function toFixed(e,t){return parseFloat(e.toFixed(t))}function calculateDirection(e,t,r,a){return 1===e&&a<t||-1===e&&a<r?1:-1}function getAccelerationFactor(e,t,r,a,_,c,s,i){return e===t?1===e&&a<r||-1===e&&r<a?_===s?s:toFixed(_+c,2):_:i}function getExtremePoint(e,t,r,a){return 1===r?a<e?e:a:t<a?t:a}function getEPMinusPSAR(e,t){return e-t}function getAccelerationFactorMultiply(e,t){return e*t}function getPSAR(e,t,r,a,_,c,s,i,n){return e===t?1===e?r+a<Math.min(_,c)?r+a:Math.min(_,c):r+a>Math.max(i,s)?r+a:Math.max(i,s):n}class PSARIndicator extends SMAIndicator{constructor(){super(...arguments),this.nameComponents=void 0}getValues(e,t){const r=e.xData,a=e.yData,_=t.maxAccelerationFactor,c=t.increment,s=t.initialAccelerationFactor,i=t.decimals,n=t.index,l=[],o=[],u=[];let h=t.initialAccelerationFactor,d,g=a[0][1],p,f,m,x=1,A,j,P,E,M=a[0][2],R,S,F,b;if(!(n>=a.length)){for(b=0;b<n;b++)g=Math.max(a[b][1],g),M=Math.min(a[b][2],toFixed(M,i));for(d=a[b][1]>M?1:-1,p=getEPMinusPSAR(g,M),h=t.initialAccelerationFactor,f=getAccelerationFactorMultiply(h,p),l.push([r[n],M]),o.push(r[n]),u.push(toFixed(M,i)),b=n+1;b<a.length;b++)A=a[b-1][2],j=a[b-2][2],P=a[b-1][1],E=a[b-2][1],S=a[b][1],F=a[b][2],null!==j&&null!==E&&null!==A&&null!==P&&null!==S&&null!==F&&(M=getPSAR(d,x,M,f,j,A,P,E,g),R=getExtremePoint(S,F,d,g),m=calculateDirection(x,F,S,M),h=getAccelerationFactor(m,d,R,g,h,c,_,s),p=getEPMinusPSAR(R,M),f=getAccelerationFactorMultiply(h,p),l.push([r[b],toFixed(M,i)]),o.push(r[b]),u.push(toFixed(M,i)),x=d,d=m,g=R);return{values:l,xData:o,yData:u}}}}PSARIndicator.defaultOptions=merge(SMAIndicator.defaultOptions,{lineWidth:0,marker:{enabled:!0},states:{hover:{lineWidthPlus:0}},params:{period:void 0,initialAccelerationFactor:.02,maxAccelerationFactor:.2,increment:.02,index:2,decimals:4}}),external_highcharts_src_js_default_SeriesRegistry_default().registerSeriesType("psar",PSARIndicator);const PSAR_PSARIndicator=null,psar_src=external_highcharts_src_js_default_default();export{psar_src as default};