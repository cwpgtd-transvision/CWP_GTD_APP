import*as t from"../highcharts.js";import"../modules/stock.js";var e={n:t=>{var a=t&&t.__esModule?()=>t.default:()=>t;return e.d(a,{a:a}),a},d:(t,a)=>{for(var l in a)e.o(a,l)&&!e.o(t,l)&&Object.defineProperty(t,l,{enumerable:!0,get:a[l]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};let a=t.default;var l=e.n(a);e.d({},{});let o=t.default.SeriesRegistry;var n=e.n(o);let s=n().seriesTypes.sma.prototype.pointClass;function r(t,e){let a=t.series.pointArrayMap,l,o=a.length;for(n().seriesTypes.sma.prototype.pointClass.prototype[e].call(t);o--;)t[l="dataLabel"+a[o]]&&t[l].element&&t[l].destroy(),t[l]=null}let i=n().seriesTypes["sma"],{merge:p,extend:d,defined:u,isArray:c}=l();class h extends i{toYData(t){return[t.P]}translate(){let a=this;super.translate.apply(a),a.points.forEach(function(e){a.pointArrayMap.forEach(function(t){u(e[t])&&(e["plot"+t]=a.yAxis.toPixels(e[t],!0))})}),a.plotEndPoint=a.xAxis.toPixels(a.endPoint,!0)}getGraphPath(t){let e=this,a=[[],[],[],[],[],[],[],[],[]],l=e.pointArrayMap.length,n=e.plotEndPoint,o=[],r,s,i=t.length,p;for(;i--;){for(p=0,s=t[i];p<l;p++)u(s[r=e.pointArrayMap[p]])&&a[p].push({plotX:s.plotX,plotY:s["plot"+r],isNull:!1},{plotX:n,plotY:s["plot"+r],isNull:!1},{plotX:n,plotY:null,isNull:!0});n=s.plotX}return a.forEach(t=>{o=o.concat(super.getGraphPath.call(e,t))}),o}drawDataLabels(){let a,l,n,o,r=this,s=r.pointArrayMap;r.options.dataLabels.enabled&&(l=r.points.length,s.concat([!1]).forEach((t,e)=>{for(o=l;o--;)n=r.points[o],t?(n.y=n[t],n.pivotLine=t,n.plotY=n["plot"+t],a=n["dataLabel"+t],e&&(n["dataLabel"+s[e-1]]=n.dataLabel),n.dataLabels||(n.dataLabels=[]),n.dataLabels[0]=n.dataLabel=a=a&&a.element?a:null):n["dataLabel"+s[e-1]]=n.dataLabel;super.drawDataLabels.call(r)}))}getValues(t,e){let a,l,n,o,r,s,i,p=e.period,d=t.xData,u=t.yData,h=u?u.length:0,y=this[e.algorithm+"Placement"],m=[],f=[],g=[];if(!(d.length<p)&&c(u[0])&&4===u[0].length){for(i=p+1;i<=h+p;i+=p)n=d.slice(i-p-1,i),o=u.slice(i-p-1,i),l=n.length,a=n[l-1],s=y(this.getPivotAndHLC(o)),r=m.push([a].concat(s)),f.push(a),g.push(m[r-1].slice(1));return this.endPoint=n[0]+(a-n[0])/l*p,{values:m,xData:f,yData:g}}}getPivotAndHLC(t){let e=t[t.length-1][3],a=-1/0,l=1/0;return t.forEach(function(t){a=Math.max(a,t[1]),l=Math.min(l,t[2])}),[(a+l+e)/3,a,l,e]}standardPlacement(t){var e=t[1]-t[2];return[null,null,t[0]+e,2*t[0]-t[2],t[0],2*t[0]-t[1],t[0]-e,null,null]}camarillaPlacement(t){var e=t[1]-t[2];return[t[3]+1.5*e,t[3]+1.25*e,t[3]+1.1666*e,t[3]+1.0833*e,t[0],t[3]-1.0833*e,t[3]-1.1666*e,t[3]-1.25*e,t[3]-1.5*e]}fibonacciPlacement(t){var e=t[1]-t[2];return[null,t[0]+e,t[0]+.618*e,t[0]+.382*e,t[0],t[0]-.382*e,t[0]-.618*e,t[0]-e,null]}}h.defaultOptions=p(i.defaultOptions,{params:{index:void 0,period:28,algorithm:"standard"},marker:{enabled:!1},enableMouseTracking:!1,dataLabels:{enabled:!0,format:"{point.pivotLine}"},dataGrouping:{approximation:"averages"}}),d(h.prototype,{nameBase:"Pivot Points",pointArrayMap:["R4","R3","R2","R1","P","S1","S2","S3","S4"],pointValKey:"P",pointClass:class extends s{destroyElements(){r(this,"destroyElements")}destroy(){r(this,"destroyElements")}}}),n().registerSeriesType("pivotpoints",h);let y=l();export{y as default};