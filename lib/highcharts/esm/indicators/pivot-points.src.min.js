import*as __WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__ from"../highcharts.src.js";import*as __WEBPACK_EXTERNAL_MODULE__modules_stock_src_js_b3d80146__ from"../modules/stock.src.js";var __webpack_require__={n:t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return __webpack_require__.d(e,{a:e}),e},d:(t,e)=>{for(var a in e)__webpack_require__.o(e,a)&&!__webpack_require__.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};const external_highcharts_src_js_default_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default;var external_highcharts_src_js_default_default=__webpack_require__.n(external_highcharts_src_js_default_namespaceObject),x=t=>{var e={};return __webpack_require__.d(e,t),e},y=t=>()=>t;const stock_src_js_namespaceObject=x({}),external_highcharts_src_js_default_SeriesRegistry_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default.SeriesRegistry;var external_highcharts_src_js_default_SeriesRegistry_default=__webpack_require__.n(external_highcharts_src_js_default_SeriesRegistry_namespaceObject);const SMAPoint=external_highcharts_src_js_default_SeriesRegistry_default().seriesTypes.sma.prototype.pointClass;function destroyExtraLabels(t,e){var a=t.series.pointArrayMap;let s,r=a.length;for(external_highcharts_src_js_default_SeriesRegistry_default().seriesTypes.sma.prototype.pointClass.prototype[e].call(t);r--;)t[s="dataLabel"+a[r]]&&t[s].element&&t[s].destroy(),t[s]=null}class PivotPointsPoint extends SMAPoint{destroyElements(){destroyExtraLabels(this,"destroyElements")}destroy(){destroyExtraLabels(this,"destroyElements")}}const PivotPoints_PivotPointsPoint=PivotPointsPoint,SMAIndicator=external_highcharts_src_js_default_SeriesRegistry_default().seriesTypes["sma"],{merge,extend,defined,isArray}=external_highcharts_src_js_default_default();class PivotPointsIndicator extends SMAIndicator{toYData(t){return[t.P]}translate(){const a=this;super.translate.apply(a),a.points.forEach(function(e){a.pointArrayMap.forEach(function(t){defined(e[t])&&(e["plot"+t]=a.yAxis.toPixels(e[t],!0))})}),a.plotEndPoint=a.xAxis.toPixels(a.endPoint,!0)}getGraphPath(t){const e=this,a=[[],[],[],[],[],[],[],[],[]],s=e.pointArrayMap.length;let r=e.plotEndPoint,i=[],n,o,_=t.length,l;for(;_--;){for(o=t[_],l=0;l<s;l++)n=e.pointArrayMap[l],defined(o[n])&&a[l].push({plotX:o.plotX,plotY:o["plot"+n],isNull:!1},{plotX:r,plotY:o["plot"+n],isNull:!1},{plotX:r,plotY:null,isNull:!0});r=o.plotX}return a.forEach(t=>{i=i.concat(super.getGraphPath.call(e,t))}),i}drawDataLabels(){const a=this,s=a.pointArrayMap;let r,i,n,o;a.options.dataLabels.enabled&&(i=a.points.length,s.concat([!1]).forEach((t,e)=>{for(o=i;o--;)n=a.points[o],t?(n.y=n[t],n.pivotLine=t,n.plotY=n["plot"+t],r=n["dataLabel"+t],e&&(n["dataLabel"+s[e-1]]=n.dataLabel),n.dataLabels||(n.dataLabels=[]),n.dataLabels[0]=n.dataLabel=r=r&&r.element?r:null):n["dataLabel"+s[e-1]]=n.dataLabel;super.drawDataLabels.call(a)}))}getValues(t,e){const a=e.period,s=t.xData,r=t.yData,i=r?r.length:0,n=this[e.algorithm+"Placement"],o=[],_=[],l=[];let c,d,p,h,u,P,f,g;if(!(s.length<a)&&isArray(r[0])&&4===r[0].length){for(g=a+1;g<=i+a;g+=a)p=s.slice(g-a-1,g),h=r.slice(g-a-1,g),d=p.length,c=p[d-1],P=this.getPivotAndHLC(h),f=n(P),u=o.push([c].concat(f)),_.push(c),l.push(o[u-1].slice(1));return this.endPoint=p[0]+(c-p[0])/d*a,{values:o,xData:_,yData:l}}}getPivotAndHLC(t){var e=t[t.length-1][3];let a=-1/0,s=1/0;return t.forEach(function(t){a=Math.max(a,t[1]),s=Math.min(s,t[2])}),[(a+s+e)/3,a,s,e]}standardPlacement(t){var e=t[1]-t[2];return[null,null,t[0]+e,2*t[0]-t[2],t[0],2*t[0]-t[1],t[0]-e,null,null]}camarillaPlacement(t){var e=t[1]-t[2];return[t[3]+1.5*e,t[3]+1.25*e,t[3]+1.1666*e,t[3]+1.0833*e,t[0],t[3]-1.0833*e,t[3]-1.1666*e,t[3]-1.25*e,t[3]-1.5*e]}fibonacciPlacement(t){var e=t[1]-t[2];return[null,t[0]+e,t[0]+.618*e,t[0]+.382*e,t[0],t[0]-.382*e,t[0]-.618*e,t[0]-e,null]}}PivotPointsIndicator.defaultOptions=merge(SMAIndicator.defaultOptions,{params:{index:void 0,period:28,algorithm:"standard"},marker:{enabled:!1},enableMouseTracking:!1,dataLabels:{enabled:!0,format:"{point.pivotLine}"},dataGrouping:{approximation:"averages"}}),extend(PivotPointsIndicator.prototype,{nameBase:"Pivot Points",pointArrayMap:["R4","R3","R2","R1","P","S1","S2","S3","S4"],pointValKey:"P",pointClass:PivotPoints_PivotPointsPoint}),external_highcharts_src_js_default_SeriesRegistry_default().registerSeriesType("pivotpoints",PivotPointsIndicator);const PivotPoints_PivotPointsIndicator=null,pivot_points_src=external_highcharts_src_js_default_default();export{pivot_points_src as default};