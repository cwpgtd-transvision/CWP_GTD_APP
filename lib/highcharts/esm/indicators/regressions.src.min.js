import*as __WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__ from"../highcharts.src.js";import*as __WEBPACK_EXTERNAL_MODULE__modules_stock_src_js_b3d80146__ from"../modules/stock.src.js";var __webpack_require__={n:e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(r,{a:r}),r},d:(e,r)=>{for(var s in r)__webpack_require__.o(r,s)&&!__webpack_require__.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:r[s]})},o:(e,r)=>Object.prototype.hasOwnProperty.call(e,r)};const external_highcharts_src_js_default_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default;var external_highcharts_src_js_default_default=__webpack_require__.n(external_highcharts_src_js_default_namespaceObject),x=e=>{var r={};return __webpack_require__.d(r,e),r},y=e=>()=>e;const stock_src_js_namespaceObject=x({}),external_highcharts_src_js_default_SeriesRegistry_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default.SeriesRegistry;var external_highcharts_src_js_default_SeriesRegistry_default=__webpack_require__.n(external_highcharts_src_js_default_SeriesRegistry_namespaceObject);const SMAIndicator=external_highcharts_src_js_default_SeriesRegistry_default().seriesTypes["sma"],{isArray,extend,merge}=external_highcharts_src_js_default_default();class LinearRegressionIndicator extends SMAIndicator{getRegressionLineParameters(e,r){function s(e,r){return isArray(e)?e[r]:e}const n=this.options.params.index,t=e.reduce(function(e,r){return r+e},0),i=r.reduce(function(e,r){return s(r,n)+e},0),a=t/e.length,o=i/r.length;let _,c,l,g=0,d=0;for(l=0;l<e.length;l++)_=e[l]-a,c=s(r[l],n)-o,g+=_*c,d+=Math.pow(_,2);var p=d?g/d:0;return{slope:p,intercept:o-p*a}}getEndPointY(e,r){return e.slope*r+e.intercept}transformXData(e,r){const s=e[0];return e.map(function(e){return(e-s)/r})}findClosestDistance(e){let r,s,n;for(n=1;n<e.length-1;n++)0<(r=e[n]-e[n-1])&&(void 0===s||r<s)&&(s=r);return s}getValues(e,r){const s=e.xData,n=e.yData,t=r.period,i={xData:[],yData:[],values:[]},a=this.options.params.xAxisUnit||this.findClosestDistance(s);let o,_,c,l,g,d,p,u,h;for(_=t-1;_<=s.length-1;_++)c=_-t+1,l=_+1,g=s[_],p=s.slice(c,l),u=n.slice(c,l),h=this.transformXData(p,a),o=this.getRegressionLineParameters(h,u),d=this.getEndPointY(o,h[h.length-1]),i.values.push({regressionLineParameters:o,x:g,y:d}),isArray(i.xData)&&i.xData.push(g),isArray(i.yData)&&i.yData.push(d);return i}}LinearRegressionIndicator.defaultOptions=merge(SMAIndicator.defaultOptions,{params:{xAxisUnit:null},tooltip:{valueDecimals:4}}),extend(LinearRegressionIndicator.prototype,{nameBase:"Linear Regression Indicator"}),external_highcharts_src_js_default_SeriesRegistry_default().registerSeriesType("linearRegression",LinearRegressionIndicator);const LinearRegression_LinearRegressionIndicator=null,LinearRegressionSlopesIndicator_LinearRegressionIndicator=external_highcharts_src_js_default_SeriesRegistry_default().seriesTypes["linearRegression"],{extend:LinearRegressionSlopesIndicator_extend,merge:LinearRegressionSlopesIndicator_merge}=external_highcharts_src_js_default_default();class LinearRegressionSlopesIndicator extends LinearRegressionSlopesIndicator_LinearRegressionIndicator{getEndPointY(e){return e.slope}}LinearRegressionSlopesIndicator.defaultOptions=LinearRegressionSlopesIndicator_merge(LinearRegressionSlopesIndicator_LinearRegressionIndicator.defaultOptions),LinearRegressionSlopesIndicator_extend(LinearRegressionSlopesIndicator.prototype,{nameBase:"Linear Regression Slope Indicator"}),external_highcharts_src_js_default_SeriesRegistry_default().registerSeriesType("linearRegressionSlope",LinearRegressionSlopesIndicator);const LinearRegressionSlopes_LinearRegressionSlopesIndicator=null,LinearRegressionInterceptIndicator_LinearRegressionIndicator=external_highcharts_src_js_default_SeriesRegistry_default().seriesTypes["linearRegression"],{extend:LinearRegressionInterceptIndicator_extend,merge:LinearRegressionInterceptIndicator_merge}=external_highcharts_src_js_default_default();class LinearRegressionInterceptIndicator extends LinearRegressionInterceptIndicator_LinearRegressionIndicator{getEndPointY(e){return e.intercept}}LinearRegressionInterceptIndicator.defaultOptions=LinearRegressionInterceptIndicator_merge(LinearRegressionInterceptIndicator_LinearRegressionIndicator.defaultOptions),LinearRegressionInterceptIndicator_extend(LinearRegressionInterceptIndicator.prototype,{nameBase:"Linear Regression Intercept Indicator"}),external_highcharts_src_js_default_SeriesRegistry_default().registerSeriesType("linearRegressionIntercept",LinearRegressionInterceptIndicator);const LinearRegressionIntercept_LinearRegressionInterceptIndicator=null,LinearRegressionAngleIndicator_LinearRegressionIndicator=external_highcharts_src_js_default_SeriesRegistry_default().seriesTypes["linearRegression"],{extend:LinearRegressionAngleIndicator_extend,merge:LinearRegressionAngleIndicator_merge}=external_highcharts_src_js_default_default();class LinearRegressionAngleIndicator extends LinearRegressionAngleIndicator_LinearRegressionIndicator{slopeToAngle(e){return Math.atan(e)*(180/Math.PI)}getEndPointY(e){return this.slopeToAngle(e.slope)}}LinearRegressionAngleIndicator.defaultOptions=LinearRegressionAngleIndicator_merge(LinearRegressionAngleIndicator_LinearRegressionIndicator.defaultOptions,{tooltip:{pointFormat:'<span style="color:{point.color}">●</span>{series.name}: <b>{point.y}°</b><br/>'}}),LinearRegressionAngleIndicator_extend(LinearRegressionAngleIndicator.prototype,{nameBase:"Linear Regression Angle Indicator"}),external_highcharts_src_js_default_SeriesRegistry_default().registerSeriesType("linearRegressionAngle",LinearRegressionAngleIndicator);const LinearRegressionAngle_LinearRegressionAngleIndicator=null,regressions_src=external_highcharts_src_js_default_default();export{regressions_src as default};