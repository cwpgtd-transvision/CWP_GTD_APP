import*as __WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__ from"../highcharts.src.js";import*as __WEBPACK_EXTERNAL_MODULE__modules_stock_src_js_b3d80146__ from"../modules/stock.src.js";var __webpack_require__={n:e=>{var s=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(s,{a:s}),s},d:(e,s)=>{for(var t in s)__webpack_require__.o(s,t)&&!__webpack_require__.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:s[t]})},o:(e,s)=>Object.prototype.hasOwnProperty.call(e,s)};const external_highcharts_src_js_default_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default;var external_highcharts_src_js_default_default=__webpack_require__.n(external_highcharts_src_js_default_namespaceObject),x=e=>{var s={};return __webpack_require__.d(s,e),s},y=e=>()=>e;const stock_src_js_namespaceObject=x({}),external_highcharts_src_js_default_SeriesRegistry_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default.SeriesRegistry;var external_highcharts_src_js_default_SeriesRegistry_default=__webpack_require__.n(external_highcharts_src_js_default_SeriesRegistry_namespaceObject);const noop=external_highcharts_src_js_default_default()["noop"],{column:ColumnSeries,sma:SMAIndicator}=external_highcharts_src_js_default_SeriesRegistry_default().seriesTypes,{extend,correctFloat,defined,merge}=external_highcharts_src_js_default_default();class MACDIndicator extends SMAIndicator{init(){external_highcharts_src_js_default_SeriesRegistry_default().seriesTypes.sma.prototype.init.apply(this,arguments);var e=this.color;this.options&&(defined(this.colorIndex)&&(this.options.signalLine&&this.options.signalLine.styles&&!this.options.signalLine.styles.lineColor&&(this.options.colorIndex=this.colorIndex+1,this.getCyclic("color",void 0,this.chart.options.colors),this.options.signalLine.styles.lineColor=this.color),this.options.macdLine&&this.options.macdLine.styles&&!this.options.macdLine.styles.lineColor&&(this.options.colorIndex=this.colorIndex+1,this.getCyclic("color",void 0,this.chart.options.colors),this.options.macdLine.styles.lineColor=this.color)),this.macdZones={zones:this.options.macdLine.zones,startIndex:0},this.signalZones={zones:this.macdZones.zones.concat(this.options.signalLine.zones),startIndex:this.macdZones.zones.length}),this.color=e}toYData(e){return[e.y,e.signal,e.MACD]}translate(){const r=this,i=["plotSignal","plotMACD"];external_highcharts_src_js_default_default().seriesTypes.column.prototype.translate.apply(r),r.points.forEach(function(t){[t.signal,t.MACD].forEach(function(e,s){null!==e&&(t[i[s]]=r.yAxis.toPixels(e,!0))})})}destroy(){this.graph=null,this.graphmacd=this.graphmacd&&this.graphmacd.destroy(),this.graphsignal=this.graphsignal&&this.graphsignal.destroy(),external_highcharts_src_js_default_SeriesRegistry_default().seriesTypes.sma.prototype.destroy.apply(this,arguments)}drawGraph(){const t=this,e=t.points,r=t.options,s=t.zones,i={options:{gapSize:r.gapSize}},o=[[],[]];let a,n=e.length;for(;n--;)a=e[n],defined(a.plotMACD)&&o[0].push({plotX:a.plotX,plotY:a.plotMACD,isNull:!defined(a.plotMACD)}),defined(a.plotSignal)&&o[1].push({plotX:a.plotX,plotY:a.plotSignal,isNull:!defined(a.plotMACD)});["macd","signal"].forEach((e,s)=>{t.points=o[s],t.options=merge(r[e+"Line"]?.styles||{},i),t.graph=t["graph"+e],t.zones=(t[e+"Zones"].zones||[]).slice(t[e+"Zones"].startIndex||0),external_highcharts_src_js_default_SeriesRegistry_default().seriesTypes.sma.prototype.drawGraph.call(t),t["graph"+e]=t.graph}),t.points=e,t.options=r,t.zones=s}applyZones(){var e=this.zones;this.zones=this.signalZones.zones,external_highcharts_src_js_default_SeriesRegistry_default().seriesTypes.sma.prototype.applyZones.call(this),this.graphmacd&&this.options.macdLine.zones.length&&this.graphmacd.hide(),this.zones=e}getValues(e,s){const t=s.longPeriod-s.shortPeriod,r=[],i=[],o=[];let a,n,l,_=0,h;if(!(e.xData.length<s.longPeriod+s.signalPeriod)){for(a=external_highcharts_src_js_default_SeriesRegistry_default().seriesTypes.ema.prototype.getValues(e,{period:s.shortPeriod,index:s.index}),n=external_highcharts_src_js_default_SeriesRegistry_default().seriesTypes.ema.prototype.getValues(e,{period:s.longPeriod,index:s.index}),a=a.values,n=n.values,l=0;l<=a.length;l++)defined(n[l])&&defined(n[l][1])&&defined(a[l+t])&&defined(a[l+t][0])&&r.push([a[l+t][0],0,null,a[l+t][1]-n[l][1]]);for(l=0;l<r.length;l++)i.push(r[l][0]),o.push([0,null,r[l][3]]);for(h=external_highcharts_src_js_default_SeriesRegistry_default().seriesTypes.ema.prototype.getValues({xData:i,yData:o},{period:s.signalPeriod,index:2}).values,l=0;l<r.length;l++)r[l][0]>=h[0][0]&&(r[l][2]=h[_][1],o[l]=[0,h[_][1],r[l][3]],null===r[l][3]?(r[l][1]=0,o[l][0]=0):(r[l][1]=correctFloat(r[l][3]-h[_][1]),o[l][0]=correctFloat(r[l][3]-h[_][1])),_++);return{values:r,xData:i,yData:o}}}}MACDIndicator.defaultOptions=merge(SMAIndicator.defaultOptions,{params:{shortPeriod:12,longPeriod:26,signalPeriod:9,period:26},signalLine:{zones:[],styles:{lineWidth:1,lineColor:void 0}},macdLine:{zones:[],styles:{lineWidth:1,lineColor:void 0}},threshold:0,groupPadding:.1,pointPadding:.1,crisp:!1,states:{hover:{halo:{size:0}}},tooltip:{pointFormat:'<span style="color:{point.color}">‚óè</span> <b> {series.name}</b><br/>Value: {point.MACD}<br/>Signal: {point.signal}<br/>Histogram: {point.y}<br/>'},dataGrouping:{approximation:"averages"},minPointLength:0}),extend(MACDIndicator.prototype,{nameComponents:["longPeriod","shortPeriod","signalPeriod"],pointArrayMap:["y","signal","MACD"],parallelArrays:["x","y","signal","MACD"],pointValKey:"y",markerAttribs:noop,getColumnMetrics:external_highcharts_src_js_default_default().seriesTypes.column.prototype.getColumnMetrics,crispCol:external_highcharts_src_js_default_default().seriesTypes.column.prototype.crispCol,drawPoints:external_highcharts_src_js_default_default().seriesTypes.column.prototype.drawPoints}),external_highcharts_src_js_default_SeriesRegistry_default().registerSeriesType("macd",MACDIndicator);const MACD_MACDIndicator=null,macd_src=external_highcharts_src_js_default_default();export{macd_src as default};