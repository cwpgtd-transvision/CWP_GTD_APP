import*as t from"../highcharts.js";import"./stock.js";var i={n:t=>{var a=t&&t.__esModule?()=>t.default:()=>t;return i.d(a,{a:a}),a},d:(t,a)=>{for(var e in a)i.o(a,e)&&!i.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:a[e]})},o:(t,i)=>Object.prototype.hasOwnProperty.call(t,i)};let e=t.default;var a=i.n(e);i.d({},{});let s=t.default.SeriesRegistry;var h=i.n(s);let{candlestick:{prototype:{pointClass:o}},hlc:{prototype:{pointClass:r}}}=h().seriesTypes,n=a()["composed"],l=h().seriesTypes["candlestick"],{addEvent:p,merge:c,pushUnique:d}=a();function u(){this.series.forEach(t=>{t.is("heikinashi")&&(t.heikiashiData.length=0,t.getHeikinashiData())})}function f(){var e=this.points,s=this.heikiashiData,h=this.cropStart||0;for(let a=0;a<e.length;a++){let t=e[a],i=s[a+h];t.open=i[0],t.high=i[1],t.low=i[2],t.close=i[3]}}function k(){this.heikiashiData.length&&(this.heikiashiData.length=0)}class y extends l{constructor(){super(...arguments),this.heikiashiData=[]}static compose(t,i){l.compose(t),d(n,"HeikinAshi")&&(p(i,"postProcessData",u),p(y,"afterTranslate",f),p(y,"updatedData",k))}getHeikinashiData(){let i=this.allGroupedTable||this.dataTable,a=i.rowCount,e=this.heikiashiData;if(!e.length&&a){this.modifyFirstPointValue(i.getRow(0,this.pointArrayMap));for(let t=1;t<a;t++)this.modifyDataPoint(i.getRow(t,this.pointArrayMap),e[t-1])}this.heikiashiData=e}init(){super.init.apply(this,arguments),this.heikiashiData=[]}modifyFirstPointValue(t){var i=(t[0]+t[1]+t[2]+t[3])/4,a=(t[0]+t[3])/2;this.heikiashiData.push([i,t[1],t[2],a])}modifyDataPoint(t,i){var i=(i[0]+i[3])/2,a=(t[0]+t[1]+t[2]+t[3])/4,e=Math.max(t[1],a,i),t=Math.min(t[2],a,i);this.heikiashiData.push([i,e,t,a])}}y.defaultOptions=c(l.defaultOptions,{dataGrouping:{groupAll:!0}}),y.prototype.pointClass=class extends o{},h().registerSeriesType("heikinashi",y);let g=a(),D=(y.compose(g.Series,g.Axis),a());export{D as default};