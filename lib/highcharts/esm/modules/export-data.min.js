import*as t from"../highcharts.js";import"./exporting.js";var e,a={n:t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return a.d(e,{a:e}),e},d:(t,e)=>{for(var o in e)a.o(e,o)&&!a.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};let o=t.default;var n=a.n(o);let{isSafari:i,win:r,win:{document:l}}=n(),s=n()["error"],d=r.URL||r.webkitURL||r;function c(o){o=o.replace(/filename=.*;/,"").match(/data:([^;]*)(;base64)?,([A-Z+\d\/]+)/i);if(o&&3<o.length&&r.atob&&r.ArrayBuffer&&r.Uint8Array&&r.Blob&&d.createObjectURL){let e=r.atob(o[3]),t=new r.ArrayBuffer(e.length),a=new r.Uint8Array(t);for(let t=0;t<a.length;++t)a[t]=e.charCodeAt(t);return d.createObjectURL(new r.Blob([a],{type:o[1]}))}}let h={dataURLtoBlob:c,downloadURL:function(t,e){let a=r.navigator,o=l.createElement("a");if("string"==typeof t||t instanceof String||!a.msSaveOrOpenBlob){if(t=""+t,1e3<a.userAgent.length)throw Error("Input too long");var n=/Edge\/\d+/.test(a.userAgent);if((i&&"string"==typeof t&&0===t.indexOf("data:application/pdf")||n||2e6<t.length)&&!(t=c(t)||""))throw Error("Failed to convert to blob");if(void 0!==o.download)o.href=t,o.download=e,l.body.appendChild(o),o.click(),l.body.removeChild(o);else try{if(!r.open(t,"chart"))throw Error("Failed to open window")}catch{r.location.href=t}}else a.msSaveOrOpenBlob(t,e)},getScript:function(n){return new Promise((t,e)=>{let a=l.getElementsByTagName("head")[0],o=l.createElement("script");o.type="text/javascript",o.src=n,o.onload=()=>{t()},o.onerror=()=>{e(s("Error loading script "+n))},a.appendChild(o)})}},p=t.default.AST;var g=a.n(p);let u=t.default.Chart;var m=a.n(u);let f={exporting:{csv:{annotations:{itemDelimiter:"; ",join:!1},columnHeaderFormatter:null,dateFormat:"%Y-%m-%d %H:%M:%S",decimalPoint:null,itemDelimiter:null,lineDelimiter:"\n"},menuItemDefinitions:{downloadCSV:{textKey:"downloadCSV",onclick:function(){this.exporting?.downloadCSV()}},downloadXLS:{textKey:"downloadXLS",onclick:function(){this.exporting?.downloadXLS()}},viewData:{textKey:"viewData",onclick:function(){this.exporting?.wrapLoading(this.exporting.toggleDataTable)}}},showTable:!1,useMultiLevelHeaders:!0,useRowspanHeaders:!0,showExportInProgress:!0},lang:{downloadCSV:"Download CSV",downloadXLS:"Download XLS",exportData:{annotationHeader:"Annotations",categoryHeader:"Category",categoryDatetimeHeader:"DateTime"},viewData:"View data table",hideData:"Hide data table",exportInProgress:"Exporting..."}},{getOptions:x,setOptions:b}=n(),y=h["downloadURL"],{composed:w,doc:T,win:D}=n(),{addEvent:v,defined:S,extend:L,find:E,fireEvent:C,isNumber:A,pick:R,pushUnique:V}=n(),k=(!function(){function c(){this.wrapLoading(()=>{var t=this.getCSV(!0);y(a(t,"text/csv")||"data:text/csv,\ufeff"+encodeURIComponent(t),this.getFilename()+".csv")})}function h(){this.wrapLoading(()=>{var t='<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head>\x3c!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>Ark1</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--\x3e<style>td{border:none;font-family: Calibri, sans-serif;} .number{mso-number-format:"0.00";} .text{ mso-number-format:"@";}</style><meta name=ProgId content=Excel.Sheet><meta charset=UTF-8></head><body>'+this.getTable(!0)+"</body></html>";y(a(t,"application/vnd.ms-excel")||"data:application/vnd.ms-excel;base64,"+D.btoa(unescape(encodeURIComponent(t))),this.getFilename()+".xls")})}function a(e,t){let a=D.navigator,o=D.URL||D.webkitURL||D;try{if(a.msSaveOrOpenBlob&&D.MSBlobBuilder){let t=new D.MSBlobBuilder;return t.append(e),t.getBlob("image/svg+xml")}return o.createObjectURL(new D.Blob(["\ufeff"+e],{type:t}))}catch(e){}}function p(t){let n="",i=this.getDataRows(),e=this.options?.csv,r=R(e?.decimalPoint,","!==e?.itemDelimiter&&t?1.1.toLocaleString()[1]:"."),l=R(e?.itemDelimiter,","===r?";":","),s=e?.lineDelimiter;return i.forEach((t,e)=>{let a="",o=t.length;for(;o--;)"number"==typeof(a="string"==typeof(a=t[o])?`"${a}"`:a)&&"."!==r&&(a=a.toString().replace(".",r)),t[o]=a;t.length=i.length?i[0].length:0,n+=t.join(l),e<i.length-1&&(n+=s)}),n}function u(n){function i(t,e,a){if(y.columnHeaderFormatter){var o=y.columnHeaderFormatter(t,e,a);if(!1!==o)return o}return!t&&s?s:!t.bindAxes&&d&&s?t.options.title&&t.options.title.text||(t.dateTime?d:s):n?{columnTitle:(1<(a||0)?e:t.name)||"",topLevelColumnTitle:t.name}:t.name+(1<(a||0)?" ("+e+")":"")}function m(a,t,o){let n={},i={};return t.forEach(function(t){var e=(a.keyToAxis&&a.keyToAxis[t]||t)+"Axis",e=A(o)?a.chart[e][o]:a[e];n[t]=e&&e.categories||[],i[t]=e&&e.dateTime}),{categoryMap:n,dateTimeValueAxisMap:i}}let a,o,t=this.chart,x=t.hasParallelCoordinates,b=t.time,y=this.options?.csv||{},r=t.xAxis,w={},e=[],D=[],v=[],l=t.options.lang.exportData,s=l?.categoryHeader,d=l?.categoryDatetimeHeader,T=[],c,h,L,O=0,p,g;for(p in t.series.forEach(function(l){let t=l.options.keys,s=l.xAxis,d=t||(a=s,o=(e=l).pointArrayMap||["y"],e.data.some(t=>void 0!==t.y&&t.name)&&a&&!a.categories&&"name"!==e.exportKey?["x",...o]:o),c=d.length,h=!l.requireSorting&&{},p=r.indexOf(s),g=m(l,d),u,f;var e,a,o;if(!1!==l.options.includeInDataExport&&!l.options.isInternal&&!1!==l.visible){for(E(T,function(t){return t[0]===p})||T.push([p,O]),f=0;f<c;)L=i(l,d[f],d.length),v.push(L.columnTitle||L),n&&D.push(L.topLevelColumnTitle||L),f++;u={chart:l.chart,autoIncrement:l.autoIncrement,options:l.options,pointArrayMap:l.pointArrayMap,index:l.index},l.options.data?.forEach(function(t,e){let a,o,n,i={series:u};x&&(g=m(l,d,e)),l.pointClass.prototype.applyOptions.apply(i,[t]);t=l.data[e]&&l.data[e].name;if(a=(i.x??"")+","+t,f=0,(!s||"name"===l.exportKey||!x&&s&&s.hasNames&&t)&&(a=t),h&&(h[a]&&(a+="|"+e),h[a]=!0),w[a]){var e=a+","+w[a].pointers[l.index],r=a;w[a].pointers[l.index]&&(w[e]||(w[e]=[],w[e].xValues=[],w[e].pointers=[]),a=e),w[r].pointers[l.index]+=1}else{w[a]=[],w[a].xValues=[];let e=[];for(let t=0;t<l.chart.series.length;t++)e[t]=0;w[a].pointers=e,w[a].pointers[l.index]=1}for(w[a].x=i.x,w[a].name=t,w[a].xValues[p]=i.x;f<c;)o=d[f],n=l.pointClass.prototype.getNestedProperty.apply(i,[o]),w[a][O+f]=R(g.categoryMap[o][n],g.dateTimeValueAxisMap[o]?b.dateFormat(y.dateFormat,n):null,n),f++}),O+=f}}),w)Object.hasOwnProperty.call(w,p)&&e.push(w[p]);for(h=n?[D,v]:[v],O=T.length;O--;)a=T[O][0],o=T[O][1],c=r[a],e.sort(function(t,e){return t.xValues[a]-e.xValues[a]}),g=i(c),h[0].splice(o,0,g),n&&h[1]&&h[1].splice(o,0,g),e.forEach(function(t){let e=t.name;c&&!S(e)&&(e=c.dateTime?(t.x instanceof Date&&(t.x=t.x.getTime()),b.dateFormat(y.dateFormat,t.x)):c.categories?R(c.names[t.x],c.categories[t.x],t.x):t.x),t.splice(o,0,e)});return C(t,"exportData",{dataRows:h=h.concat(e)}),h}function O(t){let e=t=>{if(!t.tagName||"#text"===t.tagName)return t.textContent||"";let a=t.attributes,o="<"+t.tagName;return a&&Object.keys(a).forEach(t=>{var e=a[t];o+=` ${t}="${e}"`}),o=(o+=">")+(t.textContent||""),(t.children||[]).forEach(t=>{o+=e(t)}),o+=`</${t.tagName}>`};return e(this.getTableAST(t))}function k(t){function d(t,e,a,o){let n=R(o,""),i="highcharts-text"+(e?" "+e:"");return"number"==typeof n?(n=n.toString(),","===r&&(n=n.replace(".",r)),i="highcharts-number"):o||(i="highcharts-empty"),{tagName:t,attributes:a=L({class:i},a),textContent:n}}let c=0,e=[],h=this,a=h.chart,o=a.options,r=t?1.1.toLocaleString()[1]:".",p=R(h.options.useMultiLevelHeaders,!0),n=h.getDataRows(p),i=p?n.shift():null,g=n.shift(),l=(h.options||{})["tableCaption"];!1!==l&&e.push({tagName:"caption",attributes:{class:"highcharts-table-caption"},textContent:"string"==typeof l?l:o.title?.text||o.lang.chartTitle});for(let t=0,e=n.length;t<e;++t)n[t].length>c&&(c=n[t].length);e.push(function(t,a){let o=[],n=0,i=Math.max(c,g?.length||0)||a&&a.length,r,l=0,s;if(p&&t&&a&&!function(t,e){let a=t.length;if(e.length!==a)return!1;for(;a--;)if(t[a]!==e[a])return!1;return!0}(t,a)){let e=[];for(;n<i;++n)if((r=t[n])===t[n+1])++l;else if(l)e.push(d("th","highcharts-table-topheading",{scope:"col",colspan:l+1},r)),l=0;else{r===a[n]?h.options.useRowspanHeaders?(s=2,delete a[n]):(s=1,a[n]=""):s=1;let t=d("th","highcharts-table-topheading",{scope:"col"},r);1<s&&t.attributes&&(t.attributes.valign="top",t.attributes.rowspan=s),e.push(t)}o.push({tagName:"tr",children:e})}if(a){let t=[];for(n=0,i=a.length;n<i;++n)void 0!==a[n]&&t.push(d("th",null,{scope:"col"},a[n]));o.push({tagName:"tr",children:t})}return{tagName:"thead",children:o}}(i,g||[]));let s=[];n.forEach(function(e){let a=[];for(let t=0;t<c;t++)a.push(d(t?"td":"th",null,t?{}:{scope:"row"},e[t]));s.push({tagName:"tr",children:a})}),e.push({tagName:"tbody",children:s});t={tree:{tagName:"table",id:"highcharts-data-table-"+a.index,children:e}};return C(a,"afterGetTableAST",t),t.tree}function N(){this.toggleDataTable(!1)}function U(a){let o=this.chart,n=(a=R(a,!this.isDataTableVisible))&&!this.dataTableDiv;if(n&&(this.dataTableDiv=T.createElement("div"),this.dataTableDiv.className="highcharts-data-table",o.renderTo.parentNode.insertBefore(this.dataTableDiv,o.renderTo.nextSibling)),this.dataTableDiv){let t=this.dataTableDiv.style,e=t.display;t.display=a?"block":"none",a?(this.dataTableDiv.innerHTML=g().emptyHTML,new(g())([this.getTableAST()]).addToDOM(this.dataTableDiv),C(o,"afterViewData",{element:this.dataTableDiv,wasHidden:n||e!==t.display})):C(o,"afterHideData")}this.isDataTableVisible=a;let t=this.divElements,e=this.options,i=e.buttons?.contextButton.menuItems,r=o.options.lang;e&&e.menuItemDefinitions&&r&&r.viewData&&r.hideData&&i&&t&&((a=t[i.indexOf("viewData")])&&g().setElementHTML(a,this.isDataTableVisible?r.hideData:r.viewData))}function B(){this.toggleDataTable(!0)}function H(t){let e=this.chart,a=!!this.options.showExportInProgress,o=D.requestAnimationFrame||setTimeout;o(()=>{a&&e.showLoading(e.options.lang.exportInProgress),o(()=>{try{t.call(this)}finally{a&&e.hideLoading()}})})}function I(){let r=this.exporting,l=r?.dataTableDiv,s=(t,e)=>t.children[e].textContent;if(l&&r.options.allowTableSorting){let t=l.querySelector("thead tr");t&&t.childNodes.forEach(a=>{let o=l.querySelector("tbody");a.addEventListener("click",function(){let t=[...l.querySelectorAll("tr:not(thead tr)")],e=[...a.parentNode.children];var n,i;r&&(t.sort((n=e.indexOf(a),i=r.ascendingOrderInTable=!r.ascendingOrderInTable,(t,e)=>{let a,o;return a=s(i?t:e,n),o=s(i?e:t,n),""===a||""===o||isNaN(a)||isNaN(o)?a.toString().localeCompare(o):a-o})).forEach(t=>{o?.appendChild(t)}),e.forEach(e=>{["highcharts-sort-ascending","highcharts-sort-descending"].forEach(t=>{e.classList.contains(t)&&e.classList.remove(t)})}),a.classList.add(r.ascendingOrderInTable?"highcharts-sort-ascending":"highcharts-sort-descending"))})})}}function M(){this.options?.exporting?.showTable&&!this.options.chart.forExport&&this.exporting?.viewData()}function F(){this.exporting?.dataTableDiv?.remove()}(e||(e={})).compose=function(s,t,d){if(V(w,"ExportData")){L(m().prototype,{downloadCSV:function(){return this.exporting?.downloadCSV()},downloadXLS:function(){return this.exporting?.downloadXLS()},getCSV:function(t){return this.exporting?.getCSV(t)},getDataRows:function(t){return this.exporting?.getDataRows(t)},getTable:function(t){return this.exporting?.getTable(t)},getTableAST:function(t){return this.exporting?.getTableAST(t)},hideData:function(){return this.exporting?.hideData()},toggleDataTable:function(t){return this.exporting?.toggleDataTable(t)},viewData:function(){return this.exporting?.viewData()}});let l=t.prototype;if(!l.downloadCSV){v(s,"afterViewData",I),v(s,"render",M),v(s,"destroy",F),l.downloadCSV=c,l.downloadXLS=h,l.getCSV=p,l.getDataRows=u,l.getTable=O,l.getTableAST=k,l.hideData=N,l.toggleDataTable=U,l.wrapLoading=H,l.viewData=B,b(f);let t=x().exporting?.buttons?.contextButton?.menuItems,{arearange:e,gantt:a,map:o,mapbubble:n,treemap:i,xrange:r}=(t&&t.push("separator","downloadCSV","downloadXLS","viewData"),d.types);e&&(e.prototype.keyToAxis={low:"y",high:"y"}),a&&(a.prototype.exportKey="name",a.prototype.keyToAxis={start:"x",end:"x"}),o&&(o.prototype.exportKey="name"),n&&(n.prototype.exportKey="name"),i&&(i.prototype.exportKey="name"),r&&(r.prototype.keyToAxis={x2:"x"})}}}}(),e),O=(a.d({},{}),n()),N=(O.dataURLtoBlob=O.dataURLtoBlob||h.dataURLtoBlob,O.downloadURL=O.downloadURL||h.downloadURL,k.compose(O.Chart,O.Exporting,O.Series),n());export{N as default};