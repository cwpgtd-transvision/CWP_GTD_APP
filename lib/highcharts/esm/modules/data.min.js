import*as e from"../highcharts.js";var t={n:e=>{var s=e&&e.__esModule?()=>e.default:()=>e;return t.d(s,{a:s}),s},d:(e,s)=>{for(var a in s)t.o(s,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:s[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};let s=e.default;var a=t.n(s);let i=a()["win"],{discardElement:r,objectEach:n}=a(),o={ajax:function(s){let e={json:"application/json",xml:"application/xml",text:"text/plain",octet:"application/octet-stream"},a=new XMLHttpRequest;function t(e,t){s.error&&s.error(e,t)}if(!s.url)return!1;a.open((s.type||"get").toUpperCase(),s.url,!0),s.headers?.["Content-Type"]||a.setRequestHeader("Content-Type",e[s.dataType||"json"]||e.text),n(s.headers,function(e,t){a.setRequestHeader(t,e)}),s.responseType&&(a.responseType=s.responseType),a.onreadystatechange=function(){let e;if(4===a.readyState){if(200===a.status){if("blob"!==s.responseType&&(e=a.responseText,"json"===s.dataType))try{e=JSON.parse(e)}catch(e){if(e instanceof Error)return t(a,e)}return s.success?.(e,a)}t(a,a.responseText)}},s.data&&"string"!=typeof s.data&&(s.data=JSON.stringify(s.data)),a.send(s.data)},getJSON:function(e,t){o.ajax({url:e,success:t,dataType:"json",headers:{"Content-Type":"text/plain"}})},post:async function(e,s,t){let a=new i.FormData,o=(n(s,function(e,t){a.append(t,e)}),a.append("b64","true"),await i.fetch(e,{method:"POST",body:a,...t}));if(o.ok){let e=await o.text(),t=document.createElement("a");t.href=`data:${s.type};base64,`+e,t.download=s.filename,t.click(),r(t)}}},l=e.default.Axis;var u=t.n(l);let d=e.default.Chart;var h=t.n(d);let p=e.default.Point;var m=t.n(p);let c=e.default.SeriesRegistry;var f=t.n(c);let g=a()["getOptions"],x=a()["doc"],y=o["ajax"],v=f()["seriesTypes"],{addEvent:T,defined:C,extend:N,fireEvent:R,isNumber:A,merge:Y,objectEach:D,pick:w,splat:U}=a();function F(e){return!(!e||!(e.rowsURL||e.csvURL||e.columnsURL))}class O{static data(e,t={},s){return new O(e,t,s)}static rowsToColumns(e){let t,s,a,i,r;if(e)for(t=0,r=[],s=e.length;t<s;t++)for(a=0,i=e[t].length;a<i;a++)r[a]||(r[a]=[]),r[a][t]=e[t][a];return r}constructor(e,t={},s){this.rowsToColumns=O.rowsToColumns,this.dateFormats={"YYYY/mm/dd":{regex:/^(\d{4})[\-\/\.](\d{1,2})[\-\/\.](\d{1,2})$/,parser:function(e){return e?Date.UTC(+e[1],e[2]-1,+e[3]):NaN}},"dd/mm/YYYY":{regex:/^(\d{1,2})[\-\/\.](\d{1,2})[\-\/\.](\d{4})$/,parser:function(e){return e?Date.UTC(+e[3],e[2]-1,+e[1]):NaN},alternative:"mm/dd/YYYY"},"mm/dd/YYYY":{regex:/^(\d{1,2})[\-\/\.](\d{1,2})[\-\/\.](\d{4})$/,parser:function(e){return e?Date.UTC(+e[3],e[1]-1,+e[2]):NaN}},"dd/mm/YY":{regex:/^(\d{1,2})[\-\/\.](\d{1,2})[\-\/\.](\d{2})$/,parser:function(e){if(!e)return NaN;let t=new Date,s=+e[3];return s>t.getFullYear()-2e3?s+=1900:s+=2e3,Date.UTC(s,e[2]-1,+e[1])},alternative:"mm/dd/YY"},"mm/dd/YY":{regex:/^(\d{1,2})[\-\/\.](\d{1,2})[\-\/\.](\d{2})$/,parser:function(e){return e?Date.UTC(+e[3]+2e3,e[1]-1,+e[2]):NaN}}},this.chart=s,this.chartOptions=t,this.options=e,this.rawColumns=[],this.init(e,t,s)}init(e,t,s){let a=e.decimalPoint,i;t&&(this.chartOptions=t),s&&(this.chart=s),"."!==a&&","!==a&&(a=void 0),this.options=e,this.columns=e.columns||this.rowsToColumns(e.rows)||[],this.firstRowAsNames=w(e.firstRowAsNames,this.firstRowAsNames,!0),this.decimalRegex=a&&RegExp("^(-?[0-9]+)"+a+"([0-9]+)$"),void 0!==this.liveDataTimeout&&clearTimeout(this.liveDataTimeout),this.rawColumns=[],this.columns.length&&(this.dataFound(),i=!F(e)),!(i=(i=(i=(i=i||this.fetchLiveData())||!!this.parseCSV().length)||!!this.parseTable().length)||this.parseGoogleSpreadsheet())&&e.afterComplete&&e.afterComplete(this)}getColumnDistribution(){function n(e="line"){return(v[e].prototype.pointArrayMap||[0]).length}function o(e="line"){return v[e].prototype.pointArrayMap}let l=this.chartOptions,e=this.options,t=[],d=l?.chart?.type,u=[],h=[],s=e?.seriesMapping||l?.series?.map(function(){return{x:0}})||[],p=0,a=((l?.series||[]).forEach(e=>{u.push(n(e.type||d))}),s.forEach(e=>{t.push(e.x||0)}),0===t.length&&t.push(0),s.forEach(e=>{let s=new b,t=u[p]||n(d),a=(l?.series??[])[p]??{},i=o(a.type||d),r=i??["y"];!C(e.x)&&!a.isCartesian&&i||s.addColumnReader(e.x,"x"),D(e,function(e,t){"x"!==t&&s.addColumnReader(e,t)});for(let e=0;e<t;e++)s.hasReader(r[e])||s.addColumnReader(void 0,r[e]);h.push(s),p++}),o(d));void 0===a&&(a=["y"]),this.valueCount={global:n(d),xColumns:t,individual:u,seriesBuilders:h,globalPointArrayMap:a}}dataFound(){this.options.switchRowsAndColumns&&(this.columns=this.rowsToColumns(this.columns)),this.getColumnDistribution(),this.parseTypes(),!1!==this.parsed()&&this.complete()}parseCSV(e){let h=this,p=this.columns=[],m=e||this.options,c=m.startColumn||0,f=m.endColumn||Number.MAX_VALUE,g=[],d={",":0,";":0,"\t":0},t=m.csv,s=m.startRow||0,a=m.endRow||Number.MAX_VALUE,x,i,r=0;if(t=t&&m.beforeParse?m.beforeParse.call(this,t):t){if(i=t.replace(/\r\n/g,"\n").replace(/\r/g,"\n").split(m.lineDelimiter||"\n"),(!s||s<0)&&(s=0),(!a||a>=i.length)&&(a=i.length-1),m.itemDelimiter)x=m.itemDelimiter;else{let o,l,e;o=0,l=0,e=!1,i.some(function(t,e){let s=!1,a,i,r,n="";if(13<e)return!0;for(let e=0;e<t.length;e++){if(a=t[e],i=t[e+1],r=t[e-1],"#"===a)return;if('"'===a)if(s){if('"'!==r&&'"'!==i){for(;" "===i&&e<t.length;)i=t[++e];void 0!==d[i]&&d[i]++,s=!1}}else s=!0;else void 0!==d[a]?(isNaN(Date.parse(n=n.trim()))&&!isNaN(n)&&isFinite(n)||d[a]++,n=""):n+=a;","===a&&l++,"."===a&&o++}}),e=d[";"]>d[","]?";":(d[","],d[";"],","),m.decimalPoint||(o>l?m.decimalPoint=".":m.decimalPoint=",",h.decimalRegex=RegExp("^(-?[0-9]+)"+m.decimalPoint+"([0-9]+)$")),x=e}let e=0;for(r=s;r<=a;r++)"#"===i[r][0]?e++:function(t,e){let s=0,a="",i="",r="",n="",o=0,l=0;function d(e){a=t[e],i=t[e-1],r=t[e+1]}function u(e){g.length<l+1&&g.push([e]),g[l][g[l].length-1]!==e&&g[l].push(e)}function h(){if(c>o||o>f)return++o,void(n="");m.columnTypes||(!isNaN(parseFloat(n))&&isFinite(n)?(n=parseFloat(n),u("number")):isNaN(Date.parse(n))?u("string"):(n=n.replace(/\//g,"-"),u("date"))),p.length<l+1&&p.push([]),p[l][e]=n,n="",++l,++o}if(t.trim().length&&"#"!==t.trim()[0]){for(;s<t.length;s++)if(d(s),'"'===a)for(d(++s);s<t.length&&('"'!==a||'"'===i||'"'===r);)('"'!==a||'"'===a&&'"'!==i)&&(n+=a),d(++s);else a===x?h():n+=a;h()}}(i[r],r-s-e);m.columnTypes&&0!==m.columnTypes.length||!g.length||!g[0].length||"date"!==g[0][1]||m.dateFormat||(m.dateFormat=function(e,t){let s="YYYY/mm/dd",a=[],i=[],r,n=[],o,l=0,d=!1,u;for((!t||t>e.length)&&(t=e.length);l<t;l++)if(void 0!==e[l]&&e[l]?.length)for(u=0,r=e[l].trim().replace(/\//g," ").replace(/\-/g," ").replace(/\./g," ").split(" "),n=["","",""];u<r.length;u++)u<n.length&&(r[u]=parseInt(r[u],10),r[u]&&(i[u]=(!i[u]||i[u]<r[u]?r:i)[u],void 0!==a[u]?a[u]!==r[u]&&(a[u]=!1):a[u]=r[u],31<r[u]?r[u]<100?n[u]="YY":n[u]="YYYY":12<r[u]&&r[u]<=31?(n[u]="dd",d=!0):n[u].length||(n[u]="mm")));if(d){for(u=0;u<a.length;u++)!1!==a[u]?12<i[u]&&"YY"!==n[u]&&"YYYY"!==n[u]&&(n[u]="YY"):12<i[u]&&"mm"===n[u]&&(n[u]="dd");return 3===n.length&&"dd"===n[1]&&"dd"===n[2]&&(n[2]="YY"),o=n.join("/"),(m.dateFormats||h.dateFormats)[o]?o:(R(h,"deduceDateFailed"),s)}return s}(p[0])),this.dataFound()}return p}parseTable(){let t=this.options,r=this.columns||[],n=t.startRow||0,s=t.endRow||Number.MAX_VALUE,o=t.startColumn||0,l=t.endColumn||Number.MAX_VALUE;if(t.table){let e=t.table;"string"==typeof e&&(e=x.getElementById(e)),[].forEach.call(e.getElementsByTagName("tr"),(e,i)=>{i>=n&&i<=s&&[].forEach.call(e.children,(e,t)=>{let s=r[t-o],a=1;if(("TD"===e.tagName||"TH"===e.tagName)&&t>=o&&t<=l)for(r[t-o]||(r[t-o]=[]),r[t-o][i-n]=e.innerHTML;i-n>=a&&void 0===s[i-n-a];)s[i-n-a]=null,a++})}),this.dataFound()}return r}fetchLiveData(){let n=this,o=this.chart,l=this.options,d=l.enablePolling,t=Y(l),u=0,h=1e3*(l.dataRefreshRate||2);return!!F(l)&&(h<1e3&&(h=1e3),delete l.csvURL,delete l.rowsURL,delete l.columnsURL,function i(r){function e(e,t,s){return e&&/^(http|\/|\.\/|\.\.\/)/.test(e)?(r&&(clearTimeout(n.liveDataTimeout),o.liveDataURL=e),y({url:e,dataType:s||"json",success:function(e){o?.series&&t(e),a()},error:function(e,t){return++u<3&&a(),l.error?.(t,e)}}),1):(e&&l.error&&l.error("Invalid URL"),0);function a(){d&&o.liveDataURL===e&&(n.liveDataTimeout=setTimeout(i,h))}}e(t.csvURL,function(e){o.update({data:{csv:e}})},"text")||e(t.rowsURL,function(e){o.update({data:{rows:e}})})||e(t.columnsURL,function(e){o.update({data:{columns:e}})})}(!0),F(l))}parseGoogleSpreadsheet(){let a=this,i=this.options,e=i.googleSpreadsheetKey,r=this.chart,n=Math.max(1e3*(i.dataRefreshRate||2),4e3);return e&&(delete i.googleSpreadsheetKey,function t(s){y({url:["https://sheets.googleapis.com/v4/spreadsheets",e,"values",(()=>{if(i.googleSpreadsheetRange)return i.googleSpreadsheetRange;let e="ABCDEFGHIJKLMNOPQRSTUVWXYZ",t=(e.charAt(i.startColumn||0)||"A")+((i.startRow||0)+1),s=e.charAt(w(i.endColumn,-1))||"ZZ";return C(i.endRow)&&(s+=i.endRow+1),t+":"+s})(),"?alt=json&majorDimension=COLUMNS&valueRenderOption=UNFORMATTED_VALUE&dateTimeRenderOption=FORMATTED_STRING&key="+i.googleAPIKey].join("/"),dataType:"json",success:function(e){s(e),i.enablePolling&&(a.liveDataTimeout=setTimeout(function(){t(s)},n))},error:function(e,t){return i.error?.(t,e)}})}(function(e){let t=e.values;if(!t||0===t.length)return!1;let s=t.reduce((e,t)=>Math.max(e,t.length),0);t.forEach(t=>{for(let e=0;e<s;e++)void 0===t[e]&&(t[e]=null)}),r?.series?r.update({data:{columns:t}}):(a.columns=t,a.dataFound())})),!1}trim(e,t){return"string"==typeof e&&(e=e.replace(/^\s+|\s+$/g,""),t&&/[\d\s]+/.test(e)&&(e=e.replace(/\s/g,"")),this.decimalRegex&&(e=e.replace(this.decimalRegex,"$1.$2"))),e}parseTypes(){let e=this.columns||[],t=e.length;for(;t--;)this.parseColumn(e[t],t)}parseColumn(e,t){let s=this.rawColumns,a=this.columns=this.columns||[],i=this.firstRowAsNames,r=-1!==this.valueCount?.xColumns.indexOf(t),n=[],o=this.chartOptions,l=(this.options.columnTypes||[])[t],d=r&&o?.xAxis&&"category"===U(o.xAxis)[0].type||"string"===l,u=C(e.name),h=e.length,p,m,c,f,g,x,y;for(s[t]||(s[t]=[]);h--;)p=n[h]||e[h],c=this.trim(p),m=parseFloat(f=this.trim(p,!0)),void 0===s[t][h]&&(s[t][h]=c),d||0===h&&i&&!u?e[h]=""+c:+f===m?(31536e6<(e[h]=m)&&"float"!==l?e.isDatetime=!0:e.isNumeric=!0,void 0!==e[h+1]&&(y=m>e[h+1])):(c?.length&&(g=this.parseDate(p)),r&&A(g)&&"float"!==l?(n[h]=p,e[h]=g,e.isDatetime=!0,void 0!==e[h+1]&&((x=g>e[h+1])!==y&&void 0!==y&&(this.alternativeFormat?(this.dateFormat=this.alternativeFormat,h=e.length,this.alternativeFormat=this.dateFormats[this.dateFormat].alternative):e.unsorted=!0),y=x)):(e[h]=""===c?null:c,0!==h&&(e.isDatetime||e.isNumeric)&&(e.mixed=!0)));if(r&&e.mixed&&(a[t]=s[t]),r&&y&&this.options.sort)for(t=0;t<a.length;t++){var v;a[t].reverse(),i&&(v=a[t].pop())&&a[t].unshift(v)}}parseDate(e){let t=this.options.parseDate,s,a,i,r=this.options.dateFormat||this.dateFormat,n;if(t)s=t(e);else if("string"==typeof e){if(r)(i=this.dateFormats[r])||(i=this.dateFormats["YYYY/mm/dd"]),(n=e.match(i.regex))&&(s=i.parser(n));else for(a in this.dateFormats)if(i=this.dateFormats[a],n=e.match(i.regex)){this.dateFormat=r=a,this.alternativeFormat=i.alternative,s=i.parser(n);break}n||(e.match(/:.+(GMT|UTC|[Z+\-])/)&&(e=e.replace(/\s*(?:GMT|UTC)?([+\-])(\d\d)(\d\d)$/,"$1$2:$3").replace(/(?:\s+|GMT|UTC)([+\-])/,"$1").replace(/(\d)\s*(?:GMT|UTC|Z)$/,"$1+00:00")),"object"==typeof(n=Date.parse(e))&&null!==n&&n.getTime?s=n.getTime()-6e4*n.getTimezoneOffset():A(n)&&(s=n-6e4*new Date(n).getTimezoneOffset()))}return s}getData(){if(this.columns)return this.rowsToColumns(this.columns)?.slice(1)}parsed(){if(this.options.parsed)return this.options.parsed.call(this,this.columns)}complete(){let t=this.columns=this.columns||[],e=this.options,s=[],a="linear",i,r,n,o,l,d,u,h,p,m,c;if(t.length,e.complete||e.afterComplete){if(this.firstRowAsNames)for(n=0;n<t.length;n++){let e=t[n];C(e.name)||(e.name=w(e.shift(),"").toString())}for(d=0,i=[],p=function(e,t){let s,a,i,r=[],n=[];for(a=0;a<e;a+=1)r.push(!0);for(s=0;s<t.length;s+=1)for(a=0,i=t[s].getReferencedColumnIndexes();a<i.length;a+=1)r[i[a]]=!1;for(a=0;a<r.length;a+=1)r[a]&&n.push(a);return n}(t?.length||0,this.valueCount.seriesBuilders);d<this.valueCount.seriesBuilders.length;d++)(h=this.valueCount.seriesBuilders[d]).populateColumns(p)&&s.push(h);for(;0<p.length;){for((h=new b).addColumnReader(0,"x"),-1!==(c=p.indexOf(0))&&p.splice(c,1),n=0;n<this.valueCount.global;n++)h.addColumnReader(void 0,this.valueCount.globalPointArrayMap[n]);h.populateColumns(p)&&s.push(h)}if(0<s.length&&0<s[0].readers.length&&void 0!==(m=t?.[s[0].readers[0].columnIndex??-1])&&(m.isDatetime?a="datetime":m.isNumeric||(a="category")),"category"===a)for(d=0;d<s.length;d++)for(l=0,h=s[d];l<h.readers.length;l++)"x"===h.readers[l].configName&&(h.readers[l].configName="name");for(d=0;d<s.length;d++){for(o=0,h=s[d],r=[];o<t[0].length;o++)r[o]=h.read(t,o);i[d]={data:r,pointStart:r[0]&&(h.pointIsArray?r[0]?.[0]:r[0]?.x)||void 0},h.name&&(i[d].name=h.name),"category"===a&&(i[d].turboThreshold=0,i[d].pointStart=0)}u={series:i},"linear"!==a||this.xAxisOptions&&this.xAxisOptions.type!==a?(this.xAxisOptions={type:a},"category"===a&&(this.xAxisOptions.uniqueNames=!1)):a=this.xAxisOptions=void 0,this.chart||Y(!0,u,{xAxis:this.xAxisOptions||{}}),e.complete?.(u),e.afterComplete?.(this,u)}}xAxisUpdateHandler(e){var t=this.xAxisOptions;t&&(!e.options.type&&t.type&&(e.type=t.type),e.options.uniqueNames||!1!==t.uniqueNames||(e.uniqueNames=t.uniqueNames))}update(e,i){let r=this.chart,t=r.options;e&&(e.afterComplete=function(s,a){if(a){let e=r.xAxis[0],t=s.xAxisOptions;t&&e&&(e.type!==t.type&&!e.options.type||e.uniqueNames&&!1===t.uniqueNames&&void 0===e.options.uniqueNames)?e.update({},!1):(a?.series||[]).forEach(function(e){delete e.pointStart}),r.update(a,i,!0)}},Y(!0,t.data,e),t.data?.googleSpreadsheetKey&&!e.columns&&delete t.data.columns,this.init(t.data||{},t))}}T(u(),"afterSetOptions",function(){!this.isXAxis||this.chart.xAxis.length&&this.chart.xAxis[0]!==this||this.chart.data?.xAxisUpdateHandler(this)}),T(h(),"init",function(e){let i=this,r=e.args[1],t=g().data,n=e.args[0]||{};(t||n&&n.data)&&!i.hasDataDef&&(i.hasDataDef=!0,i.data=new O(N(Y(t,n.data),{afterComplete:function(e,t){let s,a;if(Object.hasOwnProperty.call(n,"series"))if("object"==typeof n.series)for(s=Math.max(n.series.length,t?.series?.length??0);s--;)a=n.series[s]||{},n.series[s]=Y(a,t?.series?.[s]??{});else delete n.series;n=Y(t,n),i.data=e,i.init(n,r)}}),n,i),e.preventDefault())});class b{constructor(){this.readers=[],this.pointIsArray=!0}populateColumns(t){let s=!0;return this.readers.forEach(e=>{void 0===e.columnIndex&&(e.columnIndex=t.shift())}),this.readers.forEach(e=>{void 0===e.columnIndex&&(s=!1)}),s}read(s,a){let i=this.pointIsArray,r=i?[]:{};if(this.readers.forEach(e=>{var t=s[e.columnIndex][a];i?r.push(t):0<e.configName.indexOf(".")?m().prototype.setNestedProperty(r,t,e.configName):r[e.configName]=t}),void 0===this.name&&2<=this.readers.length){let t=[];this.readers.forEach(function(e){"x"!==e.configName&&"name"!==e.configName&&"y"!==e.configName||void 0===e.columnIndex||t.push(e.columnIndex)}),2<=t.length&&(t.shift(),t.sort(function(e,t){return e-t})),this.name=s[w(t.shift(),0)].name}return r}addColumnReader(e,t){this.readers.push({columnIndex:e,configName:t}),"x"!==t&&"y"!==t&&void 0!==t&&(this.pointIsArray=!1)}getReferencedColumnIndexes(){let e,t,s=[];for(e=0;e<this.readers.length;e+=1)void 0!==(t=this.readers[e]).columnIndex&&s.push(t.columnIndex);return s}hasReader(e){let t;for(t=0;t<this.readers.length;t+=1)if(this.readers[t].configName===e)return!0}}let E=a(),S=(E.Data=E.Data||O,E.HttpUtilities=E.HttpUtilities||o,E.ajax=E.HttpUtilities.ajax,E.data=E.Data.data,E.getJSON=E.HttpUtilities.getJSON,E.post=E.HttpUtilities.post,a());export{S as default};