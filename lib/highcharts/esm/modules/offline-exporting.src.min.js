import*as __WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__ from"../highcharts.src.js";import*as __WEBPACK_EXTERNAL_MODULE__exporting_src_js_3afc400f__ from"./exporting.src.js";var __webpack_require__={n:t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return __webpack_require__.d(e,{a:e}),e},d:(t,e)=>{for(var r in e)__webpack_require__.o(e,r)&&!__webpack_require__.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};const external_highcharts_src_js_default_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default;var external_highcharts_src_js_default_default=__webpack_require__.n(external_highcharts_src_js_default_namespaceObject);const{isSafari,win,win:{document:doc}}=external_highcharts_src_js_default_default(),error=external_highcharts_src_js_default_default()["error"],domurl=win.URL||win.webkitURL||win;function dataURLtoBlob(t){t=t.replace(/filename=.*;/,"").match(/data:([^;]*)(;base64)?,([A-Z+\d\/]+)/i);if(t&&3<t.length&&win.atob&&win.ArrayBuffer&&win.Uint8Array&&win.Blob&&domurl.createObjectURL){const e=win.atob(t[3]),r=new win.ArrayBuffer(e.length),n=new win.Uint8Array(r);for(let t=0;t<n.length;++t)n[t]=e.charCodeAt(t);return domurl.createObjectURL(new win.Blob([n],{type:t[1]}))}}function downloadURL(t,e){const r=win.navigator,n=doc.createElement("a");if("string"==typeof t||t instanceof String||!r.msSaveOrOpenBlob){if(t=""+t,1e3<r.userAgent.length)throw new Error("Input too long");var a=/Edge\/\d+/.test(r.userAgent),o=isSafari&&"string"==typeof t&&0===t.indexOf("data:application/pdf");if((o||a||2e6<t.length)&&!(t=dataURLtoBlob(t)||""))throw new Error("Failed to convert to blob");if(void 0!==n.download)n.href=t,n.download=e,doc.body.appendChild(n),n.click(),doc.body.removeChild(n);else try{if(!win.open(t,"chart"))throw new Error("Failed to open window")}catch{win.location.href=t}}else r.msSaveOrOpenBlob(t,e)}function getScript(a){return new Promise((t,e)=>{const r=doc.getElementsByTagName("head")[0],n=doc.createElement("script");n.type="text/javascript",n.src=a,n.onload=()=>{t()},n.onerror=()=>{e(error("Error loading script "+a))},r.appendChild(n)})}const DownloadURL={dataURLtoBlob:dataURLtoBlob,downloadURL:downloadURL,getScript:getScript},Extensions_DownloadURL=DownloadURL,external_highcharts_src_js_default_AST_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default.AST;var external_highcharts_src_js_default_AST_default=__webpack_require__.n(external_highcharts_src_js_default_AST_namespaceObject);const external_highcharts_src_js_default_Chart_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default.Chart;var OfflineExporting,external_highcharts_src_js_default_Chart_default=__webpack_require__.n(external_highcharts_src_js_default_Chart_namespaceObject);const exporting={},OfflineExportingDefaults={exporting:exporting},OfflineExporting_OfflineExportingDefaults=OfflineExportingDefaults,{getOptions,setOptions}=external_highcharts_src_js_default_default(),{downloadURL:OfflineExporting_downloadURL,getScript:OfflineExporting_getScript}=Extensions_DownloadURL,{composed,doc:OfflineExporting_doc,win:OfflineExporting_win}=external_highcharts_src_js_default_default(),{addEvent,extend,pushUnique}=external_highcharts_src_js_default_default(),OfflineExporting_OfflineExporting=(!function(t){t.compose=function(t){if(addEvent(t,"downloadSVG",async function(t){const{svg:e,exportingOptions:r,exporting:n,preventDefault:a}=t;if("application/pdf"===r?.type){a?.();try{var{type:o,filename:i,scale:l,libURL:_}=external_highcharts_src_js_default_default().Exporting.prepareImageOptions(r);if("application/pdf"===o){OfflineExporting_win.jspdf?.jsPDF||(await OfflineExporting_getScript(_+"jspdf.js"),await OfflineExporting_getScript(_+"svg2pdf.js"));var s=e,c=l,f=i,d=r?.pdfFont;if(s=function(t,e){const o=OfflineExporting_doc.createElement("div"),r=(external_highcharts_src_js_default_AST_default().setElementHTML(o,t),o.getElementsByTagName("text"));let n,i;return[].forEach.call(r,function(a){for(["fontFamily","fontSize"].forEach(t=>{{var r=a,n=t;let e=r;for(;e&&e!==o;){if(e.style[n]){let t=e.style[n];"fontSize"===n&&/em$/.test(t)&&(t=Math.round(16*parseFloat(t))+"px"),r.style[n]=t;break}e=e.parentNode}return}}),a.style.fontFamily=e?.normal?"HighchartsFont":String(a.style.fontFamily&&a.style.fontFamily.split(" ").splice(-1)),n=a.getElementsByTagName("title"),[].forEach.call(n,function(t){a.removeChild(t)}),i=a.getElementsByClassName("highcharts-text-outline");0<i.length;){const t=i[0];t.parentNode&&t.parentNode.removeChild(t)}}),o.querySelector("svg")}(s,d)){{{var h=s;var p=d;var g=(t,e)=>{OfflineExporting_win.jspdf.jsPDF.API.events.push(["initialized",function(){this.addFileToVFS(t,e),this.addFont(t,"HighchartsFont",t),this.getFontList()?.HighchartsFont||this.setFont("HighchartsFont")}])};p&&!/[^\u0000-\u007F\u200B]+/.test(h.textContent||"")&&(p=void 0);let t;for(const x of["normal","italic","bold","bolditalic"]){var u=p?.[x];if(u)try{const E=await OfflineExporting_win.fetch(u);if(!E.ok)throw new Error("Failed to fetch font: "+u);const m=await E.blob(),O=new FileReader;var w=await new Promise((t,e)=>{O.onloadend=()=>{"string"==typeof O.result?t(O.result.split(",")[1]):e(new Error("Failed to read font as base64"))},O.onerror=e,O.readAsDataURL(m)});g(x,w),"normal"===x&&(t=w)}catch(t){}else t&&g(x,t)}}await 0}d=await async function(t,e,r){const n=(Number(t.getAttribute("width"))+2*e)*r,a=(Number(t.getAttribute("height"))+2*e)*r,o=new OfflineExporting_win.jspdf.jsPDF(n<a?"p":"l","pt",[n,a]),i=([].forEach.call(t.querySelectorAll('*[visibility="hidden"]'),function(t){t.parentNode.removeChild(t)}),t.querySelectorAll("linearGradient"));for(let e=0;e<i.length;e++){const l=i[e],_=l.querySelectorAll("stop");let t=0;for(;t<_.length&&"0"===_[t].getAttribute("offset")&&"0"===_[t+1].getAttribute("offset");)_[t].remove(),t++}return[].forEach.call(t.querySelectorAll("tspan"),t=>{"â€‹"===t.textContent&&(t.textContent=" ",t.setAttribute("dx",-5))}),await o.svg(t,{x:0,y:0,width:n,height:a,removeInvalid:!0}),o.output("datauristring")}(s,0,c),OfflineExporting_downloadURL(d,f)}await 0}}catch(t){await n?.fallbackToServer(r,t)}}}),pushUnique(composed,"OfflineExporting")){extend(external_highcharts_src_js_default_Chart_default().prototype,{exportChartLocal:async function(t,e){await this.exporting?.exportChart(t,e)}}),setOptions(OfflineExporting_OfflineExportingDefaults);const e=getOptions().exporting?.buttons?.contextButton?.menuItems;e&&e.push("downloadPDF")}},t.downloadSVGLocal=async function(t,e){await external_highcharts_src_js_default_default().Exporting.prototype.downloadSVG.call(void 0,t,e)}}(OfflineExporting=OfflineExporting||{}),OfflineExporting);var x=t=>{var e={};return __webpack_require__.d(e,t),e},y=t=>()=>t;const external_exporting_src_js_namespaceObject=x({}),G=external_highcharts_src_js_default_default(),offline_exporting_src=(G.dataURLtoBlob=G.dataURLtoBlob||Extensions_DownloadURL.dataURLtoBlob,G.downloadSVGLocal=OfflineExporting_OfflineExporting.downloadSVGLocal,G.downloadURL=G.downloadURL||Extensions_DownloadURL.downloadURL,OfflineExporting_OfflineExporting.compose(G.Exporting),external_highcharts_src_js_default_default());export{offline_exporting_src as default};