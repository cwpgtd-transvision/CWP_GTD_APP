import*as __WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__ from"../highcharts.src.js";import*as __WEBPACK_EXTERNAL_MODULE__sankey_src_js_3bb2850a__ from"./sankey.src.js";var __webpack_require__={n:e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},d:(e,t)=>{for(var i in t)__webpack_require__.o(t,i)&&!__webpack_require__.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const external_highcharts_src_js_default_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default;var external_highcharts_src_js_default_default=__webpack_require__.n(external_highcharts_src_js_default_namespaceObject),x=e=>{var t={};return __webpack_require__.d(t,e),t},y=e=>()=>e;const external_sankey_src_js_namespaceObject=x({}),external_highcharts_src_js_default_SeriesRegistry_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default.SeriesRegistry;var external_highcharts_src_js_default_SeriesRegistry_default=__webpack_require__.n(external_highcharts_src_js_default_SeriesRegistry_namespaceObject);const{prototype:{pointClass:SankeyPointClass}}=external_highcharts_src_js_default_SeriesRegistry_default().seriesTypes["sankey"],{defined,find,pick}=external_highcharts_src_js_default_default();function getOffset(e){let t=e.linksFrom.length;return e.linksFrom.forEach(e=>{e.id===e.toNode.linksTo[0].id?t+=getOffset(e.toNode):t--}),t}class OrganizationPoint extends SankeyPointClass{constructor(e,t,i){super(e,t,i),this.isNode||(this.dataLabelOnNull=!0,this.formatPrefix="link")}getSum(){return 1}setNodeColumn(){super.setNodeColumn();const a=this,s=a.getFromNode().fromNode;if(!defined(a.options.column)&&0!==a.linksTo.length&&s&&"hanging"===s.options.layout){let i=-1,t;a.options.layout=pick(a.options.layout,"hanging"),a.hangsFrom=s,find(s.linksFrom,(e,t)=>{e=e.toNode===a;return e&&(i=t),e});for(let e=0;e<s.linksFrom.length;++e)(t=s.linksFrom[e]).toNode.id===a.id?e=s.linksFrom.length:i+=getOffset(t.toNode);a.column=(a.column||0)+i}}}const Organization_OrganizationPoint=OrganizationPoint,OrganizationSeriesDefaults={borderColor:"#666666",borderRadius:3,link:{color:"#666666",lineWidth:1,radius:10,type:"default"},borderWidth:1,dataLabels:{nodeFormatter:function(){const e={width:"100%",height:"100%",display:"flex","flex-direction":"row","align-items":"center","justify-content":"center"},t={"max-height":"100%","border-radius":"50%"},i={width:"100%",padding:0,"text-align":"center","white-space":"normal"};function a(i){return Object.keys(i).reduce(function(e,t){return e+t+":"+i[t]+";"},'style="')+'"'}var{description:s,image:n,title:r}=this.point;n&&(t["max-width"]="30%",i.width="70%"),this.series.chart.renderer.forExport&&(e.display="block",i.position="absolute",i.left=n?"30%":0,i.top=0);let o="<div "+a(e)+">";return n&&(o+='<img src="'+n+'" '+a(t)+">"),o+="<div "+a(i)+">",this.point.name&&(o+="<h4 "+a({margin:0})+">"+this.point.name+"</h4>"),r&&(o+="<p "+a({margin:0})+">"+(r||"")+"</p>"),s&&(o+="<p "+a({opacity:.75,margin:"5px"})+">"+s+"</p>"),o+="</div></div>"},style:{fontWeight:"normal",fontSize:"0.9em",textAlign:"left"},useHTML:!0,linkTextPath:{attributes:{startOffset:"95%",textAnchor:"end"}}},hangingIndent:20,hangingIndentTranslation:"inherit",hangingSide:"left",minNodeLength:10,nodeWidth:50,tooltip:{nodeFormat:"{point.name}<br>{point.title}<br>{point.description}"}},Organization_OrganizationSeriesDefaults=OrganizationSeriesDefaults,getLinkPath={default:getDefaultPath,straight:getStraightPath,curved:getCurvedPath};function getDefaultPath(e){var{x1:e,y1:t,x2:i,y2:a,width:s=0,inverted:n=!1,radius:r,parentVisible:o}=e,h=[["M",e,t],["L",e,t],["C",e,t,e,a,e,a],["L",e,a],["C",e,t,e,a,e,a],["L",e,a]];return o?applyRadius([["M",e,t],["L",e+s*(n?-.5:.5),t],["L",e+s*(n?-.5:.5),a],["L",i,a]],r):h}function getStraightPath(e){var{x1:e,y1:t,x2:i,y2:a,width:s=0,inverted:n=!1,parentVisible:r}=e;return r?[["M",e,t],["L",e+s*(n?-1:1),a],["L",i,a]]:[["M",e,t],["L",e,a],["L",e,a]]}function getCurvedPath(e){var{x1:e,y1:t,x2:i,y2:a,offset:s=0,width:n=0,inverted:r=!1,parentVisible:o}=e;return o?[["M",e,t],["C",e+s,t,e-s+n*(r?-1:1),a,e+n*(r?-1:1),a],["L",i,a]]:[["M",e,t],["C",e,t,e,a,e,a],["L",i,a]]}function applyRadius(t,i){const a=[];for(let e=0;e<t.length;e++){var s,n,r,o,h,l,d=t[e][1],_=t[e][2];"number"==typeof d&&"number"==typeof _&&(0===e?a.push(["M",d,_]):e!==t.length-1&&i?(n=t[e-1],o=t[e+1],n&&o&&(s=n[1],n=n[2],r=o[1],o=o[2],"number"==typeof s&&"number"==typeof r&&"number"==typeof n&&"number"==typeof o&&s!==r&&n!==o&&(h=s<r?1:-1,l=n<o?1:-1,a.push(["L",d-h*Math.min(Math.abs(d-s),i),_-l*Math.min(Math.abs(_-n),i)],["C",d,_,d,_,d+h*Math.min(Math.abs(d-r),i),_+l*Math.min(Math.abs(_-o),i)])))):a.push(["L",d,_]))}return a}const PathUtilities={applyRadius:applyRadius,getLinkPath:getLinkPath},Series_PathUtilities=PathUtilities,external_highcharts_src_js_default_SVGElement_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default.SVGElement;var external_highcharts_src_js_default_SVGElement_default=__webpack_require__.n(external_highcharts_src_js_default_SVGElement_namespaceObject);const deg2rad=external_highcharts_src_js_default_default()["deg2rad"],{addEvent,merge,uniqueKey,defined:TextPath_defined,extend}=external_highcharts_src_js_default_default();function setTextPath(s,e){e=merge(!0,{enabled:!0,attributes:{dy:-5,startOffset:"50%",textAnchor:"middle"}},e);const n=this.renderer.url,r=this.text||this,t=r.textPath,{attributes:o,enabled:h}=e;return s=s||t&&t.path,t&&t.undo(),s&&h?(e=addEvent(r,"afterModifyTree",t=>{if(s&&h){let e=s.attr("id");e||s.attr("id",e=uniqueKey());const a={x:0,y:0};TextPath_defined(o.dx)&&(a.dx=o.dx,delete o.dx),TextPath_defined(o.dy)&&(a.dy=o.dy,delete o.dy),r.attr(a),this.attr({transform:""}),this.box&&(this.box=this.box.destroy());var i=t.nodes.slice(0);t.nodes.length=0,t.nodes[0]={tagName:"textPath",attributes:extend(o,{"text-anchor":o.textAnchor,href:n+"#"+e}),children:i}}}),r.textPath={path:s,undo:e}):(r.attr({dx:0,dy:0}),delete r.textPath),this.added&&(r.textCache="",this.renderer.buildText(r)),this}function setPolygon(e){const t=e.bBox,s=this.element?.querySelector("textPath");if(s){const g=[],{b:p,h:i}=this.renderer.fontMetrics(this.element),c=i-p,u=new RegExp('(<tspan>|<tspan(?!\\sclass="highcharts-br")[^>]*>|<\\/tspan>)',"g"),f=s.innerHTML.replace(u,"").split(/<tspan class="highcharts-br"[^>]*>/),y=f.length;var a=(e,t)=>{var{x:t,y:i}=t,e=(s.getRotationOfChar(e)-90)*deg2rad,a=Math.cos(e),e=Math.sin(e);return[[t-c*a,i-c*e],[t+p*a,i+p*e]]};for(let t=0,i=0;i<y;i++){var n=f[i].length;for(let e=0;e<n;e+=5)try{var r=t+e+i,[o,h]=a(r,s.getStartPositionOfChar(r));0===e?(g.push(h),g.push(o)):(0===i&&g.unshift(h),i===y-1&&g.push(o))}catch(e){break}t+=n-1;try{var l=t+i,[d,_]=a(l,s.getEndPositionOfChar(l));g.unshift(_),g.unshift(d)}catch(e){break}}g.length&&g.push(g[0].slice()),t.polygon=g}return t}function drawTextPath(e){const t=e.labelOptions,i=e.point,a=t[i.formatPrefix+"TextPath"]||t.textPath;a&&!t.useHTML&&(this.setTextPath(i.getDataLabelPath?.(this)||i.graphic,a),i.dataLabelPath&&!a.enabled&&(i.dataLabelPath=i.dataLabelPath.destroy()))}function compose(e){addEvent(e,"afterGetBBox",setPolygon),addEvent(e,"beforeAddingDataLabel",drawTextPath);const t=e.prototype;t.setTextPath||(t.setTextPath=setTextPath)}const TextPath={compose:compose},Extensions_TextPath=TextPath,SankeySeries=external_highcharts_src_js_default_SeriesRegistry_default().seriesTypes["sankey"],{css,crisp,extend:OrganizationSeries_extend,isNumber,merge:OrganizationSeries_merge,pick:OrganizationSeries_pick}=external_highcharts_src_js_default_default();Extensions_TextPath.compose(external_highcharts_src_js_default_SVGElement_default());class OrganizationSeries extends SankeySeries{alignDataLabel(e,i,t){const a=e.shapeArgs,s=i.text;if(t.useHTML&&a){var n=this.options.borderWidth+2*this.options.dataLabels.padding;let e=a.width||0,t=a.height||0;this.chart.inverted&&(e=t,t=a.width||0),t-=n,e-=n,s.foreignObject?.attr({x:0,y:0,width:e,height:t}),css(s.element.parentNode,{width:e+"px",height:t+"px"}),css(s.element,{left:0,top:0,width:"100%",height:"100%",overflow:"hidden"}),i.getBBox=()=>({width:e,height:t,x:0,y:0}),i.width=e,i.height=t}super.alignDataLabel.apply(this,arguments)}createNode(e){const t=super.createNode.call(this,e);return t.getSum=()=>1,t}pointAttribs(e,t){const i=this,a=SankeySeries.prototype.pointAttribs.call(i,e,t),s=(e.isNode?e:e.fromNode).level,n=i.mapOptionsToLevel[s||0]||{},r=e.options,o=n.states&&n.states[t]||{},h=OrganizationSeries_pick(o.borderRadius,r.borderRadius,n.borderRadius,i.options.borderRadius),l=OrganizationSeries_pick(o.linkColor,r.linkColor,n.linkColor,i.options.linkColor,o.link&&o.link.color,r.link&&r.link.color,n.link&&n.link.color,i.options.link&&i.options.link.color),d=OrganizationSeries_pick(o.linkLineWidth,r.linkLineWidth,n.linkLineWidth,i.options.linkLineWidth,o.link&&o.link.lineWidth,r.link&&r.link.lineWidth,n.link&&n.link.lineWidth,i.options.link&&i.options.link.lineWidth),_=OrganizationSeries_pick(o.linkOpacity,r.linkOpacity,n.linkOpacity,i.options.linkOpacity,o.link&&o.link.linkOpacity,r.link&&r.link.linkOpacity,n.link&&n.link.linkOpacity,i.options.link&&i.options.link.linkOpacity);return e.isNode?isNumber(h)&&(a.r=h):(a.stroke=l,a["stroke-width"]=d,a.opacity=_,delete a.fill),a}translateLink(n){var r=this.chart,o=this.options,h=n.fromNode,l=n.toNode,d=OrganizationSeries_pick(o.linkLineWidth,o.link.lineWidth,0),_=OrganizationSeries_pick(o.link.offset,.5),g=OrganizationSeries_pick(n.options.link&&n.options.link.type,o.link.type);if(h.shapeArgs&&l.shapeArgs){var p=o.hangingIndent,c="right"===o.hangingSide,u=l.options.offset,u=/%$/.test(u)&&parseInt(u,10),f=r.inverted;let e=crisp((h.shapeArgs.x||0)+(h.shapeArgs.width||0),d),t=crisp((h.shapeArgs.y||0)+(h.shapeArgs.height||0)/2,d),i=crisp(l.shapeArgs.x||0,d),a=crisp((l.shapeArgs.y||0)+(l.shapeArgs.height||0)/2,d),s;f&&(e-=h.shapeArgs.width||0,i+=l.shapeArgs.width||0),s=this.colDistance?crisp(i+(f?1:-1)*(this.colDistance-this.nodeWidth)/2,d):crisp((i+e)/2,d),u&&(50<=u||u<=-50)&&(s=i=crisp(i+(f?-.5:.5)*(l.shapeArgs.width||0),d),a=l.shapeArgs.y||0,0<u&&(a+=l.shapeArgs.height||0)),l.hangsFrom===h&&(r.inverted?(t=c?crisp((h.shapeArgs.y||0)+p/2,d):crisp((h.shapeArgs.y||0)+(h.shapeArgs.height||0)-p/2,d),a=c?(l.shapeArgs.y||0)+p/2:(l.shapeArgs.y||0)+(l.shapeArgs.height||0)):t=crisp((h.shapeArgs.y||0)+p/2,d),s=i=crisp((l.shapeArgs.x||0)+(l.shapeArgs.width||0)/2,d)),n.plotX=s,n.plotY=(t+a)/2,n.shapeType="path","straight"===g?n.shapeArgs={d:[["M",e,t],["L",i,a]]}:"curved"===g?(u=Math.abs(i-e)*_*(f?-1:1),n.shapeArgs={d:[["M",e,t],["C",e+u,t,i-u,a,i,a]]}):n.shapeArgs={d:Series_PathUtilities.applyRadius([["M",e,t],["L",s,t],["L",s,a],["L",i,a]],OrganizationSeries_pick(o.linkRadius,o.link.radius))},n.dlBox={x:(e+i)/2,y:(t+a)/2,height:d,width:0}}}translateNode(e,t){super.translateNode(e,t);const i=this.chart,a=this.options,s=e.getSum(),n=this.translationFactor,r=Math.max(Math.round(s*n),a.minLinkWidth||0),o="right"===a.hangingSide,h=a.hangingIndent||0,l=a.hangingIndentTranslation,d=a.minNodeLength||10,_=Math.round(this.nodeWidth),g=e.shapeArgs,p=i.inverted?-1:1;let c=e.hangsFrom;if(c)if("cumulative"===l)for(g.height-=h,i.inverted&&!o&&(g.y-=p*h);c;)g.y+=(o?1:p)*h,c=c.hangsFrom;else if("shrink"===l)for(;c&&g.height>h+d;)g.height-=h,i.inverted&&!o||(g.y+=h),c=c.hangsFrom;else g.height-=h,i.inverted&&!o||(g.y+=h);e.nodeHeight=i.inverted?g.width:g.height,e.shapeArgs&&!e.hangsFrom&&(e.shapeArgs=OrganizationSeries_merge(e.shapeArgs,{x:(e.shapeArgs.x||0)+_/2-(e.shapeArgs.width||0)/2,y:(e.shapeArgs.y||0)+r/2-(e.shapeArgs.height||0)/2}))}drawDataLabels(){var e=this.options.dataLabels;if(e.linkTextPath&&e.linkTextPath.enabled)for(const t of this.points)t.options.dataLabels=OrganizationSeries_merge(t.options.dataLabels,{useHTML:!1});super.drawDataLabels()}}OrganizationSeries.defaultOptions=OrganizationSeries_merge(SankeySeries.defaultOptions,Organization_OrganizationSeriesDefaults),OrganizationSeries_extend(OrganizationSeries.prototype,{pointClass:Organization_OrganizationPoint}),external_highcharts_src_js_default_SeriesRegistry_default().registerSeriesType("organization",OrganizationSeries);const Organization_OrganizationSeries=null,organization_src=external_highcharts_src_js_default_default();export{organization_src as default};