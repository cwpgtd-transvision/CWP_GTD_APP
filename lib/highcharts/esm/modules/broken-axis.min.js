import*as t from"../highcharts.js";var e,i={n:t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},d:(t,e)=>{for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},o:(t,i)=>Object.prototype.hasOwnProperty.call(t,i)};let s=t.default;var r=i.n(s);let n=t.default.StackItem;var o=i.n(n);let{addEvent:a,find:l,fireEvent:f,isArray:h,isNumber:k,pick:c}=r(),u=(!function(t){function s(){void 0!==this.brokenAxis&&this.brokenAxis.setBreaks(this.options.breaks,!1)}function r(){this.brokenAxis?.hasBreaks&&(this.options.ordinal=!1)}function n(){let s=this.brokenAxis;if(s?.hasBreaks){let i=this.tickPositions,t=this.tickPositions.info,e=[];for(let t=0;t<i.length;t++)s.isInAnyBreak(i[t])||e.push(i[t]);this.tickPositions=e,this.tickPositions.info=t}}function u(){this.brokenAxis||(this.brokenAxis=new v(this))}function p(){let{isDirty:t,options:{connectNulls:s},points:r,xAxis:n,yAxis:o}=this;if(t){let e=r.length;for(;e--;){let t=r[e],i=(null!==t.y||!1!==s)&&(n?.brokenAxis?.isInAnyBreak(t.x,!0)||o?.brokenAxis?.isInAnyBreak(t.y,!0));t.visible=!i&&!1!==t.options.visible}}}function m(){this.drawBreaks(this.xAxis,["x"]),this.drawBreaks(this.yAxis,c(this.pointArrayMap,["y"]))}function x(s,t){let r,n,o,a=this,l=a.points;if(s?.brokenAxis?.hasBreaks){let e=s.brokenAxis;t.forEach(function(t){r=e?.breakArray||[],n=s.isXAxis?s.min:c(a.options.threshold,s.min);let i=s?.options?.breaks?.filter(function(i){let e=!0;for(let t=0;t<r.length;t++){var s=r[t];if(s.from===i.from&&s.to===i.to){e=!1;break}}return e});l.forEach(function(e){o=c(e["stack"+t.toUpperCase()],e[t]),r.forEach(function(i){if(k(n)&&k(o)){let t="";n<i.from&&o>i.to||n>i.from&&o<i.from?t="pointBreak":(n<i.from&&o>i.from&&o<i.to||n>i.from&&o>i.to&&o<i.from)&&(t="pointInBreak"),t&&f(s,t,{point:e,brk:i})}}),i?.forEach(function(t){f(s,"pointOutsideOfBreak",{point:e,brk:t})})})})}}function b(){let t=this.currentDataGrouping,e=t?.gapSize,s=this.points.slice(),r=this.yAxis,n=this.options.gapSize,a=s.length-1;if(n&&0<a){let t,i;for("value"!==this.options.gapUnit&&(n*=this.basePointRange),e&&e>n&&e>=this.basePointRange&&(n=e);a--;){var f;i&&!1!==i.visible||(i=s[a+1]),t=s[a],!1!==i.visible&&!1!==t.visible&&(i.x-t.x>n&&(f=(t.x+i.x)/2,s.splice(a+1,0,{isNull:!0,x:f}),r.stacking&&this.options.stacking&&((r.stacking.stacks[this.stackKey][f]=new(o())(r,r.options.stackLabels,!1,f,this.stack)).total=0)),i=t)}}return this.getGraphPath(s)}t.compose=function(i,e){if(!i.keepProps.includes("brokenAxis")){i.keepProps.push("brokenAxis"),a(i,"init",u),a(i,"afterInit",s),a(i,"afterSetTickPositions",n),a(i,"afterSetOptions",r);let t=e.prototype;t.drawBreaks=x,t.gappedPath=b,a(e,"afterGeneratePoints",p),a(e,"afterRender",m)}return i};class v{static isInBreak(t,i){var e=t.repeat||1/0,s=t.from,r=t.to-t.from,s=s<=i?(i-s)%e:e-(s-i)%e;return t.inclusive?s<=r:s<r&&0!=s}static lin2Val(t){var i=this.brokenAxis?.breakArray;if(!i||!k(t))return t;let e=t,s,r;for(r=0;r<i.length&&!((s=i[r]).from>=e);r++)(s.to<e||v.isInBreak(s,e))&&(e+=s.len);return e}static val2Lin(t){var i=this.brokenAxis?.breakArray;if(!i||!k(t))return t;let e=t,s,r;for(r=0;r<i.length;r++)if((s=i[r]).to<=t)e-=s.len;else{if(s.from>=t)break;if(v.isInBreak(s,t)){e-=t-s.from;break}}return e}constructor(t){this.hasBreaks=!1,this.axis=t}findBreakAt(i,t){return l(t,function(t){return t.from<i&&i<t.to})}isInAnyBreak(t,i){let e=this.axis,s=e.options.breaks||[],r=s.length,n,o,a;if(r&&k(t)){for(;r--;)v.isInBreak(s[r],t)&&(n=!0,o=o||c(s[r].showPoints,!e.isXAxis));a=n&&i?n&&!o:n}return a}setBreaks(t,i){let p=this,m=p.axis,e=m.chart.time,s=h(t)&&!!t.length&&!!Object.keys(t[0]).length;m.isDirty=p.hasBreaks!==s,p.hasBreaks=s,t?.forEach(t=>{t.from=e.parse(t.from)||0,t.to=e.parse(t.to)||0}),t!==m.options.breaks&&(m.options.breaks=m.userOptions.breaks=t),m.forceRedraw=!0,m.series.forEach(function(t){t.isDirty=!0}),s||m.val2lin!==v.val2Lin||(delete m.val2lin,delete m.lin2val),s&&(m.userOptions.ordinal=!1,m.lin2val=v.lin2Val,m.val2lin=v.val2Lin,m.setExtremes=function(e,s,t,i,r){if(p.hasBreaks){let t,i=this.options.breaks||[];for(;t=p.findBreakAt(e,i);)e=t.to;for(;t=p.findBreakAt(s,i);)s=t.from;s<e&&(s=e)}m.constructor.prototype.setExtremes.call(this,e,s,t,i,r)},m.setAxisTranslation=function(){if(m.constructor.prototype.setAxisTranslation.call(this),p.unitLength=void 0,p.hasBreaks){let t=m.options.breaks||[],i=[],e=[],s=c(m.pointRangePadding,0),r=0,n,o,a=m.userMin||m.min,l=m.userMax||m.max,h,u;t.forEach(function(t){o=t.repeat||1/0,k(a)&&k(l)&&(v.isInBreak(t,a)&&(a+=t.to%o-a%o),v.isInBreak(t,l)&&(l-=l%o-t.from%o))}),t.forEach(function(t){if(h=t.from,o=t.repeat||1/0,k(a)&&k(l)){for(;h-o>a;)h-=o;for(;h<a;)h+=o;for(u=h;u<l;u+=o)i.push({value:u,move:"in"}),i.push({value:u+t.to-t.from,move:"out",size:t.breakSize})}}),i.sort(function(t,i){return t.value===i.value?("in"!==t.move)-("in"!==i.move):t.value-i.value}),n=0,h=a,i.forEach(function(t){1===(n+="in"===t.move?1:-1)&&"in"===t.move&&(h=t.value),0===n&&k(h)&&(e.push({from:h,to:t.value,len:t.value-h-(t.size||0)}),r+=t.value-h-(t.size||0))}),p.breakArray=e,k(a)&&k(l)&&k(m.min)&&(p.unitLength=l-a-r+s,f(m,"afterBreaks"),m.staticScale?m.transA=m.staticScale:p.unitLength&&(m.transA*=(l-m.min+s)/p.unitLength),s&&(m.minPixelPadding=m.transA*(m.minPointOffset||0)),m.min=a,m.max=l)}}),c(i,!0)&&m.chart.redraw()}}t.Additions=v}(e=e||{}),e),p=r(),m=(p.BrokenAxis=p.BrokenAxis||u,p.BrokenAxis.compose(p.Axis,p.Series),r());export{m as default};