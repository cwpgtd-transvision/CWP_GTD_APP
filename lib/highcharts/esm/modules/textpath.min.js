import*as t from"../highcharts.js";var e={n:t=>{var a=t&&t.__esModule?()=>t.default:()=>t;return e.d(a,{a:a}),a},d:(t,a)=>{for(var r in a)e.o(a,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:a[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};let a=t.default;var r=e.n(a);let h=r()["deg2rad"],{addEvent:s,merge:l,uniqueKey:n,defined:o,extend:i}=r();function d(h,t){t=l(!0,{enabled:!0,attributes:{dy:-5,startOffset:"50%",textAnchor:"middle"}},t);let d=this.renderer.url,x=this.text||this,e=x.textPath,{attributes:c,enabled:f}=t;return h=h||e&&e.path,e&&e.undo(),h&&f?(t=s(x,"afterModifyTree",a=>{if(h&&f){let t=h.attr("id"),e=(t||h.attr("id",t=n()),{x:0,y:0});o(c.dx)&&(e.dx=c.dx,delete c.dx),o(c.dy)&&(e.dy=c.dy,delete c.dy),x.attr(e),this.attr({transform:""}),this.box&&(this.box=this.box.destroy());var r=a.nodes.slice(0);a.nodes.length=0,a.nodes[0]={tagName:"textPath",attributes:i(c,{"text-anchor":c.textAnchor,href:d+"#"+t}),children:r}}}),x.textPath={path:h,undo:t}):(x.attr({dx:0,dy:0}),delete x.textPath),this.added&&(x.textCache="",this.renderer.buildText(x)),this}function x(l){let a=l.bBox,x=this.element?.querySelector("textPath");if(x){let r=[],{b:s,h:t}=this.renderer.fontMetrics(this.element),n=t-s,e=RegExp('(<tspan>|<tspan(?!\\sclass="highcharts-br")[^>]*>|<\\/tspan>)',"g"),d=x.innerHTML.replace(e,"").split(/<tspan class="highcharts-br"[^>]*>/),i=d.length,o=(t,e)=>{var{x:e,y:a}=e,t=(x.getRotationOfChar(t)-90)*h,r=Math.cos(t),t=Math.sin(t);return[[e-n*r,a-n*t],[e+s*r,a+s*t]]};for(let e=0,a=0;a<i;a++){var c=d[a].length;for(let t=0;t<c;t+=5)try{var f=e+t+a,[u,p]=o(f,x.getStartPositionOfChar(f));0===t?(r.push(p),r.push(u)):(0===a&&r.unshift(p),a===i-1&&r.push(u))}catch(l){break}e+=c-1;try{var b=e+a,P=x.getEndPositionOfChar(b),[g,y]=o(b,P);r.unshift(y),r.unshift(g)}catch(l){break}}r.length&&r.push(r[0].slice()),a.polygon=r}return a}function f(t){let e=t.labelOptions,a=t.point,r=e[a.formatPrefix+"TextPath"]||e.textPath;r&&!e.useHTML&&(this.setTextPath(a.getDataLabelPath?.(this)||a.graphic,r),a.dataLabelPath&&!r.enabled&&(a.dataLabelPath=a.dataLabelPath.destroy()))}let c=r(),p=(c.TextPath={compose:function(t){s(t,"afterGetBBox",x),s(t,"beforeAddingDataLabel",f);let e=t.prototype;e.setTextPath||(e.setTextPath=d)}},c.TextPath.compose(c.SVGElement),r());export{p as default};