import*as __WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__ from"../highcharts.src.js";var __webpack_require__={n:t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return __webpack_require__.d(e,{a:e}),e},d:(t,e)=>{for(var a in e)__webpack_require__.o(e,a)&&!__webpack_require__.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};const external_highcharts_src_js_default_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default;var external_highcharts_src_js_default_default=__webpack_require__.n(external_highcharts_src_js_default_namespaceObject);const deg2rad=external_highcharts_src_js_default_default()["deg2rad"],{addEvent,merge,uniqueKey,defined,extend}=external_highcharts_src_js_default_default();function setTextPath(s,t){t=merge(!0,{enabled:!0,attributes:{dy:-5,startOffset:"50%",textAnchor:"middle"}},t);const h=this.renderer.url,n=this.text||this,e=n.textPath,{attributes:d,enabled:_}=t;return s=s||e&&e.path,e&&e.undo(),s&&_?(t=addEvent(n,"afterModifyTree",e=>{if(s&&_){let t=s.attr("id");t||s.attr("id",t=uniqueKey());const r={x:0,y:0};defined(d.dx)&&(r.dx=d.dx,delete d.dx),defined(d.dy)&&(r.dy=d.dy,delete d.dy),n.attr(r),this.attr({transform:""}),this.box&&(this.box=this.box.destroy());var a=e.nodes.slice(0);e.nodes.length=0,e.nodes[0]={tagName:"textPath",attributes:extend(d,{"text-anchor":d.textAnchor,href:h+"#"+t}),children:a}}}),n.textPath={path:s,undo:t}):(n.attr({dx:0,dy:0}),delete n.textPath),this.added&&(n.textCache="",this.renderer.buildText(n)),this}function setPolygon(t){const e=t.bBox,s=this.element?.querySelector("textPath");if(s){const l=[],{b:x,h:a}=this.renderer.fontMetrics(this.element),u=a-x,f=new RegExp('(<tspan>|<tspan(?!\\sclass="highcharts-br")[^>]*>|<\\/tspan>)',"g"),p=s.innerHTML.replace(f,"").split(/<tspan class="highcharts-br"[^>]*>/),g=p.length;var r=(t,e)=>{var{x:e,y:a}=e,t=(s.getRotationOfChar(t)-90)*deg2rad,r=Math.cos(t),t=Math.sin(t);return[[e-u*r,a-u*t],[e+x*r,a+x*t]]};for(let e=0,a=0;a<g;a++){var h=p[a].length;for(let t=0;t<h;t+=5)try{var n=e+t+a,[d,_]=r(n,s.getStartPositionOfChar(n));0===t?(l.push(_),l.push(d)):(0===a&&l.unshift(_),a===g-1&&l.push(d))}catch(t){break}e+=h-1;try{var i=e+a,[o,c]=r(i,s.getEndPositionOfChar(i));l.unshift(c),l.unshift(o)}catch(t){break}}l.length&&l.push(l[0].slice()),e.polygon=l}return e}function drawTextPath(t){const e=t.labelOptions,a=t.point,r=e[a.formatPrefix+"TextPath"]||e.textPath;r&&!e.useHTML&&(this.setTextPath(a.getDataLabelPath?.(this)||a.graphic,r),a.dataLabelPath&&!r.enabled&&(a.dataLabelPath=a.dataLabelPath.destroy()))}function compose(t){addEvent(t,"afterGetBBox",setPolygon),addEvent(t,"beforeAddingDataLabel",drawTextPath);const e=t.prototype;e.setTextPath||(e.setTextPath=setTextPath)}const TextPath={compose:compose},Extensions_TextPath=TextPath,G=external_highcharts_src_js_default_default(),textpath_src=(G.TextPath=Extensions_TextPath,G.TextPath.compose(G.SVGElement),external_highcharts_src_js_default_default());export{textpath_src as default};