let t;import*as e from"../highcharts.js";var i,o,a,n={n:t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},d:(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};let r=e.default;var s=n.n(r);let l={},{arrayMax:u,arrayMin:h,correctFloat:p,extend:d,isNumber:c}=s();function g(t){let e=t.length,i=m(t);return i=c(i)&&e?p(i/e):i}function m(t){let e=t.length,i;if(!e&&t.hasNulls)i=null;else if(e)for(i=0;e--;)i+=t[e];return i}let f={average:g,averages:function(){let e=[];return[].forEach.call(arguments,function(t){e.push(g(t))}),void 0===e[0]?void 0:e},close:function(t){return t.length?t[t.length-1]:t.hasNulls?null:void 0},high:function(t){return t.length?u(t):t.hasNulls?null:void 0},hlc:function(t,e,i){if(t=l.high(t),e=l.low(e),i=l.close(i),c(t)||c(e)||c(i))return[t,e,i]},low:function(t){return t.length?h(t):t.hasNulls?null:void 0},ohlc:function(t,e,i,o){if(t=l.open(t),e=l.high(e),i=l.low(i),o=l.close(o),c(t)||c(e)||c(i)||c(o))return[t,e,i,o]},open:function(t){return t.length?t[0]:t.hasNulls?null:void 0},range:function(t,e){return t=l.low(t),e=l.high(e),c(t)||c(e)?[t,e]:null===t&&null===e?null:void 0},sum:m},y=(d(l,f),{common:{groupPixelWidth:2,dateTimeLabelFormats:{millisecond:["%[AebHMSL]","%[AebHMSL]","-%[HMSL]"],second:["%[AebHMS]","%[AebHMS]","-%[HMS]"],minute:["%[AebHM]","%[AebHM]","-%[HM]"],hour:["%[AebHM]","%[AebHM]","-%[HM]"],day:["%[AebY]","%[Aeb]","-%[AebY]"],week:["%v %[AebY]","%[Aeb]","-%[AebY]"],month:["%[BY]","%[B]","-%[BY]"],year:["%Y","%Y","-%Y"]}},seriesSpecific:{line:{},spline:{},area:{},areaspline:{},arearange:{},column:{groupPixelWidth:10},columnrange:{groupPixelWidth:10},candlestick:{groupPixelWidth:10},ohlc:{groupPixelWidth:5},hlc:{groupPixelWidth:5},heikinashi:{groupPixelWidth:10}},units:[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1]],["week",[1]],["month",[1,3,6]],["year",null]]}),{addEvent:x,extend:G,merge:M,pick:b}=s();function v(e){let i=this,t=i.series;t.forEach(function(t){t.groupPixelWidth=void 0}),t.forEach(function(t){t.groupPixelWidth=i.getGroupPixelWidth&&i.getGroupPixelWidth(),t.groupPixelWidth&&(t.hasProcessed=!0),t.applyGrouping(!!e.hasExtremesChanged)})}function A(){let t=this.series,e=t.length,i=0,o=!1,a,n;for(;e--;)(n=t[e].options.dataGrouping)&&(i=Math.max(i,b(n.groupPixelWidth,y.common.groupPixelWidth)),a=(t[e].dataTable.modified||t[e].dataTable).rowCount,(t[e].groupPixelWidth||a>this.chart.plotSizeX/i||a&&n.forced)&&(o=!0));return o?i:0}function T(){this.series.forEach(function(t){t.hasProcessed=!1})}function D(e,i){let o;if(i=b(i,!0),e=e||{forced:!1,units:null},this instanceof t)for(o=this.series.length;o--;)this.series[o].update({dataGrouping:e},!1);else this.chart.options.series.forEach(function(t){t.dataGrouping="boolean"==typeof e?e:M(e,t.dataGrouping)});this.ordinal&&(this.ordinal.slope=void 0),i&&this.chart.redraw()}let C=function(e){var i=(t=e).prototype;i.applyGrouping||(x(e,"afterSetScale",T),x(e,"postProcessData",v),G(i,{applyGrouping:v,getGroupPixelWidth:A,setDataGrouping:D}))},{setLength:P,splice:w}=((i=o=o||{}).setLength=function(t,e,i){return Array.isArray(t)?(t.length=e,t):t[i?"subarray":"slice"](0,e)},i.splice=function(t,e,i,o,a=[]){if(Array.isArray(t))return Array.isArray(a)||(a=Array.from(a)),{removed:t.splice(e,i,...a),array:t};let n=Object.getPrototypeOf(t).constructor,r=t[o?"subarray":"slice"](e,e+i),s=new n(t.length-i+a.length);return s.set(t.subarray(0,e),0),s.set(a,e),s.set(t.subarray(e+i),e+a.length),{removed:r,array:s}},o),{fireEvent:S,objectEach:k,uniqueKey:O}=s(),R=class{constructor(t={}){this.autoId=!t.id,this.columns={},this.id=t.id||O(),(this.modified=this).rowCount=0,this.versionTag=O();let i=0;k(t.columns||{},(t,e)=>{this.columns[e]=t.slice(),i=Math.max(i,t.length)}),this.applyRowCount(i)}applyRowCount(i){this.rowCount=i,k(this.columns,(t,e)=>{t.length!==i&&(this.columns[e]=P(t,i))})}deleteRows(o,a=1){if(0<a&&o<this.rowCount){let i=0;k(this.columns,(t,e)=>{this.columns[e]=w(t,o,a).array,i=t.length}),this.rowCount=i}S(this,"afterDeleteRows",{rowIndex:o,rowCount:a}),this.versionTag=O()}getColumn(t,e){return this.columns[t]}getColumns(t,e){return(t||Object.keys(this.columns)).reduce((t,e)=>(t[e]=this.columns[e],t),{})}getRow(e,t){return(t||Object.keys(this.columns)).map(t=>this.columns[t]?.[e])}setColumn(t,e=[],i=0,o){this.setColumns({[t]:e},i,o)}setColumns(t,e,i){let o=this.rowCount;k(t,(t,e)=>{this.columns[e]=t.slice(),o=t.length}),this.applyRowCount(o),i?.silent||(S(this,"afterSetColumns"),this.versionTag=O())}setRow(t,o=this.rowCount,a,n){let r=this["columns"],s=a?this.rowCount+1:o+1;k(t,(t,e)=>{let i=r[e]||!1!==n?.addColumns&&Array(s);i&&(a?i=w(i,o,0,!0,[t]).array:i[o]=t,r[e]=i)}),s>this.rowCount&&this.applyRowCount(s),n?.silent||(S(this,"afterSetRows"),this.versionTag=O())}},{addEvent:F,getMagnitude:W,normalizeTickInterval:E,timeUnits:H}=s(),N=(!function(t){function e(){return this.chart.time.getTimeTicks.apply(this.chart.time,arguments)}function i(){"datetime"!==this.type?this.dateTime=void 0:this.dateTime||(this.dateTime=new o(this))}t.compose=function(t){return t.keepProps.includes("dateTime")||(t.keepProps.push("dateTime"),t.prototype.getTimeTicks=e,F(t,"afterSetType",i)),t};class o{constructor(t){this.axis=t}normalizeTimeTickInterval(t,e){let i=e||[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2]],["week",[1,2]],["month",[1,2,3,4,6]],["year",null]],o=i[i.length-1],a=H[o[0]],n=o[1],r;for(r=0;r<i.length&&(a=H[(o=i[r])[0]],n=o[1],!(i[r+1]&&t<=(a*n[n.length-1]+H[i[r+1][0]])/2));r++);a===H.year&&t<5*a&&(n=[1,2,5]);e=E(t/a,n,"year"===o[0]?Math.max(W(t/a),1):1);return{unitRange:a,count:e,unitName:o[0]}}getXDateFormat(t,e){let i=this["axis"],o=i.chart.time;return i.closestPointRange?o.getDateFormat(i.closestPointRange,t,i.options.startOfWeek,e)||o.resolveDTLFormat(e.year).main:o.resolveDTLFormat(e.day).main}}t.Additions=o}(a=a||{}),a),I=e.default.SeriesRegistry,{prototype:L}=n.n(I)()["series"],{addEvent:Y,defined:j,error:z,extend:X,isNumber:q,merge:B,pick:_,splat:J}=s(),K=L.generatePoints;function Q(f){let x,G,v=this.chart,M=this.options.dataGrouping,t=!1!==this.allowDG&&M&&_(M.enabled,v.options.isStock),b=this.reserveSpace(),e=this.currentDataGrouping,A,D,i=!1;t&&!this.requireSorting&&(this.requireSorting=i=!0);f=0==!(this.isCartesian&&!this.isDirty&&!this.xAxis.isDirty&&!this.yAxis.isDirty&&!f)||!t;if(i&&(this.requireSorting=!1),!f){this.destroyGroupedData();let u=!M.groupAll&&this.dataTable.modified||this.dataTable,p=this.getColumn("x",!M.groupAll),h=v.plotSizeX,d=this.xAxis,c=d.getExtremes(),g=d.options.ordinal,m=this.groupPixelWidth;if(m&&p&&u.rowCount&&h&&q(c.min)){G=!0,this.isDirty=!0,this.points=null;let t=c.min,e=c.max,i=g&&d.ordinal&&d.ordinal.getGroupIntervalFactor(t,e,this)||1,o=m*(e-t)/h*i,a=d.getTimeTicks(N.Additions.prototype.normalizeTimeTickInterval(o,M.units||y.units),Math.min(t,p[0]),Math.max(e,p[p.length-1]),d.options.startOfWeek,p,this.closestPointRange),n=L.groupData.apply(this,[u,a,M.approximation]),r=n.modified,s=r.getColumn("x",!0),l=0;for(M?.smoothed&&r.rowCount&&(M.firstAnchor="firstPoint",M.anchor="middle",M.lastAnchor="lastPoint",z(32,!1,v,{"dataGrouping.smoothed":"use dataGrouping.anchor"})),x=1;x<a.length;x++)a.info.segmentStarts&&-1!==a.info.segmentStarts.indexOf(x)||(l=Math.max(a[x]-a[x-1],l));(A=a.info).gapSize=l,this.closestPointRange=a.info.totalRange,this.groupMap=n.groupMap,this.currentDataGrouping=A;var f=this,T=s||[],C=e,w=f.options.dataGrouping,P=f.currentDataGrouping&&f.currentDataGrouping.gapSize,S=f.getColumn("x");if(w&&S.length&&P&&f.groupMap){let t=T.length-1,e=w.anchor,i=w.firstAnchor,o=w.lastAnchor,a=T.length-1,n=0;if(i&&S[0]>=T[0]){let t;n++;var w=f.groupMap[0].start,k=f.groupMap[0].length;q(w)&&q(k)&&(t=w+(k-1)),T[0]={start:T[0],middle:T[0]+.5*P,end:T[0]+P,firstPoint:S[0],lastPoint:t&&S[t]}[i]}if(0<t&&o&&P&&T[t]>=C-P&&(a--,w=f.groupMap[f.groupMap.length-1].start,T[t]={start:T[t],middle:T[t]+.5*P,end:T[t]+P,firstPoint:w&&S[w],lastPoint:S[S.length-1]}[o]),e&&"start"!==e)for(var O=P*{middle:.5,end:1}[e];a>=n;)T[a]+=O,a--}b&&s&&(j((k=s)[0])&&q(d.min)&&q(d.dataMin)&&k[0]<d.min&&((!j(d.options.min)&&d.min<=d.dataMin||d.min===d.dataMin)&&(d.min=Math.min(k[0],d.min)),d.dataMin=Math.min(k[0],d.dataMin)),j(k[k.length-1])&&q(d.max)&&q(d.dataMax)&&k[k.length-1]>d.max&&((!j(d.options.max)&&q(d.dataMax)&&d.max>=d.dataMax||d.max===d.dataMax)&&(d.max=Math.max(k[k.length-1],d.max)),d.dataMax=Math.max(k[k.length-1],d.dataMax))),M.groupAll&&(this.allGroupedTable=r,s=(r=(D=this.cropData(r,d.min||0,d.max||0)).modified).getColumn("x"),this.cropStart=D.start),this.dataTable.modified=r}else this.groupMap=void 0,this.currentDataGrouping=void 0;this.hasGroupedData=G,this.preventGraphAnimation=(e&&e.totalRange)!==(A&&A.totalRange)}}function U(){this.groupedData&&(this.groupedData.forEach(function(t,e){t&&(this.groupedData[e]=t.destroy?t.destroy():null)},this),this.groupedData.length=0,delete this.allGroupedTable)}function V(){K.apply(this),this.destroyGroupedData(),this.groupedData=this.hasGroupedData?this.points:null}function Z(){return this.is("arearange")?"range":this.is("ohlc")?"ohlc":this.is("hlc")?"hlc":this.is("column")||this.options.cumulative?"sum":"average"}function $(t,e,i){let o=t.getColumn("x",!0)||[],a=t.getColumn("y",!0),n=this,r=n.data,s=n.options&&n.options.data,u=[],p=new R,h=[],d=t.rowCount,c=!!a,g=[],m=n.pointArrayMap,f=m&&m.length,y=["x"].concat(m||["y"]),x=(m||["y"]).map(()=>[]),G=this.options.dataGrouping&&this.options.dataGrouping.groupAll,v,M,b,A=0,D=0,T="function"==typeof i?i:i&&l[i]?l[i]:l[n.getDGApproximation&&n.getDGApproximation()||"average"];if(f){let t=m.length;for(;t--;)g.push([])}else g.push([]);var C=f||1;for(let t=0;t<=d;t++)if(!(o[t]<e[0])){for(;void 0!==e[A+1]&&o[t]>=e[A+1]||t===d;){if(v=e[A],n.dataGroupInfo={start:G?D:n.cropStart+D,length:g[0].length,groupStart:v},b=T.apply(n,g),n.pointClass&&!j(n.dataGroupInfo.options)&&(n.dataGroupInfo.options=B(n.pointClass.prototype.optionsToObject.call({series:n},n.options.data[n.cropStart+D])),y.forEach(function(t){delete n.dataGroupInfo.options[t]})),void 0!==b){u.push(v);var w=J(b);for(let t=0;t<w.length;t++)x[t].push(w[t]);h.push(n.dataGroupInfo)}D=t;for(let t=0;t<C;t++)g[t].length=0,g[t].hasNulls=!1;if(A+=1,t===d)break}if(t===d)break;if(m){var P,S=G?t:n.cropStart+t,k=r&&r[S]||n.pointClass.prototype.applyOptions.apply({series:n},[s[S]]);for(let t=0;t<f;t++)q(P=k[m[t]])?g[t].push(P):null===P&&(g[t].hasNulls=!0)}else q(M=c?a[t]:null)?g[0].push(M):null===M&&(g[0].hasNulls=!0)}let O={x:u};return(m||["y"]).forEach((t,e)=>{O[t]=x[e]}),p.setColumns(O),{groupMap:h,modified:p}}function tt(t){let e=t.options,i=this.type,o=this.chart.options.plotOptions,a=this.useCommonDataGrouping&&y.common,n=y.seriesSpecific,r=s().defaultOptions.plotOptions[i].dataGrouping;o&&(n[i]||a)&&(t=this.chart.rangeSelector,r=r||B(y.common,n[i]),e.dataGrouping=B(a,r,o.series&&o.series.dataGrouping,o[i].dataGrouping,this.userOptions.dataGrouping,!e.isInternal&&t&&q(t.selected)&&t.buttonOptions[t.selected].dataGrouping))}let te=function(t){var e=t.prototype;e.applyGrouping||(Y(t.prototype.pointClass,"update",function(){if(this.dataGroup)return z(24,!1,this.series.chart),!1}),Y(t,"afterSetOptions",tt),Y(t,"destroy",U),X(e,{applyGrouping:Q,destroyGroupedData:U,generatePoints:V,getDGApproximation:Z,groupData:$}))},ti=e.default.Templating,to=n.n(ti)()["format"],ta=s()["composed"],{addEvent:tn,extend:tr,isNumber:ts,pick:tl,pushUnique:tu}=s();function th(t){let e=this.chart,i=e.time,o=t.point,a=o.series,n=a.options,r=a.tooltipOptions,s=n.dataGrouping,l=a.xAxis,u=r.xDateFormat||"",p,h,d,c,g,m=r[t.isFooter?"footerFormat":"headerFormat"];var f,x;l&&"datetime"===l.options.type&&s&&ts(o.key)&&(h=a.currentDataGrouping,d=s.dateTimeLabelFormats||y.common.dateTimeLabelFormats,h?(c=d[h.unitName],1===h.count?u=c[0]:(u=c[1],p=c[2])):!u&&d&&l.dateTime&&(u=l.dateTime.getXDateFormat(o.x,r.dateTimeLabelFormats)),x=(f=tl(a.groupMap?.[o.index].groupStart,o.key))+(h?.totalRange||0)-1,g=i.dateFormat(u,f),p&&(g+=i.dateFormat(p,x)),a.chart.styledMode&&(m=this.styledModeFormat(m)),t.text=to(m,{point:tr(o,{key:g}),series:a},e),t.preventDefault())}let tp=s(),td=(tp.dataGrouping=tp.dataGrouping||{},tp.dataGrouping.approximationDefaults=tp.dataGrouping.approximationDefaults||f,tp.dataGrouping.approximations=tp.dataGrouping.approximations||l,function(t,e,i){C(t),te(e),i&&tu(ta,"DataGrouping")&&tn(i,"headerFormatter",th)}(tp.Axis,tp.Series,tp.Tooltip),s());export{td as default};