import*as t from"../highcharts.js";var e={n:t=>{var i=t&&t.__esModule?()=>t.default:()=>t;return e.d(i,{a:i}),i},d:(t,i)=>{for(var s in i)e.o(i,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:i[s]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};let i=t.default;var s=e.n(i);let o=t.default.SeriesRegistry;var r=e.n(o);let{series:{prototype:{pointClass:a}},seriesTypes:{pie:{prototype:{pointClass:l}}}}=r(),n=s()["extend"];class h extends l{}n(h.prototype,{haloPath:a.prototype.haloPath});let d=s()["merge"],c={endAngle:void 0,innerSize:"40%",itemPadding:.1,layout:"vertical",marker:d({enabledThreshold:2,lineColor:"#ffffff",lineWidth:0,radius:4,states:{normal:{animation:!0},hover:{animation:{duration:150},enabled:!0,radiusPlus:2,lineWidthPlus:1},select:{fillColor:"#cccccc",lineColor:"#000000",lineWidth:2}}},{radius:null}),rows:void 0,crisp:!1,showInLegend:!0,startAngle:void 0},p=r().seriesTypes["pie"],{defined:g,extend:u,fireEvent:f,isNumber:m,merge:y,pick:b}=s();class v extends p{animate(t){let e=this.group;e&&(t?e.attr({opacity:0}):e.animate({opacity:1},this.options.animation))}drawDataLabels(){if(this.center&&this.slots)super.drawDataLabels();else for(var t of this.points)t.destroyElements({dataLabel:1})}drawPoints(){let c=this.options,f=this.chart.renderer,e=c.marker,m=this.borderWidth%2?.5:1,v=this.getRows(),y=Math.ceil(this.total/v),M=this.chart.plotWidth/y,w=this.chart.plotHeight/v,A=this.itemSize||Math.min(M,w),C=0;for(var P of this.points){let i,s,o,r,a,l,t=P.marker||{},n=t.symbol||e.symbol,h=b(t.radius,e.radius),d=g(h)?2*h:A,p=d*c.itemPadding;if(P.graphics=s=P.graphics||[],this.chart.styledMode||(o=this.pointAttribs(P,P.selected&&"select")),!P.isNull&&P.visible){P.graphic||(P.graphic=f.g("point").add(this.group));for(let e=0;e<(P.y||0);++e){var x;a=this.center&&this.slots?(x=this.slots.shift(),r=x.x-A/2,x.y-A/2):"horizontal"===c.layout?(r=C%y*M,w*Math.floor(C/y)):(r=M*Math.floor(C/v),C%v*w),r+=p,a+=p,l=Math.round(d-2*p),this.options.crisp&&(r=Math.round(r)-m,a=Math.round(a)+m),i={x:r,y:a,width:l,height:l},void 0!==h&&(i.r=h),o&&u(i,o);let t=s[e];t?t.animate(i):t=f.symbol(n,void 0,void 0,void 0,void 0,{backgroundSize:"within"}).attr(i).add(P.graphic),t.isActive=!0,s[e]=t,++C}}for(let e=0;e<s.length;e++){let t=s[e];if(!t)return;t.isActive?t.isActive=!1:(t.destroy(),s.splice(e,1),e--)}}}getRows(){let t=this.chart,e=this.total||0,i=this.options.rows,s;if(!i)if(s=t.plotWidth/t.plotHeight,i=Math.sqrt(e),1<s)for(i=Math.ceil(i);1<i&&!(e/i/i>s);)i--;else for(i=Math.floor(i);i<e&&!(e/i/i<s);)i++;return i}getSlots(){let i=this.center,e=i[2],s=this.slots=this.slots||[],o=this.endAngleRad-this.startAngleRad,t=this.options.rows,r=o%(2*Math.PI)==0,a=this.total||0,l=i[3],n,h,d,p,c,g,f,u,m=0,v,y=Number.MAX_VALUE,M,b,w,A=(e-l)/e;for(;y>a+(b&&r?b.length:0);){M=y,s.length=0,y=0,b=w,w=[],v=e/++m/2,t?0<=(l=(v-t)/v*e)?v=t:(l=0,A=1):v=Math.floor(v*A);for(let t=v;0<t;t--)c=Math.ceil((p=o*(d=(l+t/v*(e-l-m))/2))/m),w.push({rowRadius:d,rowLength:p,colCount:c}),y+=c+1}if(b){let e=M-this.total-(r?b.length:0),t=t=>{0<e&&(t.row.colCount--,e--)};for(;0<e;)b.map(t=>({angle:t.colCount/t.rowLength,row:t})).sort((t,e)=>e.angle-t.angle).slice(0,Math.min(e,Math.ceil(b.length/2))).forEach(t);for(var C of b){var P=C.rowRadius,x=C.colCount;for(u=0,g=x?o/x:0;u<=x;u+=1)f=this.startAngleRad+u*g,n=i[0]+Math.cos(f)*P,h=i[1]+Math.sin(f)*P,s.push({x:n,y:h,angle:f})}return s.sort((t,e)=>t.angle-e.angle),this.itemSize=m,s}}translate(t){0===this.total&&m(this.options.startAngle)&&m(this.options.endAngle)&&(this.center=this.getCenter()),this.slots||(this.slots=[]),m(this.options.startAngle)&&m(this.options.endAngle)?(super.translate(t),this.slots=this.getSlots()):(this.generatePoints(),f(this,"afterTranslate"))}}v.defaultOptions=y(p.defaultOptions,c),u(v.prototype,{markerAttribs:void 0,pointClass:h}),r().registerSeriesType("item",v);let M=s();export{M as default};