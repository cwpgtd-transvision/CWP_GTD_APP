import*as __WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__ from"../highcharts.src.js";var __webpack_require__={n:t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return __webpack_require__.d(e,{a:e}),e},d:(t,e)=>{for(var o in e)__webpack_require__.o(e,o)&&!__webpack_require__.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};const external_highcharts_src_js_default_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default;var external_highcharts_src_js_default_default=__webpack_require__.n(external_highcharts_src_js_default_namespaceObject);const external_highcharts_src_js_default_SVGElement_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default.SVGElement;var external_highcharts_src_js_default_SVGElement_default=__webpack_require__.n(external_highcharts_src_js_default_SVGElement_namespaceObject);const composed=external_highcharts_src_js_default_default()["composed"],{addEvent,pushUnique}=external_highcharts_src_js_default_default();function compose(t){pushUnique(composed,"DragNodes")&&addEvent(t,"load",onChartLoad)}function onChartLoad(){const e=this;let t,o,i,s;e.container&&(t=addEvent(e.container,"mousedown",t=>{o&&o(),i&&i(),(s=e.hoverPoint)&&s.series&&s.series.hasDraggableNodes&&s.series.options.draggable&&(s.series.onMouseDown(s,t),o=addEvent(e.container,"mousemove",t=>s&&s.series&&s.series.onMouseMove(s,t)),i=addEvent(e.container.ownerDocument,"mouseup",t=>(o(),i(),s&&s.series&&s.series.onMouseUp(s,t))))})),addEvent(e,"destroy",function(){t()})}function onMouseDown(t,e){var o=this.chart.options.chart["panKey"];o&&e[o+"Key"]||(o=this.chart.pointer?.normalize(e)||e,t.fixedPosition={chartX:o.chartX,chartY:o.chartY,plotX:t.plotX,plotY:t.plotY},t.inDragMode=!0)}function onMouseMove(t,e){if(t.fixedPosition&&t.inDragMode){const i=this.chart,s=i.pointer?.normalize(e)||e,r=t.fixedPosition.chartX-s.chartX,a=t.fixedPosition.chartY-s.chartY,n=i.graphLayoutsLookup;var o;(5<Math.abs(r)||5<Math.abs(a))&&(e=t.fixedPosition.plotX-r,o=t.fixedPosition.plotY-a,i.isInsidePlot(e,o)&&(t.plotX=e,t.plotY=o,t.hasDragged=!0,this.redrawHalo(t),n.forEach(t=>{t.restartSimulation()})))}}function onMouseUp(t){t.fixedPosition&&(t.hasDragged&&(this.layout.enableSimulation?this.layout.start():this.chart.redraw()),t.inDragMode=t.hasDragged=!1,this.options.fixedDraggable||delete t.fixedPosition)}function redrawHalo(t){t&&this.halo&&this.halo.attr({d:t.haloPath(this.options.states.hover.halo.size)})}const DragNodesComposition={compose:compose,onMouseDown:onMouseDown,onMouseMove:onMouseMove,onMouseUp:onMouseUp,redrawHalo:redrawHalo},Series_DragNodesComposition=DragNodesComposition,setAnimation=external_highcharts_src_js_default_default()["setAnimation"],GraphLayoutComposition_composed=external_highcharts_src_js_default_default()["composed"],{addEvent:GraphLayoutComposition_addEvent,pushUnique:GraphLayoutComposition_pushUnique}=external_highcharts_src_js_default_default(),integrations={},layouts={};function GraphLayoutComposition_compose(t){GraphLayoutComposition_pushUnique(GraphLayoutComposition_composed,"GraphLayout")&&(GraphLayoutComposition_addEvent(t,"afterPrint",onChartAfterPrint),GraphLayoutComposition_addEvent(t,"beforePrint",onChartBeforePrint),GraphLayoutComposition_addEvent(t,"predraw",onChartPredraw),GraphLayoutComposition_addEvent(t,"render",onChartRender))}function onChartAfterPrint(){this.graphLayoutsLookup&&(this.graphLayoutsLookup.forEach(t=>{t.updateSimulation()}),this.redraw())}function onChartBeforePrint(){this.graphLayoutsLookup&&(this.graphLayoutsLookup.forEach(t=>{t.updateSimulation(!1)}),this.redraw())}function onChartPredraw(){this.graphLayoutsLookup&&this.graphLayoutsLookup.forEach(t=>{t.stop()})}function onChartRender(){let e,o=!1;var t=t=>{t.maxIterations--&&isFinite(t.temperature)&&!t.isStable()&&!t.enableSimulation&&(t.beforeStep&&t.beforeStep(),t.step(),e=!1,o=!0)};if(this.graphLayoutsLookup&&!this.pointer?.hasDragged){for(setAnimation(!1,this),this.graphLayoutsLookup.forEach(t=>t.start());!e;)e=!0,this.graphLayoutsLookup.forEach(t);o&&this.series.forEach(t=>{t&&t.layout&&t.render()})}}const GraphLayoutComposition={compose:GraphLayoutComposition_compose,integrations:integrations,layouts:layouts},Series_GraphLayoutComposition=GraphLayoutComposition,external_highcharts_src_js_default_SeriesRegistry_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default.SeriesRegistry;var NodesComposition,external_highcharts_src_js_default_SeriesRegistry_default=__webpack_require__.n(external_highcharts_src_js_default_SeriesRegistry_namespaceObject);const{prototype:seriesProto,prototype:{pointClass:{prototype:pointProto}}}=external_highcharts_src_js_default_SeriesRegistry_default()["series"],{defined,extend,find,merge,pick}=external_highcharts_src_js_default_default(),Series_NodesComposition=(!function(t){function s(){return this.data=[].concat(this.points||[],this.nodes),seriesProto.destroy.apply(this,arguments)}function r(){this.nodes&&(this.nodes.forEach(t=>{t.destroy()}),this.nodes.length=0),seriesProto.setData.apply(this,arguments)}function a(t){const e=arguments,o=this.isNode?this.linksTo.concat(this.linksFrom):[this.fromNode,this.toNode];"select"!==t&&o.forEach(t=>{t&&t.series&&(pointProto.setState.apply(t,e),t.isNode||(t.fromNode.graphic&&pointProto.setState.apply(t.fromNode,e),t.toNode&&t.toNode.graphic&&pointProto.setState.apply(t.toNode,e)))}),pointProto.setState.apply(this,e)}function n(t,e,o,i){const s=this.series.options.nodes,r=this.series.options.data,a=r?.length||0,n=r?.[this.index];pointProto.update.call(this,t,!this.isNode&&e,o,i),this.isNode&&(t=(s||[]).reduce((t,e,o)=>this.id===e.id?o:t,-1),i=merge(s&&s[t]||{},r?.[this.index]||{}),r&&(n?r[this.index]=n:r.length=a),s?0<=t?s[t]=i:s.push(i):this.series.options.nodes=[i],pick(e,!0)&&this.series.chart.redraw(o))}t.compose=function(t,e){const o=t.prototype,i=e.prototype;return o.setNodeState=a,o.setState=a,o.update=n,i.destroy=s,i.setData=r,e},t.createNode=function(t){const e=this.pointClass,o=(t,e)=>find(t,t=>t.id===e);let i=o(this.nodes,t),s;if(!i){s=this.options.nodes&&o(this.options.nodes,t);const r=new e(this,extend({className:"highcharts-node",isNode:!0,id:t,y:1},s));r.linksTo=[],r.linksFrom=[],r.getSum=function(){let e=0,o=0;return r.linksTo.forEach(t=>{e+=t.weight||0}),r.linksFrom.forEach(t=>{o+=t.weight||0}),Math.max(e,o)},r.offset=function(e,o){let i=0;for(let t=0;t<r[o].length;t++){if(r[o][t]===e)return i;i+=r[o][t].weight}},r.hasShape=function(){let e=0;return r.linksTo.forEach(t=>{t.outgoing&&e++}),!r.linksTo.length||e!==r.linksTo.length},r.index=this.nodes.push(r)-1,i=r}return i.formatPrefix="node",i.name=i.name||i.options.id||"",i.mass=pick(i.options.mass,i.options.marker&&i.options.marker.radius,this.options.marker&&this.options.marker.radius,4),i},t.destroy=s,t.generatePoints=function(){const e=this.chart,o={};seriesProto.generatePoints.call(this),this.nodes||(this.nodes=[]),this.colorCounter=0,this.nodes.forEach(t=>{t.linksFrom.length=0,t.linksTo.length=0,t.level=t.options.level}),this.points.forEach(t=>{defined(t.from)&&(o[t.from]||(o[t.from]=this.createNode(t.from)),o[t.from].linksFrom.push(t),t.fromNode=o[t.from],e.styledMode?t.colorIndex=pick(t.options.colorIndex,o[t.from].colorIndex):t.color=t.options.color||o[t.from].color),defined(t.to)&&(o[t.to]||(o[t.to]=this.createNode(t.to)),o[t.to].linksTo.push(t),t.toNode=o[t.to]),t.name=t.name||t.id},this),this.nodeLookup=o},t.setNodeState=a,t.updateNode=n}(NodesComposition=NodesComposition||{}),NodesComposition),{prototype:NetworkgraphPoint_seriesProto,prototype:{pointClass:Point}}=external_highcharts_src_js_default_SeriesRegistry_default()["series"],{addEvent:NetworkgraphPoint_addEvent,css,defined:NetworkgraphPoint_defined,extend:NetworkgraphPoint_extend,pick:NetworkgraphPoint_pick}=external_highcharts_src_js_default_default();class NetworkgraphPoint extends Point{destroy(){return this.isNode&&this.linksFrom.concat(this.linksTo).forEach(function(t){t.destroyElements&&t.destroyElements()}),this.series.layout.removeElementFromCollection(this,this.series.layout[this.isNode?"nodes":"links"]),Point.prototype.destroy.apply(this,arguments)}getDegree(){var t=this.isNode?this.linksFrom.length+this.linksTo.length:0;return 0===t?1:t}getLinkAttributes(){var t=this.series.options.link,e=this.options;return{"stroke-width":NetworkgraphPoint_pick(e.width,t.width),stroke:e.color||t.color,dashstyle:e.dashStyle||t.dashStyle,opacity:NetworkgraphPoint_pick(e.opacity,t.opacity,1)}}getLinkPath(){let t=this.fromNode,e=this.toNode;return t.plotX>e.plotX&&(t=this.toNode,e=this.fromNode),[["M",t.plotX||0,t.plotY||0],["L",e.plotX||0,e.plotY||0]]}getMass(){var t=this.fromNode.mass,e=this.toNode.mass,o=t+e;return{fromNode:1-t/o,toNode:1-e/o}}constructor(t,e,o){super(t,e,o),this.series.options.draggable&&!this.series.chart.styledMode&&(NetworkgraphPoint_addEvent(this,"mouseOver",function(){css(this.series.chart.container,{cursor:"move"})}),NetworkgraphPoint_addEvent(this,"mouseOut",function(){css(this.series.chart.container,{cursor:"default"})}))}isValid(){return!this.isNode||NetworkgraphPoint_defined(this.id)}redrawLink(){var t,e=this.getLinkPath();let o;this.graphic&&(this.shapeArgs={d:e},this.series.chart.styledMode||(o=this.series.pointAttribs(this),this.graphic.attr(o),(this.dataLabels||[]).forEach(function(t){t&&t.attr({opacity:o.opacity})})),this.graphic.animate(this.shapeArgs),t=e[0],e=e[1],"M"===t[0]&&"L"===e[0]&&(this.plotX=(t[1]+e[1])/2,this.plotY=(t[2]+e[2])/2))}remove(t,e){const o=this,i=o.series,s=i.options.nodes||[];let r,a=s.length;if(o.isNode){for(i.points=[],[].concat(o.linksFrom).concat(o.linksTo).forEach(function(t){-1<(r=t.fromNode.linksFrom.indexOf(t))&&t.fromNode.linksFrom.splice(r,1),-1<(r=t.toNode.linksTo.indexOf(t))&&t.toNode.linksTo.splice(r,1),NetworkgraphPoint_seriesProto.removePoint.call(i,i.data.indexOf(t),!1,!1)}),i.points=i.data.slice(),i.nodes.splice(i.nodes.indexOf(o),1);a--;)if(s[a].id===o.options.id){i.options.nodes.splice(a,1);break}o&&o.destroy(),i.isDirty=!0,i.isDirtyData=!0,t&&i.chart.redraw(t)}else i.removePoint(i.data.indexOf(o),t,e)}renderLink(){let e;this.graphic||(this.graphic=this.series.chart.renderer.path(this.getLinkPath()).addClass(this.getClassName(),!0).add(this.series.group),this.series.chart.styledMode||(e=this.series.pointAttribs(this),this.graphic.attr(e),(this.dataLabels||[]).forEach(function(t){t&&t.attr({opacity:e.opacity})})))}}NetworkgraphPoint_extend(NetworkgraphPoint.prototype,{setState:Series_NodesComposition.setNodeState});const Networkgraph_NetworkgraphPoint=NetworkgraphPoint,NetworkgraphSeriesDefaults={stickyTracking:!1,inactiveOtherPoints:!0,marker:{enabled:!0,states:{inactive:{opacity:.3,animation:{duration:50}}}},states:{inactive:{linkOpacity:.3,animation:{duration:50}}},dataLabels:{formatter:function(){return String(this.key??"")},linkFormatter:function(){return this.fromNode.name+"<br>"+this.toNode.name},linkTextPath:{enabled:!0},textPath:{enabled:!1},style:{transition:"opacity 2000ms"},defer:!0,animation:{defer:1e3}},link:{color:"rgba(100, 100, 100, 0.5)",width:1},draggable:!0,layoutAlgorithm:{initialPositions:"circle",initialPositionRadius:1,enableSimulation:!1,theta:.5,maxSpeed:10,approximation:"none",type:"reingold-fruchterman",integration:"euler",maxIterations:1e3,gravitationalConstant:.0625,friction:-.981},showInLegend:!1},Networkgraph_NetworkgraphSeriesDefaults=NetworkgraphSeriesDefaults;function attractive(t,e,o,i){var s=t.getMass(),r=o.x/i*e,o=o.y/i*e;t.fromNode.fixedPosition||(t.fromNode.dispX-=r*s.fromNode/t.fromNode.degree,t.fromNode.dispY-=o*s.fromNode/t.fromNode.degree),t.toNode.fixedPosition||(t.toNode.dispX+=r*s.toNode/t.toNode.degree,t.toNode.dispY+=o*s.toNode/t.toNode.degree)}function attractiveForceFunction(t,e){return t*t/e}function barycenter(){const o=this.options.gravitationalConstant,i=this.barycenter.xFactor,s=this.barycenter.yFactor;this.nodes.forEach(function(t){var e;t.fixedPosition||(e=(e=t.getDegree())*(1+e/2),t.dispX+=(i-t.plotX)*o*e/t.degree,t.dispY+=(s-t.plotY)*o*e/t.degree)})}function getK(t){return Math.pow(t.box.width*t.box.height/t.nodes.length,.3)}function integrate(t,e){e.dispX+=e.dispX*t.options.friction,e.dispY+=e.dispY*t.options.friction;var o=e.temperature=t.vectorLength({x:e.dispX,y:e.dispY});0!==o&&(e.plotX+=e.dispX/o*Math.min(Math.abs(e.dispX),t.temperature),e.plotY+=e.dispY/o*Math.min(Math.abs(e.dispY),t.temperature))}function repulsive(t,e,o,i){t.dispX+=o.x/i*e/t.degree,t.dispY+=o.y/i*e/t.degree}function repulsiveForceFunction(t,e){return e*e/t}const EulerIntegration={attractive:attractive,attractiveForceFunction:attractiveForceFunction,barycenter:barycenter,getK:getK,integrate:integrate,repulsive:repulsive,repulsiveForceFunction:repulsiveForceFunction},Networkgraph_EulerIntegration=EulerIntegration;class QuadTreeNode{constructor(t){this.body=!1,this.isEmpty=!1,this.isInternal=!1,this.nodes=[],this.box=t,this.boxSize=Math.min(t.width,t.height)}divideBox(){var t=this.box.width/2,e=this.box.height/2;this.nodes[0]=new QuadTreeNode({left:this.box.left,top:this.box.top,width:t,height:e}),this.nodes[1]=new QuadTreeNode({left:this.box.left+t,top:this.box.top,width:t,height:e}),this.nodes[2]=new QuadTreeNode({left:this.box.left+t,top:this.box.top+e,width:t,height:e}),this.nodes[3]=new QuadTreeNode({left:this.box.left,top:this.box.top+e,width:t,height:e})}getBoxPosition(t){var e=t.plotX<this.box.left+this.box.width/2,t=t.plotY<this.box.top+this.box.height/2;let o;return o=e?t?0:3:t?1:2}insert(t,e){let o;this.isInternal?this.nodes[this.getBoxPosition(t)].insert(t,e-1):(this.isEmpty=!1,this.body?e?(this.isInternal=!0,this.divideBox(),!0!==this.body&&(this.nodes[this.getBoxPosition(this.body)].insert(this.body,e-1),this.body=!0),this.nodes[this.getBoxPosition(t)].insert(t,e-1)):((o=new QuadTreeNode({top:t.plotX||NaN,left:t.plotY||NaN,width:.1,height:.1})).body=t,o.isInternal=!1,this.nodes.push(o)):(this.isInternal=!1,this.body=t))}updateMassAndCenter(){let t=0,e=0,o=0;if(this.isInternal){for(const i of this.nodes)i.isEmpty||(t+=i.mass,e+=i.plotX*i.mass,o+=i.plotY*i.mass);e/=t,o/=t}else this.body&&(t=this.body.mass,e=this.body.plotX,o=this.body.plotY);this.mass=t,this.plotX=e,this.plotY=o}}const Networkgraph_QuadTreeNode=QuadTreeNode;class QuadTree{constructor(t,e,o,i){this.box={left:t,top:e,width:o,height:i},this.maxDepth=25,this.root=new Networkgraph_QuadTreeNode(this.box),this.root.isInternal=!0,this.root.isRoot=!0,this.root.divideBox()}calculateMassAndCenter(){this.visitNodeRecursive(null,null,function(t){t.updateMassAndCenter()})}insertNodes(t){for(const e of t)this.root.insert(e,this.maxDepth)}visitNodeRecursive(t,e,o){let i;if(t=t||this.root,!1!==(i=t===this.root&&e?e(t):i)){for(const s of t.nodes){if(s.isInternal){if(!1===(i=e?e(s):i))continue;this.visitNodeRecursive(s,e,o)}else s.body&&e&&e(s.body);o&&o(s)}t===this.root&&o&&o(t)}}}const Networkgraph_QuadTree=QuadTree;function VerletIntegration_attractive(t,e,o){var i=t.getMass(),s=-o.x*e*this.diffTemperature,o=-o.y*e*this.diffTemperature;t.fromNode.fixedPosition||(t.fromNode.plotX-=s*i.fromNode/t.fromNode.degree,t.fromNode.plotY-=o*i.fromNode/t.fromNode.degree),t.toNode.fixedPosition||(t.toNode.plotX+=s*i.toNode/t.toNode.degree,t.toNode.plotY+=o*i.toNode/t.toNode.degree)}function VerletIntegration_attractiveForceFunction(t,e){return(e-t)/t}function VerletIntegration_barycenter(){const t=this.options.gravitationalConstant||0,e=(this.barycenter.xFactor-(this.box.left+this.box.width)/2)*t,o=(this.barycenter.yFactor-(this.box.top+this.box.height)/2)*t;this.nodes.forEach(function(t){t.fixedPosition||(t.plotX-=e/t.mass/t.degree,t.plotY-=o/t.mass/t.degree)})}function VerletIntegration_getK(t){return Math.pow(t.box.width*t.box.height/t.nodes.length,.5)}function VerletIntegration_integrate(t,e){const o=-t.options.friction,i=t.options.maxSpeed,s=e.prevX,r=e.prevY,a=(e.plotX+e.dispX-s)*o,n=(e.plotY+e.dispY-r)*o,h=Math.abs,d=h(a)/(a||1),l=h(n)/(n||1),p=d*Math.min(i,Math.abs(a)),c=l*Math.min(i,Math.abs(n));e.prevX=e.plotX+e.dispX,e.prevY=e.plotY+e.dispY,e.plotX+=p,e.plotY+=c,e.temperature=t.vectorLength({x:p,y:c})}function VerletIntegration_repulsive(t,e,o){e=e*this.diffTemperature/t.mass/t.degree;t.fixedPosition||(t.plotX+=o.x*e,t.plotY+=o.y*e)}function VerletIntegration_repulsiveForceFunction(t,e){return(e-t)/t*(t<e?1:0)}const VerletIntegration={attractive:VerletIntegration_attractive,attractiveForceFunction:VerletIntegration_attractiveForceFunction,barycenter:VerletIntegration_barycenter,getK:VerletIntegration_getK,integrate:VerletIntegration_integrate,repulsive:VerletIntegration_repulsive,repulsiveForceFunction:VerletIntegration_repulsiveForceFunction},Networkgraph_VerletIntegration=VerletIntegration,win=external_highcharts_src_js_default_default()["win"],{clamp,defined:ReingoldFruchtermanLayout_defined,isFunction,fireEvent,pick:ReingoldFruchtermanLayout_pick}=external_highcharts_src_js_default_default();class ReingoldFruchtermanLayout{constructor(){this.box={},this.currentStep=0,this.initialRendering=!0,this.links=[],this.nodes=[],this.series=[],this.simulation=!1}static compose(t){Series_GraphLayoutComposition.compose(t),Series_GraphLayoutComposition.integrations.euler=Networkgraph_EulerIntegration,Series_GraphLayoutComposition.integrations.verlet=Networkgraph_VerletIntegration,Series_GraphLayoutComposition.layouts["reingold-fruchterman"]=ReingoldFruchtermanLayout}init(t){this.options=t,this.nodes=[],this.links=[],this.series=[],this.box={x:0,y:0,width:0,height:0},this.setInitialRendering(!0),this.integration=Series_GraphLayoutComposition.integrations[t.integration],this.enableSimulation=t.enableSimulation,this.attractiveForce=ReingoldFruchtermanLayout_pick(t.attractiveForce,this.integration.attractiveForceFunction),this.repulsiveForce=ReingoldFruchtermanLayout_pick(t.repulsiveForce,this.integration.repulsiveForceFunction),this.approximation=t.approximation}updateSimulation(t){this.enableSimulation=ReingoldFruchtermanLayout_pick(t,this.options.enableSimulation)}start(){const t=this,e=this.series,o=this.options;t.currentStep=0,t.forces=e[0]&&e[0].forces||[],t.chart=e[0]&&e[0].chart,t.initialRendering&&(t.initPositions(),e.forEach(function(t){t.finishedAnimating=!0,t.render()})),t.setK(),t.resetSimulation(o),t.enableSimulation&&t.step()}step(){var t=this.series;this.currentStep++,"barnes-hut"===this.approximation&&(this.createQuadTree(),this.quadTree.calculateMassAndCenter());for(const e of this.forces||[])this[e+"Forces"](this.temperature);if(this.applyLimits(),this.temperature=this.coolDown(this.startTemperature,this.diffTemperature,this.currentStep),this.prevSystemTemperature=this.systemTemperature,this.systemTemperature=this.getSystemTemperature(),this.enableSimulation){for(const o of t)o.chart&&o.render();this.maxIterations--&&isFinite(this.temperature)&&!this.isStable()?(this.simulation&&win.cancelAnimationFrame(this.simulation),this.simulation=win.requestAnimationFrame(()=>this.step())):(this.simulation=!1,this.series.forEach(t=>{fireEvent(t,"afterSimulation")}))}}stop(){this.simulation&&win.cancelAnimationFrame(this.simulation)}setArea(t,e,o,i){this.box={left:t,top:e,width:o,height:i}}setK(){this.k=this.options.linkLength||this.integration.getK(this)}addElementsToCollection(t,e){for(const o of t)-1===e.indexOf(o)&&e.push(o)}removeElementFromCollection(t,e){t=e.indexOf(t);-1!==t&&e.splice(t,1)}clear(){this.nodes.length=0,this.links.length=0,this.series.length=0,this.resetSimulation()}resetSimulation(){this.forcedStop=!1,this.systemTemperature=0,this.setMaxIterations(),this.setTemperature(),this.setDiffTemperature()}restartSimulation(){this.simulation?this.resetSimulation():(this.setInitialRendering(!1),this.enableSimulation?this.start():this.setMaxIterations(1),this.chart&&this.chart.redraw(),this.setInitialRendering(!0))}setMaxIterations(t){this.maxIterations=ReingoldFruchtermanLayout_pick(t,this.options.maxIterations)}setTemperature(){this.temperature=this.startTemperature=Math.sqrt(this.nodes.length)}setDiffTemperature(){this.diffTemperature=this.startTemperature/(this.options.maxIterations+1)}setInitialRendering(t){this.initialRendering=t}createQuadTree(){this.quadTree=new Networkgraph_QuadTree(this.box.left,this.box.top,this.box.width,this.box.height),this.quadTree.insertNodes(this.nodes)}initPositions(){const t=this.options.initialPositions;if(isFunction(t)){t.call(this);for(const e of this.nodes)ReingoldFruchtermanLayout_defined(e.prevX)||(e.prevX=e.plotX),ReingoldFruchtermanLayout_defined(e.prevY)||(e.prevY=e.plotY),e.dispX=0,e.dispY=0}else"circle"===t?this.setCircularPositions():this.setRandomPositions()}setCircularPositions(){const o=this.box,t=this.nodes,e=t.length+1,i=2*Math.PI/e,s=t.filter(function(t){return 0===t.linksTo.length}),r={},a=this.options.initialPositionRadius,n=t=>{for(const e of t.linksFrom||[])r[e.toNode.id]||(r[e.toNode.id]=!0,h.push(e.toNode),n(e.toNode))};let h=[];for(const l of s)h.push(l),n(l);if(h.length)for(const d of t)-1===h.indexOf(d)&&h.push(d);else h=t;let d;for(let t=0,e=h.length;t<e;++t)(d=h[t]).plotX=d.prevX=ReingoldFruchtermanLayout_pick(d.plotX,o.width/2+a*Math.cos(t*i)),d.plotY=d.prevY=ReingoldFruchtermanLayout_pick(d.plotY,o.height/2+a*Math.sin(t*i)),d.dispX=0,d.dispY=0}setRandomPositions(){var o=this.box,i=this.nodes,s=i.length+1,r=t=>{t=t*t/Math.PI;return t-=Math.floor(t)};let a;for(let t=0,e=i.length;t<e;++t)(a=i[t]).plotX=a.prevX=ReingoldFruchtermanLayout_pick(a.plotX,o.width*r(t)),a.plotY=a.prevY=ReingoldFruchtermanLayout_pick(a.plotY,o.height*r(s+t)),a.dispX=0,a.dispY=0}force(t,...e){this.integration[t].apply(this,e)}barycenterForces(){this.getBarycenter(),this.force("barycenter")}getBarycenter(){let t=0,e=0,o=0;for(const i of this.nodes)e+=i.plotX*i.mass,o+=i.plotY*i.mass,t+=i.mass;return this.barycenter={x:e,y:o,xFactor:e/t,yFactor:o/t},this.barycenter}barnesHutApproximation(t,e){var o=this.getDistXY(t,e),i=this.vectorLength(o);let s,r;return t!==e&&0!==i&&(e.isInternal?s=!(e.boxSize/i<this.options.theta&&0!==i)||(r=this.repulsiveForce(i,this.k),this.force("repulsive",t,r*e.mass,o,i),!1):(r=this.repulsiveForce(i,this.k),this.force("repulsive",t,r*e.mass,o,i))),s}repulsiveForces(){var t,e,o;if("barnes-hut"===this.approximation)for(const i of this.nodes)this.quadTree.visitNodeRecursive(null,t=>this.barnesHutApproximation(i,t));else for(const s of this.nodes)for(const r of this.nodes)s===r||s.fixedPosition||(o=this.getDistXY(s,r),0!==(e=this.vectorLength(o))&&(t=this.repulsiveForce(e,this.k),this.force("repulsive",s,t*r.mass,o,e)))}attractiveForces(){var t,e,o;for(const i of this.links)i.fromNode&&i.toNode&&(t=this.getDistXY(i.fromNode,i.toNode),0!==(e=this.vectorLength(t))&&(o=this.attractiveForce(e,this.k),this.force("attractive",i,o,t,e)))}applyLimits(){for(const t of this.nodes)t.fixedPosition||(this.integration.integrate(this,t),this.applyLimitBox(t,this.box),t.dispX=0,t.dispY=0)}applyLimitBox(t,e){var o=t.radius;t.plotX=clamp(t.plotX,e.left+o,e.width-o),t.plotY=clamp(t.plotY,e.top+o,e.height-o)}coolDown(t,e,o){return t-e*o}isStable(){return Math.abs(this.systemTemperature-this.prevSystemTemperature)<1e-5||this.temperature<=0}getSystemTemperature(){let t=0;for(const e of this.nodes)t+=e.temperature;return t}vectorLength(t){return Math.sqrt(t.x*t.x+t.y*t.y)}getDistR(t,e){t=this.getDistXY(t,e);return this.vectorLength(t)}getDistXY(t,e){var o=t.plotX-e.plotX,t=t.plotY-e.plotY;return{x:o,y:t,absX:Math.abs(o),absY:Math.abs(t)}}}const Networkgraph_ReingoldFruchtermanLayout=ReingoldFruchtermanLayout,{merge:SimulationSeriesUtilities_merge,syncTimeout}=external_highcharts_src_js_default_default(),animObject=external_highcharts_src_js_default_default()["animObject"];function initDataLabelsDefer(){var t=this.options.dataLabels;t?.defer&&this.options.layoutAlgorithm?.enableSimulation?syncTimeout(()=>{this.deferDataLabels=!1},t?animObject(t.animation).defer:0):this.deferDataLabels=!1}function initDataLabels(){var t=this,e=t.options.dataLabels;if(t.dataLabelsGroup)return t.dataLabelsGroup.attr(SimulationSeriesUtilities_merge({opacity:1},this.getPlotBox("data-labels"))),t.dataLabelsGroup;{const o=this.initDataLabelsGroup();return!t.chart.styledMode&&e?.style&&o.css(e.style),o.attr({opacity:0}),t.visible&&o.show(),o}}const DataLabelsDeferUtils={initDataLabels:initDataLabels,initDataLabelsDefer:initDataLabelsDefer},SimulationSeriesUtilities=DataLabelsDeferUtils,deg2rad=external_highcharts_src_js_default_default()["deg2rad"],{addEvent:TextPath_addEvent,merge:TextPath_merge,uniqueKey,defined:TextPath_defined,extend:TextPath_extend}=external_highcharts_src_js_default_default();function setTextPath(s,t){t=TextPath_merge(!0,{enabled:!0,attributes:{dy:-5,startOffset:"50%",textAnchor:"middle"}},t);const r=this.renderer.url,a=this.text||this,e=a.textPath,{attributes:n,enabled:h}=t;return s=s||e&&e.path,e&&e.undo(),s&&h?(t=TextPath_addEvent(a,"afterModifyTree",e=>{if(s&&h){let t=s.attr("id");t||s.attr("id",t=uniqueKey());const i={x:0,y:0};TextPath_defined(n.dx)&&(i.dx=n.dx,delete n.dx),TextPath_defined(n.dy)&&(i.dy=n.dy,delete n.dy),a.attr(i),this.attr({transform:""}),this.box&&(this.box=this.box.destroy());var o=e.nodes.slice(0);e.nodes.length=0,e.nodes[0]={tagName:"textPath",attributes:TextPath_extend(n,{"text-anchor":n.textAnchor,href:r+"#"+t}),children:o}}}),a.textPath={path:s,undo:t}):(a.attr({dx:0,dy:0}),delete a.textPath),this.added&&(a.textCache="",this.renderer.buildText(a)),this}function setPolygon(t){const e=t.bBox,s=this.element?.querySelector("textPath");if(s){const c=[],{b:u,h:o}=this.renderer.fontMetrics(this.element),f=o-u,g=new RegExp('(<tspan>|<tspan(?!\\sclass="highcharts-br")[^>]*>|<\\/tspan>)',"g"),m=s.innerHTML.replace(g,"").split(/<tspan class="highcharts-br"[^>]*>/),_=m.length;var i=(t,e)=>{var{x:e,y:o}=e,t=(s.getRotationOfChar(t)-90)*deg2rad,i=Math.cos(t),t=Math.sin(t);return[[e-f*i,o-f*t],[e+u*i,o+u*t]]};for(let e=0,o=0;o<_;o++){var r=m[o].length;for(let t=0;t<r;t+=5)try{var a=e+t+o,[n,h]=i(a,s.getStartPositionOfChar(a));0===t?(c.push(h),c.push(n)):(0===o&&c.unshift(h),o===_-1&&c.push(n))}catch(t){break}e+=r-1;try{var d=e+o,[l,p]=i(d,s.getEndPositionOfChar(d));c.unshift(p),c.unshift(l)}catch(t){break}}c.length&&c.push(c[0].slice()),e.polygon=c}return e}function drawTextPath(t){const e=t.labelOptions,o=t.point,i=e[o.formatPrefix+"TextPath"]||e.textPath;i&&!e.useHTML&&(this.setTextPath(o.getDataLabelPath?.(this)||o.graphic,i),o.dataLabelPath&&!i.enabled&&(o.dataLabelPath=o.dataLabelPath.destroy()))}function TextPath_compose(t){TextPath_addEvent(t,"afterGetBBox",setPolygon),TextPath_addEvent(t,"beforeAddingDataLabel",drawTextPath);const e=t.prototype;e.setTextPath||(e.setTextPath=setTextPath)}const TextPath={compose:TextPath_compose},Extensions_TextPath=TextPath,noop=external_highcharts_src_js_default_default()["noop"],{series:Series,seriesTypes:{column:{prototype:columnProto},line:{prototype:lineProto}}}=external_highcharts_src_js_default_SeriesRegistry_default(),{initDataLabels:NetworkgraphSeries_initDataLabels,initDataLabelsDefer:NetworkgraphSeries_initDataLabelsDefer}=SimulationSeriesUtilities,{addEvent:NetworkgraphSeries_addEvent,defined:NetworkgraphSeries_defined,extend:NetworkgraphSeries_extend,merge:NetworkgraphSeries_merge,pick:NetworkgraphSeries_pick}=external_highcharts_src_js_default_default();Extensions_TextPath.compose(external_highcharts_src_js_default_SVGElement_default());class NetworkgraphSeries extends Series{constructor(){super(...arguments),this.deferDataLabels=!0}static compose(t){Series_DragNodesComposition.compose(t),Networkgraph_ReingoldFruchtermanLayout.compose(t)}deferLayout(){const t=this.options.layoutAlgorithm,e=this.chart.options.chart;let o,i=this.chart.graphLayoutsStorage,s=this.chart.graphLayoutsLookup;this.visible&&(i||(this.chart.graphLayoutsStorage=i={},this.chart.graphLayoutsLookup=s=[]),(o=i[t.type])||(t.enableSimulation=NetworkgraphSeries_defined(e.forExport)?!e.forExport:t.enableSimulation,i[t.type]=o=new Series_GraphLayoutComposition.layouts[t.type],o.init(t),s.splice(o.index,0,o)),(this.layout=o).setArea(0,0,this.chart.plotWidth,this.chart.plotHeight),o.addElementsToCollection([this],o.series),o.addElementsToCollection(this.nodes,o.nodes),o.addElementsToCollection(this.points,o.links))}destroy(){this.layout&&this.layout.removeElementFromCollection(this,this.layout.series),Series_NodesComposition.destroy.call(this)}drawDataLabels(){if(!this.deferDataLabels){const e=this.options.dataLabels;let t;e?.textPath&&(t=e.textPath),Series.prototype.drawDataLabels.call(this,this.nodes),e?.linkTextPath&&(e.textPath=e.linkTextPath),Series.prototype.drawDataLabels.call(this,this.data),e?.textPath&&(e.textPath=t)}}generatePoints(){let t,e;for(Series_NodesComposition.generatePoints.apply(this,arguments),this.options.nodes&&this.options.nodes.forEach(function(t){this.nodeLookup[t.id]||(this.nodeLookup[t.id]=this.createNode(t.id))},this),e=this.nodes.length-1;0<=e;e--)(t=this.nodes[e]).degree=t.getDegree(),t.radius=NetworkgraphSeries_pick(t.marker&&t.marker.radius,this.options.marker&&this.options.marker.radius,0),t.key=t.name,this.nodeLookup[t.id]||t.remove();this.data.forEach(function(t){t.formatPrefix="link"}),this.indexateNodes()}getPointsCollection(){return this.nodes||[]}indexateNodes(){this.nodes.forEach(function(t,e){t.index=e})}init(t,e){return super.init(t,e),NetworkgraphSeries_initDataLabelsDefer.call(this),NetworkgraphSeries_addEvent(this,"updatedData",()=>{this.layout&&this.layout.stop()}),NetworkgraphSeries_addEvent(this,"afterUpdate",()=>{this.nodes.forEach(t=>{t&&t.series&&t.resolveColor()})}),NetworkgraphSeries_addEvent(this,"afterSimulation",function(){this.deferDataLabels=!1,this.drawDataLabels()}),this}markerAttribs(t,e){const o=Series.prototype.markerAttribs.call(this,t,e);return NetworkgraphSeries_defined(t.plotY)||(o.y=0),o.x=(t.plotX||0)-(o.width||0)/2,o}pointAttribs(t,e){var e=e||t&&t.state||"normal",o=this.options.states[e];let i=Series.prototype.pointAttribs.call(this,t,e);return t&&!t.isNode&&(i=t.getLinkAttributes(),o&&(i={stroke:o.linkColor||i.stroke,dashstyle:o.linkDashStyle||i.dashstyle,opacity:NetworkgraphSeries_pick(o.linkOpacity,i.opacity),"stroke-width":o.linkColor||i["stroke-width"]})),i}render(){const t=this,e=t.points,o=t.chart.hoverPoint,i=[];t.points=t.nodes,lineProto.render.call(this),(t.points=e).forEach(function(t){t.fromNode&&t.toNode&&(t.renderLink(),t.redrawLink())}),o&&o.series===t&&t.redrawHalo(o),t.chart.hasRendered&&!t.options.dataLabels.allowOverlap&&(t.nodes.concat(t.points).forEach(function(t){t.dataLabel&&i.push(t.dataLabel)}),t.chart.hideOverlappingLabels(i))}setState(t,e){e?(this.points=this.nodes.concat(this.data),Series.prototype.setState.apply(this,arguments),this.points=this.data):Series.prototype.setState.apply(this,arguments),this.layout.simulation||t||this.render()}translate(){this.generatePoints(),this.deferLayout(),this.nodes.forEach(function(t){t.isInside=!0,t.linksFrom.forEach(function(t){t.shapeType="path",t.y=1})})}}NetworkgraphSeries.defaultOptions=NetworkgraphSeries_merge(Series.defaultOptions,Networkgraph_NetworkgraphSeriesDefaults),NetworkgraphSeries_extend(NetworkgraphSeries.prototype,{pointClass:Networkgraph_NetworkgraphPoint,animate:void 0,directTouch:!0,drawGraph:void 0,forces:["barycenter","repulsive","attractive"],hasDraggableNodes:!0,isCartesian:!1,noSharedTooltip:!0,pointArrayMap:["from","to"],requireSorting:!1,trackerGroups:["group","markerGroup","dataLabelsGroup"],initDataLabels:NetworkgraphSeries_initDataLabels,buildKDTree:noop,createNode:Series_NodesComposition.createNode,drawTracker:columnProto.drawTracker,onMouseDown:Series_DragNodesComposition.onMouseDown,onMouseMove:Series_DragNodesComposition.onMouseMove,onMouseUp:Series_DragNodesComposition.onMouseUp,redrawHalo:Series_DragNodesComposition.redrawHalo}),external_highcharts_src_js_default_SeriesRegistry_default().registerSeriesType("networkgraph",NetworkgraphSeries);const Networkgraph_NetworkgraphSeries=NetworkgraphSeries,G=external_highcharts_src_js_default_default(),networkgraph_src=(Networkgraph_NetworkgraphSeries.compose(G.Chart),external_highcharts_src_js_default_default());export{networkgraph_src as default};