import*as __WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__ from"../highcharts.src.js";var __webpack_require__={n:e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},d:(e,t)=>{for(var i in t)__webpack_require__.o(t,i)&&!__webpack_require__.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const external_highcharts_src_js_default_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default;var external_highcharts_src_js_default_default=__webpack_require__.n(external_highcharts_src_js_default_namespaceObject);const external_highcharts_src_js_default_SeriesRegistry_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default.SeriesRegistry;var external_highcharts_src_js_default_SeriesRegistry_default=__webpack_require__.n(external_highcharts_src_js_default_SeriesRegistry_namespaceObject);const external_highcharts_src_js_default_Point_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default.Point;var external_highcharts_src_js_default_Point_default=__webpack_require__.n(external_highcharts_src_js_default_Point_namespaceObject);const{line:{prototype:{pointClass:LinePoint}},pie:{prototype:{pointClass:PiePoint}}}=external_highcharts_src_js_default_SeriesRegistry_default().seriesTypes,{defined,isNumber,merge,objectEach,pick}=external_highcharts_src_js_default_default();class TimelinePoint extends LinePoint{alignConnector(){const e=this,t=e.series,i=e.dataLabel,s=i.connector,n=i.options||{},r=n.connectorWidth||0,a=e.series.chart,o=s.getBBox(),l={x:o.x+(i.translateX||0),y:o.y+(i.translateY||0)};a.inverted?l.y-=r/2:l.x+=r/2;var c=a.isInsidePlot(l.x,l.y);s[c?"animate":"attr"]({d:e.getConnectorPath()}),s.addClass("highcharts-color-"+e.colorIndex),t.chart.styledMode||s.attr({stroke:n.connectorColor||e.color,"stroke-width":n.connectorWidth,opacity:i[defined(i.newOpacity)?"newOpacity":"opacity"]})}drawConnector(){const e=this,{dataLabel:t,series:i}=e;t&&(t.connector||(t.connector=i.chart.renderer.path(e.getConnectorPath()).attr({zIndex:-1}).add(t)),e.series.chart.isInsidePlot(t.x||0,t.y||0)&&e.alignConnector())}getConnectorPath(){const{plotX:e=0,plotY:t=0,series:s,dataLabel:n}=this,r=s.chart,a=s.xAxis.len,o=r.inverted,l=o?"x2":"y2";if(n){var c=n.targetPosition,h=(n.alignAttr||n)[l[0]]<s.yAxis.len/2;let i={x1:e,y1:t,x2:e,y2:(isNumber(c.y)?c:n).y};return o&&(i={x1:t,y1:a-e,x2:c.x||n.x,y2:a-e}),h&&(i[l]+=n[o?"width":"height"]||0),objectEach(i,(e,t)=>{i[t]-=(n.alignAttr||n)[t[0]]}),r.renderer.crispLine([["M",i.x1,i.y1],["L",i.x2,i.y2]],n.options?.connectorWidth||0)}return[]}constructor(e,t){super(e,t),this.name??(this.name=t&&null!==t.y||!e.options.nullInteraction?"Event":"Null"),this.y=1}isValid(){return null!==this.options.y||this.series.options.nullInteraction||!0}setState(){const e=super.setState;this.isNull&&!this.series.options.nullInteraction||e.apply(this,arguments)}setVisible(e,t){const i=this.series;t=pick(t,i.options.ignoreHiddenPoint),PiePoint.prototype.setVisible.call(this,e,!1),i.processData(),t&&i.chart.redraw()}applyOptions(e,t){const i=this.isNull||null===e||null===e.y,s=this.series,n=(t||e?.x||(isNumber(this.x)?t=this.x:isNumber(s?.xIncrement)&&(t=s.xIncrement||0,s.autoIncrement())),e=external_highcharts_src_js_default_Point_default().prototype.optionsToObject.call(this,e??(s.options.nullInteraction?{y:0}:null)),super.applyOptions(e,t));return this.userDLOptions=merge(this.userDLOptions,e.dataLabels),n.isNull=i,n}}const Timeline_TimelinePoint=TimelinePoint,TimelineSeriesDefaults={colorByPoint:!0,stickyTracking:!1,ignoreHiddenPoint:!0,legendType:"point",lineWidth:4,tooltip:{headerFormat:'<span style="color:{point.color}">●</span> <span style="font-size: 0.8em"> {point.key}</span><br/>',pointFormat:"{point.description}"},states:{hover:{lineWidthPlus:0}},dataLabels:{enabled:!0,allowOverlap:!0,alternate:!0,backgroundColor:"#ffffff",borderWidth:1,borderColor:"#999999",borderRadius:3,color:"#333333",connectorWidth:1,distance:void 0,formatter:function(){let e;return e=this.series.chart.styledMode?'<span class="highcharts-color-'+this.point.colorIndex+'">● </span>':'<span style="color:'+this.point.color+'">● </span>',e+='<span class="highcharts-strong">'+(this.key||"")+"</span><br/>"+(this.label||"")},style:{textOutline:"none",fontWeight:"normal",fontSize:"0.8em",textAlign:"left"},shadow:!1,verticalAlign:"middle"},marker:{enabledThreshold:0,symbol:"square",radius:6,lineWidth:2,height:15},showInLegend:!1,colorKey:"x",legendSymbol:"rectangle"},Timeline_TimelineSeriesDefaults=TimelineSeriesDefaults,{column:ColumnSeries,line:LineSeries}=external_highcharts_src_js_default_SeriesRegistry_default().seriesTypes,{addEvent,arrayMax,arrayMin,defined:TimelineSeries_defined,extend,merge:TimelineSeries_merge,pick:TimelineSeries_pick}=external_highcharts_src_js_default_default();class TimelineSeries extends LineSeries{alignDataLabel(e,t,i,s){const n=this,r=n.chart.inverted,a=n.visibilityMap.filter(e=>!!e),o=n.visiblePointsCount||0,l=a.indexOf(e),c=!l||l===o-1,h=n.options.dataLabels,_=e.userDLOptions||{},d=h.alternate?c?1.5:2:1,p=Math.floor(n.xAxis.len/o),u=t.padding;let g,m,f;e.visible&&(g=Math.abs(_.x||e.options.dataLabels.x),f=r?(m=2*(g-u)-(e.itemHeight||0)/2,{width:TimelineSeries_pick(h.style?.width,.4*n.yAxis.len+"px"),textOverflow:(t.width||0)/m*(t.height||0)/2>p*d?"ellipsis":"none"}):{width:(_.width||h.width||p*d-2*u)+"px"},t.css(f),n.chart.styledMode||t.shadow(h.shadow)),super.alignDataLabel.apply(n,arguments)}bindAxes(){super.bindAxes(),this.xAxis.userOptions.type||(this.xAxis.categories=this.xAxis.hasNames=!0)}distributeDL(){var e=this.options.dataLabels,t=this.chart.inverted;let i=1;if(e){var s=TimelineSeries_pick(e.distance,t?20:100);for(const n of this.points){const r={[t?"x":"y"]:e.alternate&&i%2?-s:s};t&&(r.align=e.alternate&&i%2?"right":"left"),n.options.dataLabels=TimelineSeries_merge(r,n.userDLOptions),i++}}}generatePoints(){super.generatePoints();const i=this.points,s=i.length,n=this.getColumn("x");for(let e=0,t=s;e<t;++e){var r=n[e];i[e].applyOptions({x:r},r)}}getVisibilityMap(){const t=this.options.nullInteraction,e=((this.data.length?this:this.options).data||[]).map(e=>!(!e||!1===e.visible||e.isNull&&!t)&&e);return e}getXExtremes(e){const i=this,t=e.filter((e,t)=>i.points[t].isValid()&&i.points[t].visible);return{min:arrayMin(t),max:arrayMax(t)}}init(){const s=this;super.init.apply(s,arguments),s.eventsToUnbind.push(addEvent(s,"afterTranslate",function(){let e,t=Number.MAX_VALUE;for(const i of s.points)i.isInside=i.isInside&&i.visible,!i.visible||i.isNull&&!s.options.nullInteraction||(TimelineSeries_defined(e)&&(t=Math.min(t,Math.abs(i.plotX-e))),e=i.plotX);s.closestPointRangePx=t})),s.eventsToUnbind.push(addEvent(s,"drawDataLabels",function(){s.distributeDL()})),s.eventsToUnbind.push(addEvent(s,"afterDrawDataLabels",function(){let e;for(const t of s.points)(e=t.dataLabel)&&(e.animate=function(e){return this.targetPosition&&(this.targetPosition=e),this.renderer.Element.prototype.animate.apply(this,arguments)},e.targetPosition||(e.targetPosition={}),t.drawConnector())})),s.eventsToUnbind.push(addEvent(s.chart,"afterHideOverlappingLabel",function(){for(const e of s.points)e.dataLabel&&e.dataLabel.connector&&e.dataLabel.oldOpacity!==e.dataLabel.newOpacity&&e.alignConnector()}))}markerAttribs(e,t){const i=this,s=i.options.marker,n=e.marker||{},r=n.symbol||s.symbol,a=TimelineSeries_pick(n.width,s.width,i.closestPointRangePx),o=TimelineSeries_pick(n.height,s.height);let l,c,h=0;if(i.xAxis.dateTime)return super.markerAttribs(e,t);t&&(l=s.states[t]||{},c=n.states&&n.states[t]||{},h=TimelineSeries_pick(c.radius,l.radius,h+(l.radiusPlus||0))),e.hasImage=r&&0===r.indexOf("url");t={x:Math.floor(e.plotX)-a/2-h/2,y:e.plotY-o/2-h/2,width:a+h,height:o+h};return i.chart.inverted?{y:t.x&&t.width&&i.xAxis.len-t.x-t.width,x:t.y,width:t.height,height:t.width}:t}}TimelineSeries.defaultOptions=TimelineSeries_merge(LineSeries.defaultOptions,Timeline_TimelineSeriesDefaults),addEvent(TimelineSeries,"afterProcessData",function(){var e=this,t=e.getColumn("x");let i=0;e.visibilityMap=e.getVisibilityMap();for(const s of e.visibilityMap)s&&i++;e.visiblePointsCount=i,this.dataTable.setColumn("y",new Array(t.length).fill(1))}),extend(TimelineSeries.prototype,{drawTracker:ColumnSeries.prototype.drawTracker,pointClass:Timeline_TimelinePoint,trackerGroups:["markerGroup","dataLabelsGroup"]}),external_highcharts_src_js_default_SeriesRegistry_default().registerSeriesType("timeline",TimelineSeries);const Timeline_TimelineSeries=null,timeline_src=external_highcharts_src_js_default_default();export{timeline_src as default};