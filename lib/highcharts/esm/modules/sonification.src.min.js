import*as __WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__ from"../highcharts.src.js";var __webpack_require__={n:e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},d:(e,t)=>{for(var i in t)__webpack_require__.o(t,i)&&!__webpack_require__.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const external_highcharts_src_js_default_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default;var external_highcharts_src_js_default_default=__webpack_require__.n(external_highcharts_src_js_default_namespaceObject);const Options={sonification:{enabled:!0,duration:6e3,afterSeriesWait:700,updateInterval:200,masterVolume:.7,order:"sequential",showTooltip:!0,showCrosshair:!0,pointGrouping:{enabled:!0,groupTimespan:15,algorithm:"minmax",prop:"y"},defaultInstrumentOptions:{roundToMusicalNotes:!0,instrument:"piano",mapping:{time:"x",pan:"x",noteDuration:200,pitch:{mapTo:"y",min:"c2",max:"c6",within:"yAxis"},gapBetweenNotes:100}},defaultSpeechOptions:{language:"en-US",mapping:{time:"x",rate:1.3,volume:.4},pointGrouping:{algorithm:"last"}}},exporting:{menuItemDefinitions:{downloadMIDI:{textKey:"downloadMIDI",onclick:function(){this.sonification&&this.sonification.downloadMIDI()}},playAsSound:{textKey:"playAsSound",onclick:function(){const e=this.sonification;e&&e.isPlaying()?e.cancel():this.sonify()}}}},lang:{downloadMIDI:"Download MIDI",playAsSound:"Play as sound"}},Sonification_Options=Options,{clamp,defined,pick}=external_highcharts_src_js_default_default();function getPitchTrackedMultiplierVal(e,t){var i=(3.5-1.7*e)/1.8;return(.2414*e-.2414)*Math.log(t)+i}function miniRampToVolAtTime(e,t,i){e.gain.cancelScheduledValues(t),e.gain.setTargetAtTime(i,t,SynthPatch.stopRampTime/4),e.gain.setValueAtTime(i,t+SynthPatch.stopRampTime)}function scheduleGainEnvelope(n,e,o,t,s=1){const i="attack"===e,a=t.gain;a.cancelScheduledValues(o),n.length?(1<n[0].t&&n.unshift({t:0,vol:i?0:1}),n.forEach((e,t)=>{var t=n[t-1],i=t?(e.t-t.t)/1e3:0,t=o+(t?t.t/1e3+SynthPatch.stopRampTime:0);a.setTargetAtTime(e.vol*s,t,Math.max(i,SynthPatch.stopRampTime)/2)})):miniRampToVolAtTime(t,o,i?s:0)}class PulseOscNode{constructor(e,t){this.pulseWidth=Math.min(Math.max(0,t.pulseWidth||.5));var i=()=>new OscillatorNode(e,{type:"sawtooth",detune:t.detune,frequency:Math.max(1,t.frequency||350)});this.sawOscA=i(),this.sawOscB=i(),this.phaseInverter=new GainNode(e,{gain:-1}),this.masterGain=new GainNode(e),this.delayNode=new DelayNode(e,{delayTime:this.pulseWidth/this.sawOscA.frequency.value}),this.sawOscA.connect(this.masterGain),this.sawOscB.connect(this.phaseInverter),this.phaseInverter.connect(this.delayNode),this.delayNode.connect(this.masterGain)}connect(e){this.masterGain.connect(e)}getFrequencyFacade(){const n=this;return{cancelScheduledValues(e){return n.sawOscA.frequency.cancelScheduledValues(e),n.sawOscB.frequency.cancelScheduledValues(e),n.delayNode.delayTime.cancelScheduledValues(e),n.sawOscA.frequency},setValueAtTime(e,t){return this.cancelScheduledValues(t),n.sawOscA.frequency.setValueAtTime(e,t),n.sawOscB.frequency.setValueAtTime(e,t),n.delayNode.delayTime.setValueAtTime(Math.round(1e4*n.pulseWidth/e)/1e4,t),n.sawOscA.frequency},setTargetAtTime(e,t,i){return this.cancelScheduledValues(t),n.sawOscA.frequency.setTargetAtTime(e,t,i),n.sawOscB.frequency.setTargetAtTime(e,t,i),n.delayNode.delayTime.setTargetAtTime(Math.round(1e4*n.pulseWidth/e)/1e4,t,i),n.sawOscA.frequency}}}getPWMTarget(){return this.delayNode.delayTime}start(){this.sawOscA.start(),this.sawOscB.start()}stop(e){this.sawOscA.stop(e),this.sawOscB.stop(e)}}class Oscillator{constructor(e,t,i){this.audioContext=e,this.options=t,this.fmOscillatorIx=t.fmOscillator,this.vmOscillatorIx=t.vmOscillator,this.createSoundSource(),this.createGain(),this.createFilters(),this.createVolTracking(),i&&this.connect(i)}connect(e){[this.lowpassNode,this.highpassNode,this.volTrackingNode,this.vmNode,this.gainNode,this.whiteNoise,this.pulseNode,this.oscNode].reduce((e,t)=>t?(t.connect(e),t):e,e)}start(){this.oscNode&&this.oscNode.start(),this.whiteNoise&&this.whiteNoise.start(),this.pulseNode&&this.pulseNode.start()}stopAtTime(e){this.oscNode&&this.oscNode.stop(e),this.whiteNoise&&this.whiteNoise.stop(e),this.pulseNode&&this.pulseNode.stop(e)}setFreqAtTime(e,t,i=0){const n=this.options,o=clamp(pick(n.fixedFrequency,t)*(n.freqMultiplier||1),0,21e3),s=this.getOscTarget(),a=i/5e3;s&&(s.cancelScheduledValues(e),i&&.01<e-(this.lastUpdateTime||-1)?(s.setTargetAtTime(o,e,a),s.setValueAtTime(o,e+a)):s.setValueAtTime(o,e)),this.scheduleVolTrackingChange(o,e,i),this.scheduleFilterTrackingChange(o,e,i),this.lastUpdateTime=e}getFMTarget(){return this.oscNode&&this.oscNode.detune||this.whiteNoise&&this.whiteNoise.detune||this.pulseNode&&this.pulseNode.getPWMTarget()}getVMTarget(){return this.vmNode&&this.vmNode.gain}runEnvelopeAtTime(e,t){this.gainNode&&scheduleGainEnvelope(("attack"===e?this.options.attackEnvelope:this.options.releaseEnvelope)||[],e,t,this.gainNode,this.options.volume)}cancelScheduled(){this.gainNode&&this.gainNode.gain.cancelScheduledValues(this.audioContext.currentTime);const e=this.getOscTarget();e&&e.cancelScheduledValues(0),this.lowpassNode&&this.lowpassNode.frequency.cancelScheduledValues(0),this.highpassNode&&this.highpassNode.frequency.cancelScheduledValues(0),this.volTrackingNode&&this.volTrackingNode.gain.cancelScheduledValues(0)}scheduleVolTrackingChange(e,t,i){this.volTrackingNode&&(e=getPitchTrackedMultiplierVal(this.options.volumePitchTrackingMultiplier||1,e),i=i?i/1e3:SynthPatch.stopRampTime,this.volTrackingNode.gain.cancelScheduledValues(t),this.volTrackingNode.gain.setTargetAtTime(e,t,i/5),this.volTrackingNode.gain.setValueAtTime(e,t+i))}scheduleFilterTrackingChange(n,o,e){const t=this.options,s=e?e/1e3:SynthPatch.stopRampTime,i=(e,t)=>{var i=getPitchTrackedMultiplierVal(t.frequencyPitchTrackingMultiplier||1,n),t=clamp((t.frequency||1e3)*i,0,21e3);e.frequency.cancelScheduledValues(o),e.frequency.setTargetAtTime(t,o,s/5),e.frequency.setValueAtTime(t,o+s)};this.lowpassNode&&t.lowpass&&i(this.lowpassNode,t.lowpass),this.highpassNode&&t.highpass&&i(this.highpassNode,t.highpass)}createGain(){var e=this.options;(defined(e.volume)||e.attackEnvelope&&e.attackEnvelope.length||e.releaseEnvelope&&e.releaseEnvelope.length)&&(this.gainNode=new GainNode(this.audioContext,{gain:pick(e.volume,1)})),this.vmNode=new GainNode(this.audioContext)}createSoundSource(){const e=this.options,t=this.audioContext,i=(e.fixedFrequency||0)*(e.freqMultiplier||1);if("whitenoise"===e.type){const n=2*t.sampleRate,o=t.createBuffer(1,n,t.sampleRate),s=o.getChannelData(0);for(let e=0;e<n;++e)s[e]=1.2*Math.random()-.6;const a=this.whiteNoise=t.createBufferSource();a.buffer=o,a.loop=!0}else"pulse"===e.type?this.pulseNode=new PulseOscNode(t,{detune:e.detune,pulseWidth:e.pulseWidth,frequency:i}):this.oscNode=new OscillatorNode(t,{type:e.type||"sine",detune:e.detune,frequency:i})}createFilters(){var e=this.options;e.lowpass&&e.lowpass.frequency&&(this.lowpassNode=new BiquadFilterNode(this.audioContext,{type:"lowpass",Q:e.lowpass.Q||1,frequency:e.lowpass.frequency})),e.highpass&&e.highpass.frequency&&(this.highpassNode=new BiquadFilterNode(this.audioContext,{type:"highpass",Q:e.highpass.Q||1,frequency:e.highpass.frequency}))}createVolTracking(){var e=this.options;e.volumePitchTrackingMultiplier&&1!==e.volumePitchTrackingMultiplier&&(this.volTrackingNode=new GainNode(this.audioContext,{gain:1}))}getOscTarget(){return this.oscNode?this.oscNode.frequency:this.pulseNode&&this.pulseNode.getFrequencyFacade()}}class SynthPatch{constructor(t,e){this.audioContext=t,this.options=e,this.eqNodes=[],this.midiInstrument=e.midiInstrument||1,this.outputNode=new GainNode(t,{gain:0}),this.createEqChain(this.outputNode);const i=this.eqNodes.length?this.eqNodes[0]:this.outputNode;this.oscillators=(this.options.oscillators||[]).map(e=>new Oscillator(t,e,defined(e.fmOscillator)||defined(e.vmOscillator)?void 0:i)),this.oscillators.forEach(i=>{var e=(e,t)=>{t&&(t=t[e]())&&i.connect(t)};defined(i.fmOscillatorIx)&&e("getFMTarget",this.oscillators[i.fmOscillatorIx]),defined(i.vmOscillatorIx)&&e("getVMTarget",this.oscillators[i.vmOscillatorIx])})}startSilently(){this.outputNode.gain.value=0,this.oscillators.forEach(e=>e.start())}stop(){const e=this.audioContext.currentTime,t=e+SynthPatch.stopRampTime;miniRampToVolAtTime(this.outputNode,e,0),this.oscillators.forEach(e=>e.stopAtTime(t)),this.outputNode.disconnect()}silenceAtTime(e){!e&&this.outputNode.gain.value<.01?this.outputNode.gain.value=0:this.releaseAtTime((e||0)+this.audioContext.currentTime)}mute(){this.cancelScheduled(),miniRampToVolAtTime(this.outputNode,this.audioContext.currentTime,0)}playFreqAtTime(e,t,i){const n=(e||0)+this.audioContext.currentTime,o=this.options;this.oscillators.forEach(e=>{e.setFreqAtTime(n,t,o.noteGlideDuration),e.runEnvelopeAtTime("attack",n)}),scheduleGainEnvelope(o.masterAttackEnvelope||[],"attack",n,this.outputNode,o.masterVolume),i&&this.releaseAtTime(n+i/1e3)}cancelScheduled(){this.outputNode.gain.cancelScheduledValues(this.audioContext.currentTime),this.oscillators.forEach(e=>e.cancelScheduled())}connect(e){return this.outputNode.connect(e)}createEqChain(e){this.eqNodes=(this.options.eq||[]).map(e=>new BiquadFilterNode(this.audioContext,{type:"peaking",...e})),this.eqNodes.reduceRight((e,t)=>(t.connect(e),t),e)}releaseAtTime(i){let n=0;this.oscillators.forEach(e=>{var t=e.options.releaseEnvelope;t&&t.length&&(n=Math.max(n,t[t.length-1].t),e.runEnvelopeAtTime("release",i))});var e=this.options.masterReleaseEnvelope||[];e.length&&(scheduleGainEnvelope(e,"release",i,this.outputNode,this.options.masterVolume),n=Math.max(n,e[e.length-1].t)),miniRampToVolAtTime(this.outputNode,i+n/1e3,0)}}SynthPatch.stopRampTime=.012;const Sonification_SynthPatch=SynthPatch,InstrumentPresets={piano:{masterVolume:.45,masterAttackEnvelope:[{t:1,vol:.71},{t:40,vol:.79},{t:82,vol:.64},{t:147,vol:.29},{t:260,vol:.15},{t:417,vol:.05},{t:589,vol:0}],eq:[{frequency:200,Q:.7,gain:6},{frequency:450,gain:6},{frequency:1300,gain:2},{frequency:2600,Q:.8,gain:8},{frequency:3500,Q:.8,gain:6},{frequency:6200,Q:.8,gain:10},{frequency:8e3,gain:-23},{frequency:1e4,Q:.4,gain:-12}],oscillators:[{type:"pulse",volume:.5,pulseWidth:.55,volumePitchTrackingMultiplier:.1,lowpass:{frequency:4.5,frequencyPitchTrackingMultiplier:900,Q:-2},highpass:{frequency:270},attackEnvelope:[{t:1,vol:1}],releaseEnvelope:[{t:1,vol:1},{t:282,vol:.64},{t:597,vol:0}]},{type:"whitenoise",volume:.8,lowpass:{frequency:400},highpass:{frequency:300},attackEnvelope:[{t:1,vol:1},{t:19,vol:0}]}]},plucked:{masterVolume:.5,midiInstrument:25,masterAttackEnvelope:[{t:1,vol:.71},{t:4,vol:.71},{t:31,vol:.4},{t:109,vol:.12},{t:234,vol:.04},{t:442,vol:0}],eq:[{frequency:800,gain:-8},{frequency:1400,Q:4,gain:4},{frequency:1600,gain:-14},{frequency:2200,gain:-8},{frequency:3600,gain:-2},{frequency:6400,Q:2,gain:-6}],oscillators:[{type:"sawtooth",volume:.9,volumePitchTrackingMultiplier:.6,highpass:{frequency:100},lowpass:{frequency:8e3},releaseEnvelope:[{t:1,vol:1},{t:315,vol:.56},{t:550,vol:0}]}]},flute:{masterVolume:1.1,midiInstrument:74,noteGlideDuration:30,masterAttackEnvelope:[{t:0,vol:0},{t:29,vol:1},{t:76,vol:.48},{t:600,vol:.36}],masterReleaseEnvelope:[{t:1,vol:.36},{t:24,vol:.15},{t:119,vol:0}],eq:[{frequency:150,Q:.6,gain:-10},{frequency:500,gain:4},{frequency:1100,gain:-4},{frequency:2200,gain:-14},{frequency:5e3,gain:8},{frequency:6400,gain:10},{frequency:8e3,gain:12},{frequency:10800,gain:8}],oscillators:[{type:"triangle",volume:1,volumePitchTrackingMultiplier:.4,lowpass:{frequency:12,frequencyPitchTrackingMultiplier:100},highpass:{frequency:200}},{type:"sine",fixedFrequency:5,volume:.2,vmOscillator:0,attackEnvelope:[{t:1,vol:1},{t:48,vol:0},{t:225,vol:.05},{t:600,vol:.77}]},{type:"whitenoise",volume:.13,lowpass:{frequency:9e3,Q:3},highpass:{frequency:6e3,Q:3},vmOscillator:0,attackEnvelope:[{t:0,vol:0},{t:26,vol:1},{t:93,vol:.8}]}]},lead:{masterVolume:1,midiInstrument:20,masterAttackEnvelope:[{t:1,vol:.81},{t:98,vol:.5},{t:201,vol:.18},{t:377,vol:.04},{t:586,vol:0},{t:586,vol:0}],eq:[{frequency:200,gain:-6},{frequency:400,gain:-8},{frequency:800,Q:.5,gain:-10},{frequency:1200,gain:4},{frequency:3600,gain:-4},{frequency:4200,gain:-12},{frequency:7400,gain:-14},{frequency:1e4,gain:2}],oscillators:[{type:"triangle",volume:1.1,volumePitchTrackingMultiplier:.6,lowpass:{frequency:5e3},highpass:{frequency:100}},{type:"sawtooth",volume:.4,lowpass:{frequency:7e3},highpass:{frequency:800,Q:6},releaseEnvelope:[{t:0,vol:.99},{t:200,vol:.83},{t:495,vol:0}]}]},vibraphone:{masterVolume:1,midiInstrument:12,masterAttackEnvelope:[{t:1,vol:0},{t:10,vol:.63},{t:82,vol:.64},{t:149,vol:.26},{t:600,vol:0}],eq:[{frequency:200,Q:.8,gain:-12},{frequency:400,gain:-4},{frequency:1600,Q:.5,gain:6},{frequency:2200,Q:.5,gain:6},{frequency:6400,gain:4},{frequency:12800,gain:4}],oscillators:[{type:"sine",volume:1.5,volumePitchTrackingMultiplier:1e-7,attackEnvelope:[{t:1,vol:1}],releaseEnvelope:[{t:1,vol:1},{t:146,vol:.39},{t:597,vol:0}]},{type:"whitenoise",volume:.03,volumePitchTrackingMultiplier:1e-4,lowpass:{frequency:900},highpass:{frequency:800},attackEnvelope:[{t:1,vol:1},{t:9,vol:0}]},{type:"sine",freqMultiplier:4,volume:.15,volumePitchTrackingMultiplier:1e-4},{type:"sine",fixedFrequency:3,volume:6,fmOscillator:0,releaseEnvelope:[{t:1,vol:1},{t:190,vol:.41},{t:600,vol:0}]},{type:"sine",fixedFrequency:6,volume:3,fmOscillator:2},{type:"sine",freqMultiplier:9,volume:5e-4,volumePitchTrackingMultiplier:1e-4,releaseEnvelope:[{t:1,vol:.97},{t:530,vol:0}]}]},saxophone:{masterVolume:1,midiInstrument:67,noteGlideDuration:10,masterAttackEnvelope:[{t:1,vol:.57},{t:35,vol:1},{t:87,vol:.84},{t:111,vol:.6},{t:296,vol:.49},{t:600,vol:.58}],masterReleaseEnvelope:[{t:1,vol:.58},{t:47,vol:.16},{t:119,vol:0}],eq:[{frequency:200,gain:-2},{frequency:600,gain:2},{frequency:800,gain:-10},{frequency:1100,gain:-2},{frequency:2200,gain:-2},{frequency:3500,gain:10},{frequency:12800,gain:4}],oscillators:[{type:"sawtooth",volume:.45,volumePitchTrackingMultiplier:.06,lowpass:{frequency:18,frequencyPitchTrackingMultiplier:200},highpass:{frequency:300}},{type:"whitenoise",fixedFrequency:1,volume:.4,highpass:{frequency:7e3},vmOscillator:0,attackEnvelope:[{t:1,vol:1},{t:51,vol:1},{t:86,vol:.84},{t:500,vol:.78}]},{type:"sine",fixedFrequency:4,volume:2,fmOscillator:0,attackEnvelope:[{t:0,vol:0},{t:15,vol:.94},{t:79,vol:1},{t:172,vol:.47},{t:500,vol:.26}]},{type:"sine",fixedFrequency:7,volume:6,fmOscillator:0,attackEnvelope:[{t:0,vol:0},{t:25,vol:.99},{t:85,vol:0},{t:85,vol:0},{t:387,vol:.02},{t:511,vol:.43},{t:600,vol:0}]}]},trumpet:{masterVolume:.3,midiInstrument:57,noteGlideDuration:40,masterAttackEnvelope:[{t:1,vol:0},{t:17,vol:1},{t:42,vol:.85},{t:76,vol:1},{t:202,vol:.65},{t:226,vol:.86},{t:282,vol:.63}],masterReleaseEnvelope:[{t:1,vol:.62},{t:34,vol:.14},{t:63,vol:.21},{t:96,vol:0}],eq:[{frequency:200,Q:.6,gain:10},{frequency:600,Q:.5,gain:6},{frequency:1500,Q:.7,gain:14},{frequency:3200,Q:2,gain:8},{frequency:3800,Q:.8,gain:10},{frequency:6200,gain:12},{frequency:8400,gain:-20},{frequency:12800,Q:.5,gain:-18}],oscillators:[{type:"sawtooth",volume:.15,pulseWidth:.5,volumePitchTrackingMultiplier:.5,lowpass:{frequency:1900,Q:3}},{type:"sine",fixedFrequency:6,volume:.2,vmOscillator:0,attackEnvelope:[{t:1,vol:1},{t:102,vol:.13},{t:556,vol:.24}]},{type:"whitenoise",volume:.45,highpass:{frequency:7e3,Q:9},vmOscillator:0,attackEnvelope:[{t:1,vol:1},{t:89,vol:.51},{t:577,vol:.29}]},{type:"sine",fixedFrequency:5.7,volume:20,fmOscillator:0,attackEnvelope:[{t:1,vol:1},{t:89,vol:1},{t:137,vol:.46},{t:283,vol:.15},{t:600,vol:.28}]}]},sawsynth:{masterVolume:.3,midiInstrument:51,noteGlideDuration:40,masterAttackEnvelope:[{t:0,vol:.6},{t:9,vol:1},{t:102,vol:.48}],eq:[{frequency:200,gain:-6}],oscillators:[{type:"sawtooth",volume:.4,volumePitchTrackingMultiplier:.3},{type:"sawtooth",volume:.4,detune:11,volumePitchTrackingMultiplier:.3},{type:"sawtooth",volume:.4,detune:-11,volumePitchTrackingMultiplier:.3}]},basic1:{masterVolume:1,noteGlideDuration:0,masterReleaseEnvelope:[{t:1,vol:.36},{t:24,vol:.15},{t:119,vol:0}],eq:[{frequency:150,Q:.6,gain:-12},{frequency:1100,gain:-2},{frequency:2200,gain:-16},{frequency:5e3,gain:8},{frequency:6400,gain:10},{frequency:8e3,gain:12},{frequency:10800,gain:8}],oscillators:[{type:"triangle",volume:1,volumePitchTrackingMultiplier:.05,lowpass:{frequency:17,frequencyPitchTrackingMultiplier:100},highpass:{frequency:200}},{type:"whitenoise",volume:.04,lowpass:{frequency:9e3,Q:3},highpass:{frequency:6e3,Q:3},vmOscillator:0,attackEnvelope:[{t:0,vol:0},{t:26,vol:1},{t:71,vol:.73}]}]},basic2:{masterVolume:.3,eq:[{frequency:200,Q:.7,gain:6},{frequency:450,gain:2},{frequency:1300,gain:-2},{frequency:2600,Q:.8,gain:6},{frequency:3500,Q:.8,gain:6},{frequency:6200,Q:.8,gain:10},{frequency:8e3,gain:-18},{frequency:1e4,Q:.4,gain:-12}],oscillators:[{type:"pulse",volume:.4,pulseWidth:.55,volumePitchTrackingMultiplier:.1,lowpass:{frequency:4.5,frequencyPitchTrackingMultiplier:900,Q:-2},highpass:{frequency:270}}]},chord:{masterVolume:1,masterAttackEnvelope:[{t:1,vol:.79},{t:27,vol:.86},{t:62,vol:.81},{t:150,vol:.35},{t:408,vol:.04},{t:600,vol:0}],eq:[{frequency:200,gain:-8},{frequency:600,Q:2,gain:4},{frequency:800,gain:-10},{frequency:1600,gain:-2},{frequency:2200,gain:-6},{frequency:3600,Q:.7,gain:-2},{frequency:6400,gain:6},{frequency:12800,gain:6}],oscillators:[{type:"triangle",volume:1.1,volumePitchTrackingMultiplier:.05,lowpass:{frequency:8e3},highpass:{frequency:100},releaseEnvelope:[{t:1,vol:1},{t:315,vol:.56},{t:540,vol:0}]},{type:"triangle",freqMultiplier:1.17,volume:.4,volumePitchTrackingMultiplier:.07,lowpass:{frequency:5e3},highpass:{frequency:100},releaseEnvelope:[{t:0,vol:1},{t:476,vol:0}]},{type:"triangle",freqMultiplier:1.58333,volume:.7,volumePitchTrackingMultiplier:.02,highpass:{frequency:200},releaseEnvelope:[{t:0,vol:1},{t:422,vol:.56},{t:577,vol:0}]},{type:"sine",fixedFrequency:10,volume:4,fmOscillator:0,attackEnvelope:[{t:1,vol:1},{t:157,vol:.65}]},{type:"sine",fixedFrequency:5,volume:.3,vmOscillator:2,attackEnvelope:[{t:1,vol:1},{t:155,vol:.91},{t:289,vol:.78}]}]},wobble:{masterVolume:.9,masterReleaseEnvelope:[{t:1,vol:.36},{t:24,vol:.15},{t:119,vol:0}],eq:[{frequency:150,Q:.6,gain:-12},{frequency:1100,gain:-2},{frequency:2200,gain:-16},{frequency:5e3,gain:8},{frequency:6400,gain:10},{frequency:8e3,gain:12},{frequency:10800,gain:8}],oscillators:[{type:"triangle",volume:.9,volumePitchTrackingMultiplier:.1,lowpass:{frequency:17,frequencyPitchTrackingMultiplier:100},highpass:{frequency:200}},{type:"whitenoise",volume:.04,lowpass:{frequency:9e3,Q:3},highpass:{frequency:6e3,Q:3},vmOscillator:0,attackEnvelope:[{t:0,vol:0},{t:26,vol:1},{t:71,vol:.73}]},{type:"sine",freqMultiplier:.011,volume:30,fmOscillator:0}]},sine:{masterVolume:1,oscillators:[{type:"sine",volumePitchTrackingMultiplier:.07}]},sineGlide:{masterVolume:1,noteGlideDuration:100,oscillators:[{type:"sine",volumePitchTrackingMultiplier:.07}]},triangle:{masterVolume:.5,oscillators:[{type:"triangle",volume:1,volumePitchTrackingMultiplier:.07}]},sawtooth:{masterVolume:.25,midiInstrument:82,oscillators:[{type:"sawtooth",volume:.3,volumePitchTrackingMultiplier:.07}]},square:{masterVolume:.3,midiInstrument:81,oscillators:[{type:"square",volume:.2,volumePitchTrackingMultiplier:.07}]},chop:{masterVolume:1,midiInstrument:116,masterAttackEnvelope:[{t:1,vol:1},{t:44,vol:0}],oscillators:[{type:"whitenoise",volume:1,lowpass:{frequency:600},highpass:{frequency:200}}]},shaker:{masterVolume:.4,midiInstrument:116,masterAttackEnvelope:[{t:1,vol:1},{t:44,vol:0}],oscillators:[{type:"whitenoise",volume:1,lowpass:{frequency:6500},highpass:{frequency:5e3}}]},step:{masterVolume:1,midiInstrument:116,masterAttackEnvelope:[{t:1,vol:1},{t:44,vol:0}],eq:[{frequency:200,gain:-1},{frequency:400,gain:-14},{frequency:800,gain:8},{frequency:1e3,Q:5,gain:-24},{frequency:1600,gain:8},{frequency:2200,gain:-10},{frequency:5400,gain:4},{frequency:12800,gain:-36}],oscillators:[{type:"whitenoise",volume:1.5,lowpass:{frequency:300},highpass:{frequency:100,Q:6}}]},kick:{masterVolume:.55,masterAttackEnvelope:[{t:1,vol:.8},{t:15,vol:1},{t:45,vol:.35},{t:121,vol:.11},{t:242,vol:0}],eq:[{frequency:50,gain:6},{frequency:400,gain:-18},{frequency:1600,gain:18}],oscillators:[{type:"triangle",fixedFrequency:90,volume:1,lowpass:{frequency:300},attackEnvelope:[{t:1,vol:1},{t:6,vol:1},{t:45,vol:.01}]},{type:"whitenoise",volume:.4,lowpass:{frequency:200},attackEnvelope:[{t:1,vol:1},{t:30,vol:0}]},{type:"triangle",freqMultiplier:.1,volume:1,lowpass:{frequency:200}}]},shortnote:{masterVolume:.8,midiInstrument:116,masterAttackEnvelope:[{t:1,vol:1},{t:15,vol:0}],eq:[{frequency:400,gain:-4},{frequency:800,gain:-12},{frequency:2400,gain:4},{frequency:7200,gain:-20},{frequency:1e3,Q:5,gain:-12},{frequency:5400,gain:-32},{frequency:12800,gain:-14}],oscillators:[{type:"sawtooth",volume:.6,lowpass:{frequency:1e3}},{type:"whitenoise",volume:.2,lowpass:{frequency:1e4},highpass:{frequency:7e3},attackEnvelope:[{t:1,vol:1},{t:10,vol:0}]},{type:"whitenoise",volume:1.3,lowpass:{frequency:700,Q:4},highpass:{frequency:250}}]},noise:{masterVolume:.3,midiInstrument:122,oscillators:[{type:"whitenoise"}]},filteredNoise:{masterVolume:.3,midiInstrument:122,eq:[{frequency:1600,gain:-8},{frequency:2200,gain:-4}],oscillators:[{type:"whitenoise",lowpass:{frequency:5,frequencyPitchTrackingMultiplier:1300,Q:6},highpass:{frequency:5,frequencyPitchTrackingMultiplier:300,Q:6}}]},wind:{masterVolume:.75,midiInstrument:122,noteGlideDuration:150,masterReleaseEnvelope:[{t:0,vol:1},{t:124,vol:.24},{t:281,vol:0}],oscillators:[{type:"whitenoise",volume:1,lowpass:{frequency:100,frequencyPitchTrackingMultiplier:6,Q:23},highpass:{frequency:170,frequencyPitchTrackingMultiplier:6}},{type:"sine",freqMultiplier:.016,volume:1e3,fmOscillator:0}]}},Sonification_InstrumentPresets=InstrumentPresets,{defined:SonificationInstrument_defined,extend}=external_highcharts_src_js_default_default();class SonificationInstrument{constructor(e,t,i){this.audioContext=e,this.curParams={},this.midiTrackName=i.midiTrackName,this.masterVolNode=new GainNode(e),this.masterVolNode.connect(t),this.volumeNode=new GainNode(e),this.createNodesFromCapabilities(extend({pan:!0},i.capabilities||{})),this.connectCapabilityNodes(this.volumeNode,this.masterVolNode),this.synthPatch=new Sonification_SynthPatch(e,"string"==typeof i.synthPatch?Sonification_InstrumentPresets[i.synthPatch]:i.synthPatch),this.midiInstrument=this.synthPatch.midiInstrument||1,this.synthPatch.startSilently(),this.synthPatch.connect(this.volumeNode)}setMasterVolume(e){this.masterVolNode.gain.setTargetAtTime(e,0,SonificationInstrument.rampTime)}scheduleEventAtTime(e,t){var i=extend(this.curParams,t),t=SonificationInstrument_defined(t.frequency)?t.frequency:SonificationInstrument_defined(t.note)?SonificationInstrument.musicalNoteToFrequency(t.note):220;SonificationInstrument_defined(t)&&this.synthPatch.playFreqAtTime(e,t,i.noteDuration),(SonificationInstrument_defined(i.tremoloDepth)||SonificationInstrument_defined(i.tremoloSpeed))&&this.setTremoloAtTime(e,i.tremoloDepth,i.tremoloSpeed),SonificationInstrument_defined(i.pan)&&this.setPanAtTime(e,i.pan),SonificationInstrument_defined(i.volume)&&this.setVolumeAtTime(e,i.volume),(SonificationInstrument_defined(i.lowpassFreq)||SonificationInstrument_defined(i.lowpassResonance))&&this.setFilterAtTime("lowpass",e,i.lowpassFreq,i.lowpassResonance),(SonificationInstrument_defined(i.highpassFreq)||SonificationInstrument_defined(i.highpassResonance))&&this.setFilterAtTime("highpass",e,i.highpassFreq,i.highpassResonance)}silenceAtTime(e){this.synthPatch.silenceAtTime(e)}cancel(){this.synthPatch.mute(),[this.tremoloDepth&&this.tremoloDepth.gain,this.tremoloOsc&&this.tremoloOsc.frequency,this.lowpassNode&&this.lowpassNode.frequency,this.lowpassNode&&this.lowpassNode.Q,this.highpassNode&&this.highpassNode.frequency,this.highpassNode&&this.highpassNode.Q,this.panNode&&this.panNode.pan,this.volumeNode.gain].forEach(e=>e&&e.cancelScheduledValues(0))}destroy(){this.cancel(),this.synthPatch.stop(),this.tremoloOsc&&this.tremoloOsc.stop(),[this.tremoloDepth,this.tremoloOsc,this.lowpassNode,this.highpassNode,this.panNode,this.volumeNode,this.masterVolNode].forEach(e=>e&&e.disconnect())}setPanAtTime(e,t){this.panNode&&this.panNode.pan.setTargetAtTime(t,e+this.audioContext.currentTime,SonificationInstrument.rampTime)}setFilterAtTime(e,t,i,n){const o=this[e+"Node"],s=this.audioContext.currentTime+t;o&&(SonificationInstrument_defined(n)&&o.Q.setTargetAtTime(n,s,SonificationInstrument.rampTime),SonificationInstrument_defined(i)&&o.frequency.setTargetAtTime(i,s,SonificationInstrument.rampTime))}setVolumeAtTime(e,t){this.volumeNode&&this.volumeNode.gain.setTargetAtTime(t,e+this.audioContext.currentTime,SonificationInstrument.rampTime)}setTremoloAtTime(e,t,i){e=this.audioContext.currentTime+e;this.tremoloDepth&&SonificationInstrument_defined(t)&&this.tremoloDepth.gain.setTargetAtTime(t,e,SonificationInstrument.rampTime),this.tremoloOsc&&SonificationInstrument_defined(i)&&this.tremoloOsc.frequency.setTargetAtTime(15*i,e,SonificationInstrument.rampTime)}createNodesFromCapabilities(e){var t=this.audioContext;e.pan&&(this.panNode=new StereoPannerNode(t)),e.tremolo&&(this.tremoloOsc=new OscillatorNode(t,{type:"sine",frequency:3}),this.tremoloDepth=new GainNode(t),this.tremoloOsc.connect(this.tremoloDepth),this.tremoloDepth.connect(this.masterVolNode.gain),this.tremoloOsc.start()),e.filters&&(this.lowpassNode=new BiquadFilterNode(t,{type:"lowpass",frequency:2e4}),this.highpassNode=new BiquadFilterNode(t,{type:"highpass",frequency:0}))}connectCapabilityNodes(e,t){[this.panNode,this.lowpassNode,this.highpassNode,e].reduce((e,t)=>t?(t.connect(e),t):e,t)}static noteStringToC0Distance(e){const t=e.match(/^([a-g][#b]?)([0-8])$/i),i=t?t[1]:"a",n=i[0].toLowerCase(),o=i[1],s=t?parseInt(t[2],10):4,a="#"===o?1:"b"===o?-1:0;return({c:0,d:2,e:4,f:5,g:7,a:9,b:11}[n]||0)+a+12*s}static musicalNoteToFrequency(e){e="string"==typeof e?this.noteStringToC0Distance(e):e;return 16.3516*Math.pow(2,Math.min(e,107)/12)}}SonificationInstrument.rampTime=Sonification_SynthPatch.stopRampTime/4;const Sonification_SonificationInstrument=SonificationInstrument,SonificationSpeaker_pick=external_highcharts_src_js_default_default()["pick"];class SonificationSpeaker{constructor(e){this.options=e,this.masterVolume=1,this.synthesis=window.speechSynthesis,void 0!==speechSynthesis.onvoiceschanged&&(speechSynthesis.onvoiceschanged=this.setVoice.bind(this)),this.setVoice(),this.scheduled=[]}say(e,t){if(this.synthesis){this.synthesis.cancel();const i=new SpeechSynthesisUtterance(e);this.voice&&(i.voice=this.voice),i.rate=t&&t.rate||this.options.rate||1,i.pitch=t&&t.pitch||this.options.pitch||1,i.volume=SonificationSpeaker_pick(t&&t.volume,this.options.volume,1)*this.masterVolume,this.synthesis.speak(i)}}sayAtTime(e,t,i){this.scheduled.push(setTimeout(this.say.bind(this,t,i),e))}cancel(){this.scheduled.forEach(clearTimeout),this.scheduled=[],this.synthesis.cancel()}destroy(){this.cancel()}setMasterVolume(e){this.masterVolume=e}setVoice(){if(this.synthesis){var i=this.options.name,n=this.options.language||"en-US",o=this.synthesis.getVoices(),s=o.length;let t;for(let e=0;e<s;++e){if(i&&o[e].name===i)return void(this.voice=o[e]);if(!t&&o[e].lang===n&&(t=o[e],!i))break}this.voice=t}}}const Sonification_SonificationSpeaker=SonificationSpeaker;class TimelineChannel{constructor(e,t,i=!1,n,o){this.type=e,this.engine=t,this.showPlayMarker=i,this.muted=o,this.events=n||[]}addEvent(t){var e=this.events[this.events.length-1];if(e&&t.time<e.time){let e=this.events.length;for(;e--&&this.events[e].time>t.time;);this.events.splice(e+1,0,t)}else this.events.push(t);return t}mute(){this.muted=!0}unmute(){this.muted=!1}cancel(){this.engine.cancel()}destroy(){this.engine.destroy()}}const Sonification_TimelineChannel=TimelineChannel,MIDI_pick=external_highcharts_src_js_default_default()["pick"],freqToNote=e=>Math.round(12*Math.log(e)/Math.LN2-48.37632),b=(e,t)=>t>>>8*e&255,getHeader=e=>[77,84,104,100,0,0,0,6,0,1<e?1:0,b(1,e),b(0,e),1,244],timeInfo=[0,255,81,3,7,161,32],varLenEnc=e=>{let t=127&e;const i=[];for(;e>>=7;)t=t<<8|127&e|128;for(;;){if(i.push(255&t),!(128&t))break;t>>=8}return i},toMIDIEvents=e=>{let h,u;const i=[],m=e=>{let t=i.length;for(;t--&&i[t].timeMS>e.timeMS;);i.splice(t+1,0,e)};return e.forEach(e=>{const t=e.instrumentEventOptions||{},n=e.time,i=u=MIDI_pick(t.noteDuration,u),o=i&&e.time+i,s=[{valMap:e=>64+63*e&127,data:{10:t.pan,92:t.tremoloDepth,93:t.tremoloSpeed}},{valMap:e=>127*e/2e4&127,data:{74:t.lowpassFreq,75:t.highpassFreq}},{valMap:e=>63*Math.min(18,Math.max(-18,e))/18+63&127,data:{71:t.lowpassResonance,76:t.highpassResonance}}],a=h=void 0===t.volume?MIDI_pick(h,127):127*t.volume&127,r=t.frequency,l=t.note||0,c=12+(r?freqToNote(r):"string"==typeof l?Sonification_SonificationInstrument.noteStringToC0Distance(l):l)&127;s.forEach(i=>Object.keys(i.data).forEach(e=>{var t=i.data[e];void 0!==t&&m({timeMS:n,type:"CTRL_CHG",data:[176,parseInt(e,10),i.valMap(t)]})})),o&&(m({timeMS:n,type:"NON",data:[144,c,a]}),m({timeMS:o,type:"NOF",data:[128,c,a]}))}),i},getMetaEvents=(t,e)=>{const i=[];if(e&&i.push(0,192,127&e),t){const o=[];for(let e=0;e<t.length;++e){var n=t.charCodeAt(e);n<128&&o.push(n)}return i.concat([0,255,3],varLenEnc(o.length),o)}return i},getTrackChunk=(e,t,i,n)=>{let o=0;var i=getMetaEvents(i,n),n=toMIDIEvents(e).reduce((e,t)=>{var i=varLenEnc(t.timeMS-o);return o=t.timeMS,e.concat(i,t.data)},[]),e=[0,255,47,0],s=(t?timeInfo.length:0)+i.length+n.length+e.length;return[77,84,114,107,b(3,s),b(2,s),b(1,s),b(0,s)].concat(t?timeInfo:[],i,n,e)};function toMIDI(e){const t=e.filter(e=>!!e.events.length),i=t.length,n=1<i;return new Uint8Array(getHeader(n?i+1:i).concat(n?getTrackChunk([],!0):[],t.reduce((e,t)=>{var i=t.engine;return e.concat(getTrackChunk(t.events,!n,i.midiTrackName,i.midiInstrument))},[])))}const MIDI=toMIDI,{isSafari,win,win:{document:doc}}=external_highcharts_src_js_default_default(),error=external_highcharts_src_js_default_default()["error"],domurl=win.URL||win.webkitURL||win;function dataURLtoBlob(e){e=e.replace(/filename=.*;/,"").match(/data:([^;]*)(;base64)?,([A-Z+\d\/]+)/i);if(e&&3<e.length&&win.atob&&win.ArrayBuffer&&win.Uint8Array&&win.Blob&&domurl.createObjectURL){const t=win.atob(e[3]),i=new win.ArrayBuffer(t.length),n=new win.Uint8Array(i);for(let e=0;e<n.length;++e)n[e]=t.charCodeAt(e);return domurl.createObjectURL(new win.Blob([n],{type:e[1]}))}}function downloadURL(e,t){const i=win.navigator,n=doc.createElement("a");if("string"==typeof e||e instanceof String||!i.msSaveOrOpenBlob){if(e=""+e,1e3<i.userAgent.length)throw new Error("Input too long");var o=/Edge\/\d+/.test(i.userAgent),s=isSafari&&"string"==typeof e&&0===e.indexOf("data:application/pdf");if((s||o||2e6<e.length)&&!(e=dataURLtoBlob(e)||""))throw new Error("Failed to convert to blob");if(void 0!==n.download)n.href=e,n.download=t,doc.body.appendChild(n),n.click(),doc.body.removeChild(n);else try{if(!win.open(e,"chart"))throw new Error("Failed to open window")}catch{win.location.href=e}}else i.msSaveOrOpenBlob(e,t)}function getScript(o){return new Promise((e,t)=>{const i=doc.getElementsByTagName("head")[0],n=doc.createElement("script");n.type="text/javascript",n.src=o,n.onload=()=>{e()},n.onerror=()=>{t(error("Error loading script "+o))},i.appendChild(n)})}const DownloadURL={dataURLtoBlob:dataURLtoBlob,downloadURL:downloadURL,getScript:getScript},Extensions_DownloadURL=DownloadURL,SonificationTimeline_downloadURL=Extensions_DownloadURL["downloadURL"],{defined:SonificationTimeline_defined,find,merge}=external_highcharts_src_js_default_default();function filterChannels(t,e){const i=e.map(e=>(e.cancel(),{channel:e,filteredEvents:e.muted?[]:e.events.filter(t)})),n=i.reduce((e,t)=>Math.min(e,t.filteredEvents.length?t.filteredEvents[0].time:1/0),1/0);return i.map(e=>new Sonification_TimelineChannel(e.channel.type,e.channel.engine,e.channel.showPlayMarker,e.filteredEvents.map(e=>merge(e,{time:e.time-n})),e.channel.muted))}class SonificationTimeline{constructor(e,t){this.chart=t,this.isPaused=!1,this.isPlaying=!1,this.channels=[],this.scheduledCallbacks=[],this.playTimestamp=0,this.resumeFromTime=0,this.options=e||{}}addChannel(e,t,i=!1,n){if("instrument"===e&&!t.scheduleEventAtTime||"speech"===e&&!t.sayAtTime)throw new Error("Highcharts Sonification: Invalid channel engine.");e=new Sonification_TimelineChannel(e,t,i,n);return this.channels.push(e),e}play(e,t=!0,i=!0,n){this.isPlaying?this.cancel():this.clearScheduledCallbacks(),this.onEndArgument=n,this.playTimestamp=Date.now(),this.resumeFromTime=0,this.isPaused=!1,this.isPlaying=!0;const m=this.options.skipThreshold||2,o=this.options.onPlay,p=this.options.showTooltip,d=this.options.showCrosshair,s=e?filterChannels(e,this.playingChannels||this.channels):this.channels,f=[];t&&(this.playingChannels=s),o&&o({chart:this.chart,timeline:this});let y=0;s.forEach(o=>{if(!o.muted){var s,a=o.events.length;let t=-1/0,i=-1/0,n="";y=Math.max(o.events[a-1]&&o.events[a-1].time||0,y);for(let e=0;e<a;++e){const r=o.events[e],l=(s=r,Object.keys(s.speechOptions||{}).concat(Object.keys(s.instrumentEventOptions||{})).join());if(!(l===n&&r.time-i<m)){n=l,i=r.time,"instrument"===o.type?o.engine.scheduleEventAtTime(r.time/1e3,r.instrumentEventOptions||{}):o.engine.sayAtTime(r.time,r.message||"",r.speechOptions||{});const c=r.relatedPoint,h=c&&c.series&&c.series.chart,u=r.callback||c&&(p||d)&&!1!==o.showPlayMarker&&(50<r.time-t||e===a-1);c&&f.push(c),u&&(this.scheduledCallbacks.push(setTimeout(()=>{if(r.callback&&r.callback(),c){if(d){const e=c.series;e&&e.xAxis&&e.xAxis.crosshair&&e.xAxis.drawCrosshair(void 0,c),e&&e.yAxis&&e.yAxis.crosshair&&e.yAxis.drawCrosshair(void 0,c)}!p||h&&h.hoverPoints&&1<h.hoverPoints.length&&find(h.hoverPoints,e=>e===c)&&c.onMouseOver||c.onMouseOver()}},r.time)),t=r.time)}}}});const a=this.options.onEnd,r=this.options.onStop;this.scheduledCallbacks.push(setTimeout(()=>{const e=this.chart,t={chart:e,timeline:this,pointsPlayed:f};this.isPlaying=!1,i&&this.resetPlayState(),r&&r(t),a&&a(t),n&&n(t),e&&(e.tooltip&&e.tooltip.hide(0),e.hoverSeries&&e.hoverSeries.onMouseOut(),e.axes.forEach(e=>e.hideCrosshair()))},y+250)),this.resumeFromTime=t?y:this.getLength()}pause(){return this.isPaused=!0,this.cancel(),this.resumeFromTime=Date.now()-this.playTimestamp-10,this.resumeFromTime}getCurrentTime(){return this.isPlaying?Date.now()-this.playTimestamp:this.resumeFromTime}getLength(){return this.channels.reduce((e,t)=>{t=t.events[t.events.length-1];return t?Math.max(t.time,e):e},0)}resume(){if(this.playingChannels){const t=this.resumeFromTime-50;this.play(e=>e.time>t,!1,!1,this.onEndArgument),this.playTimestamp-=t}else this.play(void 0,!1,!1,this.onEndArgument)}anchorPlayMoment(n,e){this.isPlaying&&this.pause();let o=0;this.play((e,t,i)=>{t=n(e,t,i);return t&&e.time>o&&(o=e.time),t},!1,!1,e),this.playingChannels=this.playingChannels||this.channels,this.isPaused=!0,this.isPlaying=!1,this.resumeFromTime=o}playAdjacent(c,e,t,h){this.isPlaying&&this.pause();const u=this.resumeFromTime,o=this.channels.reduce((e,t)=>{var i=h?t.events.filter(h):t.events;let n=0,o=i.length,s=e;for(;n<o;){var a=n+o>>1,r=i[a].time,l=r-u;0<l?(c&&r<s&&(s=r),o=a):l<0?(!c&&r>s&&(s=r),n=1+a):c?n=1+a:o=a}return s},c?1/0:-1/0);o===1/0||o===-1/0?t&&t({chart:this.chart,timeline:this,attemptedNext:c}):this.anchorPlayMoment((e,t,i)=>{var n=c?e.time>u&&e.time<=o+.02:e.time<u&&e.time>=o-.02;return h?n&&h(e,t,i):n},e)}playClosestToPropValue(a,r,e,t,l){let c=1/0,h=null;(this.playingChannels||this.channels).forEach(e=>{var t,i,n,o=e.events;let s=o.length;for(;s--;)t=o[s],i=s,n=o,l&&!l(t,i,n)||!t.relatedPoint||(i=o[s].relatedPoint[a],!1!==(n=SonificationTimeline_defined(i)&&Math.abs(r-i))&&n<c&&(c=n,h=o[s]))}),h?(this.play(e=>!!(h&&e.time<h.time+1&&e.time>h.time-1&&e.relatedPoint===h.relatedPoint),!1,!1,e),this.playingChannels=this.playingChannels||this.channels,this.isPaused=!0,this.isPlaying=!1,this.resumeFromTime=h.time):t&&t({chart:this.chart,timeline:this})}getEventsForPoint(i){return this.channels.reduce((e,t)=>{t=t.events.filter(e=>e.relatedPoint===i);return e.concat(t)},[])}playSegment(e,t){const i={first:1/0,last:-1/0};if(this.channels.forEach(e=>{e.events.length&&(i.first=Math.min(e.events[0].time,i.first),i.last=Math.max(e.events[e.events.length-1].time,i.last))}),i.first<1/0){const n=(i.last-i.first)/100,a=i.first+e*n,r=a+n;this.channels.some(e=>{var t=e.events;let i=0,n=t.length;for(;i<n;){var o=i+n>>1,s=t[o].time;if(s<a)i=1+o;else{if(!(s>r))return!0;n=o}}return!1})&&(this.play(e=>e.time>=a&&e.time<=r,!1,!1,t),this.playingChannels=this.playingChannels||this.channels,this.isPaused=!0,this.isPlaying=!1,this.resumeFromTime=r)}}getLastPlayedPoint(n){const o=this.getCurrentTime(),e=this.playingChannels||this.channels;let i=1/0,s=null;return e.forEach(e=>{var t,e=e.events.filter((e,t,i)=>!(!(e.relatedPoint&&e.time<=o)||n&&!n(e,t,i))),e=e[e.length-1];e&&(t=e.time,(t=Math.abs(t-o))<i&&(i=t,s=e.relatedPoint))}),s}reset(){this.isPlaying&&this.cancel(),this.resetPlayState()}cancel(){const e=this.options.onStop;e&&e({chart:this.chart,timeline:this}),this.isPlaying=!1,this.channels.forEach(e=>e.cancel()),this.playingChannels&&this.playingChannels!==this.channels&&this.playingChannels.forEach(e=>e.cancel()),this.clearScheduledCallbacks(),this.resumeFromTime=0}destroy(){this.cancel(),this.playingChannels&&this.playingChannels!==this.channels&&this.playingChannels.forEach(e=>e.destroy()),this.channels.forEach(e=>e.destroy())}setMasterVolume(t){this.channels.forEach(e=>e.engine.setMasterVolume(t))}getMIDIData(){return MIDI(this.channels.filter(e=>"instrument"===e.type))}downloadMIDI(e){var t=this.getMIDIData(),e=(e||this.chart&&this.chart.options.title&&this.chart.options.title.text||"chart")+".mid",t=new Blob([t],{type:"application/octet-stream"}),t=window.URL.createObjectURL(t);SonificationTimeline_downloadURL(t,e),window.URL.revokeObjectURL(t)}resetPlayState(){delete this.playingChannels,delete this.onEndArgument,this.playTimestamp=this.resumeFromTime=0,this.isPaused=!1}clearScheduledCallbacks(){this.scheduledCallbacks.forEach(clearTimeout),this.scheduledCallbacks=[]}}const Sonification_SonificationTimeline=SonificationTimeline,external_highcharts_src_js_default_Templating_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default.Templating;var external_highcharts_src_js_default_Templating_default=__webpack_require__.n(external_highcharts_src_js_default_Templating_namespaceObject);const{clamp:TimelineFromChart_clamp,defined:TimelineFromChart_defined,extend:TimelineFromChart_extend,getNestedProperty,merge:TimelineFromChart_merge,pick:TimelineFromChart_pick}=external_highcharts_src_js_default_default(),format=external_highcharts_src_js_default_Templating_default()["format"],isNoteDefinition=e=>/^([a-g][#b]?)[0-8]$/i.test(e);function getPointPropValue(e,t){let i;if(t){if("number"==typeof(i=e[t]))return i;i=getNestedProperty(t,e)}return"number"==typeof i?i:void 0}function getChartExtremesForProps(e,i,n){var o=e.series,s=i.length,a=n.length,t=e=>e.reduce((e,t)=>(e[t]={min:1/0,max:-1/0},e),{}),r=(e,t,i)=>{let n=t[i];"number"==typeof(n=void 0===n?getNestedProperty(i,t):n)&&(e[i].min=Math.min(e[i].min,n),e[i].max=Math.max(e[i].max,n))},l=t(i);let c=o.length;const h=new Array(c);for(;c--;){var u=t(n),m=o[c].options;if(!(!o[c].visible||m&&m.sonification&&!1===m.sonification.enabled)){var p=o[c].points||[];let t=p.length;for(;t--;){let e=s;for(;e--;)r(l,p[t],i[e]);for(e=a;e--;)r(u,p[t],n[e])}h[c]=u}}return{globalExtremes:l,seriesExtremes:h}}function getPropMetrics(e){const t=e.options.sonification||{},i=(t.defaultInstrumentOptions||{}).mapping||{time:"x",pitch:"y"},n=t.defaultSpeechOptions&&t.defaultSpeechOptions.mapping||{},o=[],s={},a=(e,t)=>{null!==t?(o[t]=o[t]||{},o[t][e]=!0):s[e]=!0},r={},l={},c=(e,t,i)=>{var n,o=e=>"-"===e.charAt(0)?e.slice(1):e;return"string"==typeof t&&"text"!==e?"pitch"===e&&isNoteDefinition(t)?void 0:("time"===e&&(l[t]=!0,a(t,i)),void(r[o(t)]=!0)):(n=t)&&n.mapTo&&"string"==typeof n.mapTo?(o=o(n.mapTo),"time"===e&&a(o,i),"time"!==e&&"series"!==n.within||(l[o]=!0),void(r[o]=!0)):void(-1<["tremolo","lowpass","highpass"].indexOf(e)&&"object"==typeof t&&Object.keys(t).forEach(e=>c(e,t[e],i)))},h=(t,i)=>{Object.keys(t).forEach(e=>c(e,t[e],i))},u=e=>e.forEach(e=>{r[e.valueProp||"x"]=l[e.valueProp||"x"]=!0}),m=(h(i,null),h(n,null),u(t.globalContextTracks||[]),Object.keys(s).length);return e.series.forEach(t=>{const e=t.options.sonification;var i,n;!t.visible||e&&!1===e.enabled||(m&&(o[t.index]=TimelineFromChart_merge(s)),e&&(i=(e.defaultInstrumentOptions||{}).mapping,n=(e.defaultSpeechOptions||{}).mapping,i&&h(i,t.index),n&&h(n,t.index),u(e.contextTracks||[]),(e.tracks||[]).concat(e.contextTracks||[]).forEach(e=>{e.mapping&&h(e.mapping,t.index)})))}),{seriesTimeProps:o,...getChartExtremesForProps(e,Object.keys(r),Object.keys(l))}}function mapToVirtualAxis(e,t,i,n,o){var s=t.max-t.min;if(s<=0)return i.min;var a=i.max-i.min;let r=a*(e-t.min)/s;if(o){const l=0<t.min?e=>Math.log(e)/Math.LOG10E:e=>{let t=Math.abs(e);t<10&&(t+=(10-t)/10);var i=Math.log(t)/Math.LN10;return e<0?-i:i};s=l(t.min);r=a*(l(e)-s)/(l(t.max)-s)}o=n?i.max-r:i.min+r;return TimelineFromChart_clamp(o,i.min,i.max)}function getMappingParameterValue(e,t,i,n,o,s){if("number"==typeof o)return o;if("function"==typeof o)return o(TimelineFromChart_extend({time:0},e));let a=o,r=n.mapFunction,l=n.min,c=n.max,h=n.within,u;if("object"==typeof o&&(a=o.mapTo,r=o.mapFunction||r,l=TimelineFromChart_pick(o.min,l),c=TimelineFromChart_pick(o.max,c),h=o.within||n.within,u=o.scale),!a)return null;n="-"===a.charAt(0);n&&(a=a.slice(1));let m=e.value;var p="value"===a&&void 0!==m&&s;if(!p){var o=o.value;if(void 0!==o)m=o;else{if(!e.point)return null;m=e.point[a]}void 0===m&&(m=getNestedProperty(a,e.point))}if("number"!=typeof m||null===m)return null;let d=null;if(e.point&&("xAxis"===h||"yAxis"===h?(o=e.point.series[h])&&TimelineFromChart_defined(o.dataMin)&&TimelineFromChart_defined(o.dataMax)&&(d={min:o.dataMin,max:o.dataMax}):("series"===h||i)&&e.point.series&&(d=t.seriesExtremes[e.point.series.index][p?s:a])),d=d||t.globalExtremes[p?s:a],u){const y=[],g=Math.floor(l/12),v=Math.ceil(c/12)+1,T=u.length;for(let t=g;t<v;++t)for(let e=0;e<T;++e){var f=12*t+u[e];f>=l&&f<=c&&y.push(f)}o=mapToVirtualAxis(m,d,{min:0,max:y.length-1},n,"logarithmic"===r);return y[Math.round(o)]}return mapToVirtualAxis(m,d,{min:l,max:c},n,"logarithmic"===r)}function getParamValWithDefault(e,t,i,n,o,s,a){return TimelineFromChart_pick(getMappingParameterValue(e,t,i,TimelineFromChart_extend({min:0,max:1,mapTo:"y",mapFunction:"linear",within:"chart"},s||{}),n,a),o)}function getPointTime(e,t,i,n,o,s){return getParamValWithDefault({point:e,time:0},o,s,n,0,{min:0,max:i,mapTo:"x"})+t}function getAvailableDurationForSeries(e,t,i,n){let o,s;var t=t-(e.chart.series.length-1)*n,n=i.seriesTimeProps.every(e=>{e=Object.keys(e);return!(1<e.length)&&(o=o||e[0])===e[0]});return s=n?(n=(n=i.seriesExtremes[e.index][o]).max-n.min,i=i.seriesExtremes.reduce((e,t)=>t[o]?e+t[o].max-t[o].min:e,0),Math.round(n/i*t)):(n=e.chart.series.reduce((e,t)=>e+t.points.length,0),Math.round((e.points||[]).length/n*t)),Math.max(50,s)}function addTimelineChannelFromTrack(e,t,i,n){var o=n,s=n.mapping||{},o="speech"===n.type?new Sonification_SonificationSpeaker({language:o.language,name:o.preferredVoice}):new Sonification_SonificationInstrument(t,i,{capabilities:{pan:!!s.pan,tremolo:!!s.tremolo,filters:!(!s.highpass&&!s.lowpass)},synthPatch:n.instrument,midiTrackName:n.midiName});return e.addChannel(n.type||"instrument",o,TimelineFromChart_pick(n.showPlayMarker,!0))}function addMappedInstrumentEvent(o,n,s,a,r,l){var e=(e,t,i,n)=>getParamValWithDefault(o,a,!1,(n||s)[e],t,i,l);const c=[],h={noteDuration:e("noteDuration",200,{min:40,max:1e3}),pan:e("pan",0,{min:-1,max:1}),volume:e("volume",1,{min:.1,max:1})},u=(s.frequency&&(h.frequency=e("frequency",440,{min:50,max:6e3})),s.lowpass&&(h.lowpassFreq=e("frequency",2e4,{min:0,max:2e4},s.lowpass),h.lowpassResonance=e("resonance",0,{min:-6,max:12},s.lowpass)),s.highpass&&(h.highpassFreq=e("frequency",2e4,{min:0,max:2e4},s.highpass),h.highpassResonance=e("resonance",0,{min:-6,max:12},s.highpass)),s.tremolo&&(h.tremoloDepth=e("depth",0,{min:0,max:.8},s.tremolo),h.tremoloSpeed=e("speed",0,{min:0,max:.8},s.tremolo)),e("gapBetweenNotes",150,{min:50,max:1e3})),m=e("playDelay",0,{max:200});e=(e,t=0)=>{let i=e;e.mapTo?("string"==typeof e.min&&(i.min=Sonification_SonificationInstrument.noteStringToC0Distance(e.min)),"string"==typeof e.max&&(i.max=Sonification_SonificationInstrument.noteStringToC0Distance(e.max))):"string"==typeof e&&isNoteDefinition(e)&&(i=Sonification_SonificationInstrument.noteStringToC0Distance(e)),h.note=getParamValWithDefault(o,a,!1,i,-1,{min:0,max:107},l),-1<h.note&&(r&&(h.note=Math.round(h.note)),c.push(n.addEvent({time:o.time+m+u*t,relatedPoint:o.point,instrumentEventOptions:void 0!==t?TimelineFromChart_extend({},h):h})))};return s.pitch&&s.pitch.constructor===Array?s.pitch.forEach(e):s.pitch?e(s.pitch):s.frequency&&c.push(n.addEvent({time:o.time+m,relatedPoint:o.point,instrumentEventOptions:h})),c}function getSpeechMessageValue(e,t){return format("function"==typeof t?t(e):t,e,e.point&&e.point.series.chart)}function addMappedSpeechEvent(n,e,o,s,a){var t=(e,t,i)=>getParamValWithDefault(n,s,!1,o[e],t,i,a),i=t("playDelay",0,{max:200}),r=t("pitch",1,{min:.3,max:2}),l=t("rate",1,{min:.4,max:4}),t=t("volume",1,{min:.1}),c=getSpeechMessageValue(n,o.text);if(c)return e.addEvent({time:n.time+i,relatedPoint:n.point,speechOptions:{pitch:r,rate:l,volume:t},message:c})}function addMappedEventForPoint(e,t,i,n){let o=[];var s;return"speech"===i.type&&i.mapping?(s=addMappedSpeechEvent(e,t,i.mapping,n))&&(o=[s]):i.mapping&&(o=addMappedInstrumentEvent(e,t,i.mapping,n,TimelineFromChart_pick(i.roundToMusicalNotes,!0))),o}function getGroupedPoints(e,t){var i=e.algorithm||"minmax",n=e=>t[e]?[t[e].point]:[];if("first"===i)return n(0);if("last"===i)return n(t.length-1);if("middle"===i)return n(t.length>>1);if("firstlast"===i)return n(0).concat(n(t.length-1));if("minmax"===i){const a=e.prop||"y";let i,n,o,s;if(t.forEach(e=>{var t=getPointPropValue(e.point,a);void 0!==t&&((!i||t<o)&&(i=e,o=t),(!n||t>s)&&(n=e,s=t))}),i&&n)return i.point===n.point?[i.point]:i.time>n.time?[n.point,i.point]:[i.point,n.point]}return[]}function isActive(t,i,n){if("function"==typeof i)return i(t);if("object"!=typeof i)return!0;{var o=i.prop,t=TimelineFromChart_pick(t.value,t.point&&getPointPropValue(t.point,o));if("number"!=typeof t)return!1;let e=!0;var o=i.crossingUp,s=i.crossingDown,a="number"==typeof n,o=(e=o&&s?a&&(n<o&&o<=t||s<n&&t<=s):(void 0===o||a&&n<o&&o<=t)&&(void 0===s||a&&s<n&&t<=s),TimelineFromChart_pick(i.max,1/0)),a=TimelineFromChart_pick(i.min,-1/0);return t<=o&&a<=t&&e}}function timelineFromChart(v,T,e){const t=e.options.sonification||{},u=t.defaultInstrumentOptions,m=t.defaultSpeechOptions,c=TimelineFromChart_merge({enabled:!0,groupTimespan:15,algorithm:"minmax",prop:"y"},t.pointGrouping),p=t.globalTracks||[],q=t.globalContextTracks||[],_="sequential"===t.order,w=Math.max(50,t.duration-300),S=t.afterSeriesWait,x=t.events||{},P=getPropMetrics(e),k=new Sonification_SonificationTimeline({onPlay:x.onPlay,onEnd:x.onEnd,onStop:x.onStop,showCrosshair:t.showCrosshair,showTooltip:t.showTooltip},e);e.sonification&&(e.sonification.propMetrics=P);let E=0;return e.series.forEach((f,h)=>{const e=f.options.sonification||{};if(f.visible&&!1!==e.enabled){const y=_?getAvailableDurationForSeries(f,w,P,S):w,i=TimelineFromChart_merge(u,e.defaultInstrumentOptions),n=TimelineFromChart_merge(m,e.defaultSpeechOptions),o=TimelineFromChart_merge(c,e.pointGrouping),t=(e.tracks||[i]).concat(p),s=!!k.channels.length,a=s&&!_?e.contextTracks||[]:(e.contextTracks||[]).concat(q),g=[];let d;t.forEach(e=>{const a=TimelineFromChart_merge({pointGrouping:o,midiName:e.midiName||f.name},"speech"===e.type?n:i,e),r=a.pointGrouping,l=a.activeWhen,c=e=>{"object"==typeof l&&l.prop&&(d=getPointPropValue(e,l.prop))},t=addTimelineChannelFromTrack(k,v,T,a),h=e=>g.push(...addMappedEventForPoint(e,t,a,P));let u=[],m=0;const p=e=>{if(1===u.length)h({point:u[0].point,time:m+e/2});else{const t=getGroupedPoints(r,u),i=e/t.length;t.forEach((e,t)=>h({point:e,time:m+i/2+i*t}))}u=[]};(f.points||[]).forEach((e,t)=>{var i,n,t=t===f.points.length-1,o=getPointTime(e,E,y,a.mapping&&a.mapping.time||0,P,_),s={point:e,time:o};if(!a.mapping||!isActive(s,l,d))return c(e),void(t&&u.length&&p(u[u.length-1].time-u[0].time));c(e),r.enabled?(e=o-m,i=r.groupTimespan,n=t&&e<=i?e:i,t||i<e?(e<=i&&u.push(s),p(n),m=Math.floor(o/i)*i,t&&i<e?h({point:s.point,time:m+n/2}):u=[s]):u.push(s)):h(s)})});const r=g.reduce((e,t)=>t.time<e.time?t:e,{time:1/0}),l=g.reduce((e,t)=>t.time>e.time?t:e,{time:-1/0});r.callback=x.onSeriesStart?x.onSeriesStart.bind(null,{series:f,timeline:k}):void 0,l.callback=x.onSeriesEnd?x.onSeriesEnd.bind(null,{series:f,timeline:k}):void 0,a.forEach(e=>{const i="speech"===e.type?TimelineFromChart_merge(m,e):TimelineFromChart_merge(u,{mapping:{pitch:{mapTo:"value"}}},e),n=addTimelineChannelFromTrack(k,v,T,i),{timeInterval:t,valueInterval:o}=(d=void 0,i),s=i.valueProp||"x",a=i.activeWhen,r=P.seriesExtremes[h][s],l=(e,t)=>{i.mapping&&isActive({time:e,value:t},"object"==typeof a?TimelineFromChart_extend({prop:s},a):a,d)?(d=t,"speech"===i.type?addMappedSpeechEvent({time:e,value:t},n,i.mapping,P,s):addMappedInstrumentEvent({time:e,value:t},n,i.mapping,P,TimelineFromChart_pick(i.roundToMusicalNotes,!0),s)):d=t};if(t){let e=0;for(;e<=y;){var c=mapToVirtualAxis(e,{min:0,max:y},r);l(e+E,c),e+=t}}if(o){let e=r.min;for(;e<=r.max;)l(mapToVirtualAxis(e,r,{min:0,max:y},!1,"logarithmic"===i.valueMapFunction)+E,e),e+=o}}),_&&(E+=y+S)}}),k}const TimelineFromChart=timelineFromChart,{defaultOptions,getOptions}=external_highcharts_src_js_default_default(),{addEvent,extend:Sonification_extend,fireEvent,merge:Sonification_merge,pick:Sonification_pick}=external_highcharts_src_js_default_default(),{doc:Sonification_doc,win:Sonification_win}=external_highcharts_src_js_default_default();class Sonification{constructor(t){this.chart=t,this.retryContextCounter=0,this.lastUpdate=0,this.unbindKeydown=addEvent(Sonification_doc,"keydown",function(e){t&&t.sonification&&("Esc"===e.key||"Escape"===e.key)&&t.sonification.cancel()});try{this.audioContext=new Sonification_win.AudioContext,this.audioContext.suspend(),this.audioDestination=this.audioContext.destination}catch(e){}}setAudioDestination(e){this.audioDestination=e,this.update()}isPlaying(){return!!this.timeline&&this.timeline.isPlaying}playSegment(e,t){this.ready(this.playSegment.bind(this,e,t))&&this.timeline&&this.timeline.playSegment(e,t)}playAdjacent(e,t,i){var n;this.ready(this.playAdjacent.bind(this,e,t,i))&&this.timeline&&((n=(n=this.chart.options.sonification)&&n.events&&n.events.onBoundaryHit)||this.initBoundaryInstrument(),this.timeline.playAdjacent(e,t,n||(()=>{this.defaultBoundaryHit()}),i))}playAdjacentSeries(e,t="x",i){var n=this.getLastPlayedPoint();if(n){const o=n.series.index+(e?1:-1);return this.playClosestToProp(t,n[t],e=>!!e.relatedPoint&&e.relatedPoint.series.index===o,i),this.chart.series[o]||null}return null}playClosestToProp(e,t,i,n){var o;this.ready(this.playClosestToProp.bind(this,e,t,i,n))&&this.timeline&&((o=(o=this.chart.options.sonification)&&o.events&&o.events.onBoundaryHit)||this.initBoundaryInstrument(),this.timeline.playClosestToPropValue(e,t,n,o||(()=>this.defaultBoundaryHit()),i))}getLastPlayedPoint(){return this.timeline?this.timeline.getLastPlayedPoint():null}playNote(e,t,i=0){if(this.ready(this.playNote.bind(this,e,t))){var n=t.noteDuration=t.noteDuration||500;const o=new Sonification_SonificationInstrument(this.audioContext,this.audioDestination,{synthPatch:e,capabilities:{filters:!0,tremolo:!0,pan:!0}});o.scheduleEventAtTime(i/1e3,t),setTimeout(()=>o&&o.destroy(),i+n+500)}}speak(e,t,i=0){const n=new Sonification_SonificationSpeaker(Sonification_merge({language:"en-US",rate:1.5,volume:.4},t||{}));n.sayAtTime(i,e)}cancel(){this.timeline&&this.timeline.cancel(),fireEvent(this,"cancel")}downloadMIDI(){this.ready(this.downloadMIDI.bind(this))&&this.timeline&&(this.timeline.reset(),this.timeline.downloadMIDI())}sonifyChart(e,t){this.ready(this.sonifyChart.bind(this,e,t))&&this.timeline&&(this.timeline.reset(),this.beforePlay(),this.timeline.play(void 0,void 0,e,t))}sonifySeries(t,e,i){this.ready(this.sonifySeries.bind(this,t,e,i))&&this.timeline&&(this.timeline.reset(),this.beforePlay(),this.timeline.play(e=>!!e.relatedPoint&&e.relatedPoint.series===t,void 0,e,i))}sonifyPoint(t,e){this.ready(this.sonifyPoint.bind(this,t,e))&&this.timeline&&(this.timeline.reset(),this.beforePlay(),this.timeline.anchorPlayMoment(e=>e.relatedPoint===t,e))}setMasterVolume(e){this.timeline&&this.timeline.setMasterVolume(e)}destroy(){this.unbindKeydown(),this.timeline&&(this.timeline.destroy(),delete this.timeline),this.boundaryInstrument&&this.boundaryInstrument.stop(),this.audioContext&&(this.audioContext.close(),delete this.audioContext)}update(){const e=this.chart.options&&this.chart.options.sonification;if(this.ready(this.update.bind(this))&&e){var t=Date.now(),i=e.updateInterval;if(t-this.lastUpdate<i&&!this.forceReady)return clearTimeout(this.scheduledUpdate),void(this.scheduledUpdate=setTimeout(this.update.bind(this),i/2));const n=e.events||{};if(n.beforeUpdate&&n.beforeUpdate({chart:this.chart,timeline:this.timeline}),this.lastUpdate=t,this.timeline&&this.timeline.destroy(),this.audioContext&&this.audioDestination){this.timeline=TimelineFromChart(this.audioContext,this.audioDestination,this.chart);const e=this.chart.options.sonification;this.timeline.setMasterVolume(Sonification_pick(e&&e.masterVolume,1))}n.afterUpdate&&n.afterUpdate({chart:this.chart,timeline:this.timeline})}}ready(e){return!(!(this.audioContext&&this.audioDestination&&this.chart.options)||this.chart.options.sonification&&!1===this.chart.options.sonification.enabled)&&("suspended"!==this.audioContext.state||this.forceReady?!(this.retryContextCounter=0):(this.retryContextCounter++<20&&setTimeout(()=>{this.audioContext&&"suspended"===this.audioContext.state?this.audioContext.resume().then(e):e()},5),!1))}beforePlay(){const e=this.chart.options.sonification,t=e&&e.events&&e.events.beforePlay;t&&t({chart:this.chart,timeline:this.timeline})}initBoundaryInstrument(){this.boundaryInstrument||(this.boundaryInstrument=new Sonification_SynthPatch(this.audioContext,Sonification_merge(Sonification_InstrumentPresets.chop,{masterVolume:.3})),this.boundaryInstrument.startSilently(),this.boundaryInstrument.connect(this.audioDestination))}defaultBoundaryHit(){this.boundaryInstrument&&(this.boundaryInstrument.playFreqAtTime(.1,1,200),this.boundaryInstrument.playFreqAtTime(.2,1,200))}}!function(i){const o=[];function s(){const e=this.sonification,t=this.options&&this.options.sonification;t&&t.enabled?e?e.update():(this.sonification=new i(this),this.sonification.update()):e&&(e.destroy(),delete this.sonification)}function a(){this&&this.sonification&&this.sonification.destroy()}function r(){this.updateSonificationEnabled&&this.updateSonificationEnabled()}function l(e){e=e.options.sonification;e&&(Sonification_merge(!0,this.options.sonification,e),r.call(this))}i.compose=function(e,t,i){-1===o.indexOf(e)&&(o.push(e),Sonification_extend(e.prototype,{updateSonificationEnabled:s,sonify:function(e){this.sonification&&this.sonification.sonifyChart(!1,e)},toggleSonify:function(e=!0,t){if(this.sonification){const i=this.sonification.timeline;Sonification_win.speechSynthesis&&Sonification_win.speechSynthesis.cancel(),i&&this.sonification.isPlaying()?e?this.sonification.cancel():i.pause():i&&i.isPaused?i.resume():this.sonification.sonifyChart(e,t)}}}),addEvent(e,"destroy",a),addEvent(e,"render",r),addEvent(e,"update",l)),-1===o.indexOf(t)&&(o.push(t),t.prototype.sonify=function(e){this.chart.sonification&&this.chart.sonification.sonifySeries(this,!1,e)}),-1===o.indexOf(i)&&(o.push(i),i.prototype.sonify=function(e){this.series.chart.sonification&&this.series.chart.sonification.sonifyPoint(this,e)});const n=getOptions().exporting;n&&n.buttons&&n.buttons.contextButton.menuItems&&n.buttons.contextButton.menuItems.push("separator","downloadMIDI","playAsSound")}}(Sonification=Sonification||{}),Sonification_merge(!0,defaultOptions,Sonification_Options);const Sonification_Sonification=Sonification,Scales={minor:[0,2,3,5,7,8,10],dorian:[0,2,3,5,7,9,10],harmonicMinor:[0,2,3,5,7,8,11],phrygian:[0,1,3,5,7,8,11],major:[0,2,4,5,7,9,11],lydian:[0,2,4,6,7,9,11],mixolydian:[0,2,4,5,7,9,10],majorPentatonic:[0,2,4,7,9],minorPentatonic:[0,3,5,7,10]},Sonification_Scales=Scales,G=external_highcharts_src_js_default_default(),sonification_src=(G.sonification={InstrumentPresets:Sonification_InstrumentPresets,Scales:Sonification_Scales,SynthPatch:Sonification_SynthPatch,SonificationInstrument:Sonification_SonificationInstrument,SonificationSpeaker:Sonification_SonificationSpeaker,SonificationTimeline:Sonification_SonificationTimeline,Sonification:Sonification_Sonification},Sonification_Sonification.compose(G.Chart,G.Series,G.Point),external_highcharts_src_js_default_default());export{sonification_src as default};