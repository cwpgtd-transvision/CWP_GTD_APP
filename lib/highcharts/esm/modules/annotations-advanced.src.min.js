import*as __WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__ from"../highcharts.src.js";import*as __WEBPACK_EXTERNAL_MODULE__annotations_src_js_518a1ad8__ from"./annotations.src.js";var __webpack_require__={n:t=>{var i=t&&t.__esModule?()=>t.default:()=>t;return __webpack_require__.d(i,{a:i}),i},d:(t,i)=>{for(var e in i)__webpack_require__.o(i,e)&&!__webpack_require__.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:i[e]})},o:(t,i)=>Object.prototype.hasOwnProperty.call(t,i)};const external_highcharts_src_js_default_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default;var AnnotationChart,external_highcharts_src_js_default_default=__webpack_require__.n(external_highcharts_src_js_default_namespaceObject),x=t=>{var i={};return __webpack_require__.d(i,t),i},y=t=>()=>t;const external_annotations_src_js_namespaceObject=x({}),{addEvent,erase,find,fireEvent,isArray,isObject,pick,wrap}=external_highcharts_src_js_default_default();function chartAddAnnotation(t,i){const e=this.initAnnotation(t);return this.options.annotations.push(e.options),pick(i,!0)&&(e.redraw(),e.graphic.attr({opacity:1})),e}function chartCallback(){const r=this;r.plotBoxClip=this.renderer.clipRect(this.plotBox),r.controlPointsGroup=r.renderer.g("control-points").attr({zIndex:99}).clip(r.plotBoxClip).add(),r.options.annotations.forEach((i,t)=>{var e;r.annotations.some(t=>t.options===i)||(e=r.initAnnotation(i),r.options.annotations[t]=e.options)}),r.drawAnnotations(),addEvent(r,"redraw",r.drawAnnotations),addEvent(r,"destroy",function(){r.plotBoxClip.destroy(),r.controlPointsGroup.destroy()}),addEvent(r,"exportData",function(l){const t=r.annotations,e=(this.options.exporting&&this.options.exporting.csv||{}).columnHeaderFormatter,s=!l.dataRows[1].xValues,o=r.options.lang&&r.options.lang.exportData&&r.options.lang.exportData.annotationHeader,c=l.dataRows[0].length,p=r.options.exporting&&r.options.exporting.csv&&r.options.exporting.csv.annotations&&r.options.exporting.csv.annotations.itemDelimiter,d=r.options.exporting&&r.options.exporting.csv&&r.options.exporting.csv.annotations&&r.options.exporting.csv.annotations.join;t.forEach(t=>{t.options.labelOptions&&t.options.labelOptions.includeInDataExport&&t.labels.forEach(t=>{if(t.options.text){const h=t.options.text;t.points.forEach(t=>{const i=t.x,e=t.series.xAxis?t.series.xAxis.index:-1;let s=!1;if(-1===e){const o=l.dataRows[0].length,n=new Array(o);for(let t=0;t<o;++t)n[t]="";n.push(h),n.xValues=[],n.xValues[e]=i,l.dataRows.push(n),s=!0}if(s||l.dataRows.forEach(t=>{!s&&t.xValues&&void 0!==e&&i===t.xValues[e]&&(d&&t.length>c?t[t.length-1]+=p+h:t.push(h),s=!0)}),!s){const a=l.dataRows[0].length,r=new Array(a);for(let t=0;t<a;++t)r[t]="";r[0]=i,r.push(h),r.xValues=[],void 0!==e&&(r.xValues[e]=i),l.dataRows.push(r)}})}})});let i=0;l.dataRows.forEach(t=>{i=Math.max(i,t.length)});var n=i-l.dataRows[0].length;for(let t=0;t<n;t++){var a=function(t){let i;return e&&!1!==(i=e(t))?i:(i=o+" "+t,s?{columnTitle:i,topLevelColumnTitle:i}:i)}(t+1);s?(l.dataRows[0].push(a.topLevelColumnTitle),l.dataRows[1].push(a.columnTitle)):l.dataRows[0].push(a)}})}function chartDrawAnnotations(){this.plotBoxClip.attr(this.plotBox),this.annotations.forEach(t=>{t.redraw(),t.graphic.animate({opacity:1},t.animationConfig)})}function chartRemoveAnnotation(i){const t=this.annotations,e="annotations"===i.coll?i:find(t,function(t){return t.options.id===i});e&&(fireEvent(e,"remove"),erase(this.options.annotations,e.options),erase(t,e),e.destroy())}function onChartAfterInit(){var t=this.options.annotations,i=this.userOptions.annotations;this.annotations=[],isArray(this.options.annotations)||(this.options.annotations=[]),isObject(i,!0)&&isObject(t,!0)&&this.options.annotations.push(t)}function wrapPointerOnContainerMouseDown(t){this.chart.hasDraggedAnnotation||t.apply(this,Array.prototype.slice.call(arguments,1))}(AnnotationChart||(AnnotationChart={})).compose=function(s,t,i){const e=t.prototype;e.addAnnotation||(i=i.prototype,addEvent(t,"afterInit",onChartAfterInit),e.addAnnotation=chartAddAnnotation,e.callbacks.push(chartCallback),e.collectionsWithInit.annotations=[chartAddAnnotation],e.collectionsWithUpdate.push("annotations"),e.drawAnnotations=chartDrawAnnotations,e.removeAnnotation=chartRemoveAnnotation,e.initAnnotation=function(t){const i=s.types[t.type]||s,e=new i(this,t);return this.annotations.push(e),e},wrap(i,"onContainerMouseDown",wrapPointerOnContainerMouseDown))};const Annotations_AnnotationChart=AnnotationChart,defined=external_highcharts_src_js_default_default()["defined"],AnnotationDefaults={visible:!0,animation:{},crop:!0,draggable:"xy",labelOptions:{align:"center",allowOverlap:!1,backgroundColor:"rgba(0, 0, 0, 0.75)",borderColor:"#000000",borderRadius:3,borderWidth:1,className:"highcharts-no-tooltip",crop:!1,formatter:function(){return defined(this.y)?""+this.y:"Annotation label"},includeInDataExport:!0,overflow:"justify",padding:5,shadow:!1,shape:"callout",style:{fontSize:"0.7em",fontWeight:"normal",color:"contrast"},useHTML:!1,verticalAlign:"bottom",x:0,y:-16},shapeOptions:{stroke:"rgba(0, 0, 0, 0.75)",strokeWidth:1,fill:"rgba(0, 0, 0, 0.75)",r:0,snap:2},controlPointOptions:{events:{},style:{cursor:"pointer",fill:"#ffffff",stroke:"#000000","stroke-width":2},height:10,symbol:"circle",visible:!1,width:10},events:{},types:{},zIndex:6},Annotations_AnnotationDefaults=AnnotationDefaults,{doc,isTouchDevice}=external_highcharts_src_js_default_default(),{addEvent:EventEmitter_addEvent,fireEvent:EventEmitter_fireEvent,objectEach,pick:EventEmitter_pick,removeEvent}=external_highcharts_src_js_default_default();class EventEmitter{addEvents(){function i(t){EventEmitter_addEvent(t,isTouchDevice?"touchstart":"mousedown",t=>{s.onMouseDown(t)},{passive:!1})}const s=this;if(i(this.graphic.element),(s.labels||[]).forEach(t=>{t.options.useHTML&&t.graphic.text&&!t.graphic.text.foreignObject&&i(t.graphic.text.element)}),objectEach(s.options.events,(i,e)=>{function t(t){"click"===e&&s.cancelClick||i.call(s,s.chart.pointer?.normalize(t),s.target)}-1===(s.nonDOMEvents||[]).indexOf(e)?(EventEmitter_addEvent(s.graphic.element,e,t,{passive:!1}),s.graphic.div&&EventEmitter_addEvent(s.graphic.div,e,t,{passive:!1})):EventEmitter_addEvent(s,e,t,{passive:!1})}),s.options.draggable&&(EventEmitter_addEvent(s,"drag",s.onDrag),!s.graphic.renderer.styledMode)){const e={cursor:{x:"ew-resize",y:"ns-resize",xy:"move"}[s.options.draggable]};s.graphic.css(e),(s.labels||[]).forEach(t=>{t.options.useHTML&&t.graphic.text&&!t.graphic.text.foreignObject&&t.graphic.text.css(e)})}s.isUpdating||EventEmitter_fireEvent(s,"add")}destroy(){this.removeDocEvents(),removeEvent(this),this.hcEvents=null}mouseMoveToRadians(t,i,e){let s=t.prevChartY-e,o=t.prevChartX-i,n=t.chartY-e,a=t.chartX-i,r;return this.chart.inverted&&(r=o,o=s,s=r,r=a,a=n,n=r),Math.atan2(n,a)-Math.atan2(s,o)}mouseMoveToScale(t,i,e){var s=t.prevChartX-i,o=t.prevChartY-e;let n=(t.chartX-i||1)/(s||1),a=(t.chartY-e||1)/(o||1);return this.chart.inverted&&(i=a,a=n,n=i),{x:n,y:a}}mouseMoveToTranslation(t){let i=t.chartX-t.prevChartX,e=t.chartY-t.prevChartY,s;return this.chart.inverted&&(s=e,e=i,i=s),{x:i,y:e}}onDrag(t){if(this.chart.isInsidePlot(t.chartX-this.chart.plotLeft,t.chartY-this.chart.plotTop,{visiblePlotOnly:!0})){const i=this.mouseMoveToTranslation(t);"x"===this.options.draggable&&(i.y=0),"y"===this.options.draggable&&(i.x=0);this.points.length?this.translate(i.x,i.y):(this.shapes.forEach(t=>t.translate(i.x,i.y)),this.labels.forEach(t=>t.translate(i.x,i.y))),this.redraw(!1)}}onMouseDown(t){if(t.preventDefault&&t.preventDefault(),2!==t.button){const s=this,o=s.chart.pointer,n=t?.sourceCapabilities?.firesTouchEvents||!1;let i=(t=o?.normalize(t)||t).chartX,e=t.chartY;s.cancelClick=!1,s.chart.hasDraggedAnnotation=!0,s.removeDrag=EventEmitter_addEvent(doc,isTouchDevice||n?"touchmove":"mousemove",function(t){s.hasDragged=!0,(t=o?.normalize(t)||t).prevChartX=i,t.prevChartY=e,EventEmitter_fireEvent(s,"drag",t),i=t.chartX,e=t.chartY},isTouchDevice||n?{passive:!1}:void 0),s.removeMouseUp=EventEmitter_addEvent(doc,isTouchDevice||n?"touchend":"mouseup",function(){const t=EventEmitter_pick(s.target&&s.target.annotation,s.target);t&&(t.cancelClick=s.hasDragged),s.cancelClick=s.hasDragged,s.chart.hasDraggedAnnotation=!1,s.hasDragged&&EventEmitter_fireEvent(EventEmitter_pick(t,s),"afterUpdate"),s.hasDragged=!1,s.onMouseUp()},isTouchDevice||n?{passive:!1}:void 0)}}onMouseUp(){this.removeDocEvents()}removeDocEvents(){this.removeDrag&&(this.removeDrag=this.removeDrag()),this.removeMouseUp&&(this.removeMouseUp=this.removeMouseUp())}}const Annotations_EventEmitter=EventEmitter,{merge,pick:ControlPoint_pick}=external_highcharts_src_js_default_default();class ControlPoint extends Annotations_EventEmitter{constructor(t,i,e,s){super(),this.nonDOMEvents=["drag"],this.chart=t,this.target=i,this.options=e,this.index=ControlPoint_pick(e.index,s)}destroy(){super.destroy(),this.graphic&&(this.graphic=this.graphic.destroy()),this.chart=null,this.target=null,this.options=null}redraw(t){this.graphic[t?"animate":"attr"](this.options.positioner.call(this,this.target))}render(){const t=this.chart,i=this.options;this.graphic=t.renderer.symbol(i.symbol,0,0,i.width,i.height).add(t.controlPointsGroup).css(i.style),this.setVisibility(i.visible),this.addEvents()}setVisibility(t){this.graphic[t?"show":"hide"](),this.options.visible=t}update(t){var i=this.chart,e=this.target,s=this.index,t=merge(!0,this.options,t);this.destroy(),this.constructor(i,e,t,s),this.render(i.controlPointsGroup),this.redraw()}}const Annotations_ControlPoint=ControlPoint,external_highcharts_src_js_default_SeriesRegistry_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default.SeriesRegistry;var ControlTarget,external_highcharts_src_js_default_SeriesRegistry_default=__webpack_require__.n(external_highcharts_src_js_default_SeriesRegistry_namespaceObject);const{prototype:seriesProto}=external_highcharts_src_js_default_SeriesRegistry_default()["series"],{defined:MockPoint_defined,fireEvent:MockPoint_fireEvent}=external_highcharts_src_js_default_default();class MockPoint{static fromPoint(t){return new MockPoint(t.series.chart,null,{x:t.x,y:t.y,xAxis:t.series.xAxis,yAxis:t.series.yAxis})}static pointToPixels(t,i){const e=t.series,s=e.chart;let o=t.plotX||0,n=t.plotY||0,a;return s.inverted&&(n=t.mock?(o=t.plotY,t.plotX):(o=s.plotWidth-(t.plotY||0),s.plotHeight-(t.plotX||0))),e&&!i&&(a=e.getPlotBox(),o+=a.translateX,n+=a.translateY),{x:o,y:n}}static pointToOptions(t){return{x:t.x,y:t.y,xAxis:t.series.xAxis,yAxis:t.series.yAxis}}constructor(t,i,e){this.mock=!0,(this.point=this).series={visible:!0,chart:t,getPlotBox:seriesProto.getPlotBox},this.target=i||null,this.options=e,this.applyOptions(this.getOptions())}applyOptions(t){this.command=t.command,this.setAxis(t,"x"),this.setAxis(t,"y"),this.refresh()}getOptions(){return this.hasDynamicOptions()?this.options(this.target):this.options}hasDynamicOptions(){return"function"==typeof this.options}isInsidePlot(){const t=this.plotX,i=this.plotY,e=this.series.xAxis,s=this.series.yAxis,o={x:t,y:i,isInsidePlot:!0,options:{}};return e&&(o.isInsidePlot=MockPoint_defined(t)&&0<=t&&t<=e.len),s&&(o.isInsidePlot=o.isInsidePlot&&MockPoint_defined(i)&&0<=i&&i<=s.len),MockPoint_fireEvent(this.series.chart,"afterIsInsidePlot",o),o.isInsidePlot}refresh(){const t=this.series,i=t.xAxis,e=t.yAxis,s=this.getOptions();i?(this.x=s.x,this.plotX=i.toPixels(s.x,!0)):(this.x=void 0,this.plotX=s.x),e?(this.y=s.y,this.plotY=e.toPixels(s.y,!0)):(this.y=null,this.plotY=s.y),this.isInside=this.isInsidePlot()}refreshOptions(){const t=this.series,i=t.xAxis,e=t.yAxis;this.x=this.options.x=i?this.options.x=i.toValue(this.plotX,!0):this.plotX,this.y=this.options.y=e?e.toValue(this.plotY,!0):this.plotY}rotate(t,i,e){var s,o,n,a;this.hasDynamicOptions()||(s=Math.cos(e),e=Math.sin(e),a=(o=this.plotX-t)*e+(n=this.plotY-i)*s,this.plotX=o*s-n*e+t,this.plotY=a+i,this.refreshOptions())}scale(t,i,e,s){var o,n;this.hasDynamicOptions()||(o=this.plotX*e,n=this.plotY*s,s=(1-s)*i,this.plotX=(1-e)*t+o,this.plotY=s+n,this.refreshOptions())}setAxis(t,i){const e=i+"Axis",s=t[e],o=this.series.chart;this.series[e]="object"==typeof s?s:MockPoint_defined(s)?o[e][s]||o.get(s):null}toAnchor(){const t=[this.plotX,this.plotY,0,0];return this.series.chart.inverted&&(t[0]=this.plotY,t[1]=this.plotX),t}translate(t,i,e,s){this.hasDynamicOptions()||(this.plotX+=e,this.plotY+=s,this.refreshOptions())}}const Annotations_MockPoint=MockPoint,Annotations_ControlTarget=(!function(){function i(){const s=this.controlPoints,o=this.options.controlPoints||[];o.forEach((t,i)=>{const e=external_highcharts_src_js_default_default().merge(this.options.controlPointOptions,t);e.index||(e.index=i),o[i]=e,s.push(new Annotations_ControlPoint(this.chart,this,e))})}function e(t){const i=t.series.getPlotBox(),e=t.series.chart,s=t.mock?t.toAnchor():e.tooltip&&e.tooltip.getAnchor.call({chart:t.series.chart},t)||[0,0,0,0],o={x:s[0]+(this.options.x||0),y:s[1]+(this.options.y||0),height:s[2]||0,width:s[3]||0};return{relativePosition:o,absolutePosition:external_highcharts_src_js_default_default().merge(o,{x:o.x+(t.mock?i.translateX:e.plotLeft),y:o.y+(t.mock?i.translateY:e.plotTop)})}}function s(){this.controlPoints.forEach(t=>t.destroy()),this.chart=null,this.controlPoints=null,this.points=null,this.options=null,this.annotation&&(this.annotation=null)}function o(){var t=this.options;return t.points||t.point&&external_highcharts_src_js_default_default().splat(t.point)}function n(){const t=this.getPointsOptions(),i=this.points,e=t&&t.length||0;let s,o;for(s=0;s<e;s++){if(!(o=this.point(t[s],i[s])))return void(i.length=0);o.mock&&o.refresh(),i[s]=o}return i}function a(t,i){return t&&t.series?t:(i&&null!==i.series||(external_highcharts_src_js_default_default().isObject(t)?i=new Annotations_MockPoint(this.chart,this,t):external_highcharts_src_js_default_default().isString(t)?i=this.chart.get(t)||null:"function"==typeof t&&(i=(e=t.call(i,this)).series?e:new Annotations_MockPoint(this.chart,this,t))),i);var e}function r(i){this.controlPoints.forEach(t=>t.redraw(i))}function h(){this.controlPoints.forEach(t=>t.render())}function l(e,s,o,n,a){var t;this.chart.inverted&&(t=s,s=o,o=t),this.points.forEach((t,i)=>this.transformPoint(e,s,o,n,a,i),this)}function c(t,i,e,s,o,n){let a=this.points[n];(a=a.mock?a:this.points[n]=Annotations_MockPoint.fromPoint(a))[t](i,e,s,o)}function p(t,i){this.transform("translate",null,null,t,i)}function d(t,i,e){this.transformPoint("translate",null,null,t,i,e)}(ControlTarget||(ControlTarget={})).compose=function(t){(t=t.prototype).addControlPoints||external_highcharts_src_js_default_default().merge(!0,t,{addControlPoints:i,anchor:e,destroyControlTarget:s,getPointsOptions:o,linkPoints:n,point:a,redrawControlPoints:r,renderControlPoints:h,transform:l,transformPoint:c,translate:p,translatePoint:d})}}(),ControlTarget),Controllable_merge=external_highcharts_src_js_default_default()["merge"];class Controllable{constructor(t,i,e,s){this.annotation=t,this.chart=t.chart,this.collection="label"===s?"labels":"shapes",this.controlPoints=[],this.options=i,this.points=[],this.index=e,this.itemType=s,this.init(t,i,e)}attr(){this.graphic.attr.apply(this.graphic,arguments)}attrsFromOptions(t){const i=this.constructor.attrsMap,e={},s=this.chart.styledMode;let o,n;for(o in t)n=i[o],void 0===i[o]||s&&-1!==["fill","stroke","stroke-width"].indexOf(n)||(e[n]=t[o]);return e}destroy(){this.graphic&&(this.graphic=this.graphic.destroy()),this.tracker&&(this.tracker=this.tracker.destroy()),this.destroyControlTarget()}init(t,i,e){this.annotation=t,this.chart=t.chart,this.options=i,this.points=[],this.controlPoints=[],this.index=e,this.linkPoints(),this.addControlPoints()}redraw(t){this.redrawControlPoints(t)}render(t){this.options.className&&this.graphic&&this.graphic.addClass(this.options.className),this.renderControlPoints()}rotate(t,i,e){this.transform("rotate",t,i,e)}scale(t,i,e,s){this.transform("scale",t,i,e,s)}setControlPointsVisibility(i){this.controlPoints.forEach(t=>{t.setVisibility(i)})}shouldBeDrawn(){return!!this.points.length}translateShape(t,i,e){const s=this.annotation.chart,o=this.annotation.userOptions,n=s.annotations.indexOf(this.annotation),a=s.options.annotations[n];this.translatePoint(t,i,0),e&&this.translatePoint(t,i,1),a[this.collection][this.index].point=this.options.point,o[this.collection][this.index].point=this.options.point}update(t){const i=this.annotation,e=Controllable_merge(!0,this.options,t),s=this.graphic.parentGroup,o=this.constructor;this.destroy();t=new o(i,e,this.index,this.itemType);Controllable_merge(!0,this,t),this.render(s),this.redraw()}}Annotations_ControlTarget.compose(Controllable);const Controllables_Controllable=Controllable,defaultMarkers={arrow:{tagName:"marker",attributes:{id:"arrow",refY:5,refX:9,markerWidth:10,markerHeight:10},children:[{tagName:"path",attributes:{d:"M 0 0 L 10 5 L 0 10 Z","stroke-width":0}}]},"reverse-arrow":{tagName:"marker",attributes:{id:"reverse-arrow",refY:5,refX:1,markerWidth:10,markerHeight:10},children:[{tagName:"path",attributes:{d:"M 0 5 L 10 0 L 10 10 Z","stroke-width":0}}]}},ControllableDefaults={defaultMarkers:defaultMarkers},Controllables_ControllableDefaults=ControllableDefaults,ControllablePath_defaultMarkers=Controllables_ControllableDefaults["defaultMarkers"],{addEvent:ControllablePath_addEvent,defined:ControllablePath_defined,extend,merge:ControllablePath_merge,uniqueKey}=external_highcharts_src_js_default_default(),markerEndSetter=createMarkerSetter("marker-end"),markerStartSetter=createMarkerSetter("marker-start"),TRACKER_FILL="rgba(192,192,192,"+(external_highcharts_src_js_default_default().svg?1e-4:.002)+")";function createMarkerSetter(i){return function(t){this.attr(i,"url(#"+t+")")}}function onChartAfterGetContainer(){this.options.defs=ControllablePath_merge(ControllablePath_defaultMarkers,this.options.defs||{})}function svgRendererAddMarker(t,i){const e={attributes:{id:t}},s={stroke:i.color||"none",fill:i.color||"rgba(0, 0, 0, 0.75)"};e.children=i.children&&i.children.map(function(t){return ControllablePath_merge(s,t)});i=ControllablePath_merge(!0,{attributes:{markerWidth:20,markerHeight:20,refX:0,refY:0,orient:"auto"}},i,e);const o=this.definition(i);return o.id=t,o}class ControllablePath extends Controllables_Controllable{static compose(t,i){const e=i.prototype;e.addMarker||(ControllablePath_addEvent(t,"afterGetContainer",onChartAfterGetContainer),e.addMarker=svgRendererAddMarker)}constructor(t,i,e){super(t,i,e,"shape"),this.type="path"}toD(){const t=this.options.d;if(t)return"function"==typeof t?t.call(this):t;const i=this.points,e=i.length,s=[];let o=e,n=i[0],a=o&&this.anchor(n).absolutePosition,r=0,h;if(a)for(s.push(["M",a.x,a.y]);++r<e&&o;)h=(n=i[r]).command||"L",a=this.anchor(n).absolutePosition,"M"===h||"L"===h?s.push([h,a.x,a.y]):"Z"===h&&s.push([h]),o=n.series.visible;return o&&this.graphic?this.chart.renderer.crispLine(s,this.graphic.strokeWidth()):null}shouldBeDrawn(){return super.shouldBeDrawn()||!!this.options.d}render(t){var i=this.options,e=this.attrsFromOptions(i);this.graphic=this.annotation.chart.renderer.path([["M",0,0]]).attr(e).add(t),this.tracker=this.annotation.chart.renderer.path([["M",0,0]]).addClass("highcharts-tracker-line").attr({zIndex:2}).add(t),this.annotation.chart.styledMode||this.tracker.attr({"stroke-linejoin":"round",stroke:TRACKER_FILL,fill:TRACKER_FILL,"stroke-width":this.graphic.strokeWidth()+2*i.snap}),super.render(),extend(this.graphic,{markerStartSetter:markerStartSetter,markerEndSetter:markerEndSetter}),this.setMarkers(this)}redraw(t){var i,e;this.graphic&&(e=t?"animate":"attr",(i=this.toD())?(this.graphic[e]({d:i}),this.tracker[e]({d:i})):(this.graphic.attr({d:"M 0 "+-9e9}),this.tracker.attr({d:"M 0 "+-9e9})),this.graphic.placed=this.tracker.placed=!!i),super.redraw(t)}setMarkers(a){const r=a.options,h=a.chart,l=h.options.defs,t=r.fill,c=ControllablePath_defined(t)&&"none"!==t?t:r.stroke;["markerStart","markerEnd"].forEach(function(t){var i=r[t];let e,s,o,n;if(i){for(o in l)if((i===((e=l[o]).attributes&&e.attributes.id)||i===e.id)&&"marker"===e.tagName){s=e;break}s&&(n=a[t]=h.renderer.addMarker((r.id||uniqueKey())+"-"+i,ControllablePath_merge(s,{color:c})),a.attr(t,n.getAttribute("id")))}})}}ControllablePath.attrsMap={dashStyle:"dashstyle",strokeWidth:"stroke-width",stroke:"stroke",fill:"fill",zIndex:"zIndex"};const Controllables_ControllablePath=ControllablePath,ControllableRect_merge=external_highcharts_src_js_default_default()["merge"];class ControllableRect extends Controllables_Controllable{constructor(t,i,e){super(t,i,e,"shape"),this.type="rect",this.translate=super.translateShape}render(t){var i=this.attrsFromOptions(this.options);this.graphic=this.annotation.chart.renderer.rect(0,-9e9,0,0).attr(i).add(t),super.render()}redraw(t){var i;this.graphic&&((i=this.anchor(this.points[0]).absolutePosition)?this.graphic[t?"animate":"attr"]({x:i.x,y:i.y,width:this.options.width,height:this.options.height}):this.attr({x:0,y:-9e9}),this.graphic.placed=Boolean(i)),super.redraw(t)}}ControllableRect.attrsMap=ControllableRect_merge(Controllables_ControllablePath.attrsMap,{width:"width",height:"height"});const Controllables_ControllableRect=ControllableRect,ControllableCircle_merge=external_highcharts_src_js_default_default()["merge"];class ControllableCircle extends Controllables_Controllable{constructor(t,i,e){super(t,i,e,"shape"),this.type="circle",this.translate=super.translateShape}redraw(t){var i;this.graphic&&((i=this.anchor(this.points[0]).absolutePosition)?this.graphic[t?"animate":"attr"]({x:i.x,y:i.y,r:this.options.r}):this.graphic.attr({x:0,y:-9e9}),this.graphic.placed=!!i),super.redraw.call(this,t)}render(t){var i=this.attrsFromOptions(this.options);this.graphic=this.annotation.chart.renderer.circle(0,-9e9,0).attr(i).add(t),super.render()}setRadius(t){this.options.r=t}}ControllableCircle.attrsMap=ControllableCircle_merge(Controllables_ControllablePath.attrsMap,{r:"r"});const Controllables_ControllableCircle=ControllableCircle,{merge:ControllableEllipse_merge,defined:ControllableEllipse_defined}=external_highcharts_src_js_default_default();class ControllableEllipse extends Controllables_Controllable{constructor(t,i,e){super(t,i,e,"shape"),this.type="ellipse"}init(t,i,e){ControllableEllipse_defined(i.yAxis)&&i.points.forEach(t=>{t.yAxis=i.yAxis}),ControllableEllipse_defined(i.xAxis)&&i.points.forEach(t=>{t.xAxis=i.xAxis}),super.init(t,i,e)}render(t){this.graphic=this.annotation.chart.renderer.createElement("ellipse").attr(this.attrsFromOptions(this.options)).add(t),super.render()}translate(t,i){super.translateShape(t,i,!0)}getDistanceFromLine(t,i,e,s){return Math.abs((i.y-t.y)*e-(i.x-t.x)*s+i.x*t.y-i.y*t.x)/Math.sqrt((i.y-t.y)*(i.y-t.y)+(i.x-t.x)*(i.x-t.x))}getAttrs(t,i){var e=t.x,t=t.y,s=i.x,i=i.y,o=(e+s)/2,n=(t+i)/2,a=Math.sqrt((e-s)*(e-s)/4+(t-i)*(t-i)/4);let r=180*Math.atan((i-t)/(s-e))/Math.PI;return o<e&&(r+=180),{cx:o,cy:n,rx:a,ry:this.getRY(),angle:r}}getRY(){const t=this.getYAxis();return ControllableEllipse_defined(t)?Math.abs(t.toPixels(this.options.ry)-t.toPixels(0)):this.options.ry}getYAxis(){var t=this.options.yAxis;return this.chart.yAxis[t]}getAbsolutePosition(t){return this.anchor(t).absolutePosition}redraw(t){var i,e;this.graphic&&(i=this.getAbsolutePosition(this.points[0]),e=this.getAbsolutePosition(this.points[1]),e=this.getAttrs(i,e),i?this.graphic[t?"animate":"attr"]({cx:e.cx,cy:e.cy,rx:e.rx,ry:e.ry,rotation:e.angle,rotationOriginX:e.cx,rotationOriginY:e.cy}):this.graphic.attr({x:0,y:-9e9}),this.graphic.placed=Boolean(i)),super.redraw(t)}setYRadius(t){const i=this.annotation.userOptions.shapes;this.options.ry=t,i&&i[0]&&(i[0].ry=t,i[0].ry=t)}}ControllableEllipse.attrsMap=ControllableEllipse_merge(Controllables_ControllablePath.attrsMap,{ry:"ry"});const Controllables_ControllableEllipse=ControllableEllipse,external_highcharts_src_js_default_Templating_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default.Templating;var external_highcharts_src_js_default_Templating_default=__webpack_require__.n(external_highcharts_src_js_default_Templating_namespaceObject);const format=external_highcharts_src_js_default_Templating_default()["format"],{extend:ControllableLabel_extend,getAlignFactor,isNumber,pick:ControllableLabel_pick}=external_highcharts_src_js_default_default();function symbolConnector(t,i,e,s,o){var n=o&&o.anchorX,o=o&&o.anchorY;let a,r,h=e/2;return isNumber(n)&&isNumber(o)&&(a=[["M",n,o]],(r=(r=i-o)<0?-s-r:r)<e&&(h=n<t+e/2?r:e-r),i+s<o?a.push(["L",t+h,i+s]):o<i?a.push(["L",t+h,i]):n<t?a.push(["L",t,i+s/2]):t+e<n&&a.push(["L",t+e,i+s/2])),a||[]}class ControllableLabel extends Controllables_Controllable{static alignedPosition(t,i){return{x:Math.round((i.x||0)+(t.x||0)+(i.width-(t.width||0))*getAlignFactor(t.align)),y:Math.round((i.y||0)+(t.y||0)+(i.height-(t.height||0))*getAlignFactor(t.verticalAlign))}}static compose(t){const i=t.prototype.symbols;i.connector=symbolConnector}static justifiedOptions(t,i,e,s){const o=e.align,n=e.verticalAlign,a=!i.box&&i.padding||0,r=i.getBBox(),h={align:o,verticalAlign:n,x:e.x,y:e.y,width:i.width,height:i.height},l=(s.x||0)-t.plotLeft,c=(s.y||0)-t.plotTop;let p;return(p=l+a)<0&&("right"===o?h.align="left":h.x=(h.x||0)-p),(p=l+r.width-a)>t.plotWidth&&("left"===o?h.align="right":h.x=(h.x||0)+t.plotWidth-p),(p=c+a)<0&&("bottom"===n?h.verticalAlign="top":h.y=(h.y||0)-p),(p=c+r.height-a)>t.plotHeight&&("top"===n?h.verticalAlign="bottom":h.y=(h.y||0)+t.plotHeight-p),h}constructor(t,i,e){super(t,i,e,"label")}translatePoint(t,i){super.translatePoint(t,i,0)}translate(t,i){const e=this.annotation.chart,s=this.annotation.userOptions,o=e.annotations.indexOf(this.annotation),n=e.options.annotations,a=n[o];var r;e.inverted&&(r=t,t=i,i=r),this.options.x+=t,this.options.y+=i,a[this.collection][this.index].x=this.options.x,a[this.collection][this.index].y=this.options.y,s[this.collection][this.index].x=this.options.x,s[this.collection][this.index].y=this.options.y}render(t){const i=this.options,e=this.attrsFromOptions(i),s=i.style,o=this.annotation.chart.options.chart,n=o.plotBackgroundColor||o.backgroundColor;this.graphic=this.annotation.chart.renderer.label("",0,-9999,i.shape,void 0,void 0,i.useHTML,void 0,"annotation-label").attr(e).add(t),this.annotation.chart.styledMode||("contrast"===s.color&&(t=-1<ControllableLabel.shapesWithoutBackground.indexOf(i.shape)||"none"===i.backgroundColor?n:i.backgroundColor,s.color=this.annotation.chart.renderer.getContrast("string"==typeof t?t:"string"==typeof n?n:"#ffffff")),this.graphic.css(i.style).shadow(i.shadow)),this.graphic.labelrank=i.labelrank,super.render()}redraw(t){const i=this.options,e=this.text||i.format||i.text,s=this.graphic,o=this.points[0];if(s){s.attr({text:e?format(String(e),o,this.annotation.chart):i.formatter.call(o,this)});var n=this.anchor(o);const a=this.position(n);a?((s.alignAttr=a).anchorX=n.absolutePosition.x,a.anchorY=n.absolutePosition.y,s[t?"animate":"attr"](a)):s.attr({x:0,y:-9999}),s.placed=!!a,super.redraw(t)}else this.redraw(t)}anchor(t){const i=super.anchor.apply(this,arguments),e=this.options.x||0,s=this.options.y||0;return i.absolutePosition.x-=e,i.absolutePosition.y-=s,i.relativePosition.x-=e,i.relativePosition.y-=s,i}position(t){const i=this.graphic,e=this.annotation.chart,s=e.tooltip,o=this.points[0],n=this.options,a=t.absolutePosition,r=t.relativePosition;let h,l,c,p,d=o.series.visible&&Annotations_MockPoint.prototype.isInsidePlot.call(o);var u;return i&&d&&({width:t=0,height:u=0}=i,n.distance&&s?h=s.getPosition.call({chart:e,distance:ControllableLabel_pick(n.distance,16),getPlayingField:s.getPlayingField,pointer:s.pointer},t,u,{plotX:r.x,plotY:r.y,negative:o.negative,ttBelow:o.ttBelow,h:r.height||r.width}):n.positioner?h=n.positioner.call(this):(l={x:a.x,y:a.y,width:0,height:0},h=ControllableLabel.alignedPosition(ControllableLabel_extend(n,{width:t,height:u}),l),"justify"===this.options.overflow&&(h=ControllableLabel.alignedPosition(ControllableLabel.justifiedOptions(e,i,n,h),l))),n.crop&&(c=h.x-e.plotLeft,p=h.y-e.plotTop,d=e.isInsidePlot(c,p)&&e.isInsidePlot(c+t,p+u))),d?h:null}}ControllableLabel.attrsMap={backgroundColor:"fill",borderColor:"stroke",borderWidth:"stroke-width",zIndex:"zIndex",borderRadius:"r",padding:"padding"},ControllableLabel.shapesWithoutBackground=["connector"];const Controllables_ControllableLabel=ControllableLabel;class ControllableImage extends Controllables_Controllable{constructor(t,i,e){super(t,i,e,"shape"),this.type="image",this.translate=super.translateShape}render(t){var i=this.attrsFromOptions(this.options),e=this.options;this.graphic=this.annotation.chart.renderer.image(e.src,0,-9e9,e.width,e.height).attr(i).add(t),this.graphic.width=e.width,this.graphic.height=e.height,super.render()}redraw(t){var i;this.graphic&&(i=this.anchor(this.points[0]),(i=Controllables_ControllableLabel.prototype.position.call(this,i))?this.graphic[t?"animate":"attr"]({x:i.x,y:i.y}):this.graphic.attr({x:0,y:-9e9}),this.graphic.placed=Boolean(i)),super.redraw(t)}}ControllableImage.attrsMap={width:"width",height:"height",zIndex:"zIndex"};const Controllables_ControllableImage=ControllableImage,external_highcharts_src_js_default_AST_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default.AST;var DropdownProperties,external_highcharts_src_js_default_AST_default=__webpack_require__.n(external_highcharts_src_js_default_AST_namespaceObject);const{addEvent:BaseForm_addEvent,createElement}=external_highcharts_src_js_default_default();class BaseForm{constructor(t,i){this.iconsURL=i,this.container=this.createPopupContainer(t),this.closeButton=this.addCloseButton()}createPopupContainer(t,i="highcharts-popup highcharts-no-tooltip"){return createElement("div",{className:i},void 0,t)}addCloseButton(t="highcharts-popup-close"){const i=this,e=this.iconsURL,s=createElement("button",{className:t},void 0,this.container);return createElement("span",{className:"highcharts-icon"},{backgroundImage:"url("+(e.match(/png|svg|jpeg|jpg|gif/gi)?e:e+"close.svg")+")"},s),["click","touchstart"].forEach(t=>{BaseForm_addEvent(s,t,i.closeButtonEvents.bind(i))}),BaseForm_addEvent(document,"keydown",function(t){"Escape"===t.code&&i.closeButtonEvents()}),s}closeButtonEvents(){this.closePopup()}showPopup(t="highcharts-annotation-toolbar"){const i=this.container,e=this.closeButton;this.type=void 0,i.innerHTML=external_highcharts_src_js_default_AST_default().emptyHTML,0<=i.className.indexOf(t)&&(i.classList.remove(t),i.removeAttribute("style")),i.appendChild(e),i.style.display="block",i.style.height=""}closePopup(){this.container.style.display="none"}}const Shared_BaseForm=BaseForm,{doc:PopupAnnotations_doc,isFirefox}=external_highcharts_src_js_default_default(),{createElement:PopupAnnotations_createElement,isArray:PopupAnnotations_isArray,isObject:PopupAnnotations_isObject,objectEach:PopupAnnotations_objectEach,pick:PopupAnnotations_pick,stableSort}=external_highcharts_src_js_default_default();function addForm(i,e,s,o){if(i){var n=this.container,a=this.lang;let t=PopupAnnotations_createElement("h2",{className:"highcharts-popup-main-title"},void 0,n);t.appendChild(PopupAnnotations_doc.createTextNode(a[e.langKey]||e.langKey||"")),t=PopupAnnotations_createElement("div",{className:"highcharts-popup-lhs-col highcharts-popup-lhs-full"},void 0,n);var r=PopupAnnotations_createElement("div",{className:"highcharts-popup-bottom-row"},void 0,n);addFormFields.call(this,t,i,"",e,[],!0),this.addButton(r,o?a.addButton||"Add":a.saveButton||"Save",o?"add":"save",n,s)}}function addToolbar(t,i,e){const s=this.lang,o=this.container,n=this.showForm,a="highcharts-annotation-toolbar",r=(-1===o.className.indexOf(a)&&(o.className+=" "+a+" highcharts-no-mousewheel"),t&&(o.style.top=t.plotTop+10+"px"),PopupAnnotations_createElement("p",{className:"highcharts-annotation-label"},void 0,o));r.setAttribute("aria-label","Annotation type"),r.appendChild(PopupAnnotations_doc.createTextNode(PopupAnnotations_pick(s[i.langKey]||i.langKey,i.shapes&&i.shapes[0].type,"")));let h=this.addButton(o,s.editButton||"Edit","edit",o,()=>{n.call(this,"annotation-edit",t,i,e)});h.className+=" highcharts-annotation-edit-button",PopupAnnotations_createElement("span",{className:"highcharts-icon"},{backgroundImage:`url(${this.iconsURL}edit.svg)`},h),(h=this.addButton(o,s.removeButton||"Remove","remove",o,e)).className+=" highcharts-annotation-remove-button",PopupAnnotations_createElement("span",{className:"highcharts-icon"},{backgroundImage:`url(${this.iconsURL}destroy.svg)`},h)}function addFormFields(o,n,a,t,r,i){if(n){const h=this.addInput,l=this.lang;let e,s;PopupAnnotations_objectEach(t,(t,i)=>{e=""!==a?a+"."+i:i,PopupAnnotations_isObject(t)&&(!PopupAnnotations_isArray(t)||PopupAnnotations_isArray(t)&&PopupAnnotations_isObject(t[0])?((s=l[i]||i).match(/\d/g)||r.push([!0,s,o]),addFormFields.call(this,o,n,e,t,r,!1)):r.push([this,e,"annotation",o,t]))}),i&&(stableSort(r,t=>t[1].match(/format/g)?-1:1),isFirefox&&r.reverse(),r.forEach(t=>{!0===t[0]?PopupAnnotations_createElement("span",{className:"highcharts-annotation-title"},void 0,t[2]).appendChild(PopupAnnotations_doc.createTextNode(t[1])):(t[4]={value:t[4][0],type:t[4][1]},h.apply(t[0],t.splice(1)))}))}}const PopupAnnotations={addForm:addForm,addToolbar:addToolbar},Popup_PopupAnnotations=PopupAnnotations,PopupIndicators_doc=external_highcharts_src_js_default_default()["doc"],seriesTypes=external_highcharts_src_js_default_SeriesRegistry_default()["seriesTypes"],{addEvent:PopupIndicators_addEvent,createElement:PopupIndicators_createElement,defined:PopupIndicators_defined,isArray:PopupIndicators_isArray,isObject:PopupIndicators_isObject,objectEach:PopupIndicators_objectEach,stableSort:PopupIndicators_stableSort}=external_highcharts_src_js_default_default(),dropdownParameters=(!function(t){t[t["params.algorithm"]=0]="params.algorithm",t[t["params.average"]=1]="params.average"}(DropdownProperties=DropdownProperties||{}),{"algorithm-pivotpoints":["standard","fibonacci","camarilla"],"average-disparityindex":["sma","ema","dema","tema","wma"]});function addColsContainer(t){var i=PopupIndicators_createElement("div",{className:"highcharts-popup-lhs-col"},void 0,t),t=PopupIndicators_createElement("div",{className:"highcharts-popup-rhs-col"},void 0,t);return PopupIndicators_createElement("div",{className:"highcharts-popup-rhs-col-wrapper"},void 0,t),{lhsCol:i,rhsCol:t}}function PopupIndicators_addForm(t,i,e){var s,o=this.lang;if(t){this.tabs.init.call(this,t);const n=this.container.querySelectorAll(".highcharts-tab-item-content");addColsContainer(n[0]),addSearchBox.call(this,t,n[0]),addIndicatorList.call(this,t,n[0],"add"),s=n[0].querySelectorAll(".highcharts-popup-rhs-col")[0],this.addButton(s,o.addButton||"add","add",s,e),addColsContainer(n[1]),addIndicatorList.call(this,t,n[1],"edit"),s=n[1].querySelectorAll(".highcharts-popup-rhs-col")[0],this.addButton(s,o.saveButton||"save","edit",s,e),this.addButton(s,o.removeButton||"remove","remove",s,e)}}function PopupIndicators_addFormFields(t,i,e,s){var o=i.params||i.options.params;s.innerHTML=external_highcharts_src_js_default_AST_default().emptyHTML,PopupIndicators_createElement("h3",{className:"highcharts-indicator-title"},void 0,s).appendChild(PopupIndicators_doc.createTextNode(getNameType(i,e).indicatorFullName)),PopupIndicators_createElement("input",{type:"hidden",name:"highcharts-type-"+e,value:e},void 0,s),listAllSeries.call(this,e,"series",t,s,i,i.linkedParent&&i.linkedParent.options.id),o.volumeSeriesID&&listAllSeries.call(this,e,"volume",t,s,i,i.linkedParent&&o.volumeSeriesID),addParamInputs.call(this,t,"params",o,e,s)}function addIndicatorList(s,t,i,e){function n(t,i){const e=_.parentNode.children[1];PopupIndicators_addFormFields.call(o,s,t,i,_),e&&(e.style.display="block"),l&&t.options&&PopupIndicators_createElement("input",{type:"hidden",name:"highcharts-id-"+i,value:t.options.id},void 0,_).setAttribute("highcharts-data-series-id",t.options.id)}const o=this,a=o.lang,r=t.querySelectorAll(".highcharts-popup-lhs-col")[0],h=t.querySelectorAll(".highcharts-popup-rhs-col")[0],l="edit"===i,c=l?s.series:s.options.plotOptions||{};if(!s&&c)return;let p,d=[];l||PopupIndicators_isArray(c)?PopupIndicators_isArray(c)&&(d=filterSeriesArray.call(this,c)):d=filterSeries.call(this,c,e),PopupIndicators_stableSort(d,(t,i)=>{t=t.indicatorFullName.toLowerCase(),i=i.indicatorFullName.toLowerCase();return t<i?-1:i<t?1:0}),r.children[1]&&r.children[1].remove();const u=PopupIndicators_createElement("ul",{className:"highcharts-indicator-list"},void 0,r),_=h.querySelectorAll(".highcharts-popup-rhs-col-wrapper")[0];if(d.forEach(t=>{const{indicatorFullName:i,indicatorType:e,series:s}=t,o=(p=PopupIndicators_createElement("li",{className:"highcharts-indicator-list"},void 0,u),PopupIndicators_createElement("button",{className:"highcharts-indicator-list-item",textContent:i},void 0,p));["click","touchstart"].forEach(t=>{PopupIndicators_addEvent(o,t,function(){n(s,e)})})}),0<d.length){const{series:c,indicatorType:g}=d[0];n(c,g)}else l||(external_highcharts_src_js_default_AST_default().setElementHTML(_.parentNode.children[0],a.noFilterMatch||""),_.parentNode.children[1].style.display="none")}function addParamInputs(o,n,t,a,r){if(o){const h=this.addInput;PopupIndicators_objectEach(t,(t,i)=>{var e,s=n+"."+i;PopupIndicators_defined(t)&&s&&(PopupIndicators_isObject(t)&&(h.call(this,s,a,r,{}),addParamInputs.call(this,o,s,t,a,r)),s in DropdownProperties?(e=addSelection.call(this,a,s,r),addSelectionOptions.call(this,o,n,e,a,i,t)):"params.volumeSeriesID"==s||PopupIndicators_isArray(t)||h.call(this,s,a,r,{value:t,type:"number"}))})}}function addSearchBox(i,t){function e(t){addIndicatorList.call(s,i,s.container,"add",t)}const s=this,o=t.querySelectorAll(".highcharts-popup-lhs-col")[0],n=this.lang.clearFilter,a=PopupIndicators_createElement("div",{className:"highcharts-input-wrapper"},void 0,o),r=this.addInput("searchIndicators","input",a,{value:"",type:"text",htmlFor:"search-indicators",labelClassName:"highcharts-input-search-indicators-label"}),h=PopupIndicators_createElement("a",{textContent:n},void 0,a);r.classList.add("highcharts-input-search-indicators"),h.classList.add("clear-filter-button"),PopupIndicators_addEvent(r,"input",function(){e(this.value),this.value.length?h.style.display="inline-block":h.style.display="none"}),["click","touchstart"].forEach(t=>{PopupIndicators_addEvent(h,t,function(){r.value="",e(""),h.style.display="none"})})}function addSelection(t,i,e){var s=i.split("."),s=s[s.length-1],t="highcharts-"+i+"-type-"+t,o=this.lang;PopupIndicators_createElement("label",{htmlFor:t},null,e).appendChild(PopupIndicators_doc.createTextNode(o[s]||i));const n=PopupIndicators_createElement("select",{name:t,className:"highcharts-popup-field",id:"highcharts-select-"+i},null,e);return n.setAttribute("id","highcharts-select-"+i),n}function addSelectionOptions(t,s,o,i,e,n,a){if("series"===s||"volume"===s)t.series.forEach(t=>{var i=t.options,e=i.name||i.params?t.name:i.id||"";"highcharts-navigator-series"!==i.id&&i.id!==(a&&a.options&&a.options.id)&&(PopupIndicators_defined(n)||"volume"!==s||"column"!==t.type||(n=i.id),PopupIndicators_createElement("option",{value:i.id},void 0,o).appendChild(PopupIndicators_doc.createTextNode(e)))});else if(i&&e){const r=e+"-"+i,h=dropdownParameters[r];h.forEach(t=>{PopupIndicators_createElement("option",{value:t},void 0,o).appendChild(PopupIndicators_doc.createTextNode(t))})}PopupIndicators_defined(n)&&(o.value=n)}function filterSeries(t,r){const i=this.chart&&this.chart.options.lang,h=i&&i.navigation&&i.navigation.popup&&i.navigation.popup.indicatorAliases,l=[];let c;return PopupIndicators_objectEach(t,(t,i)=>{var e=t&&t.options;if(t.params||e&&e.params){const{indicatorFullName:s,indicatorType:o}=getNameType(t,i);if(r){e=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");const n=new RegExp(e,"i"),a=h&&h[o]&&h[o].join(" ")||"";(s.match(n)||a.match(n))&&(c={indicatorFullName:s,indicatorType:o,series:t},l.push(c))}else c={indicatorFullName:s,indicatorType:o,series:t},l.push(c)}}),l}function filterSeriesArray(t){const i=[];return t.forEach(t=>{t.is("sma")&&i.push({indicatorFullName:t.name,indicatorType:t.type,series:t})}),i}function getAmount(){let i=0;return this.series.forEach(t=>{(t.params||t.options.params)&&i++}),i}function getNameType(t,i){var e=t.options;let s=seriesTypes[i]&&seriesTypes[i].prototype.nameBase||i.toUpperCase(),o=i;return e&&e.type&&(o=t.options.type,s=t.name),{indicatorFullName:s,indicatorType:o}}function listAllSeries(t,i,e,s,o,n){if(e){const a=addSelection.call(this,t,i,s);addSelectionOptions.call(this,e,i,a,void 0,void 0,void 0,o),PopupIndicators_defined(n)&&(a.value=n)}}const PopupIndicators={addForm:PopupIndicators_addForm,getAmount:getAmount},Popup_PopupIndicators=PopupIndicators,PopupTabs_doc=external_highcharts_src_js_default_default()["doc"],{addEvent:PopupTabs_addEvent,createElement:PopupTabs_createElement}=external_highcharts_src_js_default_default();function addContentItem(){var t=this.container;return PopupTabs_createElement("div",{className:"highcharts-tab-item-content highcharts-no-mousewheel"},void 0,t)}function addMenuItem(t,i){var e=this.container,s=this.lang;let o="highcharts-tab-item";0===i&&(o+=" highcharts-tab-disabled");const n=PopupTabs_createElement("button",{className:o},void 0,e);return n.appendChild(PopupTabs_doc.createTextNode(s[t+"Button"]||t)),n.setAttribute("highcharts-data-tab-type",t),n}function deselectAll(){const t=this.container,i=t.querySelectorAll(".highcharts-tab-item"),e=t.querySelectorAll(".highcharts-tab-item-content");for(let t=0;t<i.length;t++)i[t].classList.remove("highcharts-tab-item-active"),e[t].classList.remove("highcharts-tab-item-show")}function init(t){var i;t&&(t=this.indicators.getAmount.call(t),i=addMenuItem.call(this,"add"),addMenuItem.call(this,"edit",t),addContentItem.call(this),addContentItem.call(this),switchTabs.call(this,t),selectTab.call(this,i,0))}function selectTab(t,i){const e=this.container.querySelectorAll(".highcharts-tab-item-content");t.className+=" highcharts-tab-item-active",e[i].className+=" highcharts-tab-item-show"}function switchTabs(t){const s=this,i=this.container,e=i.querySelectorAll(".highcharts-tab-item");e.forEach((i,e)=>{0===t&&"edit"===i.getAttribute("highcharts-data-tab-type")||["click","touchstart"].forEach(t=>{PopupTabs_addEvent(i,t,function(){deselectAll.call(s),selectTab.call(s,this,e)})})})}const PopupTabs={init:init},Popup_PopupTabs=PopupTabs,Popup_doc=external_highcharts_src_js_default_default()["doc"],getOptions=external_highcharts_src_js_default_default()["getOptions"],{addEvent:Popup_addEvent,createElement:Popup_createElement,extend:Popup_extend,fireEvent:Popup_fireEvent,pick:Popup_pick}=external_highcharts_src_js_default_default();function getFields(t,i){const e=Array.prototype.slice.call(t.querySelectorAll("input")),s=Array.prototype.slice.call(t.querySelectorAll("select")),o=t.querySelectorAll("#highcharts-select-series > option:checked")[0],n=t.querySelectorAll("#highcharts-select-volume > option:checked")[0],a={actionType:i,linkedTo:o&&o.getAttribute("value")||"",fields:{}};return e.forEach(t=>{var i=t.getAttribute("highcharts-data-name");t.getAttribute("highcharts-data-series-id")?a.seriesId=t.value:i?a.fields[i]=t.value:a.type=t.value}),s.forEach(t=>{const i=t.id;var e;"highcharts-select-series"!==i&&"highcharts-select-volume"!==i&&(e=i.split("highcharts-select-")[1],a.fields[e]=t.value)}),n&&(a.fields["params.volumeSeriesID"]=n.getAttribute("value")||""),a}class Popup extends Shared_BaseForm{constructor(t,i,e){super(t,i),this.chart=e,this.lang=(getOptions().lang.navigation||{}).popup||{},Popup_addEvent(this.container,"mousedown",()=>{const t=e&&e.navigationBindings&&e.navigationBindings.activeAnnotation;if(t){t.cancelClick=!0;const i=Popup_addEvent(Popup_doc,"click",()=>{setTimeout(()=>{t.cancelClick=!1},0),i()})}})}addInput(t,i,e,s){const o=t.split("."),n=o[o.length-1],a=this.lang,r="highcharts-"+i+"-"+Popup_pick(s.htmlFor,n),h=(n.match(/^\d+$/)||Popup_createElement("label",{htmlFor:r,className:s.labelClassName},void 0,e).appendChild(Popup_doc.createTextNode(a[n]||n)),Popup_createElement("input",{name:r,value:s.value,type:s.type,className:"highcharts-popup-field"},void 0,e));return h.setAttribute("highcharts-data-name",t),h}closeButtonEvents(){var t;this.chart?(t=this.chart.navigationBindings,Popup_fireEvent(t,"closePopup"),t&&t.selectedButtonElement&&Popup_fireEvent(t,"deselectButton",{button:t.selectedButtonElement})):super.closeButtonEvents()}addButton(t,i,e,s,o){const n=Popup_createElement("button",void 0,void 0,t);return n.appendChild(Popup_doc.createTextNode(i)),o&&["click","touchstart"].forEach(t=>{Popup_addEvent(n,t,()=>(this.closePopup(),o(getFields(s,e))))}),n}showForm(t,i,e,s){i&&(this.showPopup(),"indicators"===t&&this.indicators.addForm.call(this,i,e,s),"annotation-toolbar"===t&&this.annotations.addToolbar.call(this,i,e,s),"annotation-edit"===t&&this.annotations.addForm.call(this,i,e,s),"flag"===t&&this.annotations.addForm.call(this,i,e,s,!0),this.type=t,this.container.style.height=this.container.offsetHeight+"px")}}Popup_extend(Popup.prototype,{annotations:Popup_PopupAnnotations,indicators:Popup_PopupIndicators,tabs:Popup_PopupTabs});const Popup_Popup=Popup,composed=external_highcharts_src_js_default_default()["composed"],{addEvent:PopupComposition_addEvent,pushUnique,wrap:PopupComposition_wrap}=external_highcharts_src_js_default_default();function compose(t,i){pushUnique(composed,"Popup")&&(PopupComposition_addEvent(t,"closePopup",onNavigationBindingsClosePopup),PopupComposition_addEvent(t,"showPopup",onNavigationBindingsShowPopup),PopupComposition_wrap(i.prototype,"onContainerMouseDown",wrapPointerOnContainerMouserDown))}function onNavigationBindingsClosePopup(){this.popup&&this.popup.closePopup()}function onNavigationBindingsShowPopup(t){this.popup||(this.popup=new Popup_Popup(this.chart.container,this.chart.options.navigation.iconsURL||this.chart.options.stockTools&&this.chart.options.stockTools.gui.iconsURL||"https://code.highcharts.com/12.3.0/gfx/stock-icons/",this.chart)),this.popup.showForm(t.formType,this.chart,t.options,t.onSubmit)}function wrapPointerOnContainerMouserDown(t,i){this.inClass(i.target,"highcharts-popup")||t.apply(this,Array.prototype.slice.call(arguments,1))}const PopupComposition={compose:compose},Popup_PopupComposition=PopupComposition,getDeferredAnimation=external_highcharts_src_js_default_default()["getDeferredAnimation"],defaultOptions=external_highcharts_src_js_default_default()["defaultOptions"],{destroyObjectProperties,erase:Annotation_erase,fireEvent:Annotation_fireEvent,merge:Annotation_merge,pick:Annotation_pick,splat}=external_highcharts_src_js_default_default();function adjustVisibility(t){const i=t.graphic,e=t.points.some(t=>!1!==t.series.visible&&!1!==t.visible);i&&(e?"hidden"===i.visibility&&i.show():i.hide())}function getLabelsAndShapesOptions(s,o){const n={};return["labels","shapes"].forEach(t=>{const e=s[t],i=o[t];e&&(n[t]=i?splat(i).map((t,i)=>Annotation_merge(e[i],t)):s[t])}),n}class Annotation extends Annotations_EventEmitter{static compose(t,i,e,s){Annotations_AnnotationChart.compose(Annotation,t,e),Controllables_ControllableLabel.compose(s),Controllables_ControllablePath.compose(t,s),i.compose(Annotation,t),Popup_PopupComposition.compose(i,e)}constructor(t,i){super(),this.coll="annotations",this.chart=t,this.points=[],this.controlPoints=[],this.coll="annotations",this.index=-1,this.labels=[],this.shapes=[],this.setOptions(i),this.userOptions=i;i=getLabelsAndShapesOptions(this.options,i);this.options.labels=i.labels,this.options.shapes=i.shapes,this.init(t,this.options)}addClipPaths(){this.setClipAxes(),this.clipXAxis&&this.clipYAxis&&this.options.crop&&(this.clipRect=this.chart.renderer.clipRect(this.getClipBox()))}addLabels(){const e=this.options.labels||[];e.forEach((t,i)=>{t=this.initLabel(t,i);Annotation_merge(!0,e[i],t.options)})}addShapes(){const e=this.options.shapes||[];e.forEach((t,i)=>{t=this.initShape(t,i);Annotation_merge(!0,e[i],t.options)})}destroy(){function t(t){t.destroy()}var i=this.chart;this.labels.forEach(t),this.shapes.forEach(t),this.clipXAxis=null,this.clipYAxis=null,Annotation_erase(i.labelCollectors,this.labelCollector),super.destroy(),this.destroyControlTarget(),destroyObjectProperties(this,i)}destroyItem(t){Annotation_erase(this[t.itemType+"s"],t),t.destroy()}getClipBox(){if(this.clipXAxis&&this.clipYAxis)return{x:this.clipXAxis.left,y:this.clipYAxis.top,width:this.clipXAxis.width,height:this.clipYAxis.height}}initProperties(t,i){this.setOptions(i);var e=getLabelsAndShapesOptions(this.options,i);this.options.labels=e.labels,this.options.shapes=e.shapes,this.chart=t,this.points=[],this.controlPoints=[],this.coll="annotations",this.userOptions=i,this.labels=[],this.shapes=[]}init(t,i,e=this.index){var s=this.chart,o=this.options.animation;this.index=e,this.linkPoints(),this.addControlPoints(),this.addShapes(),this.addLabels(),this.setLabelCollector(),this.animationConfig=getDeferredAnimation(s,o)}initLabel(t,i){const e=Annotation_merge(this.options.labelOptions,{controlPointOptions:this.options.controlPointOptions},t),s=new Controllables_ControllableLabel(this,e,i);return s.itemType="label",this.labels.push(s),s}initShape(t,i){const e=Annotation_merge(this.options.shapeOptions,{controlPointOptions:this.options.controlPointOptions},t),s=new Annotation.shapesMap[e.type](this,e,i);return s.itemType="shape",this.shapes.push(s),s}redraw(t){this.linkPoints(),this.graphic||this.render(),this.clipRect&&this.clipRect.animate(this.getClipBox()),this.redrawItems(this.shapes,t),this.redrawItems(this.labels,t),this.redrawControlPoints(t)}redrawItem(t,i){t.linkPoints(),t.shouldBeDrawn()?(t.graphic||this.renderItem(t),t.redraw(Annotation_pick(i,!0)&&t.graphic.placed),t.points.length&&adjustVisibility(t)):this.destroyItem(t)}redrawItems(t,i){let e=t.length;for(;e--;)this.redrawItem(t[e],i)}remove(){return this.chart.removeAnnotation(this)}render(){const t=this.chart.renderer;this.graphic=t.g("annotation").attr({opacity:0,zIndex:this.options.zIndex,visibility:this.options.visible?"inherit":"hidden"}).add(),this.shapesGroup=t.g("annotation-shapes").add(this.graphic),this.options.crop&&this.shapesGroup.clip(this.chart.plotBoxClip),this.labelsGroup=t.g("annotation-labels").attr({translateX:0,translateY:0}).add(this.graphic),this.addClipPaths(),this.clipRect&&this.graphic.clip(this.clipRect),this.renderItems(this.shapes),this.renderItems(this.labels),this.addEvents(),this.renderControlPoints()}renderItem(t){t.render("label"===t.itemType?this.labelsGroup:this.shapesGroup)}renderItems(t){let i=t.length;for(;i--;)this.renderItem(t[i])}setClipAxes(){const e=this.chart.xAxis,s=this.chart.yAxis,t=(this.options.labels||[]).concat(this.options.shapes||[]).reduce((t,i)=>{i=i&&(i.point||i.points&&i.points[0]);return[e[i&&i.xAxis]||t[0],s[i&&i.yAxis]||t[1]]},[]);this.clipXAxis=t[0],this.clipYAxis=t[1]}setControlPointsVisibility(i){function t(t){t.setControlPointsVisibility(i)}this.controlPoints.forEach(t=>{t.setVisibility(i)}),this.shapes.forEach(t),this.labels.forEach(t)}setLabelCollector(){const t=this;t.labelCollector=function(){return t.labels.reduce(function(t,i){return i.options.allowOverlap||t.push(i.graphic),t},[])},t.chart.labelCollectors.push(t.labelCollector)}setOptions(t){this.options=Annotation_merge(this.defaultOptions,t.type&&this.defaultOptions.types[t.type]||{},t)}setVisibility(t){const i=this.options,e=this.chart.navigationBindings,s=Annotation_pick(t,!i.visible);this.graphic.attr("visibility",s?"inherit":"hidden"),s||(this.shapes.forEach(t=function(t){t.setControlPointsVisibility(s)}),this.labels.forEach(t),e.activeAnnotation===this&&e.popup&&"annotation-toolbar"===e.popup.type&&Annotation_fireEvent(e,"closePopup")),i.visible=s}update(t,i){const e=this.chart,s=getLabelsAndShapesOptions(this.userOptions,t),o=e.annotations.indexOf(this),n=Annotation_merge(!0,this.userOptions,t);n.labels=s.labels,n.shapes=s.shapes,this.destroy(),this.initProperties(e,n),this.init(e,n),e.options.annotations[o]=this.options,this.isUpdating=!0,Annotation_pick(i,!0)&&e.drawAnnotations(),Annotation_fireEvent(this,"afterUpdate"),this.isUpdating=!1}}Annotation.ControlPoint=Annotations_ControlPoint,Annotation.MockPoint=Annotations_MockPoint,Annotation.shapesMap={rect:Controllables_ControllableRect,circle:Controllables_ControllableCircle,ellipse:Controllables_ControllableEllipse,path:Controllables_ControllablePath,image:Controllables_ControllableImage},Annotation.types={},Annotation.prototype.defaultOptions=Annotations_AnnotationDefaults,defaultOptions.annotations=Annotations_AnnotationDefaults,Annotation.prototype.nonDOMEvents=["add","afterUpdate","drag","remove"],Annotations_ControlTarget.compose(Annotation);const Annotations_Annotation=Annotation;class BasicAnnotation extends Annotations_Annotation{addControlPoints(){const t=this.options,i=BasicAnnotation.basicControlPoints,e=this.basicType,s=t.labels||t.shapes||[];s.forEach(t=>{t.controlPoints=i[e]})}init(){const t=this.options;var i;t.shapes?(delete t.labelOptions,i=t.shapes[0].type,t.shapes[0].className=(t.shapes[0].className||"")+" highcharts-basic-shape",this.basicType=i&&"path"!==i?i:"rectangle"):(delete t.shapes,this.basicType="label"),super.init.apply(this,arguments)}}BasicAnnotation.basicControlPoints={label:[{symbol:"triangle-down",positioner:function(t){if(!t.graphic.placed)return{x:0,y:-9e7};t=Annotations_MockPoint.pointToPixels(t.points[0]);return{x:t.x-(this.graphic.width||0)/2,y:t.y-(this.graphic.height||0)/2}},events:{drag:function(t,i){t=this.mouseMoveToTranslation(t);i.translatePoint(t.x,t.y),i.annotation.userOptions.labels[0].point=i.options.point,i.redraw(!1)}}},{symbol:"square",positioner:function(t){return t.graphic.placed?{x:t.graphic.alignAttr.x-(this.graphic.width||0)/2,y:t.graphic.alignAttr.y-(this.graphic.height||0)/2}:{x:0,y:-9e7}},events:{drag:function(t,i){t=this.mouseMoveToTranslation(t);i.translate(t.x,t.y),i.annotation.userOptions.labels[0].point=i.options.point,i.redraw(!1)}}}],rectangle:[{positioner:function(t){t=Annotations_MockPoint.pointToPixels(t.points[2]);return{x:t.x-4,y:t.y-4}},events:{drag:function(t,i){const e=i.annotation,s=this.chart.pointer?.getCoordinates(t),o=i.options.points,n=e.userOptions.shapes,a=e.clipXAxis?.index||0,r=e.clipYAxis?.index||0;var h;s&&(t=s.xAxis[a].value,h=s.yAxis[r].value,o[1].x=t,o[2].x=t,o[2].y=h,o[3].y=h,n&&n[0]&&(n[0].points=i.options.points)),e.redraw(!1)}}}],circle:[{positioner:function(t){var i=Annotations_MockPoint.pointToPixels(t.points[0]),t=t.options.r;return{x:i.x+t*Math.cos(Math.PI/4)-(this.graphic.width||0)/2,y:i.y+t*Math.sin(Math.PI/4)-(this.graphic.height||0)/2}},events:{drag:function(t,i){const e=i.annotation,s=this.mouseMoveToTranslation(t),o=e.userOptions.shapes;i.setRadius(Math.max(i.options.r+s.y/Math.sin(Math.PI/4),5)),o&&o[0]&&(o[0].r=i.options.r,o[0].point=i.options.point),i.redraw(!1)}}}],ellipse:[{positioner:function(t){t=t.getAbsolutePosition(t.points[0]);return{x:t.x-(this.graphic.width||0)/2,y:t.y-(this.graphic.height||0)/2}},events:{drag:function(t,i){var e=i.getAbsolutePosition(i.points[0]);i.translatePoint(t.chartX-e.x,t.chartY-e.y,0),i.redraw(!1)}}},{positioner:function(t){t=t.getAbsolutePosition(t.points[1]);return{x:t.x-(this.graphic.width||0)/2,y:t.y-(this.graphic.height||0)/2}},events:{drag:function(t,i){var e=i.getAbsolutePosition(i.points[1]);i.translatePoint(t.chartX-e.x,t.chartY-e.y,1),i.redraw(!1)}}},{positioner:function(t){var i=t.getAbsolutePosition(t.points[0]),e=t.getAbsolutePosition(t.points[1]),t=t.getAttrs(i,e);return{x:t.cx-(this.graphic.width||0)/2+t.ry*Math.sin(t.angle*Math.PI/180),y:t.cy-(this.graphic.height||0)/2-t.ry*Math.cos(t.angle*Math.PI/180)}},events:{drag:function(t,i){const e=i.getAbsolutePosition(i.points[0]),s=i.getAbsolutePosition(i.points[1]),o=i.getDistanceFromLine(e,s,t.chartX,t.chartY),n=i.getYAxis(),a=Math.abs(n.toValue(0)-n.toValue(o));i.setYRadius(a),i.redraw(!1)}}}]},Annotations_Annotation.types.basicAnnotation=BasicAnnotation;const Types_BasicAnnotation=null,CrookedLine_defaultOptions=external_highcharts_src_js_default_default()["defaultOptions"],CrookedLine_merge=external_highcharts_src_js_default_default()["merge"];CrookedLine_defaultOptions.annotations&&(CrookedLine_defaultOptions.annotations.types.crookedLine={typeOptions:{xAxis:0,yAxis:0,line:{fill:"none"}},controlPointOptions:{positioner:function(t){var i=this.graphic,t=Annotations_MockPoint.pointToPixels(t.points[this.index]);return{x:t.x-(i.width||0)/2,y:t.y-(i.height||0)/2}},events:{drag:function(t,i){if(i.chart.isInsidePlot(t.chartX-i.chart.plotLeft,t.chartY-i.chart.plotTop,{visiblePlotOnly:!0})){const e=this.mouseMoveToTranslation(t),s=i.options.typeOptions;i.translatePoint(e.x,e.y,this.index),s.points[this.index].x=i.points[this.index].x,s.points[this.index].y=i.points[this.index].y,i.redraw(!1)}}}}});class CrookedLine extends Annotations_Annotation{setClipAxes(){this.clipXAxis=this.chart.xAxis[this.options.typeOptions.xAxis],this.clipYAxis=this.chart.yAxis[this.options.typeOptions.yAxis]}getPointsOptions(){const i=this.options.typeOptions;return(i.points||[]).map(t=>(t.xAxis=i.xAxis,t.yAxis=i.yAxis,t))}getControlPointsOptions(){return this.getPointsOptions()}addControlPoints(){this.getControlPointsOptions().forEach(function(t,i){i=new Annotations_ControlPoint(this.chart,this,CrookedLine_merge(this.options.controlPointOptions,t.controlPoint),i);this.controlPoints.push(i),t.controlPoint=i.options},this)}addShapes(){const t=this.options.typeOptions,i=this.initShape(CrookedLine_merge(t.line,{type:"path",className:"highcharts-crooked-lines",points:this.points.map((t,i)=>function(t){return t.annotation.points[i]})}),0);t.line=i.options}}const Types_CrookedLine=Annotations_Annotation.types.crookedLine=CrookedLine,ElliottWave_defaultOptions=external_highcharts_src_js_default_default()["defaultOptions"],ElliottWave_merge=external_highcharts_src_js_default_default()["merge"];ElliottWave_defaultOptions.annotations&&(ElliottWave_defaultOptions.annotations.types.elliottWave=ElliottWave_merge(ElliottWave_defaultOptions.annotations.types.crookedLine,{typeOptions:{labels:["(0)","(A)","(B)","(C)","(D)","(E)"],line:{strokeWidth:1}},labelOptions:{align:"center",allowOverlap:!0,crop:!0,overflow:"none",type:"rect",backgroundColor:"none",borderWidth:0,y:-5,style:{color:"#333333"}}}));class ElliottWave extends Types_CrookedLine{addLabels(){this.getPointsOptions().forEach((t,i)=>{var e=this.options.typeOptions,e=this.initLabel(ElliottWave_merge(t.label,{text:e.labels[i],point:function(t){return t.annotation.points[i]}}),!1);t.label=e.options})}}Annotations_Annotation.types.elliottWave=ElliottWave;const Types_ElliottWave=null,Tunnel_defaultOptions=external_highcharts_src_js_default_default()["defaultOptions"],Tunnel_merge=external_highcharts_src_js_default_default()["merge"];function getSecondCoordinate(t,i,e){return(i.y-t.y)/(i.x-t.x)*(e-t.x)+t.y}Tunnel_defaultOptions.annotations&&(Tunnel_defaultOptions.annotations.types.tunnel=Tunnel_merge(Tunnel_defaultOptions.annotations.types.crookedLine,{typeOptions:{background:{fill:"rgba(130, 170, 255, 0.4)",strokeWidth:0},line:{strokeWidth:1},height:-2,heightControlPoint:{positioner:function(t){var i=Annotations_MockPoint.pointToPixels(t.points[2]),t=Annotations_MockPoint.pointToPixels(t.points[3]),e=(i.x+t.x)/2;return{x:e-(this.graphic.width||0)/2,y:getSecondCoordinate(i,t,e)-(this.graphic.height||0)/2}},events:{drag:function(t,i){i.chart.isInsidePlot(t.chartX-i.chart.plotLeft,t.chartY-i.chart.plotTop,{visiblePlotOnly:!0})&&(i.translateHeight(this.mouseMoveToTranslation(t).y),i.redraw(!1))}}}},controlPointOptions:{events:{drag:function(t,i){i.chart.isInsidePlot(t.chartX-i.chart.plotLeft,t.chartY-i.chart.plotTop,{visiblePlotOnly:!0})&&(t=this.mouseMoveToTranslation(t),i.translateSide(t.x,t.y,!!this.index),i.redraw(!1))}}}}));class Tunnel extends Types_CrookedLine{getPointsOptions(){const t=Types_CrookedLine.prototype.getPointsOptions.call(this),i=this.options.typeOptions.yAxis||0,e=this.chart.yAxis[i];var s;return t[2]=this.heightPointOptions(t[1]),t[3]=this.heightPointOptions(t[0]),e&&e.logarithmic&&(s=e.toPixels(t[2].y)-e.toPixels(t[1].y),s=e.toPixels(t[0].y)+s,t[3].y=e.toValue(s)),t}getControlPointsOptions(){return this.getPointsOptions().slice(0,2)}heightPointOptions(t){const i=Tunnel_merge(t),e=this.options.typeOptions;return i.y+=e.height,i}addControlPoints(){Types_CrookedLine.prototype.addControlPoints.call(this);const t=this.options,i=t.typeOptions,e=new Annotations_ControlPoint(this.chart,this,Tunnel_merge(t.controlPointOptions,i.heightControlPoint),2);this.controlPoints.push(e),i.heightControlPoint=e.options}addShapes(){this.addLine(),this.addBackground()}addLine(){var t=this.initShape(Tunnel_merge(this.options.typeOptions.line,{type:"path",points:[this.points[0],this.points[1],function(t){const i=Annotations_MockPoint.pointToOptions(t.annotation.points[2]);return i.command="M",i},this.points[3]],className:"highcharts-tunnel-lines"}),0);this.options.typeOptions.line=t.options}addBackground(){var t=this.initShape(Tunnel_merge(this.options.typeOptions.background,{type:"path",points:this.points.slice(),className:"highcharts-tunnel-background"}),1);this.options.typeOptions.background=t.options}translateSide(t,i,e){var e=Number(e),s=0===e?3:2;this.translatePoint(t,i,e),this.translatePoint(t,i,s)}translateHeight(t){this.translatePoint(0,t,2),this.translatePoint(0,t,3),this.options.typeOptions.height=this.points[3].y-this.points[0].y,this.userOptions.typeOptions.height=this.options.typeOptions.height}}const Types_Tunnel=Annotations_Annotation.types.tunnel=Tunnel,InfinityLine_defaultOptions=external_highcharts_src_js_default_default()["defaultOptions"],InfinityLine_merge=external_highcharts_src_js_default_default()["merge"];InfinityLine_defaultOptions.annotations&&(InfinityLine_defaultOptions.annotations.types.infinityLine=InfinityLine_merge(InfinityLine_defaultOptions.annotations.types.crookedLine));class InfinityLine extends Types_CrookedLine{static edgePoint(s,o){return function(t){var t=t.annotation,i=t.options.typeOptions.type;let e=t.points;return"horizontalLine"!==i&&"verticalLine"!==i||(e=[e[0],new Annotations_MockPoint(t.chart,e[0].target,{x:e[0].x+ +("horizontalLine"===i),y:e[0].y+ +("verticalLine"===i),xAxis:e[0].options.xAxis,yAxis:e[0].options.yAxis})]),InfinityLine.findEdgePoint(e[s],e[o])}}static findEdgeCoordinate(t,i,e,s){var o="x"===e?"y":"x";return(i[e]-t[e])*(s-t[o])/(i[o]-t[o])+t[e]}static findEdgePoint(t,i){const e=t.series.chart,s=t.series.xAxis,o=i.series.yAxis,n=Annotations_MockPoint.pointToPixels(t),a=Annotations_MockPoint.pointToPixels(i),r=a.x-n.x,h=a.y-n.y,l=s.left,c=l+s.width,p=o.top,d=p+o.height,u=r<0?l:c,_=h<0?p:d,g={x:0==r?n.x:u,y:0==h?n.y:_};var x;return 0!=r&&0!=h&&(i=InfinityLine.findEdgeCoordinate(n,a,"y",u),x=InfinityLine.findEdgeCoordinate(n,a,"x",_),p<=i&&i<=d?(g.x=u,g.y=i):(g.x=x,g.y=_)),g.x-=e.plotLeft,g.y-=e.plotTop,t.series.chart.inverted&&(i=g.x,g.x=g.y,g.y=i),g}addShapes(){const t=this.options.typeOptions,i=[this.points[0],InfinityLine.endEdgePoint];t.type.match(/line/gi)&&(i[0]=InfinityLine.startEdgePoint);var e=this.initShape(InfinityLine_merge(t.line,{type:"path",points:i,className:"highcharts-infinity-lines"}),0);t.line=e.options}}InfinityLine.endEdgePoint=InfinityLine.edgePoint(0,1),InfinityLine.startEdgePoint=InfinityLine.edgePoint(1,0);const Types_InfinityLine=Annotations_Annotation.types.infinityLine=InfinityLine,TimeCycles_defaultOptions=external_highcharts_src_js_default_default()["defaultOptions"],{merge:TimeCycles_merge,isNumber:TimeCycles_isNumber,defined:TimeCycles_defined}=external_highcharts_src_js_default_default();function getStartingPath(t,i){return["M",t,i]}function getCirclePath(i,e,s,o){const n=[];for(let t=1;t<=e;t++)n.push(["A",i/2,i/2,0,1,1,s+t*i,o]);return n}TimeCycles_defaultOptions.annotations&&(TimeCycles_defaultOptions.annotations.types.timeCycles=TimeCycles_merge(TimeCycles_defaultOptions.annotations.types.crookedLine,{typeOptions:{controlPointOptions:[{positioner:function(t){var i=t.points[0];return{x:t.anchor(i).absolutePosition.x-(this.graphic.width||0)/2,y:t.y-(this.graphic.height||0)}},events:{drag:function(t,i){var e=i.anchor(i.points[0]).absolutePosition;i.translatePoint(t.chartX-e.x,0,0),i.redraw(!1)}}},{positioner:function(t){var i=t.points[1];return{x:t.anchor(i).absolutePosition.x-(this.graphic.width||0)/2,y:t.y-(this.graphic.height||0)}},events:{drag:function(t,i){var e=i.anchor(i.points[1]).absolutePosition;i.translatePoint(t.chartX-e.x,0,1),i.redraw(!1)}}}]}}));class TimeCycles extends Types_CrookedLine{init(t,i,e){TimeCycles_defined(i.yAxis)&&i.points.forEach(t=>{t.yAxis=i.yAxis}),TimeCycles_defined(i.xAxis)&&i.points.forEach(t=>{t.xAxis=i.xAxis}),super.init(t,i,e)}setPath(){this.shapes[0].options.d=this.getPath()}getPath(){return[getStartingPath(this.startX,this.y)].concat(getCirclePath(this.pixelInterval,this.numberOfCircles,this.startX,this.y))}addShapes(){const t=this.options.typeOptions;this.setPathProperties();var i=this.initShape(TimeCycles_merge(t.line,{type:"path",d:this.getPath(),points:this.options.points,className:"highcharts-timecycles-lines"}),0);t.line=i.options}addControlPoints(){const i=this.options,t=i.typeOptions;i.controlPointOptions.style.cursor=this.chart.inverted?"ns-resize":"ew-resize",t.controlPointOptions.forEach(t=>{t=TimeCycles_merge(i.controlPointOptions,t),t=new Annotations_ControlPoint(this.chart,this,t,0);this.controlPoints.push(t)})}setPathProperties(){var t,i,e,s=this.options.typeOptions,o=s.points;if(o){const n=o[0],a=o[1],r=s.xAxis||0,h=s.yAxis||0,l=this.chart.xAxis[r],c=this.chart.yAxis[h],p=n.x,d=n.y,u=a.x;p&&u&&(o=TimeCycles_isNumber(d)?c.toPixels(d):c.top+c.height,s=TimeCycles_isNumber(p)?l.toPixels(p):l.left,t=TimeCycles_isNumber(u)?l.toPixels(u):l.left+30,i=l.len,t=Math.round(Math.max(Math.abs(t-s),2)),i=Math.floor(i/t)+2,e=(Math.floor((s-l.left)/t)+1)*t,this.startX=s-e,this.y=o,this.pixelInterval=t,this.numberOfCircles=i)}}redraw(t){this.setPathProperties(),this.setPath(),super.redraw(t)}}Annotations_Annotation.types.timeCycles=TimeCycles;const Types_TimeCycles=null,Fibonacci_defaultOptions=external_highcharts_src_js_default_default()["defaultOptions"],Fibonacci_merge=external_highcharts_src_js_default_default()["merge"];function createPathDGenerator(n,a){return function(){var t,i=this.annotation;if(!i.startRetracements||!i.endRetracements)return[];const e=this.anchor(i.startRetracements[n]).absolutePosition,s=this.anchor(i.endRetracements[n]).absolutePosition,o=[["M",Math.round(e.x),Math.round(e.y)],["L",Math.round(s.x),Math.round(s.y)]];return a&&(t=this.anchor(i.endRetracements[n-1]).absolutePosition,i=this.anchor(i.startRetracements[n-1]).absolutePosition,o.push(["L",Math.round(t.x),Math.round(t.y)],["L",Math.round(i.x),Math.round(i.y)])),o}}Fibonacci_defaultOptions.annotations&&(Fibonacci_defaultOptions.annotations.types.fibonacci=Fibonacci_merge(Fibonacci_defaultOptions.annotations.types.tunnel,{typeOptions:{reversed:!1,height:2,backgroundColors:["rgba(130, 170, 255, 0.4)","rgba(139, 191, 216, 0.4)","rgba(150, 216, 192, 0.4)","rgba(156, 229, 161, 0.4)","rgba(162, 241, 130, 0.4)","rgba(169, 255, 101, 0.4)"],lineColor:"#999999",lineColors:[],labels:[]},labelOptions:{allowOverlap:!0,align:"right",backgroundColor:"none",borderWidth:0,crop:!1,overflow:"none",shape:"rect",style:{color:"#333333"},verticalAlign:"middle",y:0}}));class Fibonacci extends Types_Tunnel{linkPoints(){super.linkPoints(),this.linkRetracementsPoints()}linkRetracementsPoints(){const s=this.points,o=s[0].y-s[3].y,n=s[1].y-s[2].y,a=s[0].x,r=s[1].x;Fibonacci.levels.forEach((t,i)=>{var e=s[0].y-o*t,t=s[1].y-n*t,i=this.options.typeOptions.reversed?Fibonacci.levels.length-i-1:i;this.startRetracements=this.startRetracements||[],this.endRetracements=this.endRetracements||[],this.linkRetracementPoint(i,a,e,this.startRetracements),this.linkRetracementPoint(i,r,t,this.endRetracements)})}linkRetracementPoint(t,i,e,s){const o=s[t],n=this.options.typeOptions;o?(o.options.x=i,o.options.y=e,o.refresh()):s[t]=new Annotations_MockPoint(this.chart,this,{x:i,y:e,xAxis:n.xAxis,yAxis:n.yAxis})}addShapes(){Fibonacci.levels.forEach(function(t,i){var{backgroundColors:e,lineColor:s,lineColors:o}=this.options.typeOptions;this.initShape({type:"path",d:createPathDGenerator(i),stroke:o[i]||s,className:"highcharts-fibonacci-line"},i),0<i&&this.initShape({type:"path",fill:e[i-1],strokeWidth:0,d:createPathDGenerator(i,!0),className:"highcharts-fibonacci-background-"+(i-1)})},this)}addLabels(){Fibonacci.levels.forEach(function(t,i){const e=this.options.typeOptions,s=this.initLabel(Fibonacci_merge(e.labels[i],{point:function(t){return Annotations_MockPoint.pointToOptions(t.annotation.startRetracements[i])},text:t.toString()}));e.labels[i]=s.options},this)}}Fibonacci.levels=[0,.236,.382,.5,.618,.786,1],Annotations_Annotation.types.fibonacci=Fibonacci;const Types_Fibonacci=null,FibonacciTimeZones_defaultOptions=external_highcharts_src_js_default_default()["defaultOptions"],FibonacciTimeZones_merge=external_highcharts_src_js_default_default()["merge"];function edgePoint(r,h,l){return function(t){var i=t.annotation.chart,e=i.inverted?i.plotTop:i.plotLeft;let s=t.annotation.points;const o=s[0].series.xAxis,n=1<s.length?s[1].plotX-s[0].plotX:0,a=o.toValue(s[0].plotX+e+l*n);return s=[new Annotations_MockPoint(i,s[0].target,{x:a,y:0,xAxis:s[0].options.xAxis,yAxis:s[0].options.yAxis}),new Annotations_MockPoint(i,s[0].target,{x:a,y:1,xAxis:s[0].options.xAxis,yAxis:s[0].options.yAxis})],Types_InfinityLine.findEdgePoint(s[r],s[h])}}FibonacciTimeZones_defaultOptions.annotations&&(FibonacciTimeZones_defaultOptions.annotations.types.fibonacciTimeZones=FibonacciTimeZones_merge(FibonacciTimeZones_defaultOptions.annotations.types.crookedLine,{typeOptions:{line:{stroke:"#333333",strokeWidth:1,fill:void 0},controlPointOptions:{positioner:function(){const t=this.target,i=this.graphic,e=t.secondLineEdgePoints,s={annotation:t},o=e[0](s).y,n=e[1](s).y,a=this.chart.plotLeft,r=this.chart.plotTop;let h=e[0](s).x,l=(o+n)/2;return this.chart.inverted&&([h,l]=[l,h]),{x:a+h-(i.width||0)/2,y:r+l-(i.height||0)/2}},events:{drag:function(t,i){i.chart.isInsidePlot(t.chartX-i.chart.plotLeft,t.chartY-i.chart.plotTop,{visiblePlotOnly:!0})&&(t=this.mouseMoveToTranslation(t),i.translatePoint(t.x,0,1),i.redraw(!1))}}}}}));class FibonacciTimeZones extends Types_CrookedLine{addShapes(){let i=1,e=1;for(let t=0;t<11;t++){var s=t?i:0,s=[edgePoint(1,0,s),edgePoint(0,1,s)];e=i+e,i=e-i,1===t&&(this.secondLineEdgePoints=[s[0],s[1]]),this.initShape(FibonacciTimeZones_merge(this.options.typeOptions.line,{type:"path",points:s,className:"highcharts-fibonacci-timezones-lines"}),t)}}addControlPoints(){const t=this.options,i=t.typeOptions,e=new Annotations_ControlPoint(this.chart,this,FibonacciTimeZones_merge(t.controlPointOptions,i.controlPointOptions),0);this.controlPoints.push(e),i.controlPointOptions=e.options}}Annotations_Annotation.types.fibonacciTimeZones=FibonacciTimeZones;const Types_FibonacciTimeZones=null,Pitchfork_defaultOptions=external_highcharts_src_js_default_default()["defaultOptions"],Pitchfork_merge=external_highcharts_src_js_default_default()["merge"];Pitchfork_defaultOptions.annotations&&(Pitchfork_defaultOptions.annotations.types.pitchfork=Pitchfork_merge(Pitchfork_defaultOptions.annotations.types.infinityLine,{typeOptions:{innerBackground:{fill:"rgba(130, 170, 255, 0.4)",strokeWidth:0},outerBackground:{fill:"rgba(156, 229, 161, 0.4)",strokeWidth:0}}}));class Pitchfork extends Types_InfinityLine{static outerLineEdgePoint(s){return function(t){const i=t.annotation,e=i.points;return Pitchfork.findEdgePoint(e[s],e[0],new Annotations_MockPoint(i.chart,t,i.midPointOptions()))}}static findEdgePoint(t,i,e){e=Math.atan2(e.plotY-i.plotY,e.plotX-i.plotX);return{x:t.plotX+1e7*Math.cos(e),y:t.plotY+1e7*Math.sin(e)}}static middleLineEdgePoint(t){const i=t.annotation,e=i.points;return Types_InfinityLine.findEdgePoint(e[0],new Annotations_MockPoint(i.chart,t,i.midPointOptions()))}midPointOptions(){var t=this.points;return{x:(t[1].x+t[2].x)/2,y:(t[1].y+t[2].y)/2,xAxis:t[0].series.xAxis,yAxis:t[0].series.yAxis}}addShapes(){this.addLines(),this.addBackgrounds()}addLines(){var t="highcharts-pitchfork-lines";this.initShape({type:"path",points:[this.points[0],Pitchfork.middleLineEdgePoint],className:t},0),this.initShape({type:"path",points:[this.points[1],Pitchfork.topLineEdgePoint],className:t},1),this.initShape({type:"path",points:[this.points[2],Pitchfork.bottomLineEdgePoint],className:t},2)}addBackgrounds(){const t=this.shapes,i=this.options.typeOptions;var e=this.initShape(Pitchfork_merge(i.innerBackground,{type:"path",points:[function(t){const i=t.annotation,e=i.points,s=i.midPointOptions();return{x:(e[1].x+s.x)/2,y:(e[1].y+s.y)/2,xAxis:s.xAxis,yAxis:s.yAxis}},t[1].points[1],t[2].points[1],function(t){const i=t.annotation,e=i.points,s=i.midPointOptions();return{x:(s.x+e[2].x)/2,y:(s.y+e[2].y)/2,xAxis:s.xAxis,yAxis:s.yAxis}}],className:"highcharts-pitchfork-inner-background"}),3),s=this.initShape(Pitchfork_merge(i.outerBackground,{type:"path",points:[this.points[1],t[1].points[1],t[2].points[1],this.points[2]],className:"highcharts-pitchfork-outer-background"}),4);i.innerBackground=e.options,i.outerBackground=s.options}}Pitchfork.topLineEdgePoint=Pitchfork.outerLineEdgePoint(1),Pitchfork.bottomLineEdgePoint=Pitchfork.outerLineEdgePoint(0),Annotations_Annotation.types.pitchfork=Pitchfork;const Types_Pitchfork=null,VerticalLine_defaultOptions=external_highcharts_src_js_default_default()["defaultOptions"],{merge:VerticalLine_merge,pick:VerticalLine_pick}=external_highcharts_src_js_default_default();VerticalLine_defaultOptions.annotations&&(VerticalLine_defaultOptions.annotations.types.verticalLine={typeOptions:{yOffset:10,label:{offset:-40,point:function(t){return t.annotation.points[0]},allowOverlap:!0,backgroundColor:"none",borderWidth:0,crop:!0,overflow:"none",shape:"rect",text:"{y:.2f}"},connector:{strokeWidth:1,markerEnd:"arrow"}},labelOptions:{style:{color:"#333333",fontSize:"0.7em"}}});class VerticalLine extends Annotations_Annotation{static connectorFirstPoint(t){var t=t.annotation,i=t.chart,e=i.inverted,s=t.points[0],o=VerticalLine_pick(s.series.yAxis&&s.series.yAxis.left,0),n=VerticalLine_pick(s.series.yAxis&&s.series.yAxis.top,0),t=t.options.typeOptions.label.offset,a=Annotations_MockPoint.pointToPixels(s,!0)[e?"x":"y"];return{x:s.x,xAxis:s.series.xAxis,y:a+t+(e?o-i.plotLeft:n-i.plotTop)}}static connectorSecondPoint(t){var t=t.annotation,i=t.chart,e=i.inverted,s=t.options.typeOptions,t=t.points[0],o=VerticalLine_pick(t.series.yAxis&&t.series.yAxis.left,0),n=VerticalLine_pick(t.series.yAxis&&t.series.yAxis.top,0),a=Annotations_MockPoint.pointToPixels(t,!0)[e?"x":"y"];let r=s.yOffset;return s.label.offset<0&&(r*=-1),{x:t.x,xAxis:t.series.xAxis,y:a+r+(e?o-i.plotLeft:n-i.plotTop)}}getPointsOptions(){return[this.options.typeOptions.point]}addShapes(){const t=this.options.typeOptions,i=this.initShape(VerticalLine_merge(t.connector,{type:"path",points:[VerticalLine.connectorFirstPoint,VerticalLine.connectorSecondPoint],className:"highcharts-vertical-line"}),0);t.connector=i.options,this.userOptions.typeOptions.point=t.point}addLabels(){const t=this.options.typeOptions,i=t.label;let e=0,s=i.offset,o=i.offset<0?"bottom":"top",n="center";this.chart.inverted&&(e=i.offset,s=0,o="middle",n=i.offset<0?"right":"left");var a=this.initLabel(VerticalLine_merge(i,{verticalAlign:o,align:n,x:e,y:s}));t.label=a.options}}Annotations_Annotation.types.verticalLine=VerticalLine;const Types_VerticalLine=null,Measure_defaultOptions=external_highcharts_src_js_default_default()["defaultOptions"],{defined:Measure_defined,extend:Measure_extend,isNumber:Measure_isNumber,merge:Measure_merge,pick:Measure_pick}=external_highcharts_src_js_default_default();function average(){let t=0,i=0,e=0;const s=this.chart.series,o=getExtremes(this.xAxisMin,this.xAxisMax,this.yAxisMin,this.yAxisMax);return s.forEach(t=>{t.visible&&"highcharts-navigator-series"!==t.options.id&&t.points.forEach(t=>{isPointWithinExtremes(t,o)&&Measure_isNumber(t.y)&&(i+=t.y,e++)})}),t=0<e?i/e:t}function isPointWithinExtremes(t,i){return!t.isNull&&Measure_isNumber(t.y)&&t.x>i.xAxisMin&&t.x<=i.xAxisMax&&t.y>i.yAxisMin&&t.y<=i.yAxisMax}function bins(){const t=this.chart.series,i=getExtremes(this.xAxisMin,this.xAxisMax,this.yAxisMin,this.yAxisMax);let e=0;return t.forEach(t=>{t.visible&&"highcharts-navigator-series"!==t.options.id&&t.points.forEach(t=>{isPointWithinExtremes(t,i)&&e++})}),e}function defaultFormatter(){return"Min: "+this.min+"<br>Max: "+this.max+"<br>Average: "+this.average.toFixed(2)+"<br>Bins: "+this.bins}function getExtremes(t,i,e,s){return{xAxisMin:Math.min(i,t),xAxisMax:Math.max(i,t),yAxisMin:Math.min(s,e),yAxisMax:Math.max(s,e)}}function getPointPos(t,i,e){return t.toValue(t.toPixels(i)+e)}function Measure_init(){const t=this.options.typeOptions,i=this.chart,e=i.inverted,s=i.xAxis[t.xAxis],o=i.yAxis[t.yAxis],n=t.background,a=e?n.height:n.width,r=e?n.width:n.height,h=t.selectType,l=e?s.left:o.top,c=e?o.top:s.left;this.startXMin=t.point.x,this.startYMin=t.point.y,Measure_isNumber(a)?this.startXMax=this.startXMin+a:this.startXMax=getPointPos(s,this.startXMin,parseFloat(a)),Measure_isNumber(r)?this.startYMax=this.startYMin-r:this.startYMax=getPointPos(o,this.startYMin,parseFloat(r)),"x"===h?(this.startYMin=o.toValue(l),this.startYMax=o.toValue(l+o.len)):"y"===h&&(this.startXMin=s.toValue(c),this.startXMax=s.toValue(c+s.len))}function max(){const t=this.chart.series,i=getExtremes(this.xAxisMin,this.xAxisMax,this.yAxisMin,this.yAxisMax);let e=-1/0,s=!1;return t.forEach(t=>{t.visible&&"highcharts-navigator-series"!==t.options.id&&t.points.forEach(t=>{Measure_isNumber(t.y)&&t.y>e&&isPointWithinExtremes(t,i)&&(e=t.y,s=!0)})}),e=s?e:0}function min(){const t=this.chart.series,i=getExtremes(this.xAxisMin,this.xAxisMax,this.yAxisMin,this.yAxisMax);let e=1/0,s=!1;return t.forEach(t=>{t.visible&&"highcharts-navigator-series"!==t.options.id&&t.points.forEach(t=>{Measure_isNumber(t.y)&&t.y<e&&isPointWithinExtremes(t,i)&&(e=t.y,s=!0)})}),e=s?e:0}function recalculate(t){var i=this.options.typeOptions,e=this.chart.xAxis[i.xAxis],i=this.chart.yAxis[i.yAxis],s=this.offsetX,o=this.offsetY;this.xAxisMin=getPointPos(e,this.startXMin,s),this.xAxisMax=getPointPos(e,this.startXMax,s),this.yAxisMin=getPointPos(i,this.startYMin,o),this.yAxisMax=getPointPos(i,this.startYMax,o),this.min=min.call(this),this.max=max.call(this),this.average=average.call(this),this.bins=bins.call(this),t&&this.resize(0,0)}function updateStartPoints(t,i,e,s,o){var n=this.options.typeOptions,a=n.selectType,r=this.chart.xAxis[n.xAxis],n=this.chart.yAxis[n.yAxis],h=this.startXMin,l=this.startXMax,c=this.startYMin,p=this.startYMax,d=this.offsetX,u=this.offsetY;i&&("x"===a?0===e?this.startXMin=getPointPos(r,h,s):this.startXMax=getPointPos(r,l,s):"y"===a?0===e?this.startYMin=getPointPos(n,c,o):this.startYMax=getPointPos(n,p,o):(this.startXMax=getPointPos(r,l,s),this.startYMax=getPointPos(n,p,o))),t&&(this.startXMin=getPointPos(r,h,d),this.startXMax=getPointPos(r,l,d),this.startYMin=getPointPos(n,c,u),this.startYMax=getPointPos(n,p,u),this.offsetX=0,this.offsetY=0),this.options.typeOptions.point={x:this.startXMin,y:this.startYMin},this.userOptions.typeOptions.point={x:this.startXMin,y:this.startYMin}}Measure_defaultOptions.annotations&&(Measure_defaultOptions.annotations.types.measure={typeOptions:{selectType:"xy",xAxis:0,yAxis:0,background:{fill:"rgba(130, 170, 255, 0.4)",strokeWidth:0,stroke:void 0},crosshairX:{enabled:!0,zIndex:6,dashStyle:"Dash",markerEnd:"arrow"},crosshairY:{enabled:!0,zIndex:6,dashStyle:"Dash",markerEnd:"arrow"},label:{enabled:!0,style:{fontSize:"0.7em",color:"#333333"},formatter:void 0}},controlPointOptions:{positioner:function(t){const i=this.index,e=t.chart,s=t.options,o=s.typeOptions,n=o.selectType,a=s.controlPointOptions,r=e.inverted,h=e.xAxis[o.xAxis],l=e.yAxis[o.yAxis],c=getExtremes(t.xAxisMin,t.xAxisMax,t.yAxisMin,t.yAxisMax);let p=t.xAxisMax,d=t.yAxisMax,u,_;return"x"===n&&(d=(c.yAxisMax+c.yAxisMin)/2,0===i&&(p=t.xAxisMin)),"y"===n&&(p=c.xAxisMin+(c.xAxisMax-c.xAxisMin)/2,0===i&&(d=t.yAxisMin)),_=r?(u=l.toPixels(d),h.toPixels(p)):(u=h.toPixels(p),l.toPixels(d)),{x:u-a.width/2,y:_-a.height/2}},events:{drag:function(t,i){var t=this.mouseMoveToTranslation(t),e=i.options.typeOptions.selectType,s=this.index,o="y"===e?0:t.x,t="x"===e?0:t.y;i.resize(o,t,s,e),i.resizeX+=o,i.resizeY+=t,i.redraw(!1,!0)}}}});class Measure extends Annotations_Annotation{init(t,i,e){super.init(t,i,e),this.offsetX=0,this.offsetY=0,this.resizeX=0,this.resizeY=0,Measure_init.call(this),this.addValues(),this.addShapes()}setClipAxes(){this.clipXAxis=this.chart.xAxis[this.options.typeOptions.xAxis],this.clipYAxis=this.chart.yAxis[this.options.typeOptions.yAxis]}shapePointsOptions(){var t=this.options.typeOptions,i=t.xAxis,t=t.yAxis;return[{x:this.xAxisMin,y:this.yAxisMin,xAxis:i,yAxis:t},{x:this.xAxisMax,y:this.yAxisMin,xAxis:i,yAxis:t},{x:this.xAxisMax,y:this.yAxisMax,xAxis:i,yAxis:t},{x:this.xAxisMin,y:this.yAxisMax,xAxis:i,yAxis:t},{command:"Z"}]}addControlPoints(){const t=this.chart.inverted,i=this.options.controlPointOptions,e=this.options.typeOptions.selectType;Measure_defined(this.userOptions.controlPointOptions?.style?.cursor)||("x"===e?i.style.cursor=t?"ns-resize":"ew-resize":"y"===e&&(i.style.cursor=t?"ew-resize":"ns-resize"));var s=new Annotations_ControlPoint(this.chart,this,this.options.controlPointOptions,0);this.controlPoints.push(s),"xy"!==e&&(s=new Annotations_ControlPoint(this.chart,this,this.options.controlPointOptions,1),this.controlPoints.push(s))}addValues(t){const e=this.options.typeOptions,i=e.label.formatter;recalculate.call(this,t),e.label.enabled&&(0<this.labels.length?this.labels[0].text=i&&i.call(this)||defaultFormatter.call(this):this.initLabel(Measure_extend({shape:"rect",backgroundColor:"none",color:"black",borderWidth:0,dashStyle:"Dash",overflow:"allow",align:"left",y:0,x:0,verticalAlign:"top",crop:!0,xAxis:0,yAxis:0,point:function(t){var i=t.annotation,t=t.options;return{x:i.xAxisMin,y:i.yAxisMin,xAxis:Measure_pick(e.xAxis,t.xAxis),yAxis:Measure_pick(e.yAxis,t.yAxis)}},text:i&&i.call(this)||defaultFormatter.call(this)},e.label),void 0))}addShapes(){this.addCrosshairs(),this.addBackground()}addBackground(){var t=this.shapePointsOptions();void 0!==t[0].x&&this.initShape(Measure_extend({type:"path",points:t,className:"highcharts-measure-background"},this.options.typeOptions.background),2)}addCrosshairs(){const t=this.chart,i=this.options.typeOptions,e=this.options.typeOptions.point,s=t.xAxis[i.xAxis],o=t.yAxis[i.yAxis],n=t.inverted,a={point:e,type:"path"};let r=s.toPixels(this.xAxisMin),h=s.toPixels(this.xAxisMax),l=o.toPixels(this.yAxisMin),c=o.toPixels(this.yAxisMax),p=[],d=[],u,_,g;n&&(g=r,r=l,l=g,g=h,h=c,c=g),i.crosshairX.enabled&&(p=[["M",r,l+(c-l)/2],["L",h,l+(c-l)/2]]),i.crosshairY.enabled&&(d=[["M",r+(h-r)/2,l],["L",r+(h-r)/2,c]]),0<this.shapes.length?(this.shapes[0].options.d=p,this.shapes[1].options.d=d):(u=Measure_merge(a,{className:"highcharts-measure-crosshair-x"},i.crosshairX),_=Measure_merge(a,{className:"highcharts-measure-crosshair-y"},i.crosshairY),this.initShape(Measure_extend({d:p},u),0),this.initShape(Measure_extend({d:d},_),1))}onDrag(t){var t=this.mouseMoveToTranslation(t),i=this.options.typeOptions.selectType,e="y"===i?0:t.x,i="x"===i?0:t.y;this.translate(e,i),this.offsetX+=e,this.offsetY+=i,this.redraw(!1,!1,!0)}resize(t,i,e,s){const o=this.shapes[2];"x"===s?0===e?(o.translatePoint(t,0,0),o.translatePoint(t,i,3)):(o.translatePoint(t,0,1),o.translatePoint(t,i,2)):"y"===s?0===e?(o.translatePoint(0,i,0),o.translatePoint(0,i,1)):(o.translatePoint(0,i,2),o.translatePoint(0,i,3)):(o.translatePoint(t,0,1),o.translatePoint(t,i,2),o.translatePoint(0,i,3)),updateStartPoints.call(this,!1,!0,e,t,i),this.options.typeOptions.background.height=Math.abs(this.startYMax-this.startYMin),this.options.typeOptions.background.width=Math.abs(this.startXMax-this.startXMin)}redraw(t,i,e){this.linkPoints(),this.graphic||this.render(),e&&updateStartPoints.call(this,!0,!1),this.clipRect&&this.clipRect.animate(this.getClipBox()),this.addValues(i),this.addCrosshairs(),this.redrawItems(this.shapes,t),this.redrawItems(this.labels,t);e=this.options.typeOptions.background;if(e?.strokeWidth&&this.shapes[2]?.graphic){i=e.strokeWidth/2;const s=this.shapes[2];t=s.graphic.pathArray;const o=t[0],n=t[1],a=t[2],r=t[3];o[1]=(o[1]||0)+i,n[1]=(n[1]||0)-i,a[1]=(a[1]||0)-i,r[1]=(r[1]||0)+i,o[2]=(o[2]||0)+i,n[2]=(n[2]||0)+i,a[2]=(a[2]||0)-i,r[2]=(r[2]||0)-i,s.graphic.attr({d:t})}this.controlPoints.forEach(t=>t.redraw())}translate(i,e){this.shapes.forEach(t=>t.translate(i,e))}}Annotations_Annotation.types.measure=Measure;const Types_Measure=null,annotations_advanced_src=external_highcharts_src_js_default_default();export{annotations_advanced_src as default};