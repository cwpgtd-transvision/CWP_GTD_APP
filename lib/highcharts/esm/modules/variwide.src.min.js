import*as __WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__ from"../highcharts.src.js";var __webpack_require__={n:e=>{var i=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(i,{a:i}),i},d:(e,i)=>{for(var t in i)__webpack_require__.o(i,t)&&!__webpack_require__.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:i[t]})},o:(e,i)=>Object.prototype.hasOwnProperty.call(e,i)};const external_highcharts_src_js_default_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default;var external_highcharts_src_js_default_default=__webpack_require__.n(external_highcharts_src_js_default_namespaceObject);const external_highcharts_src_js_default_SeriesRegistry_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default.SeriesRegistry;var external_highcharts_src_js_default_SeriesRegistry_default=__webpack_require__.n(external_highcharts_src_js_default_SeriesRegistry_namespaceObject);const composed=external_highcharts_src_js_default_default()["composed"],{addEvent,pushUnique,wrap}=external_highcharts_src_js_default_default();function compose(e,i){if(pushUnique(composed,"Variwide")){const t=i.prototype;addEvent(e,"afterDrawCrosshair",onAxisAfterDrawCrosshair),addEvent(e,"afterRender",onAxisAfterRender),addEvent(i,"afterGetPosition",onTickAfterGetPosition),t.postTranslate=tickPostTranslate,wrap(t,"getLabelPosition",wrapTickGetLabelPosition)}}function onAxisAfterDrawCrosshair(e){this.variwide&&this.cross&&this.cross.attr("stroke-width",e.point?.crosshairWidth)}function onAxisAfterRender(){const s=this;this.variwide&&this.chart.labelCollectors.push(function(){return s.tickPositions.filter(e=>!!s.ticks[e].label).map((e,i)=>{const t=s.ticks[e].label;return t.labelrank=s.zData[i],t})})}function onTickAfterGetPosition(e){var i=this.axis,t=i.horiz?"x":"y";i.variwide&&(this[t+"Orig"]=e.pos[t],this.postTranslate(e.pos,t,this.pos))}function tickPostTranslate(e,i,t){const s=this.axis;let r=e[i]-s.pos;s.horiz||(r=s.len-r),r=s.series[0].postTranslate(t,r),s.horiz||(r=s.len-r),e[i]=s.pos+r}function wrapTickGetLabelPosition(e,i,t,s,r,a,o,n){const _=Array.prototype.slice.call(arguments,1),h=r?"x":"y";this.axis.variwide&&"number"==typeof this[h+"Orig"]&&(_[r?0:1]=this[h+"Orig"]);var c=e.apply(this,_);return this.axis.variwide&&this.axis.categories&&this.postTranslate(c,h,this.pos),c}const VariwideComposition={compose:compose},Variwide_VariwideComposition=VariwideComposition,{prototype:{pointClass:ColumnPoint}}=external_highcharts_src_js_default_SeriesRegistry_default().seriesTypes["column"],isNumber=external_highcharts_src_js_default_default()["isNumber"];class VariwidePoint extends ColumnPoint{isValid(){return isNumber(this.y)&&isNumber(this.z)}}const Variwide_VariwidePoint=VariwidePoint,VariwideSeriesDefaults={pointPadding:0,groupPadding:0},Variwide_VariwideSeriesDefaults=VariwideSeriesDefaults,ColumnSeries=external_highcharts_src_js_default_SeriesRegistry_default().seriesTypes["column"],{addEvent:VariwideSeries_addEvent,arrayMin,arrayMax,crisp,extend,merge,pick}=external_highcharts_src_js_default_default();class VariwideSeries extends ColumnSeries{processData(e){this.totalZ=0,this.relZ=[],external_highcharts_src_js_default_SeriesRegistry_default().seriesTypes.column.prototype.processData.call(this,e);const i=this.getColumn("z");(this.xAxis.reversed?i.slice().reverse():i).forEach(function(e,i){this.relZ[i]=this.totalZ,this.totalZ+=e},this),this.xAxis.categories&&(this.xAxis.variwide=!0,this.xAxis.zData=i)}postTranslate(e,i,t){const s=this.xAxis,r=this.relZ,a=s.reversed?r.length-e:e,o=s.reversed?-1:1,n=s.toPixels(s.reversed?(s.dataMax||0)+s.pointRange:s.dataMin||0),_=s.toPixels(s.reversed?s.dataMin||0:(s.dataMax||0)+s.pointRange),h=Math.abs(_-n),c=this.totalZ,d=this.chart.inverted?_-(this.chart.plotTop-o*s.minPixelPadding):n-this.chart.plotLeft-o*s.minPixelPadding,l=a/r.length*h,p=(a+o)/r.length*h,u=pick(r[a],c)/c*h,f=pick(r[a+o],c)/c*h,x=i-(d+l);return t&&(t.crosshairWidth=f-u),d+u+x*(f-u)/(p-l)}translate(){this.crispOption=this.options.crisp,this.options.crisp=!1,super.translate(),this.options.crisp=this.crispOption}correctStackLabels(){var e=this,i=e.options,t=e.yAxis;let s,r,a,o;for(const n of e.points)o=n.x,r=n.shapeArgs.width,(a=t.stacking.stacks[(e.negStacks&&n.y<(i.startFromThreshold?0:i.threshold)?"-":"")+e.stackKey])&&(s=a[o])&&!n.isNull&&s.setOffset(-r/2||0,r||0,void 0,void 0,n.plotX,e.xAxis)}getXExtremes(e){var i=arrayMax(e),t=this.getColumn("z")[e.indexOf(i)];return{min:arrayMin(e),max:i+(this.xAxis.categories?0:t)}}}VariwideSeries.compose=Variwide_VariwideComposition.compose,VariwideSeries.defaultOptions=merge(ColumnSeries.defaultOptions,Variwide_VariwideSeriesDefaults),VariwideSeries_addEvent(VariwideSeries,"afterColumnTranslate",function(){const t=this.xAxis,s=this.chart.inverted;let r=-1;for(const a of this.points){++r;const o=a.shapeArgs||{},{x:n=0,width:_=0}=o,{plotX:h=0,tooltipPos:c,z:d=0}=a;let e,i;i=t.variwide?(e=this.postTranslate(r,n,a),this.postTranslate(r,n+_)):(e=h,t.translate(a.x+d,!1,!1,!1,!0)),this.crispOption&&(e=crisp(e,this.borderWidth),i=crisp(i,this.borderWidth)),o.x=e,o.width=Math.max(i-e,1),a.plotX=(e+i)/2,c&&(s?c[1]=t.len-o.x-o.width/2:c[0]=o.x+o.width/2)}this.options.stacking&&this.correctStackLabels()},{order:2}),extend(VariwideSeries.prototype,{irregularWidths:!0,keysAffectYAxis:["y"],pointArrayMap:["y","z"],parallelArrays:["x","y","z"],pointClass:Variwide_VariwidePoint}),external_highcharts_src_js_default_SeriesRegistry_default().registerSeriesType("variwide",VariwideSeries);const Variwide_VariwideSeries=VariwideSeries,G=external_highcharts_src_js_default_default(),variwide_src=(Variwide_VariwideSeries.compose(G.Axis,G.Tick),external_highcharts_src_js_default_default());export{variwide_src as default};