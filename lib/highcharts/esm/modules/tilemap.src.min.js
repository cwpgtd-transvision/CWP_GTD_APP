import*as __WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__ from"../highcharts.src.js";import*as __WEBPACK_EXTERNAL_MODULE__map_src_js_a3a01721__ from"./map.src.js";var __webpack_require__={n:e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},d:(e,t)=>{for(var a in t)__webpack_require__.o(t,a)&&!__webpack_require__.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const external_highcharts_src_js_default_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default;var external_highcharts_src_js_default_default=__webpack_require__.n(external_highcharts_src_js_default_namespaceObject),x=e=>{var t={};return __webpack_require__.d(t,e),t},y=e=>()=>e;const external_map_src_js_namespaceObject=x({}),external_highcharts_src_js_default_SeriesRegistry_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default.SeriesRegistry;var external_highcharts_src_js_default_SeriesRegistry_default=__webpack_require__.n(external_highcharts_src_js_default_SeriesRegistry_namespaceObject);const external_highcharts_src_js_default_Color_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default.Color;var ColorAxisComposition,external_highcharts_src_js_default_Color_default=__webpack_require__.n(external_highcharts_src_js_default_Color_namespaceObject);const color=external_highcharts_src_js_default_Color_default()["parse"],{addEvent,extend,merge,pick,splat}=external_highcharts_src_js_default_default(),Color_ColorAxisComposition=(!function(e){let p;function c(){const e=this["userOptions"];this.colorAxis=[],e.colorAxis&&(e.colorAxis=splat(e.colorAxis),e.colorAxis.map(e=>new p(this,e)))}function _(t){const e=this.chart.colorAxis||[],a=e=>{e=t.allItems.indexOf(e);-1!==e&&(this.destroyItem(t.allItems[e]),t.allItems.splice(e,1))};let s=[],i,r;for(e.forEach(function(e){(i=e.options)?.showInLegend&&(i.dataClasses&&i.visible?s=s.concat(e.getDataClassLegendSymbols()):i.visible&&s.push(e),e.series.forEach(function(e){e.options.showInLegend&&!i.dataClasses||("point"===e.options.legendType?e.points.forEach(function(e){a(e)}):a(e))}))}),r=s.length;r--;)t.allItems.unshift(s[r])}function h(e){e.visible&&e.item.legendColor&&e.item.legendItem.symbol.attr({fill:e.item.legendColor})}function d(t){this.chart.colorAxis?.forEach(e=>{e.update({},t.redraw)})}function m(){(this.chart.colorAxis?.length||this.colorAttribs)&&this.translateColors()}function u(){const e=this.axisTypes;e?-1===e.indexOf("colorAxis")&&e.push("colorAxis"):this.axisTypes=["colorAxis"]}function x(e){const t=this,a=e?"show":"hide";t.visible=t.options.visible=Boolean(e),["graphic","dataLabel"].forEach(function(e){t[e]&&t[e][a]()}),this.series.buildKDTree()}function g(){const a=this,e=this.getPointsCollection(),s=this.options.nullColor,i=this.colorAxis,r=this.colorKey;e.forEach(e=>{var t=e.getNestedProperty(r),t=e.options.color||(e.isNull||null===e.value?s:i&&void 0!==t?i.toColor(t,e):e.color||a.color);t&&e.color!==t&&(e.color=t,"point"===a.options.legendType&&e.legendItem&&e.legendItem.label&&a.chart.legend.colorizeItem(e,e.visible))})}function f(){this.elem.attr("fill",color(this.start).tweenTo(color(this.end),this.pos),void 0,!0)}function S(){this.elem.attr("stroke",color(this.start).tweenTo(color(this.end),this.pos),void 0,!0)}e.compose=function(e,t,a,s,i){const r=t.prototype,o=a.prototype,l=i.prototype;if(!r.collectionsWithUpdate.includes("colorAxis")){p=e,r.collectionsWithUpdate.push("colorAxis"),r.collectionsWithInit.colorAxis=[r.addColorAxis],addEvent(t,"afterCreateAxes",c);{a=t;const n=a.prototype.createAxis;a.prototype.createAxis=function(e,t){var a=this;if("colorAxis"!==e)return n.apply(a,arguments);var s=new p(a,merge(t.axis,{index:a[e].length,isX:!1}));return a.isDirtyLegend=!0,a.axes.forEach(e=>{e.series=[]}),a.series.forEach(e=>{e.bindAxes(),e.isDirtyData=!0}),pick(t.redraw,!0)&&a.redraw(t.animation),s}}o.fillSetter=f,o.strokeSetter=S,addEvent(s,"afterGetAllItems",_),addEvent(s,"afterColorizeItem",h),addEvent(s,"afterUpdate",d),extend(l,{optionalAxis:"colorAxis",translateColors:g}),extend(l.pointClass.prototype,{setVisible:x}),addEvent(i,"afterTranslate",m,{order:1}),addEvent(i,"bindAxes",u)}},e.pointSetVisible=x}(ColorAxisComposition=ColorAxisComposition||{}),ColorAxisComposition),{series:{prototype:{pointClass:Point}},seriesTypes:{heatmap:{prototype:{pointClass:HeatmapPoint}}}}=external_highcharts_src_js_default_SeriesRegistry_default(),TilemapPoint_extend=external_highcharts_src_js_default_default()["extend"];class TilemapPoint extends HeatmapPoint{haloPath(){return this.series.tileShape.haloPath.apply(this,arguments)}}TilemapPoint_extend(TilemapPoint.prototype,{setState:Point.prototype.setState,setVisible:Color_ColorAxisComposition.pointSetVisible});const Tilemap_TilemapPoint=TilemapPoint,TilemapSeriesDefaults={marker:null,states:{hover:{halo:{enabled:!0,size:2,opacity:.5,attributes:{zIndex:3}}}},pointPadding:2,tileShape:"hexagon"},Tilemap_TilemapSeriesDefaults=TilemapSeriesDefaults,noop=external_highcharts_src_js_default_default()["noop"],{heatmap:HeatmapSeries,scatter:ScatterSeries}=external_highcharts_src_js_default_SeriesRegistry_default().seriesTypes,{clamp,pick:TilemapShapes_pick}=external_highcharts_src_js_default_default();function tilePaddingFromTileSize(e,t,a){e=e.options;return{xPad:(e.colsize||1)/-t,yPad:(e.rowsize||1)/-a}}const TilemapShapes={hexagon:{alignDataLabel:ScatterSeries.prototype.alignDataLabel,getSeriesPadding:function(e){return tilePaddingFromTileSize(e,3,2)},haloPath:function(e){if(!e)return[];var t=this.tileEdges;return[["M",t.x2-e,t.y1+e],["L",t.x3+e,t.y1+e],["L",t.x4+1.5*e,t.y2],["L",t.x3+e,t.y3-e],["L",t.x2-e,t.y3-e],["L",t.x1-1.5*e,t.y2],["Z"]]},translate:function(){const e=this,t=e.options,l=e.xAxis,n=e.yAxis,p=t.pointPadding||0,c=(t.colsize||1)/3,_=(t.rowsize||1)/2;let h;e.generatePoints();for(const x of e.points){let e=clamp(Math.floor(l.len-l.translate(x.x-2*c,0,1,0,1)),-l.len,2*l.len),t=clamp(Math.floor(l.len-l.translate(x.x-c,0,1,0,1)),-l.len,2*l.len),a=clamp(Math.floor(l.len-l.translate(x.x+c,0,1,0,1)),-l.len,2*l.len),s=clamp(Math.floor(l.len-l.translate(x.x+2*c,0,1,0,1)),-l.len,2*l.len),i=clamp(Math.floor(n.translate(x.y-_,0,1,0,1)),-n.len,2*n.len),r=clamp(Math.floor(n.translate(x.y,0,1,0,1)),-n.len,2*n.len),o=clamp(Math.floor(n.translate(x.y+_,0,1,0,1)),-n.len,2*n.len);var d=x.pointPadding??p,m=d*Math.abs(t-e)/Math.abs(o-r),m=l.reversed?-m:m,u=l.reversed?-d:d,d=n.reversed?-d:d;x.x%2&&(h=h||Math.round(Math.abs(o-i)/2)*(n.reversed?-1:1),i+=h,r+=h,o+=h),x.plotX=x.clientX=(t+a)/2,x.plotY=r,e+=m+u,t+=u,a-=u,s-=m+u,i-=d,o+=d,x.tileEdges={x1:e,x2:t,x3:a,x4:s,y1:i,y2:r,y3:o},x.shapeType="path",x.shapeArgs={d:[["M",t,i],["L",a,i],["L",s,r],["L",a,o],["L",t,o],["L",e,r],["Z"]]}}e.translateColors()}},diamond:{alignDataLabel:ScatterSeries.prototype.alignDataLabel,getSeriesPadding:function(e){return tilePaddingFromTileSize(e,2,2)},haloPath:function(e){if(!e)return[];var t=this.tileEdges;return[["M",t.x2,t.y1+e],["L",t.x3+e,t.y2],["L",t.x2,t.y3-e],["L",t.x1-e,t.y2],["Z"]]},translate:function(){const e=this,t=e.options,r=e.xAxis,o=e.yAxis,l=t.pointPadding||0,n=t.colsize||1,p=(t.rowsize||1)/2;var c;e.generatePoints();for(const m of e.points){let e=clamp(Math.round(r.len-r.translate(m.x-n,0,1,0,0)),-r.len,2*r.len),t=clamp(Math.round(r.len-r.translate(m.x+n,0,1,0,0)),-r.len,2*r.len),a=clamp(Math.round(o.translate(m.y-p,0,1,0,0)),-o.len,2*o.len),s=clamp(Math.round(o.translate(m.y,0,1,0,0)),-o.len,2*o.len),i=clamp(Math.round(o.translate(m.y+p,0,1,0,0)),-o.len,2*o.len);var _=clamp(Math.round(r.len-r.translate(m.x,0,1,0,0)),-r.len,2*r.len),h=TilemapShapes_pick(m.pointPadding,l),d=h*Math.abs(_-e)/Math.abs(i-s),d=r.reversed?-d:d,h=o.reversed?-h:h;m.x%2&&(c=Math.abs(i-a)/2*(o.reversed?-1:1),a+=c,s+=c,i+=c),m.plotX=m.clientX=_,m.plotY=s,e+=d,t-=d,a-=h,i+=h,m.tileEdges={x1:e,x2:_,x3:t,y1:a,y2:s,y3:i},m.shapeType="path",m.shapeArgs={d:[["M",_,a],["L",t,s],["L",_,i],["L",e,s],["Z"]]}}e.translateColors()}},circle:{alignDataLabel:ScatterSeries.prototype.alignDataLabel,getSeriesPadding:function(e){return tilePaddingFromTileSize(e,2,2)},haloPath:function(e){return ScatterSeries.prototype.pointClass.prototype.haloPath.call(this,e+(e&&this.radius))},translate:function(){const e=this,t=e.options,s=e.xAxis,i=e.yAxis,r=t.pointPadding||0,o=(t.rowsize||1)/2,l=t.colsize||1;let n,p,c,_,h=!1;e.generatePoints();for(const m of e.points){var d=clamp(Math.round(s.len-s.translate(m.x,0,1,0,0)),-s.len,2*s.len);let e=r,t=!1,a=clamp(Math.round(i.translate(m.y,0,1,0,0)),-i.len,2*i.len);void 0!==m.pointPadding&&(e=m.pointPadding,t=!0,h=!0),_&&!h||(n=Math.abs(clamp(Math.floor(s.len-s.translate(m.x+l,0,1,0,0)),-s.len,2*s.len)-d),p=Math.abs(clamp(Math.floor(i.translate(m.y+o,0,1,0,0)),-i.len,2*i.len)-a),c=Math.floor(Math.sqrt(n*n+p*p)/2),_=Math.min(n,c,p)-e,h&&!t&&(h=!1)),m.x%2&&(a+=p*(i.reversed?-1:1)),m.plotX=m.clientX=d,m.plotY=a,m.radius=_,m.shapeType="circle",m.shapeArgs={x:d,y:a,r:_}}e.translateColors()}},square:{alignDataLabel:HeatmapSeries.prototype.alignDataLabel,translate:HeatmapSeries.prototype.translate,getSeriesPadding:noop,haloPath:HeatmapSeries.prototype.pointClass.prototype.haloPath}},Tilemap_TilemapShapes=TilemapShapes,{composed,noop:TilemapSeries_noop}=external_highcharts_src_js_default_default(),{column:ColumnSeries,heatmap:TilemapSeries_HeatmapSeries,scatter:TilemapSeries_ScatterSeries}=external_highcharts_src_js_default_SeriesRegistry_default().seriesTypes,{addEvent:TilemapSeries_addEvent,extend:TilemapSeries_extend,merge:TilemapSeries_merge,pushUnique}=external_highcharts_src_js_default_default();function onAxisAfterSetAxisTranslation(){if(!this.recomputingForTilemap&&"colorAxis"!==this.coll){const t=this,e=t.series.map(function(e){return e.getSeriesPixelPadding&&e.getSeriesPixelPadding(t)}).reduce(function(e,t){return(e&&e.padding)>(t&&t.padding)?e:t},void 0)||{padding:0,axisLengthFactor:1},a=Math.round(e.padding*e.axisLengthFactor);e.padding&&(t.len-=a,t.recomputingForTilemap=!0,t.setAxisTranslation(),delete t.recomputingForTilemap,t.minPixelPadding+=e.padding,t.len+=a)}}class TilemapSeries extends TilemapSeries_HeatmapSeries{static compose(e){pushUnique(composed,"TilemapSeries")&&TilemapSeries_addEvent(e,"afterSetAxisTranslation",onAxisAfterSetAxisTranslation)}alignDataLabel(){return this.tileShape.alignDataLabel.apply(this,arguments)}drawPoints(){ColumnSeries.prototype.drawPoints.call(this);for(const e of this.points)e.graphic&&e.graphic[this.chart.styledMode?"css":"animate"](this.colorAttribs(e))}getSeriesPixelPadding(e){var t=e.isXAxis,a=this.tileShape.getSeriesPadding(this);if(!a)return{padding:0,axisLengthFactor:1};var s=Math.round(e.translate(t?2*a.xPad:a.yPad,0,1,0,1)),a=Math.round(e.translate(t?a.xPad:0,0,1,0,1));return{padding:(e.single?Math.abs(s-a)/2:Math.abs(s-a))||0,axisLengthFactor:t?2:1.1}}setOptions(){var e=super.setOptions.apply(this,arguments);return this.tileShape=Tilemap_TilemapShapes[e.tileShape],e}translate(){return this.tileShape.translate.apply(this,arguments)}}TilemapSeries.defaultOptions=TilemapSeries_merge(TilemapSeries_HeatmapSeries.defaultOptions,Tilemap_TilemapSeriesDefaults),TilemapSeries_extend(TilemapSeries.prototype,{getSymbol:TilemapSeries_noop,markerAttribs:TilemapSeries_ScatterSeries.prototype.markerAttribs,pointAttribs:ColumnSeries.prototype.pointAttribs,pointClass:Tilemap_TilemapPoint}),external_highcharts_src_js_default_SeriesRegistry_default().registerSeriesType("tilemap",TilemapSeries);const Tilemap_TilemapSeries=TilemapSeries,G=external_highcharts_src_js_default_default(),tilemap_src=(Tilemap_TilemapSeries.compose(G.Axis),external_highcharts_src_js_default_default());export{tilemap_src as default};