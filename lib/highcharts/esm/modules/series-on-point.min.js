import*as t from"../highcharts.js";var e,s,o,i={n:t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},d:(t,e)=>{for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};let r=t.default;var n=i.n(r);(e=s=s||{}).setLength=function(t,e,s){return Array.isArray(t)?(t.length=e,t):t[s?"subarray":"slice"](0,e)},e.splice=function(t,e,s,o,i=[]){if(Array.isArray(t))return Array.isArray(i)||(i=Array.from(i)),{removed:t.splice(e,s,...i),array:t};let r=Object.getPrototypeOf(t).constructor,n=t[o?"subarray":"slice"](e,e+s),a=new r(t.length-s+i.length);return a.set(t.subarray(0,e),0),a.set(i,e),a.set(t.subarray(e+s),e+i.length),{removed:n,array:a}};let{setLength:a,splice:h}=s,{fireEvent:l,objectEach:u,uniqueKey:c}=n(),p=class{constructor(t={}){this.autoId=!t.id,this.columns={},this.id=t.id||c(),(this.modified=this).rowCount=0,this.versionTag=c();let s=0;u(t.columns||{},(t,e)=>{this.columns[e]=t.slice(),s=Math.max(s,t.length)}),this.applyRowCount(s)}applyRowCount(s){this.rowCount=s,u(this.columns,(t,e)=>{t.length!==s&&(this.columns[e]=a(t,s))})}deleteRows(o,i=1){if(0<i&&o<this.rowCount){let s=0;u(this.columns,(t,e)=>{this.columns[e]=h(t,o,i).array,s=t.length}),this.rowCount=s}l(this,"afterDeleteRows",{rowIndex:o,rowCount:i}),this.versionTag=c()}getColumn(t,e){return this.columns[t]}getColumns(t,e){return(t||Object.keys(this.columns)).reduce((t,e)=>(t[e]=this.columns[e],t),{})}getRow(e,t){return(t||Object.keys(this.columns)).map(t=>this.columns[t]?.[e])}setColumn(t,e=[],s=0,o){this.setColumns({[t]:e},s,o)}setColumns(t,e,s){let o=this.rowCount;u(t,(t,e)=>{this.columns[e]=t.slice(),o=t.length}),this.applyRowCount(o),s?.silent||(l(this,"afterSetColumns"),this.versionTag=c())}setRow(t,o=this.rowCount,i,r){let n=this["columns"],a=i?this.rowCount+1:o+1;u(t,(t,e)=>{let s=n[e]||!1!==r?.addColumns&&Array(a);s&&(i?s=h(s,o,0,!0,[t]).array:s[o]=t,n[e]=s)}),a>this.rowCount&&this.applyRowCount(a),r?.silent||(l(this,"afterSetRows"),this.versionTag=c())}},d=t.default.Point;var f=i.n(d);i.d({},{});let y=t.default.SeriesRegistry;var m=i.n(y);let g=t.default.SVGRenderer;var C=i.n(g);let w=n()["composed"],b=m().seriesTypes["bubble"],{addEvent:P,defined:R,find:v,isNumber:x,pushUnique:A}=n();var O=o=o||{};O.compose=function(t,e){var s,o,i,r,n,a;return A(w,"SeriesOnPoint")&&({chartGetZData:s,seriesAfterInit:o,seriesAfterRender:i,seriesGetCenter:r,seriesShowOrHide:n,seriesTranslate:a}=S.prototype,t.types.pie.prototype.onPointSupported=!0,P(t,"afterInit",o),P(t,"afterRender",i),P(t,"afterGetCenter",r),P(t,"hide",n),P(t,"show",n),P(t,"translate",a),P(e,"beforeRender",s),P(e,"beforeRedraw",s)),t};class S{constructor(t){this.getColumn=b.prototype.getColumn,this.getRadii=b.prototype.getRadii,this.getRadius=b.prototype.getRadius,this.getPxExtremes=b.prototype.getPxExtremes,this.getZExtremes=b.prototype.getZExtremes,this.chart=t.chart,this.series=t,this.options=t.options.onPoint}drawConnector(){this.connector||(this.connector=this.series.chart.renderer.path().addClass("highcharts-connector-seriesonpoint").attr({zIndex:-1}).add(this.series.markerGroup));var t=this.getConnectorAttributes();t&&this.connector.animate(t)}getConnectorAttributes(){let h=this.series.chart,t=this.options;if(t){var l=t.connectorOptions||{},u=t.position,c=h.get(t.id);if(c instanceof f()&&u&&R(c.plotX)&&R(c.plotY)){let t=R(u.x)?u.x:c.plotX,e=R(u.y)?u.y:c.plotY,s=t+(u.offsetX||0),o=e+(u.offsetY||0),i=l.width||1,r=l.stroke||this.series.color,n=l.dashstyle,a={d:C().prototype.crispLine([["M",t,e],["L",s,o]],i),"stroke-width":i};return h.styledMode||(a.stroke=r,a.dashstyle=n),a}}}seriesAfterInit(){this.onPointSupported&&this.options.onPoint&&(this.bubblePadding=!0,this.useMapGeometry=!0,this.onPoint=new S(this))}seriesAfterRender(){delete this.chart.bubbleZExtremes,this.onPoint&&this.onPoint.drawConnector()}seriesGetCenter(t){let e=this.options.onPoint,s=t.positions;e&&((o=this.chart.get(e.id))instanceof f()&&R(o.plotX)&&R(o.plotY)&&(s[0]=o.plotX,s[1]=o.plotY),(o=e.position)&&(R(o.x)&&(s[0]=o.x),R(o.y)&&(s[1]=o.y),o.offsetX&&(s[0]+=o.offsetX),o.offsetY&&(s[1]+=o.offsetY)));var o=this.radii&&this.radii[this.index];x(o)&&(s[2]=2*o),t.positions=s}seriesShowOrHide(){let s=this.chart.series;this.points?.forEach(e=>{let t=v(s,t=>{t=((t.onPoint||{}).options||{}).id;return!!t&&t===e.id});t&&t.setVisible(!t.visible,!1)})}seriesTranslate(){this.onPoint&&(this.onPoint.getRadii(),this.radii=this.onPoint.radii)}chartGetZData(){let e=[],s=(this.series.forEach(t=>{t=t.options.onPoint;e.push(t?.z??null)}),new p({columns:{z:e}}));this.series.forEach(t=>{t.onPoint&&(t.onPoint.dataTable=t.dataTable=s)})}}O.Additions=S;let E=o,T=n(),X=(E.compose(T.Series,T.Chart),n());export{X as default};