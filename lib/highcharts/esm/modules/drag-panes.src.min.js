import*as __WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__ from"../highcharts.src.js";import*as __WEBPACK_EXTERNAL_MODULE__stock_src_js_3de69a45__ from"./stock.src.js";var __webpack_require__={n:e=>{var s=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(s,{a:s}),s},d:(e,s)=>{for(var t in s)__webpack_require__.o(s,t)&&!__webpack_require__.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:s[t]})},o:(e,s)=>Object.prototype.hasOwnProperty.call(e,s)};const external_highcharts_src_js_default_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default;var external_highcharts_src_js_default_default=__webpack_require__.n(external_highcharts_src_js_default_namespaceObject);const AxisResizerDefaults={minLength:"10%",maxLength:"100%",resize:{controlledAxis:{next:[],prev:[]},enabled:!1,cursor:"ns-resize",lineColor:"#cccccc",lineDashStyle:"Solid",lineWidth:4,x:0,y:0}},DragPanes_AxisResizerDefaults=AxisResizerDefaults,{addEvent,clamp,isNumber,relativeLength}=external_highcharts_src_js_default_default();class AxisResizer{constructor(e){this.init(e)}init(e,s){this.axis=e,this.options=e.options.resize||{},this.render(),s||this.addMouseEvents()}render(){const e=this,s=e.axis,t=s.chart,r=e.options,a=r.x||0,i=r.y,o=clamp(s.top+s.height+i,t.plotTop,t.plotTop+t.plotHeight);let n={};t.styledMode||(n={cursor:r.cursor,stroke:r.lineColor,"stroke-width":r.lineWidth,dashstyle:r.lineDashStyle}),e.lastPos=o-i,e.controlLine||(e.controlLine=t.renderer.path().addClass("highcharts-axis-resizer")),e.controlLine.add(s.axisGroup);var c=t.styledMode?e.controlLine.strokeWidth():r.lineWidth;n.d=t.renderer.crispLine([["M",s.left+a,o],["L",s.left+s.width+a,o]],c),e.controlLine.attr(n)}addMouseEvents(){const s=this,e=s.controlLine.element,t=s.axis.chart.container,r=[];var a,i,o;s.mouseMoveHandler=a=e=>s.onMouseMove(e),s.mouseUpHandler=i=e=>s.onMouseUp(e),s.mouseDownHandler=o=()=>s.onMouseDown(),r.push(addEvent(t,"mousemove",a),addEvent(t.ownerDocument,"mouseup",i),addEvent(e,"mousedown",o),addEvent(t,"touchmove",a),addEvent(t.ownerDocument,"touchend",i),addEvent(e,"touchstart",o)),s.eventsToUnbind=r}onMouseMove(e){if(!e.touches||0!==e.touches[0].pageX){const s=this.axis.chart.pointer;this.grabbed&&s&&(this.hasDragged=!0,this.updateAxes(s.normalize(e).chartY-(this.options.y||0)))}}onMouseUp(e){const s=this.axis.chart.pointer;this.hasDragged&&s&&this.updateAxes(s.normalize(e).chartY-(this.options.y||0)),this.grabbed=this.hasDragged=this.axis.chart.activeResizer=void 0}onMouseDown(){this.axis.chart.pointer?.reset(!1,0),this.grabbed=this.axis.chart.activeResizer=!0}updateAxes(r){const a=this,i=a.axis.chart,e=a.options.controlledAxis,o=0===e.next.length?[i.yAxis.indexOf(a.axis)+1]:e.next,s=[a.axis].concat(e.prev),n=[],c=i.plotTop,h=i.plotHeight,_=c+h,d=e=>100*e/h+"%",l=(e,s,t)=>Math.round(clamp(e,s,t));let p=!1,u=(r=clamp(r,c,_))-a.lastPos;if(!(u*u<1)){let t=!0;for(const f of[s,o])for(const v of f){const m=isNumber(v)?i.yAxis[v]:t?v:i.get(v),A=m&&m.options,D={};let e,s;var x,g;!A||A.isInternal?t=!1:(s=m.top,x=Math.round(relativeLength(A.minLength||NaN,h)),g=Math.round(relativeLength(A.maxLength||NaN,h)),t||f!==o?((e=l(r-s,x,g))===g&&(p=!0),r=s+e,n.push({axis:m,options:{height:d(e)}})):(u=r-a.lastPos,e=l(m.len-u,x,g),(s=m.top+u)+e>_&&(r+=g=_-e-s,s+=g),(e=s<c&&(s=c)+e>_?h:e)===x&&(p=!0),n.push({axis:m,options:{top:d(s-c),height:d(e)}})),t=!1,D.height=e)}if(!p){for(const P of n)P.axis.update(P.options,!1);i.redraw(!1)}}}destroy(){const e=this.axis;delete e.resizer,this.eventsToUnbind&&this.eventsToUnbind.forEach(e=>e()),this.controlLine.destroy();for(const s of Object.keys(this))this[s]=null}}AxisResizer.resizerOptions=DragPanes_AxisResizerDefaults;const DragPanes_AxisResizer=AxisResizer,defaultOptions=external_highcharts_src_js_default_default()["defaultOptions"],{addEvent:DragPanes_addEvent,merge,wrap}=external_highcharts_src_js_default_default();function compose(e,s){e.keepProps.includes("resizer")||(merge(!0,defaultOptions.yAxis,DragPanes_AxisResizer.resizerOptions),e.keepProps.push("resizer"),DragPanes_addEvent(e,"afterRender",onAxisAfterRender),DragPanes_addEvent(e,"destroy",onAxisDestroy),wrap(s.prototype,"runPointActions",wrapPointerRunPointActions),wrap(s.prototype,"drag",wrapPointerDrag))}function onAxisAfterRender(){const e=this,s=e.resizer,t=e.options.resize;var r;t&&(r=!1!==t.enabled,s?r?s.init(e,!0):s.destroy():r&&(e.resizer=new DragPanes_AxisResizer(e)))}function onAxisDestroy(e){!e.keepEvents&&this.resizer&&this.resizer.destroy()}function wrapPointerDrag(e){this.chart.activeResizer||e.apply(this,[].slice.call(arguments,1))}function wrapPointerRunPointActions(e){this.chart.activeResizer||e.apply(this,[].slice.call(arguments,1))}const DragPanes={compose:compose},DragPanes_DragPanes=DragPanes;var x=e=>{var s={};return __webpack_require__.d(s,e),s},y=e=>()=>e;const external_stock_src_js_namespaceObject=x({}),G=external_highcharts_src_js_default_default(),drag_panes_src=(G.AxisResizer=DragPanes_AxisResizer,DragPanes_DragPanes.compose(G.Axis,G.Pointer),external_highcharts_src_js_default_default());export{drag_panes_src as default};