import*as t from"../highcharts.js";import"./treemap.js";var e={n:t=>{var i=t&&t.__esModule?()=>t.default:()=>t;return e.d(i,{a:i}),i},d:(t,i)=>{for(var s in i)e.o(i,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:i[s]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};let i=t.default;var s=e.n(i);function o(e,i){let s=[];for(let t=0;t<e.length;t++){var o,r,l,a,n,h,d=e[t][1],p=e[t][2];"number"==typeof d&&"number"==typeof p&&(0===t?s.push(["M",d,p]):t!==e.length-1&&i?(r=e[t-1],a=e[t+1],r&&a&&(o=r[1],r=r[2],l=a[1],a=a[2],"number"==typeof o&&"number"==typeof l&&"number"==typeof r&&"number"==typeof a&&o!==l&&r!==a&&(n=o<l?1:-1,h=r<a?1:-1,s.push(["L",d-n*Math.min(Math.abs(d-o),i),p-h*Math.min(Math.abs(p-r),i)],["C",d,p,d,p,d+n*Math.min(Math.abs(d-l),i),p+h*Math.min(Math.abs(p-a),i)])))):s.push(["L",d,p]))}return s}e.d({},{});let l=t.default.SeriesRegistry;var r=e.n(l);let n=t.default.SVGRenderer;var a=e.n(n);let{treemap:{prototype:{NodeClass:h}}}=r()["seriesTypes"],d=class extends h{constructor(){super(...arguments),this.mod=0,this.shift=0,this.change=0,this.children=[],this.preX=0,this.hidden=!1,this.wasVisited=!1,this.collapsed=!1}nextLeft(){return this.getLeftMostChild()||this.thread}nextRight(){return this.getRightMostChild()||this.thread}getAncestor(t,e){return t.ancestor.children[0]===this.children[0]?t.ancestor:e}getLeftMostSibling(){var t=this.getParent();if(t)for(var e of t.children)if(e&&e.point.visible)return e}hasChildren(){var e=this.children;for(let t=0;t<e.length;t++)if(e[t].point.visible)return!0;return!1}getLeftSibling(){var t=this.getParent();if(t){var e=t.children;for(let t=this.relativeXPosition-1;0<=t;t--)if(e[t]&&e[t].point.visible)return e[t]}}getLeftMostChild(){var e=this.children;for(let t=0;t<e.length;t++)if(e[t].point.visible)return e[t]}getRightMostChild(){var e=this.children;for(let t=e.length-1;0<=t;t--)if(e[t].point.visible)return e[t]}getParent(){return this.parentNode}getFirstChild(){var e=this.children;for(let t=0;t<e.length;t++)if(e[t].point.visible)return e[t]}},p=t.default.Point;var c=e.n(p);let{treemap:{prototype:{pointClass:f}}}=r()["seriesTypes"],{addEvent:u,fireEvent:g,merge:v}=s();class b extends f{constructor(){super(...arguments),this.dataLabelOnHidden=!0,this.isLink=!1,this.setState=c().prototype.setState}draw(){super.draw.apply(this,arguments);let t=this.graphic;t&&t.animate({visibility:this.visible?"inherit":"hidden"}),this.renderCollapseButton()}renderCollapseButton(){let t=this.series,e=this.graphic&&this.graphic.parentGroup,i=t.mapOptionsToLevel[this.node.level||0]||{},s=v(t.options.collapseButton,i.collapseButton,this.options.collapseButton),{width:o,height:r,shape:l,style:a}=s,n=this.series.chart,h=!this.visible||!this.collapsed&&s.onlyOnHover&&"hover"!==this.state?0:1;var d,p,c;this.shapeArgs&&(this.collapseButtonOptions=s,this.collapseButton?this.node.children.length&&s.enabled?({x:d,y:p}=this.getCollapseBtnPosition(s),this.collapseButton.attr({text:this.collapsed?"+":"-",rotation:90*!!n.inverted,rotationOriginX:o/2,rotationOriginY:r/2,visibility:this.visible?"inherit":"hidden"}).animate({x:d,y:p,opacity:h})):(this.collapseButton.destroy(),delete this.collapseButton):this.node.children.length&&s.enabled&&({x:d,y:p}=this.getCollapseBtnPosition(s),c=s.fillColor||this.color||"#cccccc",this.collapseButton=n.renderer.label(this.collapsed?"+":"-",d,p,l).attr({height:r-4,width:o-4,padding:2,fill:c,rotation:90*!!n.inverted,rotationOriginX:o/2,rotationOriginY:r/2,stroke:s.lineColor||"#ffffff","stroke-width":s.lineWidth,"text-align":"center",align:"center",zIndex:1,opacity:h,visibility:this.visible?"inherit":"hidden"}).addClass("highcharts-tracker").addClass("highcharts-collapse-button").removeClass("highcharts-no-tooltip").css(v({color:"string"==typeof c?n.renderer.getContrast(c):"#333333"},a)).add(e),this.collapseButton.element.point=this))}toggleCollapse(t){let e=this.series;this.update({collapsed:t??!this.collapsed},!1,void 0,!1),g(e,"toggleCollapse"),e.redraw()}destroy(){this.collapseButton&&(this.collapseButton.destroy(),delete this.collapseButton,this.collapseButton=void 0),this.linkToParent&&(this.linkToParent.destroy(),delete this.linkToParent),super.destroy.apply(this,arguments)}getCollapseBtnPosition(t){var e=this.series.chart.inverted,i=t.width,s=t.height,{x:o=0,y:r=0,width:l=0,height:a=0}=this.shapeArgs||{};return{x:o+t.x+(e?-.3*s:l+-.3*i),y:r+a/2-s/2+t.y}}}u(b,"mouseOut",function(){let t=this.collapseButton,e=this.collapseButtonOptions;t&&e?.onlyOnHover&&!this.collapsed&&t.animate({opacity:0})}),u(b,"mouseOver",function(){this.collapseButton&&this.visible&&this.collapseButton.animate({opacity:1},this.series.options.states?.hover?.animation)}),u(b,"click",function(){this.toggleCollapse()});let m=t.default.Color;var y=e.n(m);let{extend:x,isArray:L,isNumber:k,isObject:P,merge:C,pick:T,relativeLength:M}=s(),X={getColor:function(t,e){let i,s,o,r,l,a,n=e.index,h=e.mapOptionsToLevel,d=e.parentColor,p=e.parentColorIndex,c=e.series,u=e.colors,f=e.siblings,v=c.points,g=c.chart.options.chart;return t&&(i=v[t.i],s=h[t.level]||{},i&&s.colorByPoint&&(r=i.index%(u?u.length:g.colorCount),o=u&&u[r]),c.chart.styledMode||(l=T(i&&i.options.color,s&&s.color,o,d&&(t=d,(b=s&&s.colorVariation)&&"brightness"===b.key&&n&&f?y().parse(t).brighten(b.to*(n/f)).get():t),c.color)),a=T(i&&i.options.colorIndex,s&&s.colorIndex,r,p,e.colorIndex)),{color:l,colorIndex:a};var b},getLevelOptions:function(t){let r,e,i,l,s,o,a={};if(P(t))for(l=k(t.from)?t.from:1,o=t.levels,e={},r=P(t.defaults)?t.defaults:{},L(o)&&(e=o.reduce((t,e)=>{let i,s,o;return P(e)&&k(e.level)&&(s=T((o=C({},e)).levelIsConstant,r.levelIsConstant),delete o.levelIsConstant,delete o.level,P(t[i=e.level+(s?0:l-1)])?C(!0,t[i],o):t[i]=o),t},{})),s=k(t.to)?t.to:1,i=0;i<=s;i++)a[i]=C({},r,P(e[i])?e[i]:{});return a},getNodeWidth:function(t,e){var{chart:t,options:i}=t,{nodeDistance:i=0,nodeWidth:s=0}=i,{plotSizeX:t=1}=t;if("auto"!==s)return M(s,t);if("string"==typeof i&&/%$/.test(i))return t/(e+parseFloat(i)/100*(e-1));s=Number(i);return(t+s)/(e||1)-s},setTreeValues:function s(o,r){let t=r.before,e=r.idRoot,i=r.mapIdToNode[e],l=!1!==r.levelIsConstant,a=r.points[o.i],n=a&&a.options||{},h=[],d=0;o.levelDynamic=o.level-(l?0:i.level),o.name=T(a&&a.name,""),o.visible=e===o.id||!0===r.visible,(o="function"==typeof t?t(o,r):o).children.forEach((t,e)=>{var i=x({},r);x(i,{index:e,siblings:o.children.length,visible:o.visible}),t=s(t,i),h.push(t),t.visible&&(d+=t.val)});var p=T(n.value,d);return o.visible=0<=p&&(0<d||o.visible),o.children=h,o.childrenTotal=d,o.isLeaf=o.visible&&!d,o.val=p,o},updateRootId:function(t){let e,i;return P(t)&&(i=P(t.options)?t.options:{},e=T(t.rootNode,i.rootId,""),P(t.userOptions)&&(t.userOptions.rootId=e),t.rootNode=e),e}},{pick:N,extend:O}=s(),{column:{prototype:{pointClass:B}}}=r()["seriesTypes"],S=class extends B{constructor(t,e,i,s){super(t,e,i),this.dataLabelOnNull=!0,this.formatPrefix="link",this.isLink=!0,this.node={},this.formatPrefix="link",this.dataLabelOnNull=!0,s&&(this.fromNode=s.node.parentNode.point,this.visible=s.visible,this.toNode=s,this.id=this.toNode.id+"-"+this.fromNode.id)}update(t,e,i,s){var o={id:this.id,formatPrefix:this.formatPrefix};c().prototype.update.call(this,t,!this.isLink&&e,i,s),this.visible=this.toNode.visible,O(this,o),N(e,!0)&&this.series.chart.redraw(i)}};class w{static createDummyNode(t,e,i){let s=new d;return s.id=t.id+"-"+i,s.ancestor=t,s.children.push(e),s.parent=t.id,s.parentNode=t,s.point=e.point,s.level=e.level-i,s.relativeXPosition=e.relativeXPosition,s.visible=e.visible,t.children[e.relativeXPosition]=s,e.oldParentNode=t,e.relativeXPosition=0,e.parentNode=s,e.parent=s.id,s}calculatePositions(t){var e=t.nodeList,t=(this.resetValues(e),t.tree);t&&(this.calculateRelativeX(t,0),this.beforeLayout(e),this.firstWalk(t),this.secondWalk(t,-t.preX),this.afterLayout(e))}beforeLayout(t){for(var e of t)for(var i of e.children)if(i&&1<i.level-e.level){let t=i.level-e.level-1;for(;0<t;)i=w.createDummyNode(e,i,t),t--}}resetValues(t){for(var e of t)e.mod=0,e.ancestor=e,e.shift=0,e.thread=void 0,e.change=0,e.preX=0}calculateRelativeX(t,e){var i=t.children;for(let t=0,e=i.length;t<e;++t)this.calculateRelativeX(i[t],t);t.relativeXPosition=e}firstWalk(e){let i;if(e.hasChildren()){let t=e.getLeftMostChild();for(var s of e.children)this.firstWalk(s),t=this.apportion(s,t);this.executeShifts(e);var o=e.getLeftMostChild(),r=e.getRightMostChild(),o=(o.preX+r.preX)/2;(i=e.getLeftSibling())?(e.preX=i.preX+1,e.mod=e.preX-o):e.preX=o}else(i=e.getLeftSibling())?(e.preX=i.preX+1,e.mod=e.preX):e.preX=0}secondWalk(t,e){for(var i of(t.yPosition=t.preX+e,t.xPosition=t.level,t.children))this.secondWalk(i,e+t.mod)}executeShifts(i){let s=0,o=0;for(let e=i.children.length-1;0<=e;e--){let t=i.children[e];t.preX+=s,t.mod+=s,o+=t.change,s+=t.shift+o}}apportion(n,h){var d=n.getLeftSibling();if(d){let t=n,e=n,i=d,s=t.getLeftMostSibling(),o=t.mod,r=e.mod,l=i.mod,a=s.mod;for(;i&&i.nextRight()&&t&&t.nextLeft();){i=i.nextRight(),s=s.nextLeft(),t=t.nextLeft(),(e=e.nextRight()).ancestor=n;var p=i.preX+l-(t.preX+o)+1;0<p&&(this.moveSubtree(n.getAncestor(i,h),n,p),o+=p,r+=p),l+=i.mod,o+=t.mod,a+=s.mod,r+=e.mod}i&&i.nextRight()&&!e.nextRight()&&(e.thread=i.nextRight(),e.mod+=l-r),t&&t.nextLeft()&&!s.nextLeft()&&(s.thread=t.nextLeft(),s.mod+=o-a),h=n}return h}moveSubtree(t,e,i){var s=e.relativeXPosition-t.relativeXPosition;e.change-=i/s,e.shift+=i,e.preX+=i,e.mod+=i,t.change+=i/s}afterLayout(t){for(var e of t)e.oldParentNode&&(e.relativeXPosition=e.parentNode.relativeXPosition,e.parent=e.oldParentNode.parent,e.parentNode=e.oldParentNode,delete e.oldParentNode.children[e.relativeXPosition],e.oldParentNode.children[e.relativeXPosition]=e,e.oldParentNode=void 0)}}let A=t.default.SVGElement;var R=e.n(A);let W=s()["deg2rad"],{addEvent:I,merge:D,uniqueKey:z,defined:Y,extend:E}=s();function V(o,t){t=D(!0,{enabled:!0,attributes:{dy:-5,startOffset:"50%",textAnchor:"middle"}},t);let r=this.renderer.url,l=this.text||this,e=l.textPath,{attributes:a,enabled:n}=t;return o=o||e&&e.path,e&&e.undo(),o&&n?(t=I(l,"afterModifyTree",i=>{if(o&&n){let t=o.attr("id"),e=(t||o.attr("id",t=z()),{x:0,y:0});Y(a.dx)&&(e.dx=a.dx,delete a.dx),Y(a.dy)&&(e.dy=a.dy,delete a.dy),l.attr(e),this.attr({transform:""}),this.box&&(this.box=this.box.destroy());var s=i.nodes.slice(0);i.nodes.length=0,i.nodes[0]={tagName:"textPath",attributes:E(a,{"text-anchor":a.textAnchor,href:r+"#"+t}),children:s}}}),l.textPath={path:o,undo:t}):(l.attr({dx:0,dy:0}),delete l.textPath),this.added&&(l.textCache="",this.renderer.buildText(l)),this}function F(h){let i=h.bBox,d=this.element?.querySelector("textPath");if(d){let s=[],{b:o,h:t}=this.renderer.fontMetrics(this.element),r=t-o,e=RegExp('(<tspan>|<tspan(?!\\sclass="highcharts-br")[^>]*>|<\\/tspan>)',"g"),l=d.innerHTML.replace(e,"").split(/<tspan class="highcharts-br"[^>]*>/),a=l.length,n=(t,e)=>{var{x:e,y:i}=e,t=(d.getRotationOfChar(t)-90)*W,s=Math.cos(t),t=Math.sin(t);return[[e-r*s,i-r*t],[e+o*s,i+o*t]]};for(let e=0,i=0;i<a;i++){var p=l[i].length;for(let t=0;t<p;t+=5)try{var c=e+t+i,[u,f]=n(c,d.getStartPositionOfChar(c));0===t?(s.push(f),s.push(u)):(0===i&&s.unshift(f),i===a-1&&s.push(u))}catch(h){break}e+=p-1;try{var v=e+i,g=d.getEndPositionOfChar(v),[b,y]=n(v,g);s.unshift(y),s.unshift(b)}catch(h){break}}s.length&&s.push(s[0].slice()),i.polygon=s}return i}function H(t){let e=t.labelOptions,i=t.point,s=e[i.formatPrefix+"TextPath"]||e.textPath;s&&!e.useHTML&&(this.setTextPath(i.getDataLabelPath?.(this)||i.graphic,s),i.dataLabelPath&&!s.enabled&&(i.dataLabelPath=i.dataLabelPath.destroy()))}let $={getLinkPath:{default:function(t){var{x1:t,y1:e,x2:i,y2:s,width:r=0,inverted:l=!1,radius:a,parentVisible:n}=t,h=[["M",t,e],["L",t,e],["C",t,e,t,s,t,s],["L",t,s],["C",t,e,t,s,t,s],["L",t,s]];return n?o([["M",t,e],["L",t+r*(l?-.5:.5),e],["L",t+r*(l?-.5:.5),s],["L",i,s]],a):h},straight:function(t){var{x1:t,y1:e,x2:i,y2:s,width:o=0,inverted:r=!1,parentVisible:l}=t;return l?[["M",t,e],["L",t+o*(r?-1:1),s],["L",i,s]]:[["M",t,e],["L",t,s],["L",t,s]]},curved:function(t){var{x1:t,y1:e,x2:i,y2:s,offset:o=0,width:r=0,inverted:l=!1,parentVisible:a}=t;return a?[["M",t,e],["C",t+o,e,t-o+r*(l?-1:1),s,t+r*(l?-1:1),s],["L",i,s]]:[["M",t,e],["C",t,e,t,s,t,s],["L",i,s]]}}}["getLinkPath"],{series:{prototype:j},seriesTypes:{treemap:G,column:_}}=r(),{symbols:q}=a()["prototype"],{getLevelOptions:U,getNodeWidth:J}=X,{arrayMax:K,crisp:Q,extend:Z,merge:tt,pick:te,relativeLength:ti,splat:ts}=s();!function(t){I(t,"afterGetBBox",F),I(t,"beforeAddingDataLabel",H);let e=t.prototype;e.setTextPath||(e.setTextPath=V)}(R());class to extends G{constructor(){super(...arguments),this.nodeList=[],this.links=[]}init(){super.init.apply(this,arguments),this.layoutAlgorythm=new w;let i=this,t=this.chart.labelCollectors;t.some(t=>"collectorFunc"===t.name)||t.push(function(){let t=[];if(i.options.dataLabels&&!ts(i.options.dataLabels)[0].allowOverlap)for(var e of i.links||[])e.dataLabel&&t.push(e.dataLabel);return t})}getLayoutModifiers(){let t=this.chart,h=this,d=t.plotSizeX,p=t.plotSizeY,c=K(this.points.map(t=>t.node.xPosition)),u=1/0,f=-1/0,v=1/0,g=-1/0,b=0,y=0,m=0,x=0;this.points.forEach(n=>{if(!this.options.fillSpace||n.visible){let t=n.node,e=h.mapOptionsToLevel[n.node.level]||{},i=tt(this.options.marker,e.marker,n.options.marker),s=i.width??J(this,c),o=ti(i.radius||0,Math.min(d,p)),r=i.symbol,l="circle"!==r&&i.height?ti(i.height,p):2*o,a="circle"!==r&&s?ti(s,d):2*o;t.nodeSizeX=a,t.nodeSizeY=l,t.xPosition<=u&&(u=t.xPosition,y=Math.max(a+(i.lineWidth||0),y)),t.xPosition>=f&&(f=t.xPosition,b=Math.max(a+(i.lineWidth||0),b)),t.yPosition<=v&&(v=t.yPosition,x=Math.max(l+(i.lineWidth||0),x)),t.yPosition>=g&&(g=t.yPosition,m=Math.max(l+(i.lineWidth||0),m))}});var e=g===v?1:(p-(x+m)/2)/(g-v),i=g===v?p/2:-e*v+x/2,s=f===u?1:(d-(b+b)/2)/(f-u);return{ax:s,bx:f===u?d/2:-s*u+y/2,ay:e,by:i}}getLinks(){let i=this,s=[];return this.data.forEach(t=>{var e=i.mapOptionsToLevel[t.node.level||0]||{};t.node.parent?(e=tt(e,t.options),!t.linkToParent||t.linkToParent.destroyed?(e=new i.LinkClass(i,e,void 0,t),t.linkToParent=e):(t.collapsed=te(t.collapsed,(this.mapOptionsToLevel[t.node.level]||{}).collapsed),t.linkToParent.visible=t.linkToParent.toNode.visible),t.linkToParent.index=s.push(t.linkToParent)-1):t.linkToParent&&(i.links.splice(t.linkToParent.index),t.linkToParent.destroy(),delete t.linkToParent)}),s}buildTree(t,e,i,s,o){var r=this.points[e];return i=r&&r.level||i,super.buildTree.call(this,t,e,i,s,o)}markerAttribs(){return{}}setCollapsedStatus(t,e){let i=t.point;i&&(i.collapsed=te(i.collapsed,(this.mapOptionsToLevel[t.level]||{}).collapsed),e=!1!==(i.visible=e)&&!i.collapsed),t.children.forEach(t=>{this.setCollapsedStatus(t,e)})}drawTracker(){_.prototype.drawTracker.apply(this,arguments),_.prototype.drawTracker.call(this,this.links)}translate(){let t=this.options,e=X.updateRootId(this),i;j.translate.call(this);var s=this.tree=this.getTree();i=this.nodeMap[e],""===e||i&&i.children.length||(this.setRootNode("",!1),e=this.rootNode,i=this.nodeMap[e]),this.mapOptionsToLevel=U({from:i.level+1,levels:t.levels,to:s.height,defaults:{levelIsConstant:this.options.levelIsConstant,colorByPoint:t.colorByPoint}}),this.setCollapsedStatus(s,!0),this.links=this.getLinks(),this.setTreeValues(s),this.layoutAlgorythm.calculatePositions(this),this.layoutModifier=this.getLayoutModifiers(),this.points.forEach(t=>{this.translateNode(t)}),this.points.forEach(t=>{t.linkToParent&&this.translateLink(t.linkToParent)}),t.colorByPoint||this.setColorRecursive(this.tree)}translateLink(l){var a=l.fromNode,n=l.toNode,h=this.options.link?.lineWidth||0,d=te(this.options.link?.curveFactor,.5),p=te(l.options.link?.type,this.options.link?.type,"default");if(a.shapeArgs&&n.shapeArgs){let t=a.shapeArgs.width||0,e=this.chart.inverted,i=Q((a.shapeArgs.y||0)+(a.shapeArgs.height||0)/2,h),s=Q((n.shapeArgs.y||0)+(n.shapeArgs.height||0)/2,h),o=Q((a.shapeArgs.x||0)+t,h),r=Q(n.shapeArgs.x||0,h);e&&(o-=t,r+=n.shapeArgs.width||0);a=n.node.xPosition-a.node.xPosition,a=(l.shapeType="path",(Math.abs(r-o)+t)/a-t);l.plotX=Q((r+o)/2,h),l.plotY=s,l.shapeArgs={d:$[p]({x1:o,y1:i,x2:r,y2:s,width:a,offset:a*d*(e?-1:1),inverted:e,parentVisible:n.visible,radius:this.options.link?.radius})},l.dlBox={x:(o+r)/2,y:(i+s)/2,height:h,width:0},l.tooltipPos=e?[(this.chart.plotSizeY||0)-l.dlBox.y,(this.chart.plotSizeX||0)-l.dlBox.x]:[l.dlBox.x,l.dlBox.y]}}drawNodeLabels(t){let s,e,i=this.mapOptionsToLevel;for(var o of t){if(e=i[o.node.level],s={style:{}},e&&e.dataLabels&&(s=tt(s,e.dataLabels),this.hasDataLabels=()=>!0),o.shapeArgs&&this.options.dataLabels){let t={},{width:e=0,height:i=0}=o.shapeArgs;this.chart.inverted&&([e,i]=[i,e]),ts(this.options.dataLabels)[0].style?.width||(t.width=e+"px"),ts(this.options.dataLabels)[0].style?.lineClamp||(t.lineClamp=Math.floor(i/16)),Z(s.style,t),o.dataLabel?.css(t)}o.dlOptions=tt(s,o.options.dataLabels)}j.drawDataLabels.call(this,t)}alignDataLabel(t,e){let i=t.visible;t.visible=!0,super.alignDataLabel.apply(this,arguments),e.animate({opacity:+(!1!==i)},void 0,function(){i||e.hide()}),t.visible=i}drawDataLabels(){this.options.dataLabels&&(this.options.dataLabels=ts(this.options.dataLabels),this.drawNodeLabels(this.points),j.drawDataLabels.call(this,this.links))}destroy(){if(this.links){for(var t of this.links)t.destroy();this.links.length=0}return j.destroy.apply(this,arguments)}pointAttribs(t,e){var i=t&&this.mapOptionsToLevel[t.node.level||0]||{},s=t&&t.options,o=i.states&&i.states[e]||{};t&&(t.options.marker=tt(this.options.marker,i.marker,t.options.marker));let r=te(o&&o.link&&o.link.color,s&&s.link&&s.link.color,i&&i.link&&i.link.color,this.options.link&&this.options.link.color),l=te(o&&o.link&&o.link.lineWidth,s&&s.link&&s.link.lineWidth,i&&i.link&&i.link.lineWidth,this.options.link&&this.options.link.lineWidth),a=j.pointAttribs.call(this,t,e);return t&&(t.isLink&&(a.stroke=r,a["stroke-width"]=l,delete a.fill),t.visible||(a.opacity=0)),a}drawPoints(){G.prototype.drawPoints.apply(this,arguments),_.prototype.drawPoints.call(this,this.links)}translateNode(t){let e=this.chart,i=t.node,s=e.plotSizeY,o=e.plotSizeX,{ax:r,bx:l,ay:a,by:n}=this.layoutModifier,h=r*i.xPosition+l,d=a*i.yPosition+n,p=this.mapOptionsToLevel[i.level]||{},c=tt(this.options.marker,p.marker,t.options.marker).symbol,u=i.nodeSizeY,f=i.nodeSizeX,v=this.options.reversed,g=i.x=e.inverted?o-f/2-h:h-f/2,b=i.y=v?d-u/2:s-d-u/2,y=te(t.options.borderRadius,p.borderRadius,this.options.borderRadius),m=q[c||"circle"];var x,P,k,L,C;void 0===m?(t.hasImage=!0,t.shapeType="image",t.imageUrl=c.match(/^url\((.*?)\)$/)[1]):t.shapeType="path",!t.visible&&t.linkToParent?(x=t.linkToParent.fromNode)&&({x:P=0,y:k=0,width:L=0,height:C=0}=x.shapeArgs||{},t.shapeArgs||(t.shapeArgs={}),t.hasImage||Z(t.shapeArgs,{d:m(P,k,L,C,y?{r:y}:void 0)}),Z(t.shapeArgs,{x:P,y:k}),t.plotX=x.plotX,t.plotY=x.plotY):(t.plotX=g,t.plotY=b,t.shapeArgs={x:g,y:b,width:f,height:u,cursor:t.node.isLeaf?"default":"pointer"},t.hasImage||(t.shapeArgs.d=m(g,b,f,u,y?{r:y}:void 0))),t.tooltipPos=e.inverted?[s-b-u/2,o-g-f/2]:[g+f/2,b]}}to.defaultOptions=tt(G.defaultOptions,{reversed:!1,marker:{radius:10,lineWidth:0,symbol:"circle",fillOpacity:1,states:{}},link:{color:"#666666",lineWidth:1,radius:10,cursor:"default",type:"curved"},collapseButton:{onlyOnHover:!0,enabled:!0,lineWidth:1,x:0,y:0,height:18,width:18,shape:"circle",style:{cursor:"pointer",fontWeight:"bold",fontSize:"1em"}},fillSpace:!1,tooltip:{linkFormat:"{point.fromNode.id} → {point.toNode.id}",pointFormat:"{point.id}"},dataLabels:{defer:!0,linkTextPath:{attributes:{startOffset:"50%"}},enabled:!0,linkFormatter:()=>"",padding:5,style:{textOverflow:"none"}},nodeDistance:30,nodeWidth:void 0}),Z(to.prototype,{forceDL:!0,pointClass:b,NodeClass:d,LinkClass:S,isCartesian:!1}),r().registerSeriesType("treegraph",to);let tl=s();export{tl as default};