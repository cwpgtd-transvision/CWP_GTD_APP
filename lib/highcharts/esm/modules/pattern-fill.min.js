import*as t from"../highcharts.js";var e={n:t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return e.d(r,{a:r}),r},d:(t,r)=>{for(var i in r)e.o(r,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:r[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};let r=t.default;var i=e.n(r);let a=i()["animObject"],o=i()["getOptions"],{addEvent:n,defined:h,erase:s,extend:l,merge:p,pick:c,removeEvent:d,wrap:f}=i(),g=function(){let t=[],e=o().colors,r=0;for(var i of["M 0 0 L 5 5 M 4.5 -0.5 L 5.5 0.5 M -0.5 4.5 L 0.5 5.5","M 0 5 L 5 0 M -0.5 0.5 L 0.5 -0.5 M 4.5 5.5 L 5.5 4.5","M 2 0 L 2 5 M 4 0 L 4 5","M 0 2 L 5 2 M 0 4 L 5 4","M 0 1.5 L 2.5 1.5 L 2.5 0 M 2.5 5 L 2.5 3.5 L 5 3.5"])t.push({path:i,color:e[r++],width:5,height:5,patternTransform:"scale(1.4 1.4)"});for(var a of(r=5,["M 0 0 L 5 10 L 10 0","M 3 3 L 8 3 L 8 8 L 3 8 Z","M 5 5 m -4 0 a 4 4 0 1 1 8 0 a 4 4 0 1 1 -8 0","M 0 0 L 10 10 M 9 -1 L 11 1 M -1 9 L 1 11","M 0 10 L 10 0 M -1 1 L 1 -1 M 9 11 L 11 9"]))t.push({path:a,color:e[r],width:10,height:10}),r+=5;return t}();function u(t,e){let r=JSON.stringify(t),i=r.length||0,a=0,n=0,o;if(e){o=Math.max(Math.floor(i/500),1);for(let t=0;t<i;t+=o)a+=r.charCodeAt(t);a&=a}for(;n<i;++n)a=(a<<5)-a+r.charCodeAt(n),a&=a;return a.toString(16).replace("-","1")}function m(){if(this.renderer&&(this.renderer.defIds||[]).filter(t=>t&&t.indexOf&&0===t.indexOf("highcharts-pattern-")).length){for(var t of this.series)if(t.visible)for(var e of t.points){let t=e.options&&e.options.color;t&&t.pattern&&(t.pattern._width="defer",t.pattern._height="defer")}this.redraw(!1)}}function y(){let r={},i=this.renderer,t=(i.defIds||[]).filter(t=>t.indexOf&&0===t.indexOf("highcharts-pattern-"));if(t.length)for(var e of([].forEach.call(this.renderTo.querySelectorAll('[color^="url("], [fill^="url("], [stroke^="url("]'),t=>{let e=t.getAttribute("fill")||t.getAttribute("color")||t.getAttribute("stroke");e&&(r[e.replace(i.url,"").replace("url(#","").replace(")","")]=!0)}),t))r[e]||(s(i.defIds,e),i.patternElements[e]&&(i.patternElements[e].destroy(),delete i.patternElements[e]))}function x(){let t=this.options.color;t&&t.pattern&&("string"==typeof t.pattern.path&&(t.pattern.path={d:t.pattern.path}),this.color=this.options.color=p(this.series.options.color,t))}function M(t){let e=t.args[0],r=t.args[1],i=t.args[2],a=this.chartIndex||0,n=e.pattern,o="#333333";if(!(n=void 0!==e.patternIndex&&g?g[e.patternIndex]:n))return!0;if(n.image||"string"==typeof n.path||n.path&&n.path.d){let t=i.parentNode&&i.parentNode.getAttribute("class");t=t&&-1<t.indexOf("highcharts-legend"),"defer"!==n._width&&"defer"!==n._height||_.call({graphic:{element:i}},n),!t&&n.id||((n=p({},n)).id="highcharts-pattern-"+a+"-"+u(n)+u(n,!0)),this.addPattern(n,!this.forExport&&c(n.animation,this.globalAnimation,{duration:100})),o=`url(${this.url}#${n.id+(this.forExport?"-export":"")})`}else o=n.color||o;return i.setAttribute(r,o),!(e.toString=function(){return o})}function w(){var e=this.chart.isResizing;if(this.isDirtyData||e||!this.chart.hasRendered)for(var r of this.points){let t=r.options&&r.options.color;t&&t.pattern&&(!e||r.shapeArgs&&r.shapeArgs.width&&r.shapeArgs.height?r.calculatePatternDimensions(t.pattern):(t.pattern._width="defer",t.pattern._height="defer"))}}function _(r){if(!r.width||!r.height){let t=this.graphic&&(this.graphic.getBBox&&this.graphic.getBBox(!0)||this.graphic.element&&this.graphic.element.getBBox())||{},e=this.shapeArgs;if(e&&(t.width=e.width||t.width,t.height=e.height||t.height,t.x=e.x||t.x,t.y=e.y||t.y),r.image){var i;if(!t.width||!t.height)return r._width="defer",r._height="defer",i=this.series.chart.mapView&&this.series.chart.mapView.getSVGTransform().scaleY,void(h(i)&&i<0&&(r._inverted=!0));r.aspectRatio&&(t.aspectRatio=t.width/t.height,r.aspectRatio>t.aspectRatio?t.aspectWidth=t.height*r.aspectRatio:t.aspectHeight=t.width/r.aspectRatio),r._width=r.width||Math.ceil(t.aspectWidth||t.width),r._height=r.height||Math.ceil(t.aspectHeight||t.height)}r.width||(r._x=r.x||0,r._x+=t.x-Math.round(t.aspectWidth?Math.abs(t.aspectWidth-t.width)/2:0)),r.height||(r._y=r.y||0,r._y+=t.y-Math.round(t.aspectHeight?Math.abs(t.aspectHeight-t.height)/2:0))}}function L(r,n){let o=c(n,!0),h=a(o),s=r.color||"#333333",p=r.height||("number"==typeof r._height?r._height:0)||32,l=r.width||("number"==typeof r._width?r._width:0)||32,f,g=r.id,u;if(g||(this.idCounter=this.idCounter||0,g="highcharts-pattern-"+this.idCounter+"-"+(this.chartIndex||0),++this.idCounter),this.forExport&&(g+="-export"),this.defIds=this.defIds||[],!(-1<this.defIds.indexOf(g))){this.defIds.push(g);let t={id:g,patternUnits:"userSpaceOnUse",patternContentUnits:r.patternContentUnits||"userSpaceOnUse",width:l,height:p,x:r._x||r.x||0,y:r._y||r.y||0},e=(r._inverted&&(t.patternTransform="scale(1, -1)",r.patternTransform&&(r.patternTransform+=" scale(1, -1)")),r.patternTransform&&(t.patternTransform=r.patternTransform),this.createElement("pattern").attr(t).add(this.defs));return e.id=g,r.path?(u=i().isObject(r.path)?r.path:{d:r.path},r.backgroundColor&&(n=r.backgroundColor,this.rect(0,0,l,p).attr({fill:n}).add(e)),f={d:u.d},this.styledMode||(f.stroke=u.stroke||s,f["stroke-width"]=c(u.strokeWidth,2),f.fill=u.fill||"none"),u.transform&&(f.transform=u.transform),this.createElement("path").attr(f).add(e),e.color=s):r.image&&(o?this.image(r.image,0,0,l,p,function(){this.animate({opacity:c(r.opacity,1)},h),d(this.element,"load")}).attr({opacity:0}):this.image(r.image,0,0,l,p)).add(e),r.image&&o||void 0===r.opacity||[].forEach.call(e.element.childNodes,t=>{t.setAttribute("opacity",r.opacity)}),this.patternElements=this.patternElements||{},this.patternElements[g]=e}}function b(t){let e=this.options.color;e&&e.pattern&&!e.pattern.color?(delete this.options.color,t.apply(this,[].slice.call(arguments,1)),e.pattern.color=this.color,this.color=this.options.color=e):t.apply(this,[].slice.call(arguments,1))}function A(){if(this.chart?.mapView){let e=this.chart.renderer,r=e.patternElements;e.defIds?.length&&r&&this.points.filter(function(t){return!!t.graphic&&(t.graphic.element.hasAttribute("fill")||t.graphic.element.hasAttribute("color")||t.graphic.element.hasAttribute("stroke"))&&!t.options.color?.pattern?.image&&!!t.group?.scaleX&&!!t.group?.scaleY}).map(function(t){return{id:(t.graphic?.element.getAttribute("fill")||t.graphic?.element.getAttribute("color")||t.graphic?.element.getAttribute("stroke")||"").replace(e.url,"").replace("url(#","").replace(")",""),x:t.group?.scaleX||1,y:t.group?.scaleY||1}}).filter(function(r,i,t){return""!==r.id&&-1!==r.id.indexOf("highcharts-pattern-")&&!t.some(function(t,e){return t.id===r.id&&e<i})}).forEach(function(t){var e=t.id;r[e].scaleX=1/t.x,r[e].scaleY=1/t.y,r[e].updateTransform("patternTransform")})}}let C=i(),E=(C.patterns=g,function(t,e,r){var i=e.prototype.pointClass,a=i.prototype;a.calculatePatternDimensions||(n(t,"endResize",m),n(t,"redraw",y),l(a,{calculatePatternDimensions:_}),n(i,"afterInit",x),n(e,"render",w),f(e.prototype,"getColor",b),n(e,"afterRender",A),n(e,"mapZoomComplete",A),l(r.prototype,{addPattern:L}),n(r,"complexColor",M))}(C.Chart,C.Series,C.SVGRenderer),i());export{E as default};