import*as __WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__ from"../highcharts.src.js";var __webpack_require__={n:e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},d:(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const external_highcharts_src_js_default_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default;var external_highcharts_src_js_default_default=__webpack_require__.n(external_highcharts_src_js_default_namespaceObject);const external_highcharts_src_js_default_Templating_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default.Templating;var external_highcharts_src_js_default_Templating_default=__webpack_require__.n(external_highcharts_src_js_default_Templating_namespaceObject);const SeriesLabelDefaults={enabled:!0,connectorAllowed:!1,connectorNeighbourDistance:24,format:void 0,formatter:void 0,minFontSize:null,maxFontSize:null,onArea:null,style:{fontSize:"0.8em",fontWeight:"bold"},useHTML:!1,boxesToAvoid:[]},SeriesLabel_SeriesLabelDefaults=SeriesLabelDefaults;function ccw(e,t,r,a,i,o){o=(o-t)*(r-e)-(a-t)*(i-e);return 0<o||!(o<0)}function intersectLine(e,t,r,a,i,o,s,n){return ccw(e,t,i,o,s,n)!==ccw(r,a,i,o,s,n)&&ccw(e,t,r,a,i,o)!==ccw(e,t,r,a,s,n)}function boxIntersectLine(e,t,r,a,i,o,s,n){return intersectLine(e,t,e+r,t,i,o,s,n)||intersectLine(e+r,t,e+r,t+a,i,o,s,n)||intersectLine(e,t+a,e+r,t+a,i,o,s,n)||intersectLine(e,t,e,t+a,i,o,s,n)}function intersectRect(e,t){return!(t.left>e.right||t.right<e.left||t.top>e.bottom||t.bottom<e.top)}const SeriesLabelUtilities={boxIntersectLine:boxIntersectLine,intersectRect:intersectRect},SeriesLabel_SeriesLabelUtilities=SeriesLabelUtilities,animObject=external_highcharts_src_js_default_default()["animObject"],format=external_highcharts_src_js_default_Templating_default()["format"],setOptions=external_highcharts_src_js_default_default()["setOptions"],composed=external_highcharts_src_js_default_default()["composed"],{boxIntersectLine:SeriesLabel_boxIntersectLine,intersectRect:SeriesLabel_intersectRect}=SeriesLabel_SeriesLabelUtilities,{addEvent,extend,fireEvent,isNumber,pick,pushUnique,syncTimeout}=external_highcharts_src_js_default_default(),labelDistance=3;function checkClearPoint(e,t,r,a,i){var o=e.chart,s=e.options.label||{},n=pick(s.onArea,!!e.area),l=n||s.connectorAllowed,c=16,h=o.boxesToAvoid;let p=Number.MAX_VALUE,_=Number.MAX_VALUE,d,b,u,f,x,m,g;for(m=0;h&&m<h.length;m+=1)if(SeriesLabel_intersectRect(h[m],{left:t,right:t+a.width,top:r,bottom:r+a.height}))return!1;for(m=0;m<o.series.length;m+=1){const S=o.series[m],w=S.interpolatedPoints&&[...S.interpolatedPoints];if(S.visible&&w){var L=o.plotHeight/10;for(let e=o.plotTop;e<=o.plotTop+o.plotHeight;e+=L)w.unshift({chartX:o.plotLeft,chartY:e}),w.push({chartX:o.plotLeft+o.plotWidth,chartY:e});for(g=1;g<w.length;g+=1){if(w[g].chartX>=t-c&&w[g-1].chartX<=t+a.width+c){if(SeriesLabel_boxIntersectLine(t,r,a.width,a.height,w[g-1].chartX,w[g-1].chartY,w[g].chartX,w[g].chartY))return!1;e===S&&!u&&i&&(u=SeriesLabel_boxIntersectLine(t-c,r-c,a.width+32,a.height+32,w[g-1].chartX,w[g-1].chartY,w[g].chartX,w[g].chartY))}!l&&!u||e===S&&!n||(f=t+a.width/2-w[g].chartX,x=r+a.height/2-w[g].chartY,p=Math.min(p,f*f+x*x))}if(!n&&l&&e===S&&(i&&!u||p<Math.pow(s.connectorNeighbourDistance||1,2))){for(g=1;g<w.length;g+=1)(d=Math.min(Math.pow(t+a.width/2-w[g].chartX,2)+Math.pow(r+a.height/2-w[g].chartY,2),Math.pow(t-w[g].chartX,2)+Math.pow(r-w[g].chartY,2),Math.pow(t+a.width-w[g].chartX,2)+Math.pow(r-w[g].chartY,2),Math.pow(t+a.width-w[g].chartX,2)+Math.pow(r+a.height-w[g].chartY,2),Math.pow(t-w[g].chartX,2)+Math.pow(r+a.height-w[g].chartY,2)))<_&&(_=d,b=w[g]);u=!0}}}return!(i&&!u)&&{x:t,y:r,weight:p-(b?_:0),connectorPoint:b}}function compose(e,t){pushUnique(composed,"SeriesLabel")&&(addEvent(e,"load",onChartRedraw),addEvent(e,"redraw",onChartRedraw),t.prototype.symbols.connector=symbolConnector,setOptions({plotOptions:{series:{label:SeriesLabel_SeriesLabelDefaults}}}))}function drawSeriesLabels(v){v.boxesToAvoid=[];const e=v.labelSeries||[],o=v.boxesToAvoid;v.series.forEach(i=>(i.points||[]).forEach(e=>(e.dataLabels||[]).forEach(e=>{var{width:t,height:r}=e.getBBox(),a=(e.translateX||0)+(i.xAxis?i.xAxis.pos:i.chart.plotLeft),e=(e.translateY||0)+(i.yAxis?i.yAxis.pos:i.chart.plotTop);o.push({left:a,top:e,right:a+t,bottom:e+r})}))),e.forEach(function(e){var t=e.options.label||{};e.interpolatedPoints=getPointsOnGraph(e),o.push(...t.boxesToAvoid||[])}),v.series.forEach(function(h){const p=h.options.label;if(p&&(h.xAxis||h.yAxis)){const u="highcharts-color-"+pick(h.colorIndex,"none"),f=!h.labelBySeries,x=p.minFontSize,m=p.maxFontSize,g=v.inverted,L=(g?h.yAxis:h.xAxis).pos,S=(g?h.xAxis:h.yAxis).pos,w=(v.inverted?h.yAxis:h.xAxis).len,y=(v.inverted?h.xAxis:h.yAxis).len,X=h.interpolatedPoints,M=pick(p.onArea,!!h.area),A=[],Y=h.getColumn("x");let e,t,r,a,i,o,s=h.labelBySeries,n,l,c;if(M&&!g&&(n=[h.xAxis.toPixels(Y[0]),h.xAxis.toPixels(Y[Y.length-1])],l=Math.min.apply(Math,n),c=Math.max.apply(Math,n)),h.visible&&!h.boosted&&X){if(!s){let e=h.name;"string"==typeof p.format?e=format(p.format,h,v):p.formatter&&(e=p.formatter.call(h)),h.labelBySeries=s=v.renderer.label(e,0,0,"connector",0,0,p.useHTML).addClass("highcharts-series-label highcharts-series-label-"+h.index+" "+(h.options.className||"")+" "+u),v.renderer.styledMode||(_="string"==typeof h.color?h.color:"#666666",s.css(extend({color:M?v.renderer.getContrast(_):_},p.style||{})),s.attr({opacity:v.renderer.forExport?1:0,stroke:h.color,"stroke-width":1})),x&&m&&s.css({fontSize:labelFontSize(h,x,m)}),s.attr({padding:0,zIndex:3}).add()}for((e=s.getBBox()).width=Math.round(e.width),i=X.length-1;0<i;--i)M?(t=(X[i].chartCenterX??X[i].chartX)-e.width/2,r=(X[i].chartCenterY??X[i].chartY)-e.height/2,(o=d(t,r,e)?checkClearPoint(h,t,r,e):o)&&A.push(o)):(t=X[i].chartX+labelDistance,r=X[i].chartY-e.height-labelDistance,(o=d(t,r,e)?checkClearPoint(h,t,r,e,!0):o)&&A.push(o),t=X[i].chartX+labelDistance,r=X[i].chartY+labelDistance,(o=d(t,r,e)?checkClearPoint(h,t,r,e,!0):o)&&A.push(o),t=X[i].chartX-e.width-labelDistance,r=X[i].chartY+labelDistance,(o=d(t,r,e)?checkClearPoint(h,t,r,e,!0):o)&&A.push(o),t=X[i].chartX-e.width-labelDistance,r=X[i].chartY-e.height-labelDistance,(o=d(t,r,e)?checkClearPoint(h,t,r,e,!0):o)&&A.push(o));if(p.connectorAllowed&&!A.length&&!M)for(t=L+w-e.width;t>=L;t-=16)for(r=S;r<S+y-e.height;r+=16)(a=checkClearPoint(h,t,r,e,!0))&&A.push(a);if(A.length){A.sort((e,t)=>t.weight-e.weight),o=A[0],(v.boxesToAvoid||[]).push({left:o.x,right:o.x+e.width,top:o.y,bottom:o.y+e.height});var _=Math.sqrt(Math.pow(Math.abs(o.x-(s.x||0)),2)+Math.pow(Math.abs(o.y-(s.y||0)),2));if(_&&h.labelBySeries){let e={opacity:v.renderer.forExport?1:0,x:o.x,y:o.y},t={opacity:1};_<=10&&(t={x:e.x,y:e.y},e={});let r;f&&((r=animObject(h.options.animation)).duration*=.2),h.labelBySeries.attr(extend(e,{anchorX:o.connectorPoint&&(o.connectorPoint.plotX||0)+L,anchorY:o.connectorPoint&&(o.connectorPoint.plotY||0)+S})).animate(t,r),h.options.kdNow=!0,h.buildKDTree();_=h.searchPoint({chartX:o.x,chartY:o.y},!0);_&&(s.closest=[_,o.x-(_.plotX||0),o.y-(_.plotY||0)])}}else b()}else b();function d(e,t,r){var a=Math.max(L,pick(l,-1/0)),i=Math.min(L+w,pick(c,1/0));return a<e&&e<=i-r.width&&t>=S&&t<=S+y-r.height}function b(){s&&(h.labelBySeries=s.destroy())}}}),fireEvent(v,"afterDrawSeriesLabels")}function getPointsOnGraph(e){if(e.xAxis||e.yAxis){const p=e.points,_=[],d=e.graph||e.area,b=d&&d.element,u=e.chart.inverted,f=e.xAxis,x=e.yAxis,m=(u?x:f).pos,g=(u?f:x).pos,L=(u?f:x).len,S=(u?x:f).len,w=e.options.label||{},y=pick(w.onArea,!!e.area),X=x.getThreshold(e.options.threshold),M={},A=u?"chartCenterX":"chartCenterY";let t,r,a,i,o,s,n;if(e.getPointSpline&&b&&b.getPointAtLength&&!y&&p.length<(e.chart.plotSizeX||0)/16){e=d.toD&&d.attr("d");for(d.toD&&d.attr({d:d.toD}),o=b.getTotalLength(),t=0;t<o;t+=16){var l=b.getPointAtLength(t),c=u?S-l.y:l.x,l=u?L-l.x:l.y;h({chartX:m+c,chartY:g+l,plotX:c,plotY:l})}e&&d.attr({d:e});const Y=p[p.length-1],v=Y.pos();h({chartX:m+(v?.[0]||0),chartY:g+(v?.[1]||0)})}else{o=p.length;let e;for(t=0;t<o;t+=1){const j=p[t],[P,E]=j.pos()||[],T=j["plotHigh"];if(isNumber(P)&&isNumber(E)){const C={plotX:P,plotY:E,chartX:m+P,chartY:g+E};if(y&&(T&&(C.plotY=T,C.chartY=g+T),u?C.chartCenterX=m+S-((T||j.plotY||0)+pick(j.yBottom,X))/2:C.chartCenterY=g+((T||E)+pick(j.yBottom,X))/2),e&&(r=Math.abs(C.chartX-e.chartX),a=Math.abs(C.chartY-e.chartY),16<(i=Math.max(r,a))&&i<999))for(s=Math.ceil(i/16),n=1;n<s;n+=1)h({chartX:e.chartX+(C.chartX-e.chartX)*(n/s),chartY:e.chartY+(C.chartY-e.chartY)*(n/s),[A]:(e[A]||0)+((C[A]||0)-(e[A]||0))*(n/s),plotX:(e.plotX||0)+(P-(e.plotX||0))*(n/s),plotY:(e.plotY||0)+(E-(e.plotY||0))*(n/s)});h(C),e=C}}}return _;function h(e){var t=Math.round((e.plotX||0)/8)+","+Math.round((e.plotY||0)/8);M[t]||(M[t]=1,_.push(e))}}}function labelFontSize(e,t,r){return t+(e.sum||0)/(e.chart.labelSeriesMaxSum||0)*(r-t)+"px"}function onChartRedraw(s){if(this.renderer){const n=this;let o=animObject(n.renderer.globalAnimation).duration;n.labelSeries=[],n.labelSeriesMaxSum=0,n.seriesLabelTimer&&external_highcharts_src_js_default_default().clearTimeout(n.seriesLabelTimer),n.series.forEach(function(e){const t=e.options.label||{},r=e.labelBySeries,a=r&&r.closest,i=e.getColumn("y");t.enabled&&e.visible&&(e.graph||e.area)&&!e.boosted&&n.labelSeries&&(n.labelSeries.push(e),t.minFontSize&&t.maxFontSize&&i.length&&(e.sum=i.reduce((e,t)=>(e||0)+(t||0),0),n.labelSeriesMaxSum=Math.max(n.labelSeriesMaxSum||0,e.sum||0)),"load"===s.type&&(o=Math.max(o,animObject(e.options.animation).duration)),a&&(void 0!==a[0].plotX?r.animate({x:a[0].plotX+a[1],y:a[0].plotY+a[2]}):r.attr({opacity:0})))}),n.seriesLabelTimer=syncTimeout(function(){n.series&&n.labelSeries&&drawSeriesLabels(n)},n.renderer.forExport||!o?0:o)}}function symbolConnector(e,t,r,a,i){var o=i&&i.anchorX,i=i&&i.anchorY;let s,n,l=r/2;return isNumber(o)&&isNumber(i)&&(s=[["M",o,i]],(n=(n=t-i)<0?-a-n:n)<r&&(l=o<e+r/2?n:r-n),t+a<i?s.push(["L",e+l,t+a]):i<t?s.push(["L",e+l,t]):o<e?s.push(["L",e,t+a/2]):e+r<o&&s.push(["L",e+r,t+a/2])),s||[]}const SeriesLabel={compose:compose},SeriesLabel_SeriesLabel=SeriesLabel,G=external_highcharts_src_js_default_default(),series_label_src=(SeriesLabel_SeriesLabel.compose(G.Chart,G.SVGRenderer),external_highcharts_src_js_default_default());export{series_label_src as default};