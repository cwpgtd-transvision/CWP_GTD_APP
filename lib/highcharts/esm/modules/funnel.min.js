import*as t from"../highcharts.js";var e={n:t=>{var a=t&&t.__esModule?()=>t.default:()=>t;return e.d(a,{a:a}),a},d:(t,a)=>{for(var i in a)e.o(a,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:a[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};let a=t.default;var i=e.n(a);let d=i()["defaultOptions"],s=i()["noop"],{addEvent:l,extend:o,isObject:n,merge:r,relativeLength:h}=i(),p={radius:0,scope:"stack",where:void 0};function c(t,e){return n(t)||(t={radius:t||0}),r(p,e,t)}let u=t.default.SeriesRegistry;var g=e.n(u);let{composed:x,noop:y}=i(),{column:b,pie:L}=g().seriesTypes,{addEvent:f,correctFloat:m,extend:v,fireEvent:M,isArray:W,merge:A,pick:C,pushUnique:P,relativeLength:k,splat:w}=i(),O=g().series.prototype.alignDataLabel;function D(t,e){return/%$/.test(t)?e*parseInt(t,10)/100:parseInt(t,10)}class I extends L{alignDataLabel(t,e,a,i,d){let s=t.series,o=s.options.reversed,n=t.dlBox||t.shapeArgs,{align:l,padding:r=0,verticalAlign:h}=a,p=((s.options||{}).dataLabels||{}).inside,c=s.center[1],g=t.plotY||0,u=e.height??e.getBBox().height,y=s.getWidthAt((o?2*c-g:g)-n.height/2+u),x="middle"===h?(n.topWidth-n.bottomWidth)/4:(y-n.bottomWidth)/2,L=n.y,b=n.x;"middle"===h?L=n.y-n.height/2+u/2:"top"===h&&(L=n.y-n.height+u+r),("top"===h&&!o||"bottom"===h&&o||"middle"===h)&&("right"===l?b=n.x-r+x:"left"===l&&(b=n.x+r-x)),i={x:b,y:o?L-n.height:L,width:n.bottomWidth,height:n.height},a.verticalAlign="bottom",p&&(a.distance=void 0),p&&t.visible&&O.call(s,t,e,a,i,d),p&&(!t.visible&&t.dataLabel&&(t.dataLabel.placed=!1),t.contrastColor&&e.css({color:t.contrastColor}))}drawDataLabels(){(w(this.options.dataLabels||{})[0].inside?b:L).prototype.drawDataLabels.call(this)}getDataLabelPosition(t,e){var a=t.plotY||0,i=t.half?1:-1,d=this.getX(a,!!t.half,t);return{distance:e,natural:{x:0,y:a},computed:{},alignment:t.half?"right":"left",connectorPosition:{breakAt:{x:d+(e-5)*i,y:a},touchingSliceAt:{x:d+e*i,y:a}}}}translate(){let i=this,t=i.chart,e=i.options,n=e.reversed,a=e.ignoreHiddenPoint,d=c(e.borderRadius),s=t.plotWidth,o=t.plotHeight,N=e.center,l=D(N[0],s),r=D(N[1],o),h=D(e.width,s),p=D(e.height,o),g=D(e.neckWidth,s),u=D(e.neckHeight,o),x=r-p/2+p-u,L=i.points,V=k(d.radius,h),b=d.scope,_=+("left"===e.dataLabels.position),f=t=>{let e=Math.tan(t/2),a=Math.cos(P),i=Math.sin(P),d=V,s=d/e,o=Math.tan((Math.PI-t)/3.2104);return s>O&&(d=(s=O)*e),{dx:[s*a,(s-(o*=d))*a,s-o,s],dy:[s*i,(s-o)*i,s-o,s].map(t=>n?-t:t)}},v=0,z=0,W,A,I,P,O,w,Y,H,S,B,T,X;for(var j of(i.getWidthAt=function(t){var e=r-p/2;return t>x||p===u?g:g+(h-g)*(1-(t-e)/(p-u))},i.getX=function(t,e,a){return l+(e?-1:1)*(i.getWidthAt(n?2*r-t:t)/2+(a.dataLabel?.dataLabelPosition?.distance??k(this.options.dataLabels?.distance||0,h)))},i.center=[l,r,p],i.centerX=l,L))!j.y||!j.isValid()||a&&!1===j.visible||(v+=j.y);for(var E of L){if(X=null,I=v?E.y/v:0,B=(Y=r-p/2+z*p)+I*p,H=(w=l-(W=i.getWidthAt(Y))/2)+W,T=(S=l-(W=i.getWidthAt(B))/2)+W,m(Y)>=x?(w=S=l-g/2,H=T=l+g/2):B>x&&(X=B,T=(S=l-(W=i.getWidthAt(x))/2)+W,B=x),n&&(Y=2*r-Y,B=2*r-B,null!==X&&(X=2*r-X)),!V||"point"!==b&&0!==E.index&&E.index!==L.length-1&&null===X)A=[["M",w,Y],["L",H,Y],["L",T,B]],null!==X&&A.push(["L",T,X],["L",S,X]),A.push(["L",S,B]);else{var R=Math.abs(B-Y),q=H-T,F=T-S,U=Math.sqrt(q*q+R*R);P=Math.atan(0!=q?R/q:1/0),O=U/2,null!==X&&(O=Math.min(O,Math.abs(X-B)/2)),1<=F&&(O=Math.min(O,F/2));let t=f(P);A="stack"===b&&0!==E.index?[["M",w,Y],["L",H,Y]]:[["M",w+t.dx[0],Y+t.dy[0]],["C",w+t.dx[1],Y+t.dy[1],w+t.dx[2],Y,w+t.dx[3],Y],["L",H-t.dx[3],Y],["C",H-t.dx[2],Y,H-t.dx[1],Y+t.dy[1],H-t.dx[0],Y+t.dy[0]]],null!==X?(R=f(Math.PI/2),t=f(Math.PI/2+P),A.push(["L",T+t.dx[0],B-t.dy[0]],["C",T+t.dx[1],B-t.dy[1],T,B+t.dy[2],T,B+t.dy[3]]),"stack"===b&&E.index!==L.length-1?A.push(["L",T,X],["L",S,X]):A.push(["L",T,X-R.dy[3]],["C",T,X-R.dy[2],T-R.dx[2],X,T-R.dx[3],X],["L",S+R.dx[3],X],["C",S+R.dx[2],X,S,X-R.dy[2],S,X-R.dy[3]]),A.push(["L",S,B+t.dy[3]],["C",S,B+t.dy[2],S-t.dx[1],B-t.dy[1],S-t.dx[0],B-t.dy[0]])):1<=F?(t=f(Math.PI-P),"stack"===b&&0===E.index?A.push(["L",T,B],["L",S,B]):A.push(["L",T+t.dx[0],B-t.dy[0]],["C",T+t.dx[1],B-t.dy[1],T-t.dx[2],B,T-t.dx[3],B],["L",S+t.dx[3],B],["C",S+t.dx[2],B,S-t.dx[1],B-t.dy[1],S-t.dx[0],B-t.dy[0]])):(t=f(Math.PI-2*P),A.push(["L",S+t.dx[0],B-t.dy[0]],["C",S+t.dx[1],B-t.dy[1],S-t.dx[1],B-t.dy[1],S-t.dx[0],B-t.dy[0]]))}A.push(["Z"]),E.shapeType="path",E.shapeArgs={d:A},E.percentage=100*I,E.plotX=l,E.plotY=(Y+(X||B))/2,E.tooltipPos=[l,E.plotY],E.dlBox={x:S,y:Y,topWidth:H-w,bottomWidth:T-S,height:Math.abs(C(X,B)-Y),width:NaN},E.slice=y,E.half=_,!E.isValid()||a&&!1===E.visible||(z+=I)}M(i,"afterTranslate")}sortByAngle(t){t.sort((t,e)=>t.plotY-e.plotY)}}function H(){for(var e of this.series){let t=e.options&&e.options.dataLabels;W(t)&&(t=t[0]),e.is("pie")&&e.placeDataLabels&&t&&!t.inside&&e.placeDataLabels()}}I.defaultOptions=A(L.defaultOptions,{animation:!1,borderRadius:0,center:["50%","50%"],width:"90%",neckWidth:"30%",height:"100%",neckHeight:"25%",reversed:!1,size:!0,dataLabels:{connectorWidth:1,verticalAlign:"middle"},states:{select:{color:"#cccccc",borderColor:"#000000"}}}),v(I.prototype,{animate:y}),(I=I||{}).compose=function(t){P(x,"FunnelSeries")&&f(t,"afterHideAllOverlappingLabels",H)},g().registerSeriesType("funnel",I);let Y=I,B=i()["merge"];class S extends Y{}S.defaultOptions=B(Y.defaultOptions,{neckHeight:"0%",neckWidth:"0%",reversed:!0}),g().registerSeriesType("pyramid",S);let T=i(),X=(Y.compose(T.Chart),i());export{X as default};