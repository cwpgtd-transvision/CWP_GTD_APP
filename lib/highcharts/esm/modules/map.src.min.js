import*as __WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__ from"../highcharts.src.js";import*as __WEBPACK_EXTERNAL_MODULE__coloraxis_src_js_cdd22a72__ from"./coloraxis.src.js";var __webpack_require__={n:e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},d:(e,t)=>{for(var i in t)__webpack_require__.o(t,i)&&!__webpack_require__.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const external_highcharts_src_js_default_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default;var MapPointer,external_highcharts_src_js_default_default=__webpack_require__.n(external_highcharts_src_js_default_namespaceObject),x=e=>{var t={};return __webpack_require__.d(t,e),t},y=e=>()=>e;const external_coloraxis_src_js_namespaceObject=x({}),lang={zoomIn:"Zoom in",zoomOut:"Zoom out"},mapNavigation={buttonOptions:{alignTo:"plotBox",align:"left",verticalAlign:"top",x:0,width:18,height:18,padding:5,style:{color:"#666666",fontSize:"1em",fontWeight:"bold"},theme:{fill:"#ffffff",stroke:"#e6e6e6","stroke-width":1,"text-align":"center"}},buttons:{zoomIn:{onclick:function(){this.mapZoom(.5)},text:"+",y:0},zoomOut:{onclick:function(){this.mapZoom(2)},text:"-",y:28}},mouseWheelSensitivity:1.1},mapNavigationDefaults={lang:lang,mapNavigation:mapNavigation},MapNavigationDefaults=mapNavigationDefaults,{defined,extend,pick,wrap}=external_highcharts_src_js_default_default(),Maps_MapPointer=(!function(e){let r=0,s;function t(e){const t=this.chart;e=this.normalize(e),t.options.mapNavigation.enableDoubleClickZoomTo?t.pointer.inClass(e.target,"highcharts-tracker")&&t.hoverPoint&&t.hoverPoint.zoomTo():t.isInsidePlot(e.chartX-t.plotLeft,e.chartY-t.plotTop)&&t.mapZoom(.5,void 0,void 0,e.chartX,e.chartY)}function i(e){const t=this.chart;e=this.normalize(e);var i=defined(e.wheelDelta)&&-e.wheelDelta/120||e.deltaY||e.detail;1<=Math.abs(i)&&(r+=Math.abs(i),s&&clearTimeout(s),s=setTimeout(()=>{r=0},50)),r<10&&t.isInsidePlot(e.chartX-t.plotLeft,e.chartY-t.plotTop)&&t.mapView&&t.mapView.zoomBy((t.options.mapNavigation.mouseWheelSensitivity-1)*-i,void 0,[e.chartX,e.chartY],!(Math.abs(i)<1)&&void 0)}function a(e,t,i){const r=this.chart;return t=e.call(this,t,i),r&&r.mapView&&((e=r.mapView.pixelsToLonLat({x:t.chartX-r.plotLeft,y:t.chartY-r.plotTop}))&&extend(t,e)),t}function o(e){var t=this.chart.options.mapNavigation;t&&pick(t.enableTouchZoom,t.enabled)&&(this.chart.zooming.pinchType="xy"),e.apply(this,[].slice.call(arguments,1))}e.compose=function(e){(e=e.prototype).onContainerDblClick||(extend(e,{onContainerDblClick:t,onContainerMouseWheel:i}),wrap(e,"normalize",a),wrap(e,"zoomOption",o))}}(MapPointer=MapPointer||{}),MapPointer);let symbols;function bottomButton(e,t,i,r,s){var a;return s&&(a=s?.r||0,s.brBoxY=t-a,s.brBoxHeight=r+a),symbols.roundedRect(e,t,i,r,s)}function compose(e){(symbols=e.prototype.symbols).bottombutton=bottomButton,symbols.topbutton=topButton}function topButton(e,t,i,r,s){var a;return s&&(a=s?.r||0,s.brBoxHeight=r+a),symbols.roundedRect(e,t,i,r,s)}const MapSymbols={compose:compose},Maps_MapSymbols=MapSymbols,setOptions=external_highcharts_src_js_default_default()["setOptions"],composed=external_highcharts_src_js_default_default()["composed"],{addEvent,extend:MapNavigation_extend,merge,objectEach,pick:MapNavigation_pick,pushUnique}=external_highcharts_src_js_default_default();function stopEvent(e){e&&(e.preventDefault?.(),e.stopPropagation?.(),e.cancelBubble=!0)}class MapNavigation{static compose(e,t,i){Maps_MapPointer.compose(t),Maps_MapSymbols.compose(i),pushUnique(composed,"Map.Navigation")&&(addEvent(e,"beforeRender",function(){this.mapNavigation=new MapNavigation(this),this.mapNavigation.update()}),setOptions(MapNavigationDefaults))}constructor(e){this.chart=e,this.navButtons=[]}update(e){function c(e){this.handler.call(u,e),stopEvent(e)}const d=this,u=d.chart,_=d.navButtons;let m=u.options.mapNavigation;for(e&&(m=u.options.mapNavigation=merge(u.options.mapNavigation,e));_.length;)_.pop()?.destroy();if(!u.renderer.forExport&&MapNavigation_pick(m.enableButtons,m.enabled)){d.navButtonsGroup||(d.navButtonsGroup=u.renderer.g().attr({zIndex:7}).add()),objectEach(m.buttons,(e,t)=>{const i={padding:(e=merge(m.buttonOptions,e)).padding};!u.styledMode&&e.theme&&(MapNavigation_extend(i,e.theme),i.style=merge(e.theme.style,e.style));var{text:r,width:s=0,height:a=0,padding:o=0}=e;const n=u.renderer.button("+"!==r&&"-"!==r&&r||"",0,0,c,i,void 0,void 0,void 0,"zoomIn"===t?"topbutton":"bottombutton").addClass("highcharts-map-navigation highcharts-"+{zoomIn:"zoom-in",zoomOut:"zoom-out"}[t]).attr({width:s,height:a,title:u.options.lang[t],zIndex:5}).add(d.navButtonsGroup);if("+"===r||"-"===r){const l=s+1,h=[["M",o+3,o+a/2],["L",o+l-3,o+a/2]];"+"===r&&h.push(["M",o+l/2,o+3],["L",o+l/2,o+a-3]),u.renderer.path(h).addClass("highcharts-button-symbol").attr(u.styledMode?{}:{stroke:e.style?.color,"stroke-width":3,"stroke-linecap":"round"}).add(n)}if(n.handler=e.onclick,addEvent(n.element,"dblclick",stopEvent),_.push(n),MapNavigation_extend(e,{width:n.width,height:2*(n.height||0)}),u.hasLoaded)n.align(e,!1,e.alignTo);else{const p=addEvent(u,"load",()=>{n.element&&n.align(e,!1,e.alignTo),p()})}});const r=(e,t)=>!(t.x>=e.x+e.width||t.x+t.width<=e.x||t.y>=e.y+e.height||t.y+t.height<=e.y);u.hasLoaded||addEvent(u,"render",function(){var e,t,i=u.exporting?.group?.getBBox();i&&(t=d.navButtonsGroup.getBBox(),r(i,t)&&(e=-t.y-t.height+i.y-5,i=i.y+i.height-t.y+5,t=m.buttonOptions&&m.buttonOptions.verticalAlign,d.navButtonsGroup.attr({translateY:"bottom"===t?e:i})))})}this.updateEvents(m)}updateEvents(e){const i=this.chart;MapNavigation_pick(e.enableDoubleClickZoom,e.enabled)||e.enableDoubleClickZoomTo?this.unbindDblClick=this.unbindDblClick||addEvent(i.container,"dblclick",function(e){i.pointer.onContainerDblClick(e)}):this.unbindDblClick&&(this.unbindDblClick=this.unbindDblClick()),MapNavigation_pick(e.enableMouseWheelZoom,e.enabled)?this.unbindMouseWheel=this.unbindMouseWheel||addEvent(i.container,"wheel",function(e){var t;return i.pointer.inClass(e.target,"highcharts-no-mousewheel")||(t=i.mapView?.zoom,i.pointer.onContainerMouseWheel(e),t!==i.mapView?.zoom&&stopEvent(e)),!1}):this.unbindMouseWheel&&(this.unbindMouseWheel=this.unbindMouseWheel())}}const Maps_MapNavigation=MapNavigation,external_highcharts_src_js_default_SeriesRegistry_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default.SeriesRegistry;var external_highcharts_src_js_default_SeriesRegistry_default=__webpack_require__.n(external_highcharts_src_js_default_SeriesRegistry_namespaceObject);const external_highcharts_src_js_default_SVGElement_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default.SVGElement;var ColorMapComposition,external_highcharts_src_js_default_SVGElement_default=__webpack_require__.n(external_highcharts_src_js_default_SVGElement_namespaceObject);const{prototype:columnProto}=external_highcharts_src_js_default_SeriesRegistry_default().seriesTypes["column"],{addEvent:ColorMapComposition_addEvent,defined:ColorMapComposition_defined}=external_highcharts_src_js_default_default(),Series_ColorMapComposition=(!function(e){function i(e){const t=this,i=t.series,r=i.chart.renderer;t.moveToTopOnHover&&t.graphic&&(i.stateMarkerGraphic||(i.stateMarkerGraphic=new(external_highcharts_src_js_default_SVGElement_default())(r,"use").css({pointerEvents:"none"}).add(t.graphic.parentGroup)),"hover"===e?.state?(t.graphic.attr({id:this.id}),i.stateMarkerGraphic.attr({href:r.url+"#"+this.id,visibility:"visible"})):i.stateMarkerGraphic.attr({href:""}))}e.pointMembers={dataLabelOnNull:!0,moveToTopOnHover:!0,isValid:function(){return null!==this.value&&this.value!==1/0&&this.value!==-1/0&&(void 0===this.value||!isNaN(this.value))}},e.seriesMembers={colorKey:"value",axisTypes:["xAxis","yAxis","colorAxis"],parallelArrays:["x","y","value"],pointArrayMap:["value"],trackerGroups:["group","markerGroup","dataLabelsGroup"],colorAttribs:function(e){const t={};!ColorMapComposition_defined(e.color)||e.state&&"normal"!==e.state||(t[this.colorProp||"fill"]=e.color);return t},pointAttribs:columnProto.pointAttribs},e.compose=function(e){var t=e.prototype.pointClass;return ColorMapComposition_addEvent(t,"afterSetState",i),e}}(ColorMapComposition=ColorMapComposition||{}),ColorMapComposition),external_highcharts_src_js_default_Series_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default.Series;var CenteredUtilities,external_highcharts_src_js_default_Series_default=__webpack_require__.n(external_highcharts_src_js_default_Series_namespaceObject);const deg2rad=external_highcharts_src_js_default_default()["deg2rad"],{fireEvent,isNumber,pick:CenteredUtilities_pick,relativeLength}=external_highcharts_src_js_default_default(),Series_CenteredUtilities=(!function(e){e.getCenter=function(){var e=this.options,t=this.chart,i=2*(e.slicedOffset||0),r=t.plotWidth-2*i,s=t.plotHeight-2*i,a=e.center,o=Math.min(r,s),n=e.thickness;let l,h=e.size,p=e.innerSize||0,c,d;"string"==typeof h&&(h=parseFloat(h)),"string"==typeof p&&(p=parseFloat(p));const u=[CenteredUtilities_pick(a?.[0],"50%"),CenteredUtilities_pick(a?.[1],"50%"),CenteredUtilities_pick(h&&h<0?void 0:e.size,"100%"),CenteredUtilities_pick(p&&p<0?void 0:e.innerSize||0,"0%")];for(!t.angular||this instanceof external_highcharts_src_js_default_Series_default()||(u[3]=0),c=0;c<4;++c)d=u[c],l=c<2||2===c&&/%$/.test(d),u[c]=relativeLength(d,[r,s,o,u[2]][c])+(l?i:0);return u[3]>u[2]&&(u[3]=u[2]),isNumber(n)&&2*n<u[2]&&0<n&&(u[3]=u[2]-2*n),fireEvent(this,"afterGetCenter",{positions:u}),u},e.getStartAndEndRadians=function(e,t){return e=isNumber(e)?e:0,t=isNumber(t)&&e<t&&t-e<360?t:e+360,{start:deg2rad*(e+-90),end:deg2rad*(t+-90)}}}(CenteredUtilities=CenteredUtilities||{}),CenteredUtilities),external_highcharts_src_js_default_Chart_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default.Chart;var external_highcharts_src_js_default_Chart_default=__webpack_require__.n(external_highcharts_src_js_default_Chart_namespaceObject);const external_highcharts_src_js_default_SVGRenderer_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default.SVGRenderer;var external_highcharts_src_js_default_SVGRenderer_default=__webpack_require__.n(external_highcharts_src_js_default_SVGRenderer_namespaceObject);const getOptions=external_highcharts_src_js_default_default()["getOptions"],{isNumber:MapChart_isNumber,merge:MapChart_merge,pick:MapChart_pick}=external_highcharts_src_js_default_default();class MapChart extends external_highcharts_src_js_default_Chart_default(){init(e,t){var i=getOptions().credits,i=MapChart_merge({chart:{panning:{enabled:!0,type:"xy"},type:"map"},credits:{mapText:MapChart_pick(i.mapText,' Â© <a href="{geojson.copyrightUrl}">{geojson.copyrightShort}</a>'),mapTextFull:MapChart_pick(i.mapTextFull,"{geojson.copyright}")},mapView:{},tooltip:{followTouchMove:!1}},e);super.init(i,t)}mapZoom(e,t,i,r,s){this.mapView&&(MapChart_isNumber(e)&&(e=Math.log(e)/Math.log(.5)),this.mapView.zoomBy(e,MapChart_isNumber(t)&&MapChart_isNumber(i)?this.mapView.projection.inverse([t,i]):void 0,MapChart_isNumber(r)&&MapChart_isNumber(s)?[r,s]:void 0))}update(e){e.chart&&"map"in e.chart&&this.mapView?.recommendMapView(this,[e.chart.map,...(this.options.series||[]).map(e=>e.mapData)],!0),super.update.apply(this,arguments)}}!function(r){r.maps={},r.mapChart=function(e,t,i){return new r(e,t,i)},r.splitPath=function(e){let t;if("string"==typeof e){const i=(e=e.replace(/([A-Z])/gi," $1 ").replace(/^\s*/,"").replace(/\s*$/,"")).split(/[ ,;]+/);t=i.map(e=>/[A-Z]/i.test(e)?e:parseFloat(e))}else t=e;return external_highcharts_src_js_default_SVGRenderer_default().prototype.pathToSegments(t)}}(MapChart=MapChart||{});const Chart_MapChart=MapChart,boundsFromPath=function(e){let i=-Number.MAX_VALUE,r=Number.MAX_VALUE,s=-Number.MAX_VALUE,a=Number.MAX_VALUE,o;if(e.forEach(e=>{var t=e[e.length-2],e=e[e.length-1];"number"==typeof t&&"number"==typeof e&&(r=Math.min(r,t),i=Math.max(i,t),a=Math.min(a,e),s=Math.max(s,e),o=!0)}),o)return{x1:r,y1:a,x2:i,y2:s}},MapUtilities={boundsFromPath:boundsFromPath},Maps_MapUtilities=MapUtilities,MapPoint_boundsFromPath=Maps_MapUtilities["boundsFromPath"],ScatterPoint=external_highcharts_src_js_default_SeriesRegistry_default().seriesTypes.scatter.prototype.pointClass,{extend:MapPoint_extend,isNumber:MapPoint_isNumber,pick:MapPoint_pick}=external_highcharts_src_js_default_default();class MapPoint extends ScatterPoint{static getProjectedPath(e,t){return e.projectedPath||(t&&e.geometry?(t.hasCoordinates=!0,e.projectedPath=t.path(e.geometry)):e.projectedPath=e.path),e.projectedPath||[]}applyOptions(e,t){const i=this.series,r=super.applyOptions(e,t),s=i.joinBy;return i.mapData&&i.mapMap&&(e=s[1],(e=void 0!==(t=super.getNestedProperty(e))&&i.mapMap[t])?MapPoint_extend(r,{...e,name:r.name??e.name}):-1!==i.pointArrayMap.indexOf("value")&&(r.value=r.value||null)),r}getProjectedBounds(e){const t=MapPoint.getProjectedPath(this,e),i=MapPoint_boundsFromPath(t),r=this.properties,s=this.series.chart.mapView;if(i){var a=r?.["hc-middle-lon"],o=r?.["hc-middle-lat"];if(s&&MapPoint_isNumber(a)&&MapPoint_isNumber(o)){e=e.forward([a,o]);i.midX=e[0],i.midY=e[1]}else{a=r?.["hc-middle-x"],o=r?.["hc-middle-y"];i.midX=i.x1+(i.x2-i.x1)*MapPoint_pick(this.middleX,MapPoint_isNumber(a)?a:.5);let e=MapPoint_pick(this.middleY,MapPoint_isNumber(o)?o:.5);this.geometry||(e=1-e),i.midY=i.y2-(i.y2-i.y1)*e}return i}}onMouseOver(e){external_highcharts_src_js_default_default().clearTimeout(this.colorInterval),!this.isNull&&this.visible||this.series.options.nullInteraction?super.onMouseOver.call(this,e):this.series.onMouseOut()}setVisible(e){var t=e?"show":"hide";this.visible=this.options.visible=!!e,this.dataLabel&&this.dataLabel[t](),this.graphic&&this.graphic.attr(this.series.pointAttribs(this))}zoomTo(e){const t=this,i=t.series.chart,r=i.mapView;let s=t.bounds;if(r&&s){const n=MapPoint_isNumber(t.insetIndex)&&r.insets[t.insetIndex];var a,o;n&&(a=n.projectedUnitsToPixels({x:s.x1,y:s.y1}),o=n.projectedUnitsToPixels({x:s.x2,y:s.y2}),a=r.pixelsToProjectedUnits({x:a.x,y:a.y}),o=r.pixelsToProjectedUnits({x:o.x,y:o.y}),s={x1:a.x,y1:a.y,x2:o.x,y2:o.y}),r.fitToBounds(s,void 0,!1),t.series.isDirty=!0,i.redraw(e)}}}MapPoint_extend(MapPoint.prototype,{dataLabelOnNull:Series_ColorMapComposition.pointMembers.dataLabelOnNull,moveToTopOnHover:Series_ColorMapComposition.pointMembers.moveToTopOnHover,isValid:Series_ColorMapComposition.pointMembers.isValid});const Map_MapPoint=MapPoint,MapSeriesDefaults_isNumber=external_highcharts_src_js_default_default()["isNumber"],MapSeriesDefaults={affectsMapView:!0,animation:!1,dataLabels:{crop:!1,formatter:function(){const e=this.series.chart["numberFormatter"];var t=this.point["value"];return MapSeriesDefaults_isNumber(t)?e(t,-1):this.point.name||""},inside:!0,overflow:!1,padding:0,verticalAlign:"middle"},linecap:"round",marker:null,nullColor:"#f7f7f7",stickyTracking:!1,tooltip:{followPointer:!0,pointFormat:"{point.name}: {point.value}<br/>"},turboThreshold:0,allAreas:!0,borderColor:"#e6e6e6",borderWidth:1,joinBy:"hc-key",states:{hover:{halo:void 0,borderColor:"#666666",borderWidth:2},normal:{animation:!0},select:{color:"#cccccc"}},legendSymbol:"rectangle"},Map_MapSeriesDefaults=MapSeriesDefaults,MapViewDefaults={center:[0,0],fitToGeometry:void 0,maxZoom:void 0,padding:0,projection:{name:void 0,parallels:void 0,rotation:void 0},zoom:void 0,insetOptions:{borderColor:"#cccccc",borderWidth:1,padding:"10%",relativeTo:"mapBoundingBox",units:"percent"}},Maps_MapViewDefaults=MapViewDefaults,external_highcharts_src_js_default_Templating_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default.Templating;var GeoJSONComposition,GeometryUtilities,external_highcharts_src_js_default_Templating_default=__webpack_require__.n(external_highcharts_src_js_default_Templating_namespaceObject);const win=external_highcharts_src_js_default_default()["win"],format=external_highcharts_src_js_default_Templating_default()["format"],{error,extend:GeoJSONComposition_extend,merge:GeoJSONComposition_merge,wrap:GeoJSONComposition_wrap}=external_highcharts_src_js_default_default(),Maps_GeoJSONComposition=(!function(e){function i(e){return this.mapView&&this.mapView.lonLatToProjectedUnits(e)}function r(e){return this.mapView&&this.mapView.projectedUnitsToLonLat(e)}function s(e,t){const i=this.options.chart.proj4||win.proj4;var r,s,a,o,n,l,h,p,c,d;{if(i)return{jsonmarginX:r=0,jsonmarginY:s=0,jsonres:a=1,scale:o=1,xoffset:n=0,xpan:l=0,yoffset:h=0,ypan:p=0}=t,e=i(t.crs,[e.lon,e.lat]),c=t.cosAngle||t.rotation&&Math.cos(t.rotation),d=t.sinAngle||t.rotation&&Math.sin(t.rotation),{x:(((t=t.rotation?[e[0]*c+e[1]*d,-e[0]*d+e[1]*c]:e)[0]-n)*o+l)*a+r,y:-(((h-t[1])*o+p)*a-s)};error(21,!1,this)}}function a(e,t){const i=this.options.chart.proj4||win.proj4;var r,s,a,o,n,l,h,p;if(i){if(null!==e.y)return{jsonmarginX:l=0,jsonmarginY:r=0,jsonres:s=1,scale:a=1,xoffset:p=0,xpan:h=0,yoffset:o=0,ypan:n=0}=t,l={x:((e.x-l)/s-h)/a+p,y:((e.y-r)/s+n)/a+o},h=t.cosAngle||t.rotation&&Math.cos(t.rotation),p=t.sinAngle||t.rotation&&Math.sin(t.rotation),{lat:(e=i(t.crs,"WGS84",t.rotation?{x:l.x*h+l.y*-p,y:l.x*p+l.y*h}:l)).y,lon:e.x}}else error(21,!1,this)}function h(e,t){t=t||Object.keys(e.objects)[0];const i=e.objects[t];if(i["hc-decoded-geojson"]&&i["hc-decoded-geojson"].title===e.title)return i["hc-decoded-geojson"];let a=e.arcs;if(e.transform){var o=e.arcs,{scale:n,translate:l}=e.transform;let i,r,s;a=[];for(let e=0,t=o.length;e<t;++e){var h=o[e];a.push(i=[]),r=0;for(let e=s=0,t=h.length;e<t;++e)i.push([(r+=h[e][0])*n[0]+l[0],(s+=h[e][1])*n[1]+l[1]])}}const r=e=>"number"==typeof e[0]?e.reduce((e,t,i)=>{let r=t<0?a[~t]:a[t];return t<0?(r=r.slice(0,0===i?r.length:r.length-1)).reverse():i&&(r=r.slice(1)),e.concat(r)},[]):e.map(r),s=i.geometries,p=[];for(let e=0,t=s.length;e<t;++e)p.push({type:"Feature",properties:s[e].properties,geometry:{type:s[e].type,coordinates:s[e].coordinates||r(s[e].arcs)}});t={type:"FeatureCollection",copyright:e.copyright,copyrightShort:e.copyrightShort,copyrightUrl:e.copyrightUrl,features:p,"hc-recommended-mapview":i["hc-recommended-mapview"],bbox:e.bbox,title:e.title};return i["hc-decoded-geojson"]=t}function o(e,t){t=GeoJSONComposition_merge(!0,this.options.credits,t),e.call(this,t),this.credits&&this.mapCreditsFull&&this.credits.attr({title:this.mapCreditsFull})}e.compose=function(e){const t=e.prototype;t.transformFromLatLon||(t.fromLatLonToPoint=i,t.fromPointToLatLon=r,t.transformFromLatLon=s,t.transformToLatLon=a,GeoJSONComposition_wrap(t,"addCredits",o))},e.geojson=function(e,i="map",t){const r=[];var s=(e="Topology"===e.type?h(e):e).features;for(let t=0,e=s.length;t<e;++t){var a,o=s[t],n=o.geometry||{},l=n.type,n=n.coordinates,o=o.properties;let e;("map"!==i&&"mapbubble"!==i||"Polygon"!==l&&"MultiPolygon"!==l)&&("mapline"!==i||"LineString"!==l&&"MultiLineString"!==l)?"mappoint"===i&&"Point"===l&&n.length&&(e={geometry:{coordinates:n,type:l}}):n.length&&(e={geometry:{coordinates:n,type:l}}),e&&(n=o&&(o.name||o.NAME),l=o&&o.lon,a=o&&o.lat,r.push(GeoJSONComposition_extend(e,{lat:"number"==typeof a?a:void 0,lon:"number"==typeof l?l:void 0,name:"string"==typeof n?n:void 0,properties:o})))}return t&&e.copyrightShort&&(t.chart.mapCredits=format(t.chart.options.credits?.mapText,{geojson:e}),t.chart.mapCreditsFull=format(t.chart.options.credits?.mapTextFull,{geojson:e})),r},e.topo2geo=h}(GeoJSONComposition=GeoJSONComposition||{}),GeoJSONComposition),Geometry_GeometryUtilities=(!function(e){e.getCenterOfPoints=function(e){var t=e.reduce((e,t)=>(e.x+=t.x,e.y+=t.y,e),{x:0,y:0});return{x:t.x/e.length,y:t.y/e.length}},e.getDistanceBetweenPoints=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},e.getAngleBetweenPoints=function(e,t){return Math.atan2(t.x-e.x,t.y-e.y)},e.pointInPolygon=function({x:e,y:t},i){var r=i.length;let s,a,o=!1;for(s=0,a=r-1;s<r;a=s++){var[n,l]=i[s],[h,p]=i[a];t<l!=t<p&&e<(h-n)*(t-l)/(p-l)+n&&(o=!o)}return o}}(GeometryUtilities=GeometryUtilities||{}),GeometryUtilities);function clipLineString(e,t){const i=[],r=clipPolygon(e,t,!1);for(let e=1;e<r.length;e++)r[e].isIntersection&&r[e-1].isIntersection&&(i.push(r.splice(0,e)),e=0),e===r.length-1&&i.push(r);return i}function clipPolygon(e,t,i=!0){let r=t[t.length-1],s,a,o,n=e;for(let e=0;e<t.length;e++){var l=n;s=t[e],n=[],a=i?l[l.length-1]:l[0];for(let e=0;e<l.length;e++)o=l[e],isInside(r,s,o)?(isInside(r,s,a)||n.push(intersection(r,s,a,o)),n.push(o)):isInside(r,s,a)&&n.push(intersection(r,s,a,o)),a=o;r=s}return n}function isInside(e,t,i){return(t[0]-e[0])*(i[1]-e[1])>(t[1]-e[1])*(i[0]-e[0])}function intersection(e,t,i,r){const s=[e[0]-t[0],e[1]-t[1]],a=[i[0]-r[0],i[1]-r[1]],o=e[0]*t[1]-e[1]*t[0],n=i[0]*r[1]-i[1]*r[0],l=1/(s[0]*a[1]-s[1]*a[0]),h=[(o*a[0]-n*s[0])*l,(o*a[1]-n*s[1])*l];return h.isIntersection=!0,h}const PolygonClip={clipLineString:clipLineString,clipPolygon:clipPolygon},Geometry_PolygonClip=PolygonClip,sign=Math.sign||(e=>0===e?0:0<e?1:-1),scale=63.78137,LambertConformalConic_deg2rad=Math.PI/180,halfPI=Math.PI/2,eps10=1e-6,tany=e=>Math.tan((halfPI+e)/2);class LambertConformalConic{constructor(e){var t=(e.parallels||[]).map(e=>e*LambertConformalConic_deg2rad),i=t[0]||0,t=t[1]??i,r=Math.cos(i);"object"==typeof e.projectedBounds&&(this.projectedBounds=e.projectedBounds);let s=i===t?Math.sin(i):Math.log(r/Math.cos(t))/Math.log(tany(t)/tany(i));Math.abs(s)<1e-10&&(s=1e-10*(sign(s)||1)),this.n=s,this.c=r*Math.pow(tany(i),s)/s}forward(e){var{c:t,n:i,projectedBounds:r}=this,s=e[0]*LambertConformalConic_deg2rad;let a=e[1]*LambertConformalConic_deg2rad;0<t?a<-halfPI+eps10&&(a=-halfPI+eps10):a>halfPI-eps10&&(a=halfPI-eps10);const o=t/Math.pow(tany(a),i),n=o*Math.sin(i*s)*scale,l=(t-o*Math.cos(i*s))*scale,h=[n,l];return r&&(n<r.x1||n>r.x2||l<r.y1||l>r.y2)&&(h.outside=!0),h}inverse(e){var{c:t,n:i}=this,r=e[0]/scale,e=t-e[1]/scale,s=sign(i)*Math.sqrt(r*r+e*e);let a=Math.atan2(r,Math.abs(e))*sign(e);return e*i<0&&(a-=Math.PI*sign(r)*sign(e)),[a/i/LambertConformalConic_deg2rad,(2*Math.atan(Math.pow(t/s,1/i))-halfPI)/LambertConformalConic_deg2rad]}}const Projections_LambertConformalConic=LambertConformalConic,A1=1.340264,A2=-.081106,A3=893e-6,A4=.003796,M=Math.sqrt(3)/2,EqualEarth_scale=74.03120656864502;class EqualEarth{constructor(){this.bounds={x1:-200.37508342789243,x2:200.37508342789243,y1:-97.52595454902263,y2:97.52595454902263}}forward(e){var t=Math.PI/180,i=Math.asin(M*Math.sin(e[1]*t)),r=i*i,s=r*r*r;return[e[0]*t*Math.cos(i)*EqualEarth_scale/(M*(A1+3*A2*r+s*(7*A3+9*A4*r))),i*EqualEarth_scale*(A1+A2*r+s*(A3+A4*r))]}inverse(e){var t=e[0]/EqualEarth_scale,i=e[1]/EqualEarth_scale,e=180/Math.PI;let r=i,s,a,o,n,l;for(let e=0;e<12&&(s=r*r,a=s*s*s,o=r*(A1+A2*s+a*(A3+A4*s))-i,n=A1+3*A2*s+a*(7*A3+9*A4*s),r-=l=o/n,!(Math.abs(l)<1e-9));++e);s=r*r,a=s*s*s;t=e*M*t*(A1+3*A2*s+a*(7*A3+9*A4*s))/Math.cos(r),e*=Math.asin(Math.sin(r)/M);return 180<Math.abs(t)?[NaN,NaN]:[t,e]}}const Projections_EqualEarth=EqualEarth,quarterPI=Math.PI/4,Miller_deg2rad=Math.PI/180,Miller_scale=63.78137;class Miller{constructor(){this.bounds={x1:-200.37508342789243,x2:200.37508342789243,y1:-146.91480769173063,y2:146.91480769173063}}forward(e){return[e[0]*Miller_deg2rad*Miller_scale,1.25*Miller_scale*Math.log(Math.tan(quarterPI+.4*e[1]*Miller_deg2rad))]}inverse(e){return[e[0]/Miller_scale/Miller_deg2rad,2.5*(Math.atan(Math.exp(e[1]/Miller_scale*.8))-quarterPI)/Miller_deg2rad]}}const Projections_Miller=Miller,Orthographic_deg2rad=Math.PI/180,Orthographic_scale=63.78460826781007;class Orthographic{constructor(){this.antimeridianCutting=!1,this.bounds={x1:-Orthographic_scale,x2:Orthographic_scale,y1:-Orthographic_scale,y2:Orthographic_scale}}forward(e){const t=e[0],i=e[1],r=i*Orthographic_deg2rad,s=[Math.cos(r)*Math.sin(t*Orthographic_deg2rad)*Orthographic_scale,Math.sin(r)*Orthographic_scale];return(t<-90||90<t)&&(s.outside=!0),s}inverse(e){var t=e[0]/Orthographic_scale,e=e[1]/Orthographic_scale,i=Math.sqrt(t*t+e*e),r=Math.asin(i),s=Math.sin(r),r=Math.cos(r);return[Math.atan2(t*s,i*r)/Orthographic_deg2rad,Math.asin(i&&e*s/i)/Orthographic_deg2rad]}}const Projections_Orthographic=Orthographic,r=63.78137,WebMercator_deg2rad=Math.PI/180;class WebMercator{constructor(){this.bounds={x1:-200.37508342789243,x2:200.37508342789243,y1:-200.3750834278071,y2:200.3750834278071},this.maxLatitude=85.0511287798}forward(e){const t=Math.sin(e[1]*WebMercator_deg2rad),i=[r*e[0]*WebMercator_deg2rad,r*Math.log((1+t)/(1-t))/2];return Math.abs(e[1])>this.maxLatitude&&(i.outside=!0),i}inverse(e){return[e[0]/(r*WebMercator_deg2rad),(2*Math.atan(Math.exp(e[1]/r))-Math.PI/2)/WebMercator_deg2rad]}}const Projections_WebMercator=WebMercator,projectionRegistry={EqualEarth:Projections_EqualEarth,LambertConformalConic:Projections_LambertConformalConic,Miller:Projections_Miller,Orthographic:Projections_Orthographic,WebMercator:Projections_WebMercator},ProjectionRegistry=projectionRegistry,{clipLineString:Projection_clipLineString,clipPolygon:Projection_clipPolygon}=Geometry_PolygonClip,{clamp,erase}=external_highcharts_src_js_default_default(),Projection_deg2rad=2*Math.PI/360,floatCorrection=1e-6,wrapLon=e=>(e<-180&&(e+=360),180<e&&(e-=360),e),hav=e=>(1-Math.cos(e))/2,havFromCoords=(e,t)=>{const i=Math.cos,r=e[1]*Projection_deg2rad,s=e[0]*Projection_deg2rad,a=t[1]*Projection_deg2rad,o=t[0]*Projection_deg2rad,n=a-r,l=o-s,h=hav(n)+i(r)*i(a)*hav(l);return h};class Projection{static add(e,t){Projection.registry[e]=t}static distance(e,t){const{atan2:i,sqrt:r}=Math,s=havFromCoords(e,t),a=2*i(r(s),r(1-s)),o=6371e3*a;return o}static geodesic(e,t,i,r=5e5){const{atan2:s,cos:a,sin:o,sqrt:n}=Math,l=Projection.distance,h=e[1]*Projection_deg2rad,p=e[0]*Projection_deg2rad,c=t[1]*Projection_deg2rad,d=t[0]*Projection_deg2rad,u=a(h)*a(p),_=a(c)*a(d),m=a(h)*o(p),g=a(c)*o(d),b=o(h),f=o(c),M=l(e,t),y=M/6371e3,x=o(y),S=Math.round(M/r),v=[];if(i&&v.push(e),1<S){var P=1/S;for(let e=P;e<.999;e+=P){var w=o((1-e)*y)/x,j=o(e*y)/x,C=w*u+j*_,B=w*m+j*g,w=s(w*b+j*f,n(C*C+B*B)),j=s(B,C);v.push([j/Projection_deg2rad,w/Projection_deg2rad])}}return i&&v.push(t),v}static insertGeodesics(e){let t=e.length-1;for(;t--;){var i;10<Math.max(Math.abs(e[t][0]-e[t+1][0]),Math.abs(e[t][1]-e[t+1][1]))&&((i=Projection.geodesic(e[t],e[t+1])).length&&e.splice(t+1,0,...i))}}static toString(e){const{name:t,rotation:i}=e||{};return[t,i&&i.join(",")].join(";")}constructor(e={}){this.hasCoordinates=!1,this.hasGeoProjection=!1,this.maxLatitude=90;var{name:t,projectedBounds:i,rotation:r}=this.options=e;this.rotator=r?this.getRotator(r):void 0;const s=t?Projection.registry[t]:void 0,{def:a,rotator:o}=(s&&(this.def=new s(e)),this);a&&(this.maxLatitude=a.maxLatitude||90,this.hasGeoProjection=!0),o&&a?(this.forward=e=>a.forward(o.forward(e)),this.inverse=e=>o.inverse(a.inverse(e))):a?(this.forward=e=>a.forward(e),this.inverse=e=>a.inverse(e)):o&&(this.forward=o.forward,this.inverse=o.inverse),this.bounds="world"===i?a&&a.bounds:i}lineIntersectsBounds(e){var{x1:t,x2:i,y1:r,y2:s}=this.bounds||{},a=(e,t,i)=>{var r,[e,s]=e,a=t?0:1;if("number"==typeof i&&e[t]>=i!=s[t]>=i)return r=(i-e[t])/(s[t]-e[t]),r=e[a]+r*(s[a]-e[a]),t?[r,i]:[i,r]};let o,n=e[0];return((o=a(e,0,t))||(o=a(e,0,i)))&&(n=o,e[1]=o),n=(o=a(e,1,r))||(o=a(e,1,s))?o:n}getRotator(e){const s=e[0]*Projection_deg2rad,t=(e[1]||0)*Projection_deg2rad,i=(e[2]||0)*Projection_deg2rad,a=Math.cos(t),o=Math.sin(t),n=Math.cos(i),l=Math.sin(i);if(0!=s||0!=t||0!=i)return{forward:e=>{var t=e[0]*Projection_deg2rad+s,e=e[1]*Projection_deg2rad,i=Math.cos(e),r=Math.cos(t)*i,t=Math.sin(t)*i,i=Math.sin(e),e=i*a+r*o;return[Math.atan2(t*n-e*l,r*a-i*o)/Projection_deg2rad,Math.asin(e*n+t*l)/Projection_deg2rad]},inverse:e=>{var t=e[0]*Projection_deg2rad,e=e[1]*Projection_deg2rad,i=Math.cos(e),r=Math.cos(t)*i,t=Math.sin(t)*i,i=Math.sin(e),e=i*n-t*l;return[(Math.atan2(t*n+i*l,r*a+e*o)-s)/Projection_deg2rad,Math.asin(e*a-r*o)/Projection_deg2rad]}}}forward(e){return e}inverse(e){return e}cutOnAntimeridian(i,r){const s=[],t=[i];for(let t=0,e=i.length;t<e;++t){var a=i[t];let e=i[t-1];if(!t){if(!r)continue;e=i[i.length-1]}var o=e[0],n=a[0];(o<-90||90<o)&&(n<-90||90<n)&&0<o!=0<n&&(n=clamp((180-(o+360)%360)/((n+360)%360-(o+360)%360),0,1),n=e[1]+n*(a[1]-e[1]),s.push({i:t,lat:n,direction:o<0?1:-1,previousLonLat:e,lonLat:a}))}let l;if(s.length)if(r){s.length%2==1&&(l=s.slice().sort((e,t)=>Math.abs(t.lat)-Math.abs(e.lat))[0],erase(s,l));let e=s.length-2;for(;0<=e;){var h=s[e].i,p=wrapLon(180+s[e].direction*floatCorrection),c=wrapLon(180-s[e].direction*floatCorrection);const g=i.splice(h,s[e+1].i-h,...Projection.geodesic([p,s[e].lat],[p,s[e+1].lat],!0));g.push(...Projection.geodesic([c,s[e+1].lat],[c,s[e].lat],!0)),t.push(g),e-=2}if(l)for(let e=0;e<t.length;e++){const{direction:b,lat:f}=l,i=t[e],M=i.indexOf(l.lonLat);if(-1<M){var d=(f<0?-1:1)*this.maxLatitude,u=wrapLon(180+b*floatCorrection),_=wrapLon(180-b*floatCorrection);const y=Projection.geodesic([u,f],[u,d],!0);for(let e=u+120*b;-180<e&&e<180;e+=120*b)y.push([e,d]);y.push(...Projection.geodesic([_,d],[_,l.lat],!0)),i.splice(M,0,...y);break}}}else{let e=s.length;for(;e--;){var m=s[e].i;const x=i.splice(m,i.length,[wrapLon(180+s[e].direction*floatCorrection),s[e].lat]);x.unshift([wrapLon(180-s[e].direction*floatCorrection),s[e].lat]),t.push(x)}}return t}path(e){const{bounds:u,def:t,rotator:i}=this,_=[],m="Polygon"===e.type||"MultiPolygon"===e.type,g=this.hasGeoProjection,b=!t||!1!==t.antimeridianCutting,r=b?i:void 0,f=b&&t||this;let M;u&&(M=[[u.x1,u.y1],[u.x2,u.y1],[u.x2,u.y2],[u.x1,u.y2]]);const s=e=>{e=e.map(t=>{if(b){let e=(t=r?r.forward(t):t)[0];t=[e=Math.abs(e-180)<floatCorrection?e<180?180-floatCorrection:180+floatCorrection:e,t[1]]}return t});let t=[e];g&&(Projection.insertGeodesics(e),b&&(t=this.cutOnAntimeridian(e,m))),t.forEach(l=>{if(!(l.length<2)){let t=!1,i,r,s=!1;const c=e=>{t?_.push(["L",e[0],e[1]]):(_.push(["M",e[0],e[1]]),t=!0)};let a=!1,o=!1,n=l.map(e=>{const t=f.forward(e);return t.outside?a=!0:o=!0,t[1]===1/0?t[1]=1e10:t[1]===-1/0&&(t[1]=-1e10),t});if(b){if(m&&n.push(n[0]),a){if(!o)return;if(M)if(m)n=Projection_clipPolygon(n,M);else if(u)return void Projection_clipLineString(n,M).forEach(e=>{t=!1,e.forEach(c)})}n.forEach(c)}else for(let e=0;e<n.length;e++){var h=l[e],p=n[e];if(p.outside)s=!0;else{if(m&&!i&&(i=h,l.push(h),n.push(p)),s&&r)if(m&&g){const d=Projection.geodesic(r,h);d.forEach(e=>c(f.forward(e)))}else t=!1;c(p),r=h,s=!1}}}})};return"LineString"===e.type?s(e.coordinates):"MultiLineString"===e.type?e.coordinates.forEach(e=>s(e)):"Polygon"===e.type?(e.coordinates.forEach(e=>s(e)),_.length&&_.push(["Z"])):"MultiPolygon"===e.type&&(e.coordinates.forEach(e=>{e.forEach(e=>s(e))}),_.length&&_.push(["Z"])),_}}Projection.registry=ProjectionRegistry;const Maps_Projection=Projection,MapView_composed=external_highcharts_src_js_default_default()["composed"],pointInPolygon=Geometry_GeometryUtilities["pointInPolygon"],topo2geo=Maps_GeoJSONComposition["topo2geo"],MapView_boundsFromPath=Maps_MapUtilities["boundsFromPath"],{addEvent:MapView_addEvent,clamp:MapView_clamp,crisp,fireEvent:MapView_fireEvent,isArray,isNumber:MapView_isNumber,isObject,isString,merge:MapView_merge,pick:MapView_pick,pushUnique:MapView_pushUnique,relativeLength:MapView_relativeLength}=external_highcharts_src_js_default_default(),tileSize=256,worldSize=400.979322;let maps={};function zoomFromBounds(e,t){var{width:t,height:i}=t,t=Math.max((e.x2-e.x1)/(t/tileSize),(e.y2-e.y1)/(i/tileSize));return Math.log(worldSize/t)/Math.log(2)}function recommendedMapViewAfterDrill(e){e.seriesOptions.mapData&&this.mapView?.recommendMapView(this,[this.options.chart.map,e.seriesOptions.mapData],this.options.drilldown?.mapZooming)}class MapView{static compose(e){MapView_pushUnique(MapView_composed,"MapView")&&(maps=e.maps,MapView_addEvent(e,"afterInit",function(){this.mapView=new MapView(this,this.options.mapView)},{order:0}),MapView_addEvent(e,"addSeriesAsDrilldown",recommendedMapViewAfterDrill),MapView_addEvent(e,"afterDrillUp",recommendedMapViewAfterDrill))}static compositeBounds(e){if(e.length)return e.slice(1).reduce((e,t)=>(e.x1=Math.min(e.x1,t.x1),e.y1=Math.min(e.y1,t.y1),e.x2=Math.max(e.x2,t.x2),e.y2=Math.max(e.y2,t.y2),e),MapView_merge(e[0]))}static mergeInsets(e,t){var i=e=>{const i={};return e.forEach((e,t)=>{i[e&&e.id||"i"+t]=e}),i};const r=MapView_merge(i(e),i(t)),s=Object.keys(r).map(e=>r[e]);return s}constructor(e,t){this.allowTransformAnimation=!0,this.eventsToUnbind=[],this.insets=[],this.padding=[0,0,0,0],this.recommendedMapView={},this instanceof MapViewInset||this.recommendMapView(e,[e.options.chart.map,...(e.options.series||[]).map(e=>e.mapData)]),this.userOptions=t||{};const i=MapView_merge(Maps_MapViewDefaults,this.recommendedMapView,t);var r=this.recommendedMapView?.insets,t=t&&t.insets;r&&t&&(i.insets=MapView.mergeInsets(r,t)),this.chart=e,this.center=i.center,this.options=i,this.projection=new Maps_Projection(i.projection),this.playingField=e.plotBox,this.zoom=i.zoom||0,this.minZoom=i.minZoom,this.createInsets(),this.eventsToUnbind.push(MapView_addEvent(e,"afterSetChartSize",()=>{this.playingField=this.getField(),void 0!==this.minZoom&&this.minZoom!==this.zoom||(this.fitToBounds(void 0,void 0,!1),!this.chart.hasRendered&&MapView_isNumber(this.userOptions.zoom)&&(this.zoom=this.userOptions.zoom),this.userOptions.center&&MapView_merge(!0,this.center,this.userOptions.center))})),this.setUpEvents()}createInsets(){const t=this.options,e=t.insets;e&&e.forEach(e=>{e=new MapViewInset(this,MapView_merge(t.insetOptions,e));this.insets.push(e)})}fitToBounds(e,t,i=!0,r){var s,a=e||this.getProjectedBounds();a&&(t=MapView_pick(t,e?0:this.options.padding),s=this.getField(!1),t=isArray(t)?t:[t,t,t,t],this.padding=[MapView_relativeLength(t[0],s.height),MapView_relativeLength(t[1],s.width),MapView_relativeLength(t[2],s.height),MapView_relativeLength(t[3],s.width)],this.playingField=this.getField(),t=zoomFromBounds(a,this.playingField),e||(this.minZoom=t),s=this.projection.inverse([(a.x2+a.x1)/2,(a.y2+a.y1)/2]),this.setView(s,t,i,r))}getField(e=!0){e=e?this.padding:[0,0,0,0];return{x:e[3],y:e[0],width:this.chart.plotWidth-e[1]-e[3],height:this.chart.plotHeight-e[0]-e[2]}}getGeoMap(e){return isString(e)?maps[e]&&"Topology"===maps[e].type?topo2geo(maps[e]):maps[e]:isObject(e,!0)?"FeatureCollection"===e.type?e:"Topology"===e.type?topo2geo(e):void 0:void 0}getMapBBox(){var e,t,i=this.getProjectedBounds(),r=this.getScale();if(i)return e=this.padding,t=this.projectedUnitsToPixels({x:i.x1,y:i.y2}),{width:(i.x2-i.x1)*r+e[1]+e[3],height:(i.y2-i.y1)*r+e[0]+e[2],x:t.x-e[3],y:t.y-e[0]}}getProjectedBounds(){const t=this.projection;var e=this.chart.series.reduce((e,t)=>{var i=t.getProjectedBounds&&t.getProjectedBounds();return i&&!1!==t.options.affectsMapView&&e.push(i),e},[]);const i=this.options.fitToGeometry;if(i){if(!this.fitToGeometryCache)if("MultiPoint"===i.type){const r=i.coordinates.map(e=>t.forward(e)),s=r.map(e=>e[0]),a=r.map(e=>e[1]);this.fitToGeometryCache={x1:Math.min.apply(0,s),x2:Math.max.apply(0,s),y1:Math.min.apply(0,a),y2:Math.max.apply(0,a)}}else this.fitToGeometryCache=MapView_boundsFromPath(t.path(i));return this.fitToGeometryCache}return this.projection.bounds||MapView.compositeBounds(e)}getScale(){return tileSize/worldSize*Math.pow(2,this.zoom)}getSVGTransform(){var{x:e,y:t,width:i,height:r}=this.playingField,s=this.projection.forward(this.center),a=this.projection.hasCoordinates?-1:1,o=this.getScale(),a=o*a;return{scaleX:o,scaleY:a,translateX:e+i/2-s[0]*o,translateY:t+r/2-s[1]*a}}lonLatToPixels(e){e=this.lonLatToProjectedUnits(e);if(e)return this.projectedUnitsToPixels(e)}lonLatToProjectedUnits(e){const t=this.chart,i=t.mapTransforms;if(i){for(const o in i)if(Object.hasOwnProperty.call(i,o)&&i[o].hitZone){var r=t.transformFromLatLon(e,i[o]);if(r&&pointInPolygon(r,i[o].hitZone.coordinates[0]))return r}return t.transformFromLatLon(e,i.default)}for(const n of this.insets){var s;if(n.options.geoBounds&&pointInPolygon({x:e.lon,y:e.lat},n.options.geoBounds.coordinates[0]))return s=n.projection.forward([e.lon,e.lat]),s=n.projectedUnitsToPixels({x:s[0],y:s[1]}),this.pixelsToProjectedUnits(s)}var a=this.projection.forward([e.lon,e.lat]);if(!a.outside)return{x:a[0],y:a[1]}}projectedUnitsToLonLat(e){const t=this.chart,i=t.mapTransforms;if(i){for(const a in i)if(Object.hasOwnProperty.call(i,a)&&i[a].hitZone&&pointInPolygon(e,i[a].hitZone.coordinates[0]))return t.transformToLatLon(e,i[a]);return t.transformToLatLon(e,i.default)}var r=this.projectedUnitsToPixels(e);for(const o of this.insets)if(o.hitZone&&pointInPolygon(r,o.hitZone.coordinates[0])){const n=o.pixelsToProjectedUnits(r),s=o.projection.inverse([n.x,n.y]);return{lon:s[0],lat:s[1]}}const s=this.projection.inverse([e.x,e.y]);return{lon:s[0],lat:s[1]}}recommendMapView(e,t,i=!1){this.recommendedMapView={};const r=t.map(e=>this.getGeoMap(e)),s=[],a=(r.forEach(e=>{var t,i,r;e&&(Object.keys(this.recommendedMapView).length||(this.recommendedMapView=e["hc-recommended-mapview"]||{}),e.bbox&&([e,t,i,r]=e.bbox,s.push({x1:e,y1:t,x2:i,y2:r})))}),s.length&&MapView.compositeBounds(s));MapView_fireEvent(this,"onRecommendMapView",{geoBounds:a,chart:e},function(){var e,t,i,r;a&&this.recommendedMapView&&(this.recommendedMapView.projection||({x1:e,y1:t,x2:i,y2:r}=a,this.recommendedMapView.projection=180<i-e&&90<r-t?{name:"EqualEarth",parallels:[0,0],rotation:[0]}:{name:"LambertConformalConic",parallels:[t,r],rotation:[-(e+i)/2]}),this.recommendedMapView.insets||(this.recommendedMapView.insets=void 0))}),this.geoMap=r[0],i&&e.hasRendered&&!e.userOptions.mapView?.projection&&this.recommendedMapView&&this.update(this.recommendedMapView)}redraw(e){this.chart.series.forEach(e=>{e.useMapGeometry&&(e.isDirty=!0)}),this.chart.redraw(e)}setView(e,t,i=!0,r){e&&(this.center=e),"number"==typeof t&&("number"==typeof this.minZoom&&(t=Math.max(t,this.minZoom)),"number"==typeof this.options.maxZoom&&(t=Math.min(t,this.options.maxZoom)),MapView_isNumber(t)&&(this.zoom=t));var s,a,e=this.getProjectedBounds();if(e){const o=this.projection.forward(this.center),{x:n,y:l,width:h,height:p}=this.playingField,c=this.getScale(),d=this.projectedUnitsToPixels({x:e.x1,y:e.y1}),u=this.projectedUnitsToPixels({x:e.x2,y:e.y2}),_=[(e.x1+e.x2)/2,(e.y1+e.y2)/2],m=this.chart.series.some(e=>e.isDrilling);m||(t=d.x,e=u.y,s=u.x,a=d.y,s-t<h?o[0]=_[0]:t<n&&s<n+h?o[0]+=Math.max(t-n,s-h-n)/c:n+h<s&&n<t&&(o[0]+=Math.min(s-h-n,t-n)/c),a-e<p?o[1]=_[1]:e<l&&a<l+p?o[1]-=Math.max(e-l,a-p-l)/c:l+p<a&&l<e&&(o[1]-=Math.min(a-p-l,e-l)/c),this.center=this.projection.inverse(o)),this.insets.forEach(e=>{e.options.field&&(e.hitZone=e.getHitZone(),e.playingField=e.getField())}),this.render()}MapView_fireEvent(this,"afterSetView"),i&&this.redraw(r)}projectedUnitsToPixels(e){var t=this.getScale(),i=this.projection.forward(this.center),r=this.playingField,s=r.x+r.width/2,r=r.y+r.height/2;return{x:s-t*(i[0]-e.x),y:r+t*(i[1]-e.y)}}pixelsToLonLat(e){return this.projectedUnitsToLonLat(this.pixelsToProjectedUnits(e))}pixelsToProjectedUnits(e){var{x:e,y:t}=e,i=this.getScale(),r=this.projection.forward(this.center),s=this.playingField,a=s.x+s.width/2,s=s.y+s.height/2;return{x:r[0]+(e-a)/i,y:r[1]-(t-s)/i}}setUpEvents(){const p=this["chart"];let c,d,u;var e=i=>{var{lastTouches:r,pinchDown:s}=p.pointer,a=this.projection,o=i.touches;let{mouseDownX:n,mouseDownY:l}=p,h=0;if(1===s?.length?(n=s[0].chartX,l=s[0].chartY):2===s?.length&&(n=(s[0].chartX+s[1].chartX)/2,l=(s[0].chartY+s[1].chartY)/2),2===o?.length&&r&&(s=Math.sqrt(Math.pow(r[0].chartX-r[1].chartX,2)+Math.pow(r[0].chartY-r[1].chartY,2)),r=Math.sqrt(Math.pow(o[0].chartX-o[1].chartX,2)+Math.pow(o[0].chartY-o[1].chartY,2)),h=Math.log(s/r)/Math.log(.5)),MapView_isNumber(n)&&MapView_isNumber(l)){s=n+","+l;let{chartX:e,chartY:t}=i.originalEvent;2===o?.length&&(e=(o[0].chartX+o[1].chartX)/2,t=(o[0].chartY+o[1].chartY)/2),s!==d&&(d=s,c=this.projection.forward(this.center),u=(this.projection.options.rotation||[0,0]).slice());var r=a.def&&a.def.bounds,s=r&&zoomFromBounds(r,this.playingField)||-1/0;"Orthographic"===a.options.name&&(o?.length||0)<2&&(this.minZoom||1/0)<1.3*s?(r=440/(this.getScale()*Math.min(p.plotWidth,p.plotHeight)),u&&(a=(n-e)*r-u[0],o=MapView_clamp(-u[1]-(l-t)*r,-80,80),s=this.zoom,this.update({projection:{rotation:[-a,-o]}},!1),this.fitToBounds(void 0,void 0,!1),this.zoom=s,p.redraw(!1))):MapView_isNumber(e)&&MapView_isNumber(t)&&(r=this.getScale(),a=this.projection.hasCoordinates?1:-1,o=this.projection.inverse([c[0]+(n-e)/r,c[1]-(l-t)/r*a]),isNaN(o[0]+o[1])||this.zoomBy(h,o,void 0,!1)),i.preventDefault()}};MapView_addEvent(p,"pan",e),MapView_addEvent(p,"touchpan",e),MapView_addEvent(p,"selection",e=>{var t,i,r,s;e.resetSelection?this.zoomBy():(r=e.x-p.plotLeft,s=e.y-p.plotTop,{y:t,x:i}=this.pixelsToProjectedUnits({x:r,y:s}),{y:r,x:s}=this.pixelsToProjectedUnits({x:r+e.width,y:s+e.height}),this.fitToBounds({x1:i,y1:t,x2:s,y2:r},void 0,!0,!e.originalEvent.touches&&void 0),/^touch/.test(e.originalEvent.type)||p.showResetZoom(),e.preventDefault())})}render(){this.group||(this.group=this.chart.renderer.g("map-view").attr({zIndex:4}).add())}update(e,t=!0,i){var r=e.projection,r=r&&Maps_Projection.toString(r)!==Maps_Projection.toString(this.options.projection);let s=!1;MapView_merge(!0,this.userOptions,e),MapView_merge(!0,this.options,e),"insets"in e&&(this.insets.forEach(e=>e.destroy()),this.insets.length=0,s=!0),(r||"fitToGeometry"in e)&&delete this.fitToGeometryCache,(r||s)&&(this.chart.series.forEach(e=>{const t=e.transformGroups;if(e.clearBounds&&e.clearBounds(),e.isDirty=!0,e.isDirtyData=!0,s&&t)for(;1<t.length;){const i=t.pop();i&&i.destroy()}}),r&&(this.projection=new Maps_Projection(this.options.projection)),s&&this.createInsets(),e.center||!Object.hasOwnProperty.call(e,"zoom")||MapView_isNumber(e.zoom)||this.fitToBounds(void 0,void 0,!1)),e.center||MapView_isNumber(e.zoom)?this.setView(this.options.center,e.zoom,!1):"fitToGeometry"in e&&this.fitToBounds(void 0,void 0,!1),t&&this.chart.redraw(i)}zoomBy(r,s,a,o){const n=this.chart,l=this.projection.forward(this.center);if("number"==typeof r){var h,p,r=this.zoom+r;let e,t,i;a&&([a,h]=a,p=this.getScale(),a=a-n.plotLeft-n.plotWidth/2,h=h-n.plotTop-n.plotHeight/2,t=l[0]+a/p,i=l[1]+h/p),"number"==typeof t&&"number"==typeof i&&(a=1-Math.pow(2,this.zoom)/Math.pow(2,r),h=l[0]-t,p=l[1]-i,l[0]-=h*a,l[1]+=p*a,e=this.projection.inverse(l)),this.setView(s||e,r,void 0,o)}else this.fitToBounds(void 0,void 0,void 0,o)}}class MapViewInset extends MapView{constructor(e,t){if(super(e.chart,t),this.id=t.id,this.mapView=e,this.options=MapView_merge({center:[0,0]},e.options.insetOptions,t),this.allBounds=[],this.options.geoBounds){const i=e.projection.path(this.options.geoBounds);this.geoBoundsProjectedBox=MapView_boundsFromPath(i),this.geoBoundsProjectedPolygon=i.map(e=>[e[1]||0,e[2]||0])}}getField(e=!0){var t=this.hitZone;if(t){const i=e?this.padding:[0,0,0,0],r=t.coordinates[0],s=r.map(e=>e[0]),a=r.map(e=>e[1]),o=Math.min.apply(0,s)+i[3],n=Math.max.apply(0,s)-i[1],l=Math.min.apply(0,a)+i[0],h=Math.max.apply(0,a)-i[2];if(MapView_isNumber(o)&&MapView_isNumber(l))return{x:o,y:l,width:n-o,height:h-l}}return super.getField.call(this,e)}getHitZone(){const{chart:t,mapView:i,options:r}=this,s=(r.field||{})["coordinates"];if(s){let e=s[0];if("percent"===r.units){const a="mapBoundingBox"===r.relativeTo&&i.getMapBBox()||MapView_merge(t.plotBox,{x:0,y:0});e=e.map(e=>[MapView_relativeLength(e[0]+"%",a.width,a.x),MapView_relativeLength(e[1]+"%",a.height,a.y)])}return{type:"Polygon",coordinates:[e]}}}getProjectedBounds(){return MapView.compositeBounds(this.allBounds)}isInside(e){var{geoBoundsProjectedBox:t,geoBoundsProjectedPolygon:i}=this;return Boolean(t&&e.x>=t.x1&&e.x<=t.x2&&e.y>=t.y1&&e.y<=t.y2&&i&&pointInPolygon(e,i))}render(){const{chart:a,mapView:t,options:o}=this,i=o.borderPath||o.field;if(i&&t.group){let e=!0;this.border||(this.border=a.renderer.path().addClass("highcharts-mapview-inset-border").add(t.group),e=!1),a.styledMode||this.border.attr({stroke:o.borderColor,"stroke-width":o.borderWidth});const n=this.border.strokeWidth(),l="mapBoundingBox"===o.relativeTo&&t.getMapBBox()||t.playingField;var r=(i.coordinates||[]).reduce((e,t)=>t.reduce((e,t,i)=>{let[r,s]=t;return"percent"===o.units&&(r=a.plotLeft+MapView_relativeLength(r+"%",l.width,l.x),s=a.plotTop+MapView_relativeLength(s+"%",l.height,l.y)),r=crisp(r,n),s=crisp(s,n),e.push(0===i?["M",r,s]:["L",r,s]),e},e),[]);this.border[e?"animate":"attr"]({d:r})}}destroy(){this.border&&(this.border=this.border.destroy()),this.eventsToUnbind.forEach(e=>e())}setUpEvents(){}}const Maps_MapView=MapView,{animObject,stop}=external_highcharts_src_js_default_default(),noop=external_highcharts_src_js_default_default()["noop"],splitPath=Chart_MapChart["splitPath"],{column:ColumnSeries,scatter:ScatterSeries}=external_highcharts_src_js_default_SeriesRegistry_default().seriesTypes,{extend:MapSeries_extend,find,fireEvent:MapSeries_fireEvent,getNestedProperty,isArray:MapSeries_isArray,defined:MapSeries_defined,isNumber:MapSeries_isNumber,isObject:MapSeries_isObject,merge:MapSeries_merge,objectEach:MapSeries_objectEach,pick:MapSeries_pick,splat}=external_highcharts_src_js_default_default();class MapSeries extends ScatterSeries{constructor(){super(...arguments),this.processedData=[]}animate(e){const{chart:t,group:i}=this,r=animObject(this.options.animation);e?i.attr({translateX:t.plotLeft+t.plotWidth/2,translateY:t.plotTop+t.plotHeight/2,scaleX:.001,scaleY:.001}):i.animate({translateX:t.plotLeft,translateY:t.plotTop,scaleX:1,scaleY:1},r)}clearBounds(){this.points.forEach(e=>{delete e.bounds,delete e.insetIndex,delete e.projectedPath}),delete this.bounds}doFullTranslate(){return Boolean(this.isDirtyData||this.chart.isResizing||!this.hasRendered)}drawMapDataLabels(){super.drawDataLabels(),this.dataLabelsGroup&&this.dataLabelsGroup.clip(this.chart.clipRect)}drawPoints(){const u=this,{chart:_,group:i,transformGroups:r=[]}=this,{mapView:m,renderer:g}=_;if(m){(this.transformGroups=r)[0]||(r[0]=g.g().add(i));for(let e=0,t=m.insets.length;e<t;++e)r[e+1]||r.push(g.g().add(i));this.doFullTranslate()&&(this.points.forEach(e=>{const t=e["graphic"];e.group=r["number"==typeof e.insetIndex?e.insetIndex+1:0],t&&t.parentGroup!==e.group&&t.add(e.group)}),ColumnSeries.prototype.drawPoints.apply(this),this.points.forEach(t=>{const o=t.graphic;if(o){const n=o.animate;let e="";t.name&&(e+="highcharts-name-"+t.name.replace(/ /g,"-").toLowerCase()),t.properties?.["hc-key"]&&(e+=" highcharts-key-"+t.properties["hc-key"].toString().toLowerCase()),e&&o.addClass(e),_.styledMode&&o.css(this.pointAttribs(t,t.selected?"select":void 0)),o.attr({visibility:t.visible||!t.visible&&!t.isNull?"inherit":"hidden"}),o.animate=function(e,t,i){var r,s=MapSeries_isNumber(e["stroke-width"])&&!MapSeries_isNumber(o["stroke-width"]),a=MapSeries_isNumber(o["stroke-width"])&&!MapSeries_isNumber(e["stroke-width"]),s=((s||a)&&(r=MapSeries_pick(u.getStrokeWidth(u.options),1)/(_.mapView?.getScale()||1),s&&(o["stroke-width"]=r),a&&(e["stroke-width"]=r)),n.call(o,e,t,a?function(){o.element.removeAttribute("stroke-width"),delete o["stroke-width"],i&&i.apply(this,arguments)}:i));return s}}})),r.forEach((r,e)=>{const t=0===e?m:m.insets[e-1],s=t.getSVGTransform(),a=MapSeries_pick(this.getStrokeWidth(this.options),1),o=s.scaleX,n=0<s.scaleY?1:-1,l=r=>{(u.points||[]).forEach(e=>{const t=e.graphic;let i;t?.["stroke-width"]&&(i=this.getStrokeWidth(e.options))&&t.attr({"stroke-width":i/r})})};if(g.globalAnimation&&_.hasRendered&&m.allowTransformAnimation){const h=Number(r.attr("translateX")),p=Number(r.attr("translateY")),c=Number(r.attr("scaleX")),i=MapSeries_merge(animObject(g.globalAnimation)),d=i.step;i.step=function(){d&&d.apply(this,arguments),((e,t)=>{var i=c+(o-c)*t.pos;r.attr({translateX:h+(s.translateX-h)*t.pos,translateY:p+(s.translateY-p)*t.pos,scaleX:i,scaleY:i*n,"stroke-width":a/i}),l(i)}).apply(this,arguments)},r.attr({animator:0}).animate({animator:1},i,function(){"boolean"!=typeof g.globalAnimation&&g.globalAnimation.complete&&g.globalAnimation.complete({applyDrilldown:!0}),MapSeries_fireEvent(this,"mapZoomComplete")}.bind(this))}else stop(r),r.attr(MapSeries_merge(s,{"stroke-width":a/o})),l(o)}),this.isDrilling||this.drawMapDataLabels()}}getProjectedBounds(){if(!this.bounds&&this.chart.mapView){const{insets:a,projection:o}=this.chart.mapView,e=[];(this.points||[]).forEach(t=>{if(t.path||t.geometry){if("string"==typeof t.path?t.path=splitPath(t.path):MapSeries_isArray(t.path)&&"M"===t.path[0]&&(t.path=this.chart.renderer.pathToSegments(t.path)),!t.bounds){let e=t.getProjectedBounds(o);if(e){t.labelrank=MapSeries_pick(t.labelrank,(e.x2-e.x1)*(e.y2-e.y1));const{midX:i,midY:r}=e;if(a&&MapSeries_isNumber(i)&&MapSeries_isNumber(r)){const s=find(a,e=>e.isInside({x:i,y:r}));s&&(delete t.projectedPath,(e=t.getProjectedBounds(s.projection))&&s.allBounds.push(e),t.insetIndex=a.indexOf(s))}t.bounds=e}}t.bounds&&void 0===t.insetIndex&&e.push(t.bounds)}}),this.bounds=Maps_MapView.compositeBounds(e)}return this.bounds}getStrokeWidth(e){return e[this.pointAttrToOptions?.["stroke-width"]||"borderWidth"]}hasData(){return!!this.dataTable.rowCount}pointAttribs(e,t){const{mapView:i,styledMode:r}=e.series.chart,s=r?this.colorAttribs(e):ColumnSeries.prototype.pointAttribs.call(this,e,t);let a=this.getStrokeWidth(e.options);t&&(t=MapSeries_merge(this.options.states&&this.options.states[t],e.options.states&&e.options.states[t]||{}),o=this.getStrokeWidth(t),MapSeries_defined(o)&&(a=o),s.stroke=t.borderColor??e.color),a&&i&&(a/=i.getScale());var o=this.getStrokeWidth(this.options);return s.dashstyle&&i&&MapSeries_isNumber(o)&&(a=o/i.getScale()),e.visible||(s.fill=this.options.nullColor),MapSeries_defined(a)?s["stroke-width"]=a:delete s["stroke-width"],s["stroke-linecap"]=s["stroke-linejoin"]=this.options.linecap,s}updateData(){return!this.processedData&&super.updateData.apply(this,arguments)}setData(e,t=!0,i,r){delete this.bounds,super.setData(e,!1,void 0,r),this.processData(),this.generatePoints(),t&&this.chart.redraw(i)}dataColumnKeys(){return this.pointArrayMap}processData(){const r=this.options,t=r.data,e=this.chart,i=e.options.chart,s=this.joinBy,a=r.keys||this.pointArrayMap,o=[],n={},l=this.chart.mapView,h=l&&(MapSeries_isObject(r.mapData,!0)?l.getGeoMap(r.mapData):l.geoMap),p=e.mapTransforms=i.mapTransforms||h?.["hc-transform"]||e.mapTransforms;let c,d;p&&MapSeries_objectEach(p,e=>{e.rotation&&(e.cosAngle=Math.cos(e.rotation),e.sinAngle=Math.sin(e.rotation))});let u;MapSeries_isArray(r.mapData)?u=r.mapData:h&&"FeatureCollection"===h.type&&(this.mapTitle=h.title,u=external_highcharts_src_js_default_default().geojson(h,this.type,this)),this.processedData=[];const _=this.processedData;var m;if(t)for(let i=0,e=t.length;i<e;++i){if(m=t[i],MapSeries_isNumber(m))_[i]={value:m};else if(MapSeries_isArray(m)){let t=0;_[i]={},!r.keys&&m.length>a.length&&"string"==typeof m[0]&&(_[i]["hc-key"]=m[0],++t);for(let e=0;e<a.length;++e,++t)a[e]&&void 0!==m[t]&&(0<a[e].indexOf(".")?Map_MapPoint.prototype.setNestedProperty(_[i],m[t],a[e]):_[i][a[e]]=m[t])}else _[i]=t[i];s&&"_i"===s[0]&&(_[i]._i=i)}if(u){this.mapData=u,this.mapMap={};for(let e=0;e<u.length;e++)d=(c=u[e]).properties,c._i=e,s[0]&&d&&d[s[0]]&&(c[s[0]]=d[s[0]]),n[c[s[0]]]=c;if(this.mapMap=n,s[1]){const g=s[1];_.forEach(e=>{e=getNestedProperty(g,e);n[e]&&o.push(n[e])})}if(r.allAreas){if(s[1]){const f=s[1];_.forEach(e=>{o.push(getNestedProperty(f,e))})}const b="|"+o.map(function(e){return e&&e[s[0]]}).join("|")+"|";u.forEach(e=>{s[0]&&-1!==b.indexOf("|"+e[s[0]]+"|")||_.push(MapSeries_merge(e,{value:null}))})}}this.dataTable.rowCount=_.length}setOptions(e){e=super.setOptions(e);let t=e.joinBy;return(t=null===e.joinBy?"_i":t)&&(this.joinBy=splat(t),this.joinBy[1]||(this.joinBy[1]=this.joinBy[0])),e}translate(){const i=this.doFullTranslate(),r=this.chart.mapView,s=r?.projection;if(!this.chart.hasRendered||!this.isDirtyData&&this.hasRendered||(this.processData(),this.generatePoints(),delete this.bounds,!r||r.userOptions.center||MapSeries_isNumber(r.userOptions.zoom)||r.zoom!==r.minZoom?this.getProjectedBounds():r.fitToBounds(void 0,void 0,!1)),r){const a=r.getSVGTransform();this.points.forEach(e=>{var t=MapSeries_isNumber(e.insetIndex)&&r.insets[e.insetIndex].getSVGTransform()||a;t&&e.bounds&&MapSeries_isNumber(e.bounds.midX)&&MapSeries_isNumber(e.bounds.midY)&&(e.plotX=e.bounds.midX*t.scaleX+t.translateX,e.plotY=e.bounds.midY*t.scaleY+t.translateY),i&&(e.shapeType="path",e.shapeArgs={d:Map_MapPoint.getProjectedPath(e,s)}),e.hiddenInDataClass||(e.projectedPath&&!e.projectedPath.length?e.setVisible(!1):e.visible||e.setVisible(!0))})}MapSeries_fireEvent(this,"afterTranslate")}update(i){i.mapData&&this.chart.mapView?.recommendMapView(this.chart,[this.chart.options.chart.map,...(this.chart.options.series||[]).map((e,t)=>(t===this._i?i:e).mapData)],!0),super.update.apply(this,arguments)}}MapSeries.defaultOptions=MapSeries_merge(ScatterSeries.defaultOptions,Map_MapSeriesDefaults),MapSeries_extend(MapSeries.prototype,{type:"map",axisTypes:Series_ColorMapComposition.seriesMembers.axisTypes,colorAttribs:Series_ColorMapComposition.seriesMembers.colorAttribs,colorKey:Series_ColorMapComposition.seriesMembers.colorKey,directTouch:!0,drawDataLabels:noop,drawGraph:noop,forceDL:!0,getCenter:Series_CenteredUtilities.getCenter,getExtremesFromAll:!0,getSymbol:noop,isCartesian:!1,parallelArrays:Series_ColorMapComposition.seriesMembers.parallelArrays,pointArrayMap:Series_ColorMapComposition.seriesMembers.pointArrayMap,pointClass:Map_MapPoint,preserveAspectRatio:!0,searchPoint:noop,trackerGroups:Series_ColorMapComposition.seriesMembers.trackerGroups,useMapGeometry:!0}),Series_ColorMapComposition.compose(MapSeries),external_highcharts_src_js_default_SeriesRegistry_default().registerSeriesType("map",MapSeries);const Map_MapSeries=MapSeries,MapLineSeriesDefaults={lineWidth:1,fillColor:"none",legendSymbol:"lineMarker"},MapLine_MapLineSeriesDefaults=MapLineSeriesDefaults,{extend:MapLineSeries_extend,merge:MapLineSeries_merge}=external_highcharts_src_js_default_default();class MapLineSeries extends Map_MapSeries{pointAttribs(e,t){const i=super.pointAttribs(e,t);return i.fill=this.options.fillColor,i}}MapLineSeries.defaultOptions=MapLineSeries_merge(Map_MapSeries.defaultOptions,MapLine_MapLineSeriesDefaults),MapLineSeries_extend(MapLineSeries.prototype,{type:"mapline",colorProp:"stroke",pointAttrToOptions:{stroke:"color","stroke-width":"lineWidth"}}),external_highcharts_src_js_default_SeriesRegistry_default().registerSeriesType("mapline",MapLineSeries);const MapLine_MapLineSeries=null,MapPointPoint_ScatterSeries=external_highcharts_src_js_default_SeriesRegistry_default().seriesTypes["scatter"],MapPointPoint_isNumber=external_highcharts_src_js_default_default()["isNumber"];class MapPointPoint extends MapPointPoint_ScatterSeries.prototype.pointClass{isValid(){return Boolean(this.options.geometry||MapPointPoint_isNumber(this.x)&&MapPointPoint_isNumber(this.y)||MapPointPoint_isNumber(this.options.lon)&&MapPointPoint_isNumber(this.options.lat))}}const MapPoint_MapPointPoint=MapPointPoint,MapPointSeriesDefaults={dataLabels:{crop:!1,defer:!1,enabled:!0,formatter:function(){return this.point.name},overflow:!1,style:{color:"#000000"}},legendSymbol:"lineMarker"},MapPoint_MapPointSeriesDefaults=MapPointSeriesDefaults;var external_highcharts_src_js_default_Series_types_scatter_x=e=>{var t={};return __webpack_require__.d(t,e),t},external_highcharts_src_js_default_Series_types_scatter_y=e=>()=>e;const external_highcharts_src_js_default_Series_types_scatter_namespaceObject=external_highcharts_src_js_default_Series_types_scatter_x({}),MapPointSeries_noop=external_highcharts_src_js_default_default()["noop"],{map:MapPointSeries_MapSeries,scatter:MapPointSeries_ScatterSeries}=external_highcharts_src_js_default_SeriesRegistry_default().seriesTypes,{extend:MapPointSeries_extend,fireEvent:MapPointSeries_fireEvent,isNumber:MapPointSeries_isNumber,merge:MapPointSeries_merge}=external_highcharts_src_js_default_default();class MapPointSeries extends MapPointSeries_ScatterSeries{constructor(){super(...arguments),this.clearBounds=MapPointSeries_MapSeries.prototype.clearBounds}drawDataLabels(){super.drawDataLabels(),this.dataLabelsGroup&&this.dataLabelsGroup.clip(this.chart.clipRect)}projectPoint(t){const i=this.chart.mapView;if(i){var{geometry:t,lon:r,lat:s}=t;let e=t&&"Point"===t.type&&t.coordinates;if(e=MapPointSeries_isNumber(r)&&MapPointSeries_isNumber(s)?[r,s]:e)return i.lonLatToProjectedUnits({lon:e[0],lat:e[1]})}}translate(){const o=this.chart.mapView;if(this.generatePoints(),this.getProjectedBounds&&this.isDirtyData&&(delete this.bounds,this.getProjectedBounds()),o){const n=o.getSVGTransform(),l=o.projection["hasCoordinates"];this.points.forEach(e=>{let{x:t=void 0,y:i=void 0}=e;var r=MapPointSeries_isNumber(e.insetIndex)&&o.insets[e.insetIndex].getSVGTransform()||n,s=this.projectPoint(e.options)||e.properties&&this.projectPoint(e.properties);let a;s?(t=s.x,i=s.y):e.bounds&&(t=e.bounds.midX,i=e.bounds.midY,r&&MapPointSeries_isNumber(t)&&MapPointSeries_isNumber(i)&&(e.plotX=t*r.scaleX+r.translateX,e.plotY=i*r.scaleY+r.translateY,a=!0)),MapPointSeries_isNumber(t)&&MapPointSeries_isNumber(i)?a||(s=o.projectedUnitsToPixels({x:t,y:i}),e.plotX=s.x,e.plotY=l?s.y:this.chart.plotHeight-s.y):e.y=e.plotX=e.plotY=void 0,e.isInside=this.isPointInside(e),e.zone=this.zones.length?e.getZone():void 0})}MapPointSeries_fireEvent(this,"afterTranslate")}}MapPointSeries.defaultOptions=MapPointSeries_merge(MapPointSeries_ScatterSeries.defaultOptions,MapPoint_MapPointSeriesDefaults);const mapmarker=(e,t,i,r,s)=>{var a=s&&"legend"===s.context;let o,n;a?(o=e+i/2,n=t+r):s&&"number"==typeof s.anchorX&&"number"==typeof s.anchorY?(o=s.anchorX,n=s.anchorY):(o=e+i/2,n=t+r/2,t-=r);s=a?r/3:r/2;return[["M",o,n],["C",o,n,o-s,t+1.5*s,o-s,t+s],["A",s,s,1,1,1,o+s,t+s],["C",o+s,t+1.5*s,o,n,o,n],["Z"]]},MapPoint_MapPointSeries=(external_highcharts_src_js_default_SVGRenderer_default().prototype.symbols.mapmarker=mapmarker,MapPointSeries_extend(MapPointSeries.prototype,{type:"mappoint",axisTypes:["colorAxis"],forceDL:!0,isCartesian:!1,pointClass:MapPoint_MapPointPoint,searchPoint:MapPointSeries_noop,useMapGeometry:!0}),external_highcharts_src_js_default_SeriesRegistry_default().registerSeriesType("mappoint",MapPointSeries),null),BubbleLegendDefaults={borderColor:void 0,borderWidth:2,className:void 0,color:void 0,connectorClassName:void 0,connectorColor:void 0,connectorDistance:60,connectorWidth:1,enabled:!1,labels:{className:void 0,allowOverlap:!1,format:"",formatter:void 0,align:"right",style:{fontSize:"0.9em",color:"#000000"},x:0,y:0},maxSize:60,minSize:10,legendIndex:0,ranges:{value:void 0,borderColor:void 0,color:void 0,connectorColor:void 0},sizeBy:"area",sizeByAbsoluteValue:!1,zIndex:1,zThreshold:0},Bubble_BubbleLegendDefaults=BubbleLegendDefaults,BubbleLegendItem_noop=external_highcharts_src_js_default_default()["noop"],{arrayMax,arrayMin,isNumber:BubbleLegendItem_isNumber,merge:BubbleLegendItem_merge,pick:BubbleLegendItem_pick,stableSort}=external_highcharts_src_js_default_default();class BubbleLegendItem{constructor(e,t){this.setState=BubbleLegendItem_noop,this.init(e,t)}init(e,t){this.options=e,this.visible=!0,this.chart=t.chart,this.legend=t}addToLegend(e){e.splice(this.options.legendIndex,0,this)}drawLegendSymbol(e){const t=BubbleLegendItem_pick(e.options.itemDistance,20),i=this.legendItem||{},r=this.options,s=r.ranges,a=r.connectorDistance;let o;var n,l,h;s&&s.length&&BubbleLegendItem_isNumber(s[0].value)?(stableSort(s,function(e,t){return t.value-e.value}),this.ranges=s,this.setOptions(),this.render(),n=this.getMaxLabelSize(),h=2*(l=this.ranges[0].radius),o=0<(o=a-l+n.width)?o:0,this.maxLabel=n,this.movementX="left"===r.labels.align?o:0,i.labelWidth=h+o+t,i.labelHeight=h+n.height/2):e.options.bubbleLegend.autoRanges=!0}setOptions(){const i=this.ranges,r=this.options,s=this.chart.series[r.seriesIndex],a=this.legend.baseline,o={zIndex:r.zIndex,"stroke-width":r.borderWidth},n={zIndex:r.zIndex,"stroke-width":r.connectorWidth},l={align:this.legend.options.rtl||"left"===r.labels.align?"right":"left",zIndex:r.zIndex},h=s.options.marker.fillOpacity,p=this.chart.styledMode;i.forEach(function(e,t){p||(o.stroke=BubbleLegendItem_pick(e.borderColor,r.borderColor,s.color),o.fill=e.color||r.color,o.fill||(o.fill=s.color,o["fill-opacity"]=h??1),n.stroke=BubbleLegendItem_pick(e.connectorColor,r.connectorColor,s.color)),i[t].radius=this.getRangeRadius(e.value),i[t]=BubbleLegendItem_merge(i[t],{center:i[0].radius-i[t].radius+a}),p||BubbleLegendItem_merge(!0,i[t],{bubbleAttribs:BubbleLegendItem_merge(o),connectorAttribs:BubbleLegendItem_merge(n),labelAttribs:l})},this)}getRangeRadius(e){const t=this.options,i=this.options.seriesIndex,r=this.chart.series[i],s=t.ranges[0].value,a=t.ranges[t.ranges.length-1].value,o=t.minSize,n=t.maxSize;return r.getRadius.call(this,a,s,o,n,e)}render(){const e=this.legendItem||{},t=this.chart.renderer,i=this.options.zThreshold;this.symbols||(this.symbols={connectors:[],bubbleItems:[],labels:[]}),e.symbol=t.g("bubble-legend"),e.label=t.g("bubble-legend-item").css(this.legend.itemStyle||{}),e.symbol.translateX=0,e.symbol.translateY=0,e.symbol.add(e.label),e.label.add(e.group);for(const r of this.ranges)r.value>=i&&this.renderRange(r);this.hideOverlappingLabels()}renderRange(e){const t=this.ranges[0],i=this.legend,r=this.options,s=r.labels,a=this.chart,o=a.series[r.seriesIndex],n=a.renderer,l=this.symbols,h=l.labels,p=e.center,c=Math.abs(e.radius),d=r.connectorDistance||0,u=s.align,_=i.options.rtl,m=r.borderWidth,g=r.connectorWidth,b=t.radius||0,f=p-c-m/2+g/2,M=(f%1?1:.5)-(g%2?0:.5),y=n.styledMode;let x=_||"left"===u?-d:d;"center"===u&&(x=0,r.connectorDistance=0,e.labelAttribs.align="center"),l.bubbleItems.push(n.circle(b,p+M,c).attr(y?{}:e.bubbleAttribs).addClass((y?"highcharts-color-"+o.colorIndex+" ":"")+"highcharts-bubble-legend-symbol "+(r.className||"")).add(this.legendItem.symbol)),l.connectors.push(n.path(n.crispLine([["M",b,f],["L",b+x,f]],r.connectorWidth)).attr(y?{}:e.connectorAttribs).addClass((y?"highcharts-color-"+this.options.seriesIndex+" ":"")+"highcharts-bubble-legend-connectors "+(r.connectorClassName||"")).add(this.legendItem.symbol));const S=n.text(this.formatLabel(e)).attr(y?{}:e.labelAttribs).css(y?{}:s.style).addClass("highcharts-bubble-legend-labels "+(r.labels.className||"")).add(this.legendItem.symbol);e={x:b+x+r.labels.x,y:f+r.labels.y+.4*S.getBBox().height};S.attr(e),h.push(S),S.placed=!0,S.alignAttr=e}getMaxLabelSize(){const e=this.symbols.labels;let t,i;return e.forEach(function(e){i=e.getBBox(!0),t=!t||i.width>t.width?i:t}),t||{}}formatLabel(e){const t=this.options,i=t.labels.formatter,r=t.labels.format,s=this.chart["numberFormatter"];return r?external_highcharts_src_js_default_Templating_default().format(r,e,this.chart):i?i.call(e):s(e.value,1)}hideOverlappingLabels(){const e=this.chart,t=this.options.labels.allowOverlap,i=this.symbols;!t&&i&&(e.hideOverlappingLabels(i.labels),i.labels.forEach(function(e,t){e.newOpacity?e.newOpacity!==e.oldOpacity&&i.connectors[t].show():i.connectors[t].hide()}))}getRanges(){const e=this.legend.bubbleLegend,t=e.chart.series,i=e.options.ranges;let r,s,a=Number.MAX_VALUE,o=-Number.MAX_VALUE;return t.forEach(function(e){e.isBubble&&!e.ignoreSeries&&(s=e.getColumn("z").filter(BubbleLegendItem_isNumber)).length&&(a=BubbleLegendItem_pick(e.options.zMin,Math.min(a,Math.max(arrayMin(s),!1===e.options.displayNegative?e.options.zThreshold:-Number.MAX_VALUE))),o=BubbleLegendItem_pick(e.options.zMax,Math.max(o,arrayMax(s))))}),r=a===o?[{value:o}]:[{value:a},{value:(a+o)/2},{value:o,autoRanges:!0}],i.length&&i[0].radius&&r.reverse(),r.forEach(function(e,t){i&&i[t]&&(r[t]=BubbleLegendItem_merge(i[t],e))}),r}predictBubbleSizes(){const e=this.chart,t=e.legend.options,i=t.floating,r="horizontal"===t.layout,s=r?e.legend.lastLineHeight:0,a=e.plotSizeX,o=e.plotSizeY,n=e.series[this.options.seriesIndex],l=n.getPxExtremes(),h=Math.ceil(l.minPxSize),p=Math.ceil(l.maxPxSize),c=Math.min(o,a);let d,u=n.options.maxSize;return i||!/%$/.test(u)?d=p:(u=parseFloat(u),d=(c+s)*u/100/(u/100+1),(r&&o-d>=a||!r&&a-d>=o)&&(d=p)),[h,Math.ceil(d)]}updateRanges(e,t){const i=this.legend.options.bubbleLegend;i.minSize=e,i.maxSize=t,i.ranges=this.getRanges()}correctSizes(){const e=this.legend,t=this.chart,i=t.series[this.options.seriesIndex],r=i.getPxExtremes(),s=r.maxPxSize,a=this.options.maxSize;1<Math.abs(Math.ceil(s)-a)&&(this.updateRanges(this.options.minSize,r.maxPxSize),e.render())}}const Bubble_BubbleLegendItem=BubbleLegendItem,BubbleLegendComposition_setOptions=external_highcharts_src_js_default_default()["setOptions"],BubbleLegendComposition_composed=external_highcharts_src_js_default_default()["composed"],{addEvent:BubbleLegendComposition_addEvent,objectEach:BubbleLegendComposition_objectEach,pushUnique:BubbleLegendComposition_pushUnique,wrap:BubbleLegendComposition_wrap}=external_highcharts_src_js_default_default();function chartDrawChartBox(e,t,i){const r=this,s=r.legend,a=0<=getVisibleBubbleSeriesIndex(r);let o,n,l;s&&s.options.enabled&&s.bubbleLegend&&s.options.bubbleLegend.autoRanges&&a?(o=s.bubbleLegend.options,n=s.bubbleLegend.predictBubbleSizes(),s.bubbleLegend.updateRanges(n[0],n[1]),o.placed||(s.group.placed=!1,s.allItems.forEach(e=>{(l=e.legendItem||{}).group&&(l.group.translateY=void 0)})),s.render(),o.placed||(r.getMargins(),r.axes.forEach(e=>{e.setScale(),e.updateNames(),BubbleLegendComposition_objectEach(e.ticks,function(e){e.isNew=!0,e.isNewLabel=!0})}),r.getMargins()),o.placed=!0,e.call(r,t,i),s.bubbleLegend.correctSizes(),retranslateItems(s,getLinesHeights(s))):(e.call(r,t,i),s&&s.options.enabled&&s.bubbleLegend&&(s.render(),retranslateItems(s,getLinesHeights(s))))}function BubbleLegendComposition_compose(e,t){BubbleLegendComposition_pushUnique(BubbleLegendComposition_composed,"Series.BubbleLegend")&&(BubbleLegendComposition_setOptions({legend:{bubbleLegend:Bubble_BubbleLegendDefaults}}),BubbleLegendComposition_wrap(e.prototype,"drawChartBox",chartDrawChartBox),BubbleLegendComposition_addEvent(t,"afterGetAllItems",onLegendAfterGetAllItems),BubbleLegendComposition_addEvent(t,"itemClick",onLegendItemClick))}function getVisibleBubbleSeriesIndex(e){var t=e.series;let i=0;for(;i<t.length;){if(t[i]&&t[i].isBubble&&t[i].visible&&t[i].dataTable.rowCount)return i;i++}return-1}function getLinesHeights(e){const t=e.allItems,i=[],r=t.length;let s,a,o,n=0,l=0;for(n=0;n<r;n++)if(a=t[n].legendItem||{},o=(t[n+1]||{}).legendItem||{},a.labelHeight&&(t[n].itemHeight=a.labelHeight),t[n]===t[r-1]||a.y!==o.y){for(i.push({height:0}),s=i[i.length-1],l;l<=n;l++)t[l].itemHeight>s.height&&(s.height=t[l].itemHeight);s.step=n}return i}function onLegendAfterGetAllItems(e){const t=this,i=t.bubbleLegend,r=t.options,s=r.bubbleLegend,a=getVisibleBubbleSeriesIndex(t.chart);i&&i.ranges&&i.ranges.length&&(s.ranges.length&&(s.autoRanges=!!s.ranges[0].autoRanges),t.destroyItem(i)),0<=a&&r.enabled&&s.enabled&&(s.seriesIndex=a,t.bubbleLegend=new Bubble_BubbleLegendItem(s,t),t.bubbleLegend.addToLegend(e.allItems))}function onLegendItemClick(e){if(e.defaultPrevented)return!1;const t=this,i=e.legendItem,r=t.chart,s=i.visible;t&&t.bubbleLegend&&(i.visible=!s,i.ignoreSeries=s,e=0<=getVisibleBubbleSeriesIndex(r),t.bubbleLegend.visible!==e&&(t.update({bubbleLegend:{enabled:e}}),t.bubbleLegend.visible=e),i.visible=s)}function retranslateItems(e,i){const t=e.allItems,r=e.options.rtl;let s,a,o,n,l=0;t.forEach((e,t)=>{(n=e.legendItem||{}).group&&(s=n.group.translateX||0,a=n.y||0,((o=e.movementX)||r&&e.ranges)&&(o=r?s-e.options.maxSize/2:s+o,n.group.attr({translateX:o})),t>i[l].step&&l++,n.group.attr({translateY:Math.round(a+i[l].height/2)}),n.y=a+i[l].height/2)})}const BubbleLegendComposition={compose:BubbleLegendComposition_compose},Bubble_BubbleLegendComposition=BubbleLegendComposition,external_highcharts_src_js_default_Point_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default.Point;var external_highcharts_src_js_default_Point_default=__webpack_require__.n(external_highcharts_src_js_default_Point_namespaceObject);const{scatter:{prototype:{pointClass:BubblePoint_ScatterPoint}}}=external_highcharts_src_js_default_SeriesRegistry_default()["seriesTypes"],BubblePoint_extend=external_highcharts_src_js_default_default()["extend"];class BubblePoint extends BubblePoint_ScatterPoint{haloPath(e){e=(e&&this.marker&&this.marker.radius||0)+e;if(this.series.chart.inverted){const t=this.pos()||[0,0],{xAxis:i,yAxis:r,chart:s}=this.series,a=2*e;return s.renderer.symbols.circle((i?.len||0)-t[1]-e,(r?.len||0)-t[0]-e,a,a)}return external_highcharts_src_js_default_Point_default().prototype.haloPath.call(this,e)}}BubblePoint_extend(BubblePoint.prototype,{ttBelow:!1});const Bubble_BubblePoint=BubblePoint,{composed:BubbleSeries_composed,noop:BubbleSeries_noop}=external_highcharts_src_js_default_default(),{series:Series,seriesTypes:{column:{prototype:BubbleSeries_columnProto},scatter:BubbleSeries_ScatterSeries}}=external_highcharts_src_js_default_SeriesRegistry_default(),{addEvent:BubbleSeries_addEvent,arrayMax:BubbleSeries_arrayMax,arrayMin:BubbleSeries_arrayMin,clamp:BubbleSeries_clamp,extend:BubbleSeries_extend,isNumber:BubbleSeries_isNumber,merge:BubbleSeries_merge,pick:BubbleSeries_pick,pushUnique:BubbleSeries_pushUnique}=external_highcharts_src_js_default_default();function onAxisFoundExtremes(){const e=this.len,{coll:t,isXAxis:s,min:a}=this,o=(this.max||0)-(a||0);let n=0,l=e,h=e/o,p;"xAxis"!==t&&"yAxis"!==t||(this.series.forEach(t=>{if(t.bubblePadding&&t.reserveSpace()){this.allowZoomOutside=!0,p=!0;var i,r=t.getColumn(s?"x":"y");if(s&&((t.onPoint||t).getRadii(0,0,t),t.onPoint&&(t.radii=t.onPoint.radii)),0<o){let e=r.length;for(;e--;)BubbleSeries_isNumber(r[e])&&this.dataMin<=r[e]&&r[e]<=this.max&&(i=t.radii&&t.radii[e]||0,n=Math.min((r[e]-a)*h-i,n),l=Math.max((r[e]-a)*h+i,l))}}}),p&&0<o&&!this.logarithmic&&(l-=e,h*=(e+Math.max(0,n)-Math.min(l,e))/e,[["min","userMin",n],["max","userMax",l]].forEach(e=>{void 0===BubbleSeries_pick(this.options[e[0]],this[e[1]])&&(this[e[0]]+=e[2]/h)})))}function onAxisAfterRender(){var{ticks:t,tickPositions:i,dataMin:r=0,dataMax:s=0,categories:e}=this,a=this.options.type;if((e?.length||"category"===a)&&this.series.find(e=>e.bubblePadding)){let e=i.length;for(;e--;){const o=t[i[e]],n=o.pos||0;(s<n||n<r)&&o.label?.hide()}}}class BubbleSeries extends BubbleSeries_ScatterSeries{static compose(e,t,i){Bubble_BubbleLegendComposition.compose(t,i),BubbleSeries_pushUnique(BubbleSeries_composed,"Series.Bubble")&&(BubbleSeries_addEvent(e,"foundExtremes",onAxisFoundExtremes),BubbleSeries_addEvent(e,"afterRender",onAxisAfterRender))}animate(e){!e&&this.points.length<this.options.animationLimit&&this.points.forEach(function(e){const{graphic:t,plotX:i=0,plotY:r=0}=e;t&&t.width&&(this.hasRendered||t.attr({x:i,y:r,width:1,height:1}),t.animate(this.markerAttribs(e),this.options.animation))},this)}getRadii(){const e=this.getColumn("z"),t=this.getColumn("y"),i=[];let r,s,a,o=this.chart.bubbleZExtremes;var{minPxSize:n,maxPxSize:l}=this.getPxExtremes();if(!o){let t=Number.MAX_VALUE,i=-Number.MAX_VALUE,r;this.chart.series.forEach(e=>{e.bubblePadding&&e.reserveSpace()&&((e=(e.onPoint||e).getZExtremes())&&(t=Math.min(BubbleSeries_pick(t,e.zMin),e.zMin),i=Math.max(BubbleSeries_pick(i,e.zMax),e.zMax),r=!0))}),r?(o={zMin:t,zMax:i},this.chart.bubbleZExtremes=o):o={zMin:0,zMax:0}}for(s=0,r=e.length;s<r;s++)a=e[s],i.push(this.getRadius(o.zMin,o.zMax,n,l,a,t&&t[s]));this.radii=i}getRadius(e,t,i,r,s,a){var o=this.options,n="width"!==o.sizeBy,l=o.zThreshold;let h=t-e,p=.5;if(null===a||null===s)return null;if(BubbleSeries_isNumber(s)){if(o.sizeByAbsoluteValue&&(s=Math.abs(s-l),t=h=Math.max(t-l,Math.abs(e-l)),e=0),s<e)return i/2-1;0<h&&(p=(s-e)/h)}return n&&0<=p&&(p=Math.sqrt(p)),Math.ceil(i+p*(r-i))/2}hasData(){return!!this.dataTable.rowCount}markerAttribs(e,t){var t=super.markerAttribs(e,t),{height:i=0,width:r=0}=t;return this.chart.inverted?BubbleSeries_extend(t,{x:(e.plotX||0)-r/2,y:(e.plotY||0)-i/2}):t}pointAttribs(e,t){const i=this.options.marker,r=i?.fillOpacity,s=Series.prototype.pointAttribs.call(this,e,t);return s["fill-opacity"]=r??1,s}translate(){super.translate.call(this),this.getRadii(),this.translateBubble()}translateBubble(){var{data:e,options:t,radii:i}=this,r=this.getPxExtremes()["minPxSize"];let s=e.length;for(;s--;){const a=e[s],o=i?i[s]:0;"z"===this.zoneAxis&&(a.negative=(a.z||0)<(t.zThreshold||0)),BubbleSeries_isNumber(o)&&r/2<=o?(a.marker=BubbleSeries_extend(a.marker,{radius:o,width:2*o,height:2*o}),a.dlBox={x:a.plotX-o,y:a.plotY-o,width:2*o,height:2*o}):(a.shapeArgs=a.plotY=a.dlBox=void 0,a.isInside=!1)}}getPxExtremes(){const i=Math.min(this.chart.plotWidth,this.chart.plotHeight);var e=e=>{let t;return"string"==typeof e&&(t=/%$/.test(e),e=parseInt(e,10)),t?i*e/100:e},t=e(BubbleSeries_pick(this.options.minSize,8));return{minPxSize:t,maxPxSize:Math.max(e(BubbleSeries_pick(this.options.maxSize,"20%")),t)}}getZExtremes(){var e=this.options,t=this.getColumn("z").filter(BubbleSeries_isNumber);if(t.length){var i=BubbleSeries_pick(e.zMin,BubbleSeries_clamp(BubbleSeries_arrayMin(t),!1===e.displayNegative?e.zThreshold||0:-Number.MAX_VALUE,Number.MAX_VALUE)),e=BubbleSeries_pick(e.zMax,BubbleSeries_arrayMax(t));if(BubbleSeries_isNumber(i)&&BubbleSeries_isNumber(e))return{zMin:i,zMax:e}}}searchKDTree(e,t,i,r=BubbleSeries_noop,s=BubbleSeries_noop){return super.searchKDTree(e,t,i,(e,t,i)=>{var r=e[i]||0,i=t[i]||0;let s,a=!1;return r===i?s=e.index>t.index?e:t:r<0&&i<0?(s=r-(e.marker?.radius||0)>=i-(t.marker?.radius||0)?e:t,a=!0):s=r<i?e:t,[s,a]},(e,t,i)=>!i&&t<e||e<t)}}BubbleSeries.defaultOptions=BubbleSeries_merge(BubbleSeries_ScatterSeries.defaultOptions,{dataLabels:{formatter:function(){const e=this.series.chart["numberFormatter"];var t=this.point["z"];return BubbleSeries_isNumber(t)?e(t,-1):""},inside:!0,verticalAlign:"middle"},animationLimit:250,marker:{lineColor:null,lineWidth:1,fillOpacity:.5,radius:null,states:{hover:{radiusPlus:0}},symbol:"circle"},minSize:8,maxSize:"20%",softThreshold:!1,states:{hover:{halo:{size:5}}},tooltip:{pointFormat:"({point.x}, {point.y}), Size: {point.z}"},turboThreshold:0,zThreshold:0,zoneAxis:"z"}),BubbleSeries_extend(BubbleSeries.prototype,{alignDataLabel:BubbleSeries_columnProto.alignDataLabel,applyZones:BubbleSeries_noop,bubblePadding:!0,isBubble:!0,keysAffectYAxis:["y"],pointArrayMap:["y","z"],pointClass:Bubble_BubblePoint,parallelArrays:["x","y","z"],trackerGroups:["group","dataLabelsGroup"],specialGroup:"group",zoneAxis:"z"}),BubbleSeries_addEvent(BubbleSeries,"updatedData",e=>{delete e.target.chart.bubbleZExtremes}),BubbleSeries_addEvent(BubbleSeries,"remove",e=>{delete e.target.chart.bubbleZExtremes}),external_highcharts_src_js_default_SeriesRegistry_default().registerSeriesType("bubble",BubbleSeries);const Bubble_BubbleSeries=BubbleSeries,{map:{prototype:{pointClass:{prototype:mapPointProto}}}}=external_highcharts_src_js_default_SeriesRegistry_default()["seriesTypes"],MapBubblePoint_extend=external_highcharts_src_js_default_default()["extend"];class MapBubblePoint extends Bubble_BubblePoint{isValid(){return"number"==typeof this.z}}MapBubblePoint_extend(MapBubblePoint.prototype,{applyOptions:mapPointProto.applyOptions,getProjectedBounds:mapPointProto.getProjectedBounds});const MapBubble_MapBubblePoint=MapBubblePoint,{map:{prototype:mapProto},mappoint:{prototype:MapBubbleSeries_mapPointProto}}=external_highcharts_src_js_default_SeriesRegistry_default()["seriesTypes"],{extend:MapBubbleSeries_extend,merge:MapBubbleSeries_merge}=external_highcharts_src_js_default_default();class MapBubbleSeries extends Bubble_BubbleSeries{constructor(){super(...arguments),this.clearBounds=mapProto.clearBounds}searchPoint(e,t){return this.searchKDTree({plotX:e.chartX-this.chart.plotLeft,plotY:e.chartY-this.chart.plotTop},t,e)}translate(){MapBubbleSeries_mapPointProto.translate.call(this),this.getRadii(),this.translateBubble()}}MapBubbleSeries.defaultOptions=MapBubbleSeries_merge(Bubble_BubbleSeries.defaultOptions,{lineWidth:0,animationLimit:500,joinBy:"hc-key",tooltip:{pointFormat:"{point.name}: {point.z}"}}),MapBubbleSeries_extend(MapBubbleSeries.prototype,{type:"mapbubble",axisTypes:["colorAxis"],getProjectedBounds:mapProto.getProjectedBounds,isCartesian:!1,pointArrayMap:["z"],pointClass:MapBubble_MapBubblePoint,processData:mapProto.processData,projectPoint:MapBubbleSeries_mapPointProto.projectPoint,kdAxisArray:["plotX","plotY"],setData:mapProto.setData,setOptions:mapProto.setOptions,updateData:mapProto.updateData,useMapGeometry:!0,xyFromShape:!0}),external_highcharts_src_js_default_SeriesRegistry_default().registerSeriesType("mapbubble",MapBubbleSeries);const MapBubble_MapBubbleSeries=MapBubbleSeries,external_highcharts_src_js_default_Color_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default.Color;var external_highcharts_src_js_default_Color_default=__webpack_require__.n(external_highcharts_src_js_default_Color_namespaceObject);const{prototype:{pointClass:HeatmapPoint_ScatterPoint}}=external_highcharts_src_js_default_SeriesRegistry_default().seriesTypes["scatter"],{clamp:HeatmapPoint_clamp,defined:HeatmapPoint_defined,extend:HeatmapPoint_extend,pick:HeatmapPoint_pick}=external_highcharts_src_js_default_default();class HeatmapPoint extends HeatmapPoint_ScatterPoint{applyOptions(e,t){return!this.isNull&&null!==this.value||delete this.color,super.applyOptions(e,t),this.formatPrefix=this.isNull||null===this.value?"null":"point",this}getCellAttributes(){const e=this,t=e.series,i=t.options,r=(i.colsize||1)/2,s=(i.rowsize||1)/2,a=t.xAxis,o=t.yAxis,n=e.options.marker||t.options.marker,l=t.pointPlacementToXValue(),h=HeatmapPoint_pick(e.pointPadding,i.pointPadding,0),p={x1:HeatmapPoint_clamp(Math.round(a.len-a.translate(e.x-r,!1,!0,!1,!0,-l)),-a.len,2*a.len),x2:HeatmapPoint_clamp(Math.round(a.len-a.translate(e.x+r,!1,!0,!1,!0,-l)),-a.len,2*a.len),y1:HeatmapPoint_clamp(Math.round(o.translate(e.y-s,!1,!0,!1,!0)),-o.len,2*o.len),y2:HeatmapPoint_clamp(Math.round(o.translate(e.y+s,!1,!0,!1,!0)),-o.len,2*o.len)};for(const g of[["width","x"],["height","y"]]){var c=g[0],d=g[1];let e=d+"1",t=d+"2";var u=Math.abs(p[e]-p[t]),_=n&&n.lineWidth||0,m=Math.abs(p[e]+p[t])/2,c=n&&n[c];HeatmapPoint_defined(c)&&c<u&&(u=c/2+_/2,p[e]=m-u,p[t]=m+u),h&&(("x"===d&&a.reversed||"y"===d&&!o.reversed)&&(e=t,t=d+"1"),p[e]+=h,p[t]-=h)}return p}haloPath(e){if(!e)return[];var{x:t=0,y:i=0,width:r=0,height:s=0}=this.shapeArgs||{};return[["M",t-e,i-e],["L",t-e,i+s+e],["L",t+r+e,i+s+e],["L",t+r+e,i-e],["Z"]]}isValid(){return this.value!==1/0&&this.value!==-1/0}}HeatmapPoint_extend(HeatmapPoint.prototype,{dataLabelOnNull:!0,moveToTopOnHover:!0,ttBelow:!1});const Heatmap_HeatmapPoint=HeatmapPoint,HeatmapSeriesDefaults_isNumber=external_highcharts_src_js_default_default()["isNumber"],HeatmapSeriesDefaults={animation:!1,borderRadius:0,borderWidth:0,interpolation:!1,nullColor:"#f7f7f7",dataLabels:{formatter:function(){const e=this.series.chart["numberFormatter"];var t=this.point["value"];return HeatmapSeriesDefaults_isNumber(t)?e(t,-1):""},inside:!0,verticalAlign:"middle",crop:!1,overflow:"allow",padding:0},marker:{symbol:"rect",radius:0,lineColor:void 0,states:{hover:{lineWidthPlus:0},select:{}}},clip:!0,pointRange:null,tooltip:{pointFormat:"{point.x}, {point.y}: {point.value}<br/>"},states:{hover:{halo:!1,brightness:.2}},legendSymbol:"rectangle"},Heatmap_HeatmapSeriesDefaults=HeatmapSeriesDefaults,doc=external_highcharts_src_js_default_default()["doc"],{defined:InterpolationUtilities_defined,pick:InterpolationUtilities_pick}=external_highcharts_src_js_default_default();function colorFromPoint(e,t){const i=t.series.colorAxis;if(i){const r=i.toColor(e||0,t).split(")")[0].split("(")[1].split(",").map(e=>InterpolationUtilities_pick(parseFloat(e),parseInt(e,10)));return r[3]=255*InterpolationUtilities_pick(r[3],1),InterpolationUtilities_defined(e)&&t.visible||(r[3]=0),r}return[0,0,0,0]}function getContext(e){const{canvas:t,context:i}=e;return t&&i?(i.clearRect(0,0,t.width,t.height),i):(e.canvas=doc.createElement("canvas"),e.context=e.canvas.getContext("2d",{willReadFrequently:!0})||void 0,e.context)}const InterpolationUtilities={colorFromPoint:colorFromPoint,getContext:getContext},Series_InterpolationUtilities=InterpolationUtilities,{series:HeatmapSeries_Series,seriesTypes:{column:HeatmapSeries_ColumnSeries,scatter:HeatmapSeries_ScatterSeries}}=external_highcharts_src_js_default_SeriesRegistry_default(),{symbols:HeatmapSeries_symbols}=external_highcharts_src_js_default_SVGRenderer_default()["prototype"],{addEvent:HeatmapSeries_addEvent,extend:HeatmapSeries_extend,fireEvent:HeatmapSeries_fireEvent,isNumber:HeatmapSeries_isNumber,merge:HeatmapSeries_merge,pick:HeatmapSeries_pick}=external_highcharts_src_js_default_default(),{colorFromPoint:HeatmapSeries_colorFromPoint,getContext:HeatmapSeries_getContext}=Series_InterpolationUtilities;class HeatmapSeries extends HeatmapSeries_ScatterSeries{constructor(){super(...arguments),this.valueMax=NaN,this.valueMin=NaN,this.isDirtyCanvas=!0}drawPoints(){const t=this,e=t.options,i=e.interpolation,O=e.marker||{};if(i){const{image:s,chart:a,xAxis:o,yAxis:n}=t,{reversed:l=!1,len:h}=o,{reversed:p=!1,len:c}=n,d={width:h,height:c};if(!s||t.isDirtyData||t.isDirtyCanvas){const u=HeatmapSeries_getContext(t),{canvas:_,options:{colsize:m=1,rowsize:g=1},points:b,points:{length:f}}=t,M=f-1,y=a.colorAxis&&a.colorAxis[0];if(_&&u&&y){const{min:x,max:S}=o.getExtremes(),{min:v,max:P}=n.getExtremes(),w=S-x,j=P-v,C=Math.round(w/m/8*8),B=Math.round(j/g/8*8),[L,E]=[[C,C/w,l,"ceil"],[B,B/j,!p,"floor"]].map(([t,i,e,r])=>e?e=>Math[r](t-i*e):e=>Math[r](i*e)),A=_.width=C+1,k=_.height=B+1,N=A*k,T=M/N,V=new Uint8ClampedArray(4*N);t.buildKDTree();for(let e=0;e<N;e++){var r=b[Math.ceil(T*e)],{x:I,y:z}=r;V.set(HeatmapSeries_colorFromPoint(r.value,r),(r=I,4*Math.ceil(A*E(z-v)+L(r-x))))}u.putImageData(new ImageData(V,A),0,0),s?s.attr({...d,href:_.toDataURL("image/png",1)}):(t.directTouch=!1,t.image=a.renderer.image(_.toDataURL("image/png",1)).attr(d).add(t.group))}t.isDirtyCanvas=!1}else s.width===h&&s.height===c||s.attr(d)}else(O.enabled||t._hasPointMarkers)&&(HeatmapSeries_Series.prototype.drawPoints.call(t),t.points.forEach(e=>{e.graphic&&(e.graphic[t.chart.styledMode?"css":"animate"](t.colorAttribs(e)),null===e.value&&e.graphic.addClass("highcharts-null-point"))}))}getExtremes(){var{dataMin:e,dataMax:t}=HeatmapSeries_Series.prototype.getExtremes.call(this,this.getColumn("value"));return HeatmapSeries_isNumber(e)&&(this.valueMin=e),HeatmapSeries_isNumber(t)&&(this.valueMax=t),HeatmapSeries_Series.prototype.getExtremes.call(this)}getValidPoints(e,t){return HeatmapSeries_Series.prototype.getValidPoints.call(this,e,t,!0)}hasData(){return!!this.dataTable.rowCount}init(){super.init.apply(this,arguments);const e=this.options;e.pointRange=HeatmapSeries_pick(e.pointRange,e.colsize||1),this.yAxis.axisPointRange=e.rowsize||1,HeatmapSeries_symbols.ellipse=HeatmapSeries_symbols.circle,e.marker&&HeatmapSeries_isNumber(e.borderRadius)&&(e.marker.r=e.borderRadius)}markerAttribs(e,t){var i,r=e.shapeArgs||{};return e.hasImage?{x:e.plotX,y:e.plotY}:t&&"normal"!==t?(e=e.options.marker||{},i=(this.options.marker||{}).states?.[t]||{},t=((e=e.states?.[t]||{}).width||i.width||r.width||0)+(e.widthPlus||i.widthPlus||0),e=(e.height||i.height||r.height||0)+(e.heightPlus||i.heightPlus||0),{x:(r.x||0)+((r.width||0)-t)/2,y:(r.y||0)+((r.height||0)-e)/2,width:t,height:e}):r}pointAttribs(e,t){const i=HeatmapSeries_Series.prototype.pointAttribs.call(this,e,t),r=this.options||{},s=this.chart.options.plotOptions||{},a=s.series||{},o=s.heatmap||{},n=e?.options.borderColor||r.borderColor||o.borderColor||a.borderColor,l=e?.options.borderWidth||r.borderWidth||o.borderWidth||a.borderWidth||i["stroke-width"];return i.stroke=e?.marker?.lineColor||r.marker?.lineColor||n||this.color,i["stroke-width"]=l,t&&"normal"!==t&&(e=HeatmapSeries_merge(r.states?.[t],r.marker?.states?.[t],e?.options.states?.[t]||{}),i.fill=e.color||external_highcharts_src_js_default_Color_default().parse(i.fill).brighten(e.brightness||0).get(),i.stroke=e.lineColor||i.stroke),i}translate(){const e=this.options,{borderRadius:s,marker:t}=e,a=t?.symbol||"rect",o=HeatmapSeries_symbols[a]?a:"rect",n=-1!==["circle","square"].indexOf(o);this.generatePoints();for(const p of this.points){var l,h=p.getCellAttributes();let e=Math.min(h.x1,h.x2),t=Math.min(h.y1,h.y2),i=Math.max(Math.abs(h.x2-h.x1),0),r=Math.max(Math.abs(h.y2-h.y1),0);p.hasImage=0===(p.marker?.symbol||a||"").indexOf("url"),n&&(l=Math.abs(i-r),e=Math.min(h.x1,h.x2)+(i<r?0:l/2),t=Math.min(h.y1,h.y2)+(i<r?l/2:0),i=r=Math.min(i,r)),p.hasImage&&(p.marker={width:i,height:r}),p.plotX=p.clientX=(h.x1+h.x2)/2,p.plotY=(h.y1+h.y2)/2,p.shapeType="path",p.shapeArgs=HeatmapSeries_merge(!0,{x:e,y:t,width:i,height:r},{d:HeatmapSeries_symbols[o](e,t,i,r,{r:HeatmapSeries_isNumber(s)?s:0})})}HeatmapSeries_fireEvent(this,"afterTranslate")}}HeatmapSeries.defaultOptions=HeatmapSeries_merge(HeatmapSeries_ScatterSeries.defaultOptions,Heatmap_HeatmapSeriesDefaults),HeatmapSeries_addEvent(HeatmapSeries,"afterDataClassLegendClick",function(){this.isDirtyCanvas=!0,this.drawPoints()}),HeatmapSeries_extend(HeatmapSeries.prototype,{axisTypes:Series_ColorMapComposition.seriesMembers.axisTypes,colorKey:Series_ColorMapComposition.seriesMembers.colorKey,directTouch:!0,getExtremesFromAll:!0,keysAffectYAxis:["y"],parallelArrays:Series_ColorMapComposition.seriesMembers.parallelArrays,pointArrayMap:["y","value"],pointClass:Heatmap_HeatmapPoint,specialGroup:"group",trackerGroups:Series_ColorMapComposition.seriesMembers.trackerGroups,alignDataLabel:HeatmapSeries_ColumnSeries.prototype.alignDataLabel,colorAttribs:Series_ColorMapComposition.seriesMembers.colorAttribs,getSymbol:HeatmapSeries_Series.prototype.getSymbol}),Series_ColorMapComposition.compose(HeatmapSeries),external_highcharts_src_js_default_SeriesRegistry_default().registerSeriesType("heatmap",HeatmapSeries);const Heatmap_HeatmapSeries=null,G=external_highcharts_src_js_default_default(),map_src=(G.ColorMapComposition=Series_ColorMapComposition,G.MapChart=G.MapChart||Chart_MapChart,G.MapNavigation=G.MapNavigation||Maps_MapNavigation,G.MapView=G.MapView||Maps_MapView,G.Projection=G.Projection||Maps_Projection,G.mapChart=G.Map=G.MapChart.mapChart,G.maps=G.MapChart.maps,G.geojson=Maps_GeoJSONComposition.geojson,G.topo2geo=Maps_GeoJSONComposition.topo2geo,Maps_GeoJSONComposition.compose(G.Chart),MapBubble_MapBubbleSeries.compose(G.Axis,G.Chart,G.Legend),Maps_MapNavigation.compose(Chart_MapChart,G.Pointer,G.SVGRenderer),Maps_MapView.compose(Chart_MapChart),external_highcharts_src_js_default_default());export{map_src as default};