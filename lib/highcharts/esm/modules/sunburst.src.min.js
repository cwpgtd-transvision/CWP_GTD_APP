import*as __WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__ from"../highcharts.src.js";var __webpack_require__={n:e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},d:(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const external_highcharts_src_js_default_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default;var external_highcharts_src_js_default_default=__webpack_require__.n(external_highcharts_src_js_default_namespaceObject);const lang={mainBreadcrumb:"Main"},options={buttonTheme:{fill:"none",height:18,padding:2,"stroke-width":0,zIndex:7,states:{select:{fill:"none"}},style:{color:"#334eff"}},buttonSpacing:5,floating:!1,format:void 0,relativeTo:"plotBox",rtl:!1,position:{align:"left",verticalAlign:"top",x:0,y:void 0},separator:{text:"/",style:{color:"#666666",fontSize:"0.8em"}},showFullPath:!0,style:{},useHTML:!1,zIndex:7},BreadcrumbsDefaults={lang:lang,options:options},Breadcrumbs_BreadcrumbsDefaults=BreadcrumbsDefaults,external_highcharts_src_js_default_Templating_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default.Templating;var external_highcharts_src_js_default_Templating_default=__webpack_require__.n(external_highcharts_src_js_default_Templating_namespaceObject);const format=external_highcharts_src_js_default_Templating_default()["format"],composed=external_highcharts_src_js_default_default()["composed"],{addEvent,defined,extend,fireEvent,isString,merge,objectEach,pick,pushUnique}=external_highcharts_src_js_default_default();function onChartAfterShowResetZoom(){var e,t,r=this;r.breadcrumbs&&(e=r.resetZoomButton&&r.resetZoomButton.getBBox(),t=r.breadcrumbs.options,e&&"right"===t.position.align&&"plotBox"===t.relativeTo&&r.breadcrumbs.alignBreadcrumbsGroup(-e.width-t.buttonSpacing))}function onChartDestroy(){this.breadcrumbs&&(this.breadcrumbs.destroy(),this.breadcrumbs=void 0)}function onChartGetMargins(){const e=this.breadcrumbs;var t,r;e&&!e.options.floating&&e.level&&(t=((t=(r=e.options).buttonTheme).height||0)+2*(t.padding||0)+r.buttonSpacing,"bottom"===(r=r.position.verticalAlign)?(this.marginBottom=(this.marginBottom||0)+t,e.yOffset=t):"middle"!==r?(this.plotTop+=t,e.yOffset=-t):e.yOffset=void 0)}function onChartRedraw(){this.breadcrumbs&&this.breadcrumbs.redraw()}function onChartSelection(e){!0===e.resetSelection&&this.breadcrumbs&&this.breadcrumbs.alignBreadcrumbsGroup()}class Breadcrumbs{static compose(e,t){pushUnique(composed,"Breadcrumbs")&&(addEvent(e,"destroy",onChartDestroy),addEvent(e,"afterShowResetZoom",onChartAfterShowResetZoom),addEvent(e,"getMargins",onChartGetMargins),addEvent(e,"redraw",onChartRedraw),addEvent(e,"selection",onChartSelection),extend(t.lang,Breadcrumbs_BreadcrumbsDefaults.lang))}constructor(e,t){this.elementList={},this.isDirty=!0,this.level=0,this.list=[];t=merge(e.options.drilldown&&e.options.drilldown.drillUpButton,Breadcrumbs.defaultOptions,e.options.navigation&&e.options.navigation.breadcrumbs,t);this.chart=e,this.options=t||{}}updateProperties(e){this.setList(e),this.setLevel(),this.isDirty=!0}setList(e){this.list=e}setLevel(){this.level=this.list.length&&this.list.length-1}getLevel(){return this.level}getButtonText(e){const t=this.chart,r=this.options,i=t.options.lang,s=pick(r.format,r.showFullPath?"{level.name}":"← {level.name}"),a=i&&pick(i.drillUpText,i.mainBreadcrumb);let o=r.formatter&&r.formatter(e)||format(s,{level:e.levelOptions},t)||"";return o=(isString(o)&&!o.length||"← "===o)&&defined(a)?r.showFullPath?a:"← "+a:o}redraw(){this.isDirty&&this.render(),this.group&&this.group.align(),this.isDirty=!1}render(){const e=this,t=e.chart,r=e.options;!e.group&&r&&(e.group=t.renderer.g("breadcrumbs-group").addClass("highcharts-no-tooltip highcharts-breadcrumbs").attr({zIndex:r.zIndex}).add()),r.showFullPath?this.renderFullPathButtons():this.renderSingleButton(),this.alignBreadcrumbsGroup()}renderFullPathButtons(){this.destroySingleButton(),this.resetElementListState(),this.updateListElements(),this.destroyListElements()}renderSingleButton(){const e=this,t=e.chart,r=e.list,i=e.options,s=i.buttonSpacing;this.destroyListElements();var a=e.group?e.group.getBBox().width:s,o=r[r.length-2];!t.drillUpButton&&0<this.level?t.drillUpButton=e.renderButton(o,a,s):t.drillUpButton&&(0<this.level?this.updateSingleButton():this.destroySingleButton())}alignBreadcrumbsGroup(e){var t=this;if(t.group){const r=t.options,i=r.buttonTheme,s=r.position,a="chart"===r.relativeTo||"spacingBox"===r.relativeTo?void 0:"plotBox",o=t.group.getBBox(),n=2*(i.padding||0)+r.buttonSpacing,l=(s.width=o.width+n,s.height=o.height+n,merge(s));e&&(l.x+=e),t.options.rtl&&(l.x+=s.width),l.y=pick(l.y,this.yOffset,0),t.group.align(l,!0,a)}}renderButton(i,e,t){const s=this,r=this.chart,a=s.options,o=merge(a.buttonTheme),n=r.renderer.button(s.getButtonText(i),e,t,function(e){const t=a.events&&a.events.click;let r;!1!==(r=t?t.call(s,e,i):r)&&(a.showFullPath?e.newLevel=i.level:e.newLevel=s.level-1,fireEvent(s,"up",e))},o).addClass("highcharts-breadcrumbs-button").add(s.group);return r.styledMode||n.attr(a.style),n}renderSeparator(e,t){const r=this.chart,i=this.options,s=i.separator,a=r.renderer.label(s.text,e,t,void 0,void 0,void 0,!1).addClass("highcharts-breadcrumbs-separator").add(this.group);return r.styledMode||a.css(s.style),a}update(e){merge(!0,this.options,e),this.destroy(),this.isDirty=!0}updateSingleButton(){const e=this.chart,t=this.list[this.level-1];e.drillUpButton&&e.drillUpButton.attr({text:this.getButtonText(t)})}destroy(){this.destroySingleButton(),this.destroyListElements(!0),this.group&&this.group.destroy(),this.group=void 0}destroyListElements(r){const i=this.elementList;objectEach(i,(e,t)=>{!r&&i[t].updated||((e=i[t]).button&&e.button.destroy(),e.separator&&e.separator.destroy(),delete e.button,delete e.separator,delete i[t])}),r&&(this.elementList={})}destroySingleButton(){this.chart.drillUpButton&&(this.chart.drillUpButton.destroy(),this.chart.drillUpButton=void 0)}resetElementListState(){objectEach(this.elementList,e=>{e.updated=!1})}updateListElements(){function s(e,t){return p*e.getBBox().width+p*t}function a(e,t,r){e.translate(t-e.getBBox().width,r)}const o=this,n=o.elementList,l=o.options.buttonSpacing,d=l,h=o.list,u=o.options.rtl,p=u?-1:1;let c=o.group?s(o.group,l):l,_,m;for(let r=0,i=h.length;r<i;++r){var g=r===i-1;let e,t;m=h[r],n[m.level]?(_=n[m.level],e=_.button,_.separator||g?_.separator&&g&&(_.separator.destroy(),delete _.separator):(c+=p*l,_.separator=o.renderSeparator(c,d),u&&a(_.separator,c,d),c+=s(_.separator,l)),n[m.level].updated=!0):(e=o.renderButton(m,c,d),u&&a(e,c,d),c+=s(e,l),g||(t=o.renderSeparator(c,d),u&&a(t,c,d),c+=s(t,l)),n[m.level]={button:e,separator:t,updated:!0}),e&&e.setState(g?2:0)}}}Breadcrumbs.defaultOptions=Breadcrumbs_BreadcrumbsDefaults.options;const Breadcrumbs_Breadcrumbs=Breadcrumbs,external_highcharts_src_js_default_Color_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default.Color;var external_highcharts_src_js_default_Color_default=__webpack_require__.n(external_highcharts_src_js_default_Color_namespaceObject);const external_highcharts_src_js_default_SeriesRegistry_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default.SeriesRegistry;var external_highcharts_src_js_default_SeriesRegistry_default=__webpack_require__.n(external_highcharts_src_js_default_SeriesRegistry_namespaceObject);const external_highcharts_src_js_default_SVGElement_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default.SVGElement;var ColorMapComposition,external_highcharts_src_js_default_SVGElement_default=__webpack_require__.n(external_highcharts_src_js_default_SVGElement_namespaceObject);const{prototype:columnProto}=external_highcharts_src_js_default_SeriesRegistry_default().seriesTypes["column"],{addEvent:ColorMapComposition_addEvent,defined:ColorMapComposition_defined}=external_highcharts_src_js_default_default(),Series_ColorMapComposition=(!function(e){function r(e){const t=this,r=t.series,i=r.chart.renderer;t.moveToTopOnHover&&t.graphic&&(r.stateMarkerGraphic||(r.stateMarkerGraphic=new(external_highcharts_src_js_default_SVGElement_default())(i,"use").css({pointerEvents:"none"}).add(t.graphic.parentGroup)),"hover"===e?.state?(t.graphic.attr({id:this.id}),r.stateMarkerGraphic.attr({href:i.url+"#"+this.id,visibility:"visible"})):r.stateMarkerGraphic.attr({href:""}))}e.pointMembers={dataLabelOnNull:!0,moveToTopOnHover:!0,isValid:function(){return null!==this.value&&this.value!==1/0&&this.value!==-1/0&&(void 0===this.value||!isNaN(this.value))}},e.seriesMembers={colorKey:"value",axisTypes:["xAxis","yAxis","colorAxis"],parallelArrays:["x","y","value"],pointArrayMap:["value"],trackerGroups:["group","markerGroup","dataLabelsGroup"],colorAttribs:function(e){const t={};!ColorMapComposition_defined(e.color)||e.state&&"normal"!==e.state||(t[this.colorProp||"fill"]=e.color);return t},pointAttribs:columnProto.pointAttribs},e.compose=function(e){var t=e.prototype.pointClass;return ColorMapComposition_addEvent(t,"afterSetState",r),e}}(ColorMapComposition=ColorMapComposition||{}),ColorMapComposition),external_highcharts_src_js_default_Series_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default.Series;var TreemapUtilities,CenteredUtilities,external_highcharts_src_js_default_Series_default=__webpack_require__.n(external_highcharts_src_js_default_Series_namespaceObject);class TreemapAlgorithmGroup{constructor(e,t,r,i){this.height=e,this.width=t,this.plot=i,this.direction=r,this.startDirection=r,this.total=0,this.nW=0,this.lW=0,this.nH=0,this.lH=0,this.elArr=[],this.lP={total:0,lH:0,nH:0,lW:0,nW:0,nR:0,lR:0,aspectRatio:function(e,t){return Math.max(e/t,t/e)}}}addElement(e){this.lP.total=this.elArr[this.elArr.length-1],this.total=this.total+e,0===this.direction?(this.lW=this.nW,this.lP.lH=this.lP.total/this.lW,this.lP.lR=this.lP.aspectRatio(this.lW,this.lP.lH),this.nW=this.total/this.height,this.lP.nH=this.lP.total/this.nW,this.lP.nR=this.lP.aspectRatio(this.nW,this.lP.nH)):(this.lH=this.nH,this.lP.lW=this.lP.total/this.lH,this.lP.lR=this.lP.aspectRatio(this.lP.lW,this.lH),this.nH=this.total/this.width,this.lP.nW=this.lP.total/this.nH,this.lP.nR=this.lP.aspectRatio(this.lP.nW,this.nH)),this.elArr.push(e)}reset(){this.nW=0,this.lW=0,this.elArr=[],this.total=0}}const Treemap_TreemapAlgorithmGroup=TreemapAlgorithmGroup;class TreemapNode{constructor(){this.childrenTotal=0,this.visible=!1}init(e,t,r,i,s,a,o){return this.id=e,this.i=t,this.children=r,this.height=i,this.level=s,this.series=a,this.parent=o,this}}const Treemap_TreemapNode=TreemapNode;function draw(e,t){const{animatableAttribs:r,onComplete:i,css:s,renderer:a}=t;var o=e.series&&e.series.chart.hasRendered?void 0:e.series&&e.series.options.animation;let n=e.graphic;if(t.attribs={...t.attribs,class:e.getClassName()},e.shouldDraw())n||(n="text"===t.shapeType?a.text():"image"===t.shapeType?a.image(t.imageUrl||"").attr(t.shapeArgs||{}):a[t.shapeType](t.shapeArgs||{}),(e.graphic=n).add(t.group)),s&&n.css(s),n.attr(t.attribs).animate(r,!t.isNew&&o,i);else if(n){const l=()=>{e.graphic=n=n&&n.destroy(),"function"==typeof i&&i()};Object.keys(r).length?n.animate(r,void 0,()=>l()):l()}}const DrawPointUtilities={draw:draw},Series_DrawPointUtilities=DrawPointUtilities,{pie:{prototype:{pointClass:PiePoint}},scatter:{prototype:{pointClass:ScatterPoint}}}=external_highcharts_src_js_default_SeriesRegistry_default().seriesTypes,{extend:TreemapPoint_extend,isNumber,pick:TreemapPoint_pick}=external_highcharts_src_js_default_default();class TreemapPoint extends ScatterPoint{constructor(){super(...arguments),this.groupedPointsAmount=0,this.shapeType="rect"}draw(e){Series_DrawPointUtilities.draw(this,e)}getClassName(){var e=this.series,t=e.options;let r=super.getClassName();return this.node.level<=e.nodeMap[e.rootNode].level&&this.node.children.length?r+=" highcharts-above-level":this.node.isGroup||this.node.isLeaf||e.nodeMap[e.rootNode].isGroup||TreemapPoint_pick(t.interactByLeaf,!t.allowTraversingTree)?this.node.isGroup||this.node.isLeaf||e.nodeMap[e.rootNode].isGroup||(r+=" highcharts-internal-node"):r+=" highcharts-internal-node-interactive",r}isValid(){return Boolean(this.id||isNumber(this.value))}setState(e){super.setState.apply(this,arguments),this.graphic&&this.graphic.attr({zIndex:"hover"===e?1:0})}shouldDraw(){return isNumber(this.plotY)&&null!==this.y}}TreemapPoint_extend(TreemapPoint.prototype,{setVisible:PiePoint.prototype.setVisible});const Treemap_TreemapPoint=TreemapPoint,TreemapSeriesDefaults_isString=external_highcharts_src_js_default_default()["isString"],TreemapSeriesDefaults={allowTraversingTree:!1,animationLimit:250,borderRadius:0,showInLegend:!1,marker:void 0,colorByPoint:!1,dataLabels:{enabled:!0,formatter:function(){var e=this&&this.point?this.point:{};return TreemapSeriesDefaults_isString(e.name)?e.name:""},headers:!1,inside:!0,padding:2,verticalAlign:"middle",style:{textOverflow:"ellipsis"}},tooltip:{headerFormat:"",pointFormat:"<b>{point.name}</b>: {point.value}<br/>",clusterFormat:"+ {point.groupedPointsAmount} more...<br/>"},ignoreHiddenPoint:!0,layoutAlgorithm:"sliceAndDice",layoutStartingDirection:"vertical",alternateStartingDirection:!1,levelIsConstant:!0,traverseUpButton:{position:{align:"right",x:-10,y:10}},borderColor:"#e6e6e6",borderWidth:1,colorKey:"colorValue",opacity:.15,states:{hover:{borderColor:"#999999",brightness:external_highcharts_src_js_default_SeriesRegistry_default().seriesTypes.heatmap?0:.1,halo:!1,opacity:.75,shadow:!1}},legendSymbol:"rectangle",traverseToLeaf:!1,cluster:{className:void 0,color:void 0,enabled:!1,pixelWidth:void 0,pixelHeight:void 0,name:void 0,reductionFactor:void 0,minimumClusterSize:5,layoutAlgorithm:{distance:0,gridSize:0,kmeansThreshold:0},marker:{lineWidth:0,radius:0}}},Treemap_TreemapSeriesDefaults=TreemapSeriesDefaults,Treemap_TreemapUtilities=((TreemapUtilities||(TreemapUtilities={})).recursive=function e(t,r,i){t=r.call(i||this,t);!1!==t&&e(t,r,i)},TreemapUtilities),{extend:TreeUtilities_extend,isArray,isNumber:TreeUtilities_isNumber,isObject,merge:TreeUtilities_merge,pick:TreeUtilities_pick,relativeLength}=external_highcharts_src_js_default_default();function getColor(e,t){const r=t.index,i=t.mapOptionsToLevel,s=t.parentColor,a=t.parentColorIndex,o=t.series,n=t.colors,l=t.siblings,d=o.points,h=o.chart.options.chart;let u,p,c,_,m,g;var b;return e&&(u=d[e.i],p=i[e.level]||{},u&&p.colorByPoint&&(_=u.index%(n?n.length:h.colorCount),c=n&&n[_]),o.chart.styledMode||(m=TreeUtilities_pick(u&&u.options.color,p&&p.color,c,s&&(e=s,(b=p&&p.colorVariation)&&"brightness"===b.key&&r&&l?external_highcharts_src_js_default_Color_default().parse(e).brighten(b.to*(r/l)).get():e),o.color)),g=TreeUtilities_pick(u&&u.options.colorIndex,p&&p.colorIndex,_,a,t.colorIndex)),{color:m,colorIndex:g}}function getLevelOptions(e){const t={};let a,r,i,o,s,n;if(isObject(e))for(o=TreeUtilities_isNumber(e.from)?e.from:1,n=e.levels,r={},a=isObject(e.defaults)?e.defaults:{},isArray(n)&&(r=n.reduce((e,t)=>{let r,i,s;return isObject(t)&&TreeUtilities_isNumber(t.level)&&(s=TreeUtilities_merge({},t),i=TreeUtilities_pick(s.levelIsConstant,a.levelIsConstant),delete s.levelIsConstant,delete s.level,r=t.level+(i?0:o-1),isObject(e[r])?TreeUtilities_merge(!0,e[r],s):e[r]=s),e},{})),s=TreeUtilities_isNumber(e.to)?e.to:1,i=0;i<=s;i++)t[i]=TreeUtilities_merge({},a,isObject(r[i])?r[i]:{});return t}function setTreeValues(i,s){const e=s.before,t=s.idRoot,r=s.mapIdToNode,a=r[t],o=!1!==s.levelIsConstant,n=s.points,l=n[i.i],d=l&&l.options||{},h=[];let u=0;i.levelDynamic=i.level-(o?0:a.level),i.name=TreeUtilities_pick(l&&l.name,""),i.visible=t===i.id||!0===s.visible,(i="function"==typeof e?e(i,s):i).children.forEach((e,t)=>{var r=TreeUtilities_extend({},s);TreeUtilities_extend(r,{index:t,siblings:i.children.length,visible:i.visible}),e=setTreeValues(e,r),h.push(e),e.visible&&(u+=e.val)});var p=TreeUtilities_pick(d.value,u);return i.visible=0<=p&&(0<u||i.visible),i.children=h,i.childrenTotal=u,i.isLeaf=i.visible&&!u,i.val=p,i}function updateRootId(e){let t,r;return isObject(e)&&(r=isObject(e.options)?e.options:{},t=TreeUtilities_pick(e.rootNode,r.rootId,""),isObject(e.userOptions)&&(e.userOptions.rootId=t),e.rootNode=t),t}function getNodeWidth(e,t){var{chart:e,options:r}=e,{nodeDistance:r=0,nodeWidth:i=0}=r,{plotSizeX:e=1}=e;if("auto"!==i)return relativeLength(i,e);if("string"==typeof r&&/%$/.test(r))return e/(t+parseFloat(r)/100*(t-1));i=Number(r);return(e+i)/(t||1)-i}const TreeUtilities={getColor:getColor,getLevelOptions:getLevelOptions,getNodeWidth:getNodeWidth,setTreeValues:setTreeValues,updateRootId:updateRootId},Series_TreeUtilities=TreeUtilities,color=external_highcharts_src_js_default_Color_default()["parse"],{composed:TreemapSeries_composed,noop}=external_highcharts_src_js_default_default(),{column:ColumnSeries,scatter:ScatterSeries}=external_highcharts_src_js_default_SeriesRegistry_default().seriesTypes,{getColor:TreemapSeries_getColor,getLevelOptions:TreemapSeries_getLevelOptions,updateRootId:TreemapSeries_updateRootId}=Series_TreeUtilities,{addEvent:TreemapSeries_addEvent,arrayMax,clamp,correctFloat,crisp,defined:TreemapSeries_defined,error,extend:TreemapSeries_extend,fireEvent:TreemapSeries_fireEvent,isArray:TreemapSeries_isArray,isNumber:TreemapSeries_isNumber,isObject:TreemapSeries_isObject,isString:TreemapSeries_isString,merge:TreemapSeries_merge,pick:TreemapSeries_pick,pushUnique:TreemapSeries_pushUnique,splat,stableSort}=external_highcharts_src_js_default_default(),axisMax=(external_highcharts_src_js_default_Series_default().keepProps.push("simulation","hadOutsideDataLabels"),100);let treemapAxisDefaultValues=!1;function onSeriesAfterBindAxes(){const e=this.xAxis,t=this.yAxis;var r;e&&t&&(this.is("treemap")?(r={endOnTick:!1,gridLineWidth:0,lineWidth:0,min:0,minPadding:0,max:axisMax,maxPadding:0,startOnTick:!1,title:void 0,tickPositions:[]},TreemapSeries_extend(t.options,r),TreemapSeries_extend(e.options,r),treemapAxisDefaultValues=!0):treemapAxisDefaultValues&&(t.setOptions(t.userOptions),e.setOptions(e.userOptions),treemapAxisDefaultValues=!1))}class TreemapSeries extends ScatterSeries{constructor(){super(...arguments),this.simulation=0}static compose(e){TreemapSeries_pushUnique(TreemapSeries_composed,"TreemapSeries")&&TreemapSeries_addEvent(e,"afterBindAxes",onSeriesAfterBindAxes)}algorithmCalcPoints(e,t,r,i){const s=r.plot,a=r.elArr.length-1;let o,n,l,d,h=r.lW,u=r.lH,p,c=0;t?(h=r.nW,u=r.nH):p=r.elArr[a];for(const _ of r.elArr)(t||c<a)&&(0===r.direction?(o=s.x,n=s.y,l=h,d=_/l):(o=s.x,n=s.y,d=u,l=_/d),i.push({x:o,y:n,width:l,height:correctFloat(d)}),0===r.direction?s.y=s.y+d:s.x=s.x+l),c+=1;r.reset(),0===r.direction?r.width=r.width-h:r.height=r.height-u,s.y=s.parent.y+(s.parent.height-r.height),s.x=s.parent.x+(s.parent.width-r.width),e&&(r.direction=1-r.direction),t||r.addElement(p)}algorithmFill(e,t,r){const i=[];let s,a=t.direction,o=t.x,n=t.y,l=t.width,d=t.height,h,u,p,c;for(const _ of r)s=t.width*t.height*(_.val/t.val),h=o,u=n,0===a?(c=d,p=s/c,l-=p,o+=p):(p=l,c=s/p,d-=c,n+=c),i.push({x:h,y:u,width:p,height:c,direction:0,val:0}),e&&(a=1-a);return i}algorithmLowAspectRatio(e,t,r){const i=[],s={x:t.x,y:t.y,parent:t},a=t.direction,o=r.length-1,n=new Treemap_TreemapAlgorithmGroup(t.height,t.width,a,s);let l,d=0;for(const h of r)l=t.width*t.height*(h.val/t.val),n.addElement(l),n.lP.nR>n.lP.lR&&this.algorithmCalcPoints(e,!1,n,i,s),d===o&&this.algorithmCalcPoints(e,!0,n,i,s),++d;return i}alignDataLabel(e,t,r){ColumnSeries.prototype.alignDataLabel.apply(this,arguments),e.dataLabel&&e.dataLabel.attr({zIndex:(e.node.zIndex||0)+1})}applyTreeGrouping(){const l=this,d=l.parentList||{},h=l.options["cluster"],e=h?.minimumClusterSize||5;if(h?.enabled){const n={},u=e=>{var t,r,i,s,a,o;e?.point?.shapeArgs&&({width:t=0,height:r=0}=e.point.shapeArgs,i=t*r,{pixelWidth:s=0,pixelHeight:a=0}=h,o=TreemapSeries_defined(a),(t<s||r<(o?a:s)||i<(a?s*a:s*s))&&!e.isGroup&&TreemapSeries_defined(e.parent)&&(n[e.parent]||(n[e.parent]=[]),n[e.parent].push(e))),e?.children.forEach(e=>{u(e)})};u(l.tree);for(const p in n)n[p]&&n[p].length>e&&n[p].forEach(t=>{var r=d[p].indexOf(t.i);if(-1!==r){d[p].splice(r,1);const a="highcharts-grouped-treemap-points-"+(t.parent||"root");let e=l.points.find(e=>e.id===a);if(!e){const o=l.pointClass,n=l.points.length;e=new o(l,{className:h.className,color:h.color,id:a,index:n,isGroup:!0,value:0}),TreemapSeries_extend(e,{formatPrefix:"cluster"}),l.points.push(e),d[p].push(n),d[a]=[]}var r=e.groupedPointsAmount+1,i=l.points[e.index].options.value||0,s=h.name||"+ "+r;l.points[e.index].groupedPointsAmount=r,l.points[e.index].options.value=i+(t.point.value||0),l.points[e.index].name=s,d[a].push(t.point.index)}});l.nodeMap={},l.nodeList=[],l.parentList=d;var t=l.buildTree("",-1,0,l.parentList);l.translate(t)}}calculateChildrenAreas(o,n){var s=this,a=s.options,l=s.mapOptionsToLevel[o.level+1],d=TreemapSeries_pick(l?.layoutAlgorithm&&s[l?.layoutAlgorithm]&&l.layoutAlgorithm,a.layoutAlgorithm),h=a.alternateStartingDirection,u=o.children.filter(e=>o.isGroup||!e.ignore),p=l?.groupPadding??a.groupPadding??0,c=s.nodeMap[s.rootNode];if(d){let e,t=c.pointValues?.width||0,r=c.pointValues?.height||0,i=(l?.layoutStartingDirection&&(n.direction="vertical"===l.layoutStartingDirection?0:1),e=s[d](n,u),-1);for(const v of u){var _,m=e[++i],g=(v===c&&(t=t||m.width,r=m.height),p/(s.xAxis.len/r)),b=p/(s.yAxis.len/r);v.values=TreemapSeries_merge(m,{val:v.childrenTotal,direction:h?1-n.direction:n.direction}),v.children.length&&v.point.dataLabels?.length&&((_=arrayMax(v.point.dataLabels.map(e=>e.options?.headers&&e.height||0))/(s.yAxis.len/r))<v.values.height/2&&(v.values.y+=_,v.values.height-=_)),p&&(_=Math.min(g,v.values.width/4),g=Math.min(b,v.values.height/4),v.values.x+=_,v.values.width-=2*_,v.values.y+=g,v.values.height-=2*g),v.pointValues=TreemapSeries_merge(m,{x:m.x/s.axisRatio,y:axisMax-m.y-m.height,width:m.width/s.axisRatio}),v.children.length&&s.calculateChildrenAreas(v,v.values)}const f=(e,t=[],r=!0)=>(e.children.forEach(e=>{(r&&e.isLeaf||!r&&!e.isLeaf)&&t.push(e.point),e.children.length&&f(e,t,r)}),t);if("leaf"===a.nodeSizeBy&&o===c&&this.hasOutsideDataLabels&&!f(c,void 0,!1).some(e=>TreemapSeries_isNumber(e.options.value))&&!TreemapSeries_isNumber(c.point?.options.value)){const S=f(c),x=S.map(e=>e.options.value||0),T=S.map(({node:{pointValues:e}})=>e?e.width*e.height:0),y=x.reduce((e,t)=>e+t,0),P=T.reduce((e,t)=>e+t,0),L=P/y;let s=0,a=0;S.forEach((e,t)=>{var r=x[t]?T[t]/x[t]:1,r=clamp(r/L,.8,1.4);let i=1-r;e.value&&(T[t]<20&&(i*=T[t]/20),i>a&&(a=i),i<s&&(s=i),e.simulatedValue=(e.simulatedValue||e.value)/r)}),(s<-.05||.05<a)&&this.simulation<10?(this.simulation++,this.setTreeValues(o),n.val=o.val,this.calculateChildrenAreas(o,n)):(S.forEach(e=>{delete e.simulatedValue}),this.setTreeValues(o),this.simulation=0)}}}createList(r){const i=this.chart,e=i.breadcrumbs,s=[];if(e){let e=0,t=(s.push({level:e,levelOptions:i.series[0]}),r.target.nodeMap[r.newRootId]);const a=[];for(;t.parent||""===t.parent;)a.push(t),t=r.target.nodeMap[t.parent];for(const o of a.reverse())s.push({level:++e,levelOptions:o});s.length<=1&&(s.length=0)}return s}drawDataLabels(){const e=this,t=e.mapOptionsToLevel,r=e.points.filter(function(e){return e.node.visible||TreemapSeries_defined(e.dataLabel)}),i=splat(e.options.dataLabels||{})[0]?.padding,s=r.some(e=>TreemapSeries_isNumber(e.plotY));for(const l of r){const d={},h={style:d},u=t[l.node.level];var a,o,n;(!l.node.isLeaf&&!l.node.isGroup||l.node.isGroup&&l.node.level<=e.nodeMap[e.rootNode].level)&&(h.enabled=!1),u?.dataLabels&&(TreemapSeries_merge(!0,h,splat(u.dataLabels)[0]),e.hasDataLabels=()=>!0),l.node.isLeaf?h.inside=!0:h.headers&&(h.verticalAlign="top"),l.shapeArgs&&s&&({height:a=0,width:o=0}=l.shapeArgs,32<o&&16<a&&l.shouldDraw()?(n=o-2*(h.padding||i||0),d.width=n+"px",d.lineClamp??(d.lineClamp=Math.floor(a/16)),d.visibility="inherit",h.headers&&l.dataLabel?.attr({width:n})):(d.width=o+"px",d.visibility="hidden")),l.dlOptions=TreemapSeries_merge(h,l.options.dataLabels)}super.drawDataLabels(r)}drawPoints(e=this.points){const t=this,r=t.chart,i=r.renderer,s=r.styledMode,a=t.options,o=s?{}:a.shadow,n=a.borderRadius,l=r.pointCount<a.animationLimit,d=a.allowTraversingTree;for(const h of e){const u=h.node.levelDynamic,p={},c={},_={},m="level-group-"+h.node.level,g=!!h.graphic,b=l&&g,f=h.shapeArgs;h.shouldDraw()&&(h.isInside=!0,n&&(c.r=n),TreemapSeries_merge(!0,b?p:c,g?f:{},s?{}:t.pointAttribs(h,h.selected?"select":void 0)),t.colorAttribs&&s&&TreemapSeries_extend(_,t.colorAttribs(h)),t[m]||(t[m]=i.g(m).attr({zIndex:1e3-(u||0)}).add(t.group),t[m].survive=!0)),h.draw({animatableAttribs:p,attribs:c,css:_,group:t[m],imageUrl:h.imageUrl,renderer:i,shadow:o,shapeArgs:f,shapeType:h.shapeType}),d&&h.graphic&&(h.drillId=a.interactByLeaf?t.drillToByLeaf(h):t.drillToByGroup(h))}}drillToByGroup(e){return!(e.node.isLeaf&&!e.node.isGroup)&&e.id}drillToByLeaf(e){var t=e.series.options["traverseToLeaf"];let r=!1,i;if(e.node.parent!==this.rootNode&&e.node.isLeaf)if(t)r=e.id;else for(i=e.node;!r;)(i=void 0!==i.parent?this.nodeMap[i.parent]:i).parent===this.rootNode&&(r=i.id);return r}drillToNode(e,t){error(32,!1,void 0,{"treemap.drillToNode":"use treemap.setRootNode"}),this.setRootNode(e,t)}drillUp(){var e=this.nodeMap[this.rootNode];e&&TreemapSeries_isString(e.parent)&&this.setRootNode(e.parent,!0,{trigger:"traverseUpButton"})}getExtremes(){var{dataMin:e,dataMax:t}=super.getExtremes(this.colorValueData);return this.valueMin=e,this.valueMax=t,super.getExtremes()}getListOfParents(e,t){const r=TreemapSeries_isArray(e)?e:[],i=TreemapSeries_isArray(t)?t:[],s=r.reduce(function(e,t,r){t=TreemapSeries_pick(t.parent,"");return void 0===e[t]&&(e[t]=[]),e[t].push(r),e},{"":[]});for(const o of Object.keys(s)){var a=s[o];if(""!==o&&-1===i.indexOf(o)){for(const n of a)s[""].push(n);delete s[o]}}return s}getTree(){var e=this,t=this.data.map(function(e){return e.id});return e.parentList=e.getListOfParents(this.data,t),e.nodeMap={},e.nodeList=[],e.buildTree("",-1,0,e.parentList||{})}buildTree(e,t,r,i,s){const a=this,o=[],n=a.points[t];let l=0,d;for(const u of i[e]||[])d=a.buildTree(a.points[u].id,u,r+1,i,e),l=Math.max(d.height+1,l),o.push(d);const h=(new a.NodeClass).init(e,t,o,l,r,a,s);for(const d of o)d.parentNode=h;return a.nodeMap[h.id]=h,a.nodeList.push(h),n&&((n.node=h).point=n),h}hasData(){return!!this.dataTable.rowCount}init(e,t){const r=this,i=TreemapSeries_merge(t.drillUpButton,t.breadcrumbs),s=TreemapSeries_addEvent(r,"setOptions",e=>{const t=e.userOptions,r=(TreemapSeries_defined(t.allowDrillToNode)&&!TreemapSeries_defined(t.allowTraversingTree)&&(t.allowTraversingTree=t.allowDrillToNode,delete t.allowDrillToNode),TreemapSeries_defined(t.drillUpButton)&&!TreemapSeries_defined(t.traverseUpButton)&&(t.traverseUpButton=t.drillUpButton,delete t.drillUpButton),splat(t.dataLabels||{}));t.levels?.forEach(e=>{r.push.apply(r,splat(e.dataLabels||{}))}),this.hasOutsideDataLabels=r.some(e=>e.headers)});super.init(e,t),delete r.opacity,r.eventsToUnbind.push(s),r.options.allowTraversingTree&&(r.eventsToUnbind.push(TreemapSeries_addEvent(r,"click",r.onClickDrillToNode)),r.eventsToUnbind.push(TreemapSeries_addEvent(r,"setRootNode",function(e){const t=r.chart;t.breadcrumbs&&t.breadcrumbs.updateProperties(r.createList(e))})),r.eventsToUnbind.push(TreemapSeries_addEvent(r,"update",function(e,t){const r=this.chart.breadcrumbs;r&&e.options.breadcrumbs&&r.update(e.options.breadcrumbs),this.hadOutsideDataLabels=this.hasOutsideDataLabels})),r.eventsToUnbind.push(TreemapSeries_addEvent(r,"destroy",function(e){const t=this.chart;t.breadcrumbs&&!e.keepEventsForUpdate&&(t.breadcrumbs.destroy(),t.breadcrumbs=void 0)}))),e.breadcrumbs||(e.breadcrumbs=new Breadcrumbs_Breadcrumbs(e,i)),r.eventsToUnbind.push(TreemapSeries_addEvent(e.breadcrumbs,"up",function(e){var t=this.level-e.newLevel;for(let e=0;e<t;e++)r.drillUp()}))}onClickDrillToNode(e){const t=e.point,r=t?.drillId;TreemapSeries_isString(r)&&(t.setState(""),this.setRootNode(r,!0,{trigger:"click"}))}pointAttribs(e,t){const r=TreemapSeries_isObject(this.mapOptionsToLevel)?this.mapOptionsToLevel:{},i=e&&r[e.node.level]||{},s=this.options,a=t&&s.states&&s.states[t]||{},o=e?.getClassName()||"",n={stroke:e&&e.borderColor||i.borderColor||a.borderColor||s.borderColor,"stroke-width":TreemapSeries_pick(e&&e.borderWidth,i.borderWidth,a.borderWidth,s.borderWidth),dashstyle:e?.borderDashStyle||i.borderDashStyle||a.borderDashStyle||s.borderDashStyle,fill:e?.color||this.color};return-1!==o.indexOf("highcharts-above-level")?(n.fill="none",n["stroke-width"]=0):-1!==o.indexOf("highcharts-internal-node-interactive")?(n["fill-opacity"]=a.opacity??s.opacity??1,n.cursor="pointer"):-1!==o.indexOf("highcharts-internal-node")?n.fill="none":t&&a.brightness&&(n.fill=color(n.fill).brighten(a.brightness).get()),n}setColorRecursive(t,r,i,s,a){var o=this,n=(o?.chart)?.options?.colors;if(t){const l=TreemapSeries_getColor(t,{colors:n,index:s,mapOptionsToLevel:o.mapOptionsToLevel,parentColor:r,parentColorIndex:i,series:o,siblings:a}),d=o.points[t.i];d&&(d.color=l.color,d.colorIndex=l.colorIndex);let e=-1;for(const h of t.children||[])o.setColorRecursive(h,l.color,l.colorIndex,++e,t.children.length)}}setPointValues(){const e=this,{points:t,xAxis:r,yAxis:i}=e,s=e.chart.styledMode;for(const _ of t){var a,o,n,l,d,h,u,{pointValues:p,visible:c}=_.node;p&&c?({height:c,width:p,x:h,y:a}=p,o=_,o=!s&&e.pointAttribs(o)["stroke-width"]||0,l=r.toPixels(h,!0),d=r.toPixels(h+p,!0),u=i.toPixels(a,!0),n=i.toPixels(a+c,!0),l=0===l?o/2:crisp(r.toPixels(h,!0),o,!0),d=d===r.len?r.len-o/2:crisp(r.toPixels(h+p,!0),o,!0),h=u===i.len?i.len-o/2:crisp(i.toPixels(a,!0),o,!0),p=0===n?o/2:crisp(i.toPixels(a+c,!0),o,!0),u={x:Math.min(l,d),y:Math.min(h,p),width:Math.abs(d-l),height:Math.abs(p-h)},_.plotX=u.x+u.width/2,_.plotY=u.y+u.height/2,_.shapeArgs=u):(delete _.plotX,delete _.plotY)}}setRootNode(e,t,r){e=TreemapSeries_extend({newRootId:e,previousRootId:this.rootNode,redraw:TreemapSeries_pick(t,!0),series:this},r);TreemapSeries_fireEvent(this,"setRootNode",e,function(e){const t=e.series;t.idPreviousRoot=e.previousRootId,t.rootNode=e.newRootId,t.isDirty=!0,e.redraw&&t.chart.redraw()})}setState(e){this.options.inactiveOtherPoints=!0,super.setState(e,!1),this.options.inactiveOtherPoints=!1}setTreeValues(e){const t=this,r=t.options,i=t.rootNode,s=t.nodeMap,a=s[i],o="boolean"!=typeof r.levelIsConstant||r.levelIsConstant,n=[],l=t.points[e.i];let d=0;for(var h of e.children)h=t.setTreeValues(h),n.push(h),h.ignore||(d+=h.val);stableSort(n,(e,t)=>(e.sortIndex||0)-(t.sortIndex||0));let u=TreemapSeries_pick(l?.simulatedValue,l?.options.value,d);return l&&(l.value=u),l?.isGroup&&r.cluster?.reductionFactor&&(u/=r.cluster.reductionFactor),e.parentNode?.point?.isGroup&&t.rootNode!==e.parent&&(e.visible=!1),TreemapSeries_extend(e,{children:n,childrenTotal:d,ignore:!(TreemapSeries_pick(l?.visible,!0)&&0<u),isLeaf:e.visible&&!d,isGroup:l?.isGroup,levelDynamic:e.level-(o?0:a.level),name:TreemapSeries_pick(l?.name,""),sortIndex:TreemapSeries_pick(l?.sortIndex,-u),val:u}),e}sliceAndDice(e,t){return this.algorithmFill(!0,e,t)}squarified(e,t){return this.algorithmLowAspectRatio(!0,e,t)}strip(e,t){return this.algorithmLowAspectRatio(!1,e,t)}stripes(e,t){return this.algorithmFill(!1,e,t)}translate(e){const i=this,t=i.options,r=!e;let s=TreemapSeries_updateRootId(i),a,o,n,l;e||s.startsWith("highcharts-grouped-treemap-points-")||((this.points||[]).forEach(e=>{e.isGroup&&e.destroy()}),super.translate(),e=i.getTree()),i.tree=e=e||i.tree,a=i.nodeMap[s],""===s||a||(i.setRootNode("",!1),s=i.rootNode,a=i.nodeMap[s]),a.point?.isGroup||(i.mapOptionsToLevel=TreemapSeries_getLevelOptions({from:a.level+1,levels:t.levels,to:e.height,defaults:{levelIsConstant:i.options.levelIsConstant,colorByPoint:t.colorByPoint}})),Treemap_TreemapUtilities.recursive(i.nodeMap[i.rootNode],e=>{var t=e.parent;let r=!1;return e.visible=!0,r=!t&&""!==t?r:i.nodeMap[t]}),Treemap_TreemapUtilities.recursive(i.nodeMap[i.rootNode].children,e=>{let t=!1;for(const r of e)r.visible=!0,r.children.length&&(t=(t||[]).concat(r.children));return t}),i.setTreeValues(e),i.axisRatio=i.xAxis.len/i.yAxis.len,i.nodeMap[""].pointValues=o={x:0,y:0,width:axisMax,height:axisMax},i.nodeMap[""].values=n=TreemapSeries_merge(o,{width:o.width*i.axisRatio,direction:"vertical"===t.layoutStartingDirection?0:1,val:e.val}),(this.hasOutsideDataLabels||this.hadOutsideDataLabels)&&this.drawDataLabels(),i.calculateChildrenAreas(e,n),i.colorAxis||t.colorByPoint||i.setColorRecursive(i.tree),t.allowTraversingTree&&a.pointValues&&(l=a.pointValues,i.xAxis.setExtremes(l.x,l.x+l.width,!1),i.yAxis.setExtremes(l.y,l.y+l.height,!1),i.xAxis.setScale(),i.yAxis.setScale()),i.setPointValues(),r&&i.applyTreeGrouping()}}TreemapSeries.defaultOptions=TreemapSeries_merge(ScatterSeries.defaultOptions,Treemap_TreemapSeriesDefaults),TreemapSeries_extend(TreemapSeries.prototype,{buildKDTree:noop,colorAttribs:Series_ColorMapComposition.seriesMembers.colorAttribs,colorKey:"colorValue",directTouch:!0,getExtremesFromAll:!0,getSymbol:noop,optionalAxis:"colorAxis",parallelArrays:["x","y","value","colorValue"],pointArrayMap:["value","colorValue"],pointClass:Treemap_TreemapPoint,NodeClass:Treemap_TreemapNode,trackerGroups:["group","dataLabelsGroup"],utils:Treemap_TreemapUtilities}),Series_ColorMapComposition.compose(TreemapSeries),external_highcharts_src_js_default_SeriesRegistry_default().registerSeriesType("treemap",TreemapSeries);const Treemap_TreemapSeries=null,deg2rad=external_highcharts_src_js_default_default()["deg2rad"],{fireEvent:CenteredUtilities_fireEvent,isNumber:CenteredUtilities_isNumber,pick:CenteredUtilities_pick,relativeLength:CenteredUtilities_relativeLength}=external_highcharts_src_js_default_default(),Series_CenteredUtilities=(!function(e){e.getCenter=function(){var e=this.options,t=this.chart,r=2*(e.slicedOffset||0),i=t.plotWidth-2*r,s=t.plotHeight-2*r,a=e.center,o=Math.min(i,s),n=e.thickness;let l,d=e.size,h=e.innerSize||0,u,p;"string"==typeof d&&(d=parseFloat(d)),"string"==typeof h&&(h=parseFloat(h));const c=[CenteredUtilities_pick(a?.[0],"50%"),CenteredUtilities_pick(a?.[1],"50%"),CenteredUtilities_pick(d&&d<0?void 0:e.size,"100%"),CenteredUtilities_pick(h&&h<0?void 0:e.innerSize||0,"0%")];for(!t.angular||this instanceof external_highcharts_src_js_default_Series_default()||(c[3]=0),u=0;u<4;++u)p=c[u],l=u<2||2===u&&/%$/.test(p),c[u]=CenteredUtilities_relativeLength(p,[i,s,o,c[2]][u])+(l?r:0);return c[3]>c[2]&&(c[3]=c[2]),CenteredUtilities_isNumber(n)&&2*n<c[2]&&0<n&&(c[3]=c[2]-2*n),CenteredUtilities_fireEvent(this,"afterGetCenter",{positions:c}),c},e.getStartAndEndRadians=function(e,t){return e=CenteredUtilities_isNumber(e)?e:0,t=CenteredUtilities_isNumber(t)&&e<t&&t-e<360?t:e+360,{start:deg2rad*(e+-90),end:deg2rad*(t+-90)}}}(CenteredUtilities=CenteredUtilities||{}),CenteredUtilities),{series:{prototype:{pointClass:Point}},seriesTypes:{treemap:{prototype:{pointClass:SunburstPoint_TreemapPoint}}}}=external_highcharts_src_js_default_SeriesRegistry_default(),{correctFloat:SunburstPoint_correctFloat,extend:SunburstPoint_extend,pInt}=external_highcharts_src_js_default_default();class SunburstPoint extends SunburstPoint_TreemapPoint{getDataLabelPath(e){const t=this.series.chart.renderer,r=this.shapeExisting,i=r.r+pInt(e.options?.distance||0);let s=r.start,a=r.end;e=s+(a-s)/2;let o=e<0&&e>-Math.PI||e>Math.PI,n;return s===-Math.PI/2&&SunburstPoint_correctFloat(a)===SunburstPoint_correctFloat(1.5*Math.PI)&&(s=-Math.PI+Math.PI/360,a=-Math.PI/360,o=!0),a-s>Math.PI&&(o=!1,n=!0,a-s>2*Math.PI-.01&&(s+=.01,a-=.01)),this.dataLabelPath&&(this.dataLabelPath=this.dataLabelPath.destroy()),this.dataLabelPath=t.arc({open:!0,longArc:n?1:0}).attr({start:o?s:a,end:o?a:s,clockwise:+o,x:r.x,y:r.y,r:(i+r.innerR)/2}).add(t.defs),this.dataLabelPath}isValid(){return!0}}SunburstPoint_extend(SunburstPoint.prototype,{getClassName:Point.prototype.getClassName,haloPath:Point.prototype.haloPath,setState:Point.prototype.setState});const Sunburst_SunburstPoint=SunburstPoint,{treemap:SunburstUtilities_TreemapSeries}=external_highcharts_src_js_default_SeriesRegistry_default()["seriesTypes"],{isNumber:SunburstUtilities_isNumber,isObject:SunburstUtilities_isObject,merge:SunburstUtilities_merge}=external_highcharts_src_js_default_default();function calculateLevelSizes(e,t){t=SunburstUtilities_isObject(t)?t:{};let r,i=0,s,a,o,n,l,d;if(SunburstUtilities_isObject(e)){r=SunburstUtilities_merge({},e),l=SunburstUtilities_isNumber(t.from)?t.from:0,d=SunburstUtilities_isNumber(t.to)?t.to:0,a=range(l,d),o=Object.keys(r).filter(e=>-1===a.indexOf(+e)),s=n=SunburstUtilities_isNumber(t.diffRadius)?t.diffRadius:0;for(const u of a){const p=r[u],c=p.levelSize.unit,_=p.levelSize.value;"weight"===c?i+=_:"percentage"===c?(p.levelSize={unit:"pixels",value:_/100*s},n-=p.levelSize.value):"pixels"===c&&(n-=_)}for(const m of a){var h=r[m];"weight"===h.levelSize.unit&&(h=h.levelSize.value,r[m].levelSize={unit:"pixels",value:h/i*n})}for(const g of o)r[g].levelSize={value:0,unit:"pixels"}}return r}function getLevelFromAndTo({level:e,height:t}){return{from:0<e?e:1,to:e+t}}function range(t,r){const i=[];if(SunburstUtilities_isNumber(t)&&SunburstUtilities_isNumber(r)&&t<=r)for(let e=t;e<=r;e++)i.push(e);return i}const SunburstUtilities={calculateLevelSizes:calculateLevelSizes,getLevelFromAndTo:getLevelFromAndTo,range:range,recursive:SunburstUtilities_TreemapSeries.prototype.utils.recursive},Sunburst_SunburstUtilities=SunburstUtilities;class SunburstNode extends Treemap_TreemapNode{}const Sunburst_SunburstNode=SunburstNode,SunburstSeriesDefaults={center:["50%","50%"],clip:!1,colorByPoint:!1,opacity:1,dataLabels:{allowOverlap:!0,defer:!0,rotationMode:"circular",style:{textOverflow:"ellipsis"}},rootId:void 0,levelIsConstant:!0,levelSize:{value:1,unit:"weight"},slicedOffset:10},Sunburst_SunburstSeriesDefaults=SunburstSeriesDefaults,TextPath_deg2rad=external_highcharts_src_js_default_default()["deg2rad"],{addEvent:TextPath_addEvent,merge:TextPath_merge,uniqueKey,defined:TextPath_defined,extend:TextPath_extend}=external_highcharts_src_js_default_default();function setTextPath(s,e){e=TextPath_merge(!0,{enabled:!0,attributes:{dy:-5,startOffset:"50%",textAnchor:"middle"}},e);const a=this.renderer.url,o=this.text||this,t=o.textPath,{attributes:n,enabled:l}=e;return s=s||t&&t.path,t&&t.undo(),s&&l?(e=TextPath_addEvent(o,"afterModifyTree",t=>{if(s&&l){let e=s.attr("id");e||s.attr("id",e=uniqueKey());const i={x:0,y:0};TextPath_defined(n.dx)&&(i.dx=n.dx,delete n.dx),TextPath_defined(n.dy)&&(i.dy=n.dy,delete n.dy),o.attr(i),this.attr({transform:""}),this.box&&(this.box=this.box.destroy());var r=t.nodes.slice(0);t.nodes.length=0,t.nodes[0]={tagName:"textPath",attributes:TextPath_extend(n,{"text-anchor":n.textAnchor,href:a+"#"+e}),children:r}}}),o.textPath={path:s,undo:e}):(o.attr({dx:0,dy:0}),delete o.textPath),this.added&&(o.textCache="",this.renderer.buildText(o)),this}function setPolygon(e){const t=e.bBox,s=this.element?.querySelector("textPath");if(s){const p=[],{b:c,h:r}=this.renderer.fontMetrics(this.element),_=r-c,m=new RegExp('(<tspan>|<tspan(?!\\sclass="highcharts-br")[^>]*>|<\\/tspan>)',"g"),g=s.innerHTML.replace(m,"").split(/<tspan class="highcharts-br"[^>]*>/),b=g.length;var i=(e,t)=>{var{x:t,y:r}=t,e=(s.getRotationOfChar(e)-90)*TextPath_deg2rad,i=Math.cos(e),e=Math.sin(e);return[[t-_*i,r-_*e],[t+c*i,r+c*e]]};for(let t=0,r=0;r<b;r++){var a=g[r].length;for(let e=0;e<a;e+=5)try{var o=t+e+r,[n,l]=i(o,s.getStartPositionOfChar(o));0===e?(p.push(l),p.push(n)):(0===r&&p.unshift(l),r===b-1&&p.push(n))}catch(e){break}t+=a-1;try{var d=t+r,[h,u]=i(d,s.getEndPositionOfChar(d));p.unshift(u),p.unshift(h)}catch(e){break}}p.length&&p.push(p[0].slice()),t.polygon=p}return t}function drawTextPath(e){const t=e.labelOptions,r=e.point,i=t[r.formatPrefix+"TextPath"]||t.textPath;i&&!t.useHTML&&(this.setTextPath(r.getDataLabelPath?.(this)||r.graphic,i),r.dataLabelPath&&!i.enabled&&(r.dataLabelPath=r.dataLabelPath.destroy()))}function compose(e){TextPath_addEvent(e,"afterGetBBox",setPolygon),TextPath_addEvent(e,"beforeAddingDataLabel",drawTextPath);const t=e.prototype;t.setTextPath||(t.setTextPath=setTextPath)}const TextPath={compose:compose},Extensions_TextPath=TextPath,{getCenter,getStartAndEndRadians}=Series_CenteredUtilities,SunburstSeries_noop=external_highcharts_src_js_default_default()["noop"],{column:SunburstSeries_ColumnSeries,treemap:SunburstSeries_TreemapSeries}=external_highcharts_src_js_default_SeriesRegistry_default().seriesTypes,{getColor:SunburstSeries_getColor,getLevelOptions:SunburstSeries_getLevelOptions,setTreeValues:SunburstSeries_setTreeValues,updateRootId:SunburstSeries_updateRootId}=Series_TreeUtilities,{defined:SunburstSeries_defined,error:SunburstSeries_error,extend:SunburstSeries_extend,fireEvent:SunburstSeries_fireEvent,isNumber:SunburstSeries_isNumber,isObject:SunburstSeries_isObject,isString:SunburstSeries_isString,merge:SunburstSeries_merge,splat:SunburstSeries_splat}=external_highcharts_src_js_default_default(),rad2deg=(Extensions_TextPath.compose(external_highcharts_src_js_default_SVGElement_default()),180/Math.PI);function isBoolean(e){return"boolean"==typeof e}const getEndPoint=function(e,t,r,i){return{x:e+Math.cos(r)*i,y:t+Math.sin(r)*i}};function getDlOptions(e){const t=e.point,r=SunburstSeries_isObject(e.shapeArgs)?e.shapeArgs:{},{end:i=0,radius:s=0,start:a=0}=r,o=SunburstSeries_isObject(e.optionsPoint)?e.optionsPoint.dataLabels:{},n=SunburstSeries_splat(SunburstSeries_isObject(e.level)?e.level.dataLabels:{})[0],l=SunburstSeries_merge(n,o),d=l.style=l.style||{},{innerArcLength:h=0,outerArcLength:u=0}=t;let p,c,_=l.rotationMode,m=SunburstSeries_defined(d.width)?parseInt(d.width||"0",10):void 0;return SunburstSeries_isNumber(l.rotation)||("auto"!==_&&"circular"!==_||(l.useHTML&&"circular"===_&&(_="auto"),h<1&&s<u?(p=0,t.dataLabelPath&&"circular"===_&&(l.textPath={enabled:!0}),i-a<Math.PI&&(m=.7*s)):1<h&&1.5*s<u?"circular"===_?l.textPath={enabled:!0,attributes:{dy:5}}:_="parallel":(t.dataLabel?.textPath&&"circular"===_&&(l.textPath={enabled:!1}),_="perpendicular")),"auto"!==_&&"circular"!==_&&(t.dataLabel?.textPath&&(l.textPath={enabled:!1}),p=i-(i-a)/2),"parallel"===_?m=Math.min(2.5*s,(u+h)/2):!SunburstSeries_defined(m)&&s&&(m=1===t.node.level?2*s:s),"perpendicular"===_&&(u<16?m=1:r.radius&&(d.lineClamp=Math.floor(h/16)||1,m=s-(h<16?s*((16-h)/(u-h)):0))),m=Math.max((m||0)-2*(l.padding||0),1),c=(p||0)*rad2deg%180,"parallel"===_&&(c-=90),90<c?c-=180:c<-90&&(c+=180),l.rotation=c),l.textPath&&(0===t.shapeExisting.innerR&&l.textPath.enabled?(l.rotation=0,l.textPath.enabled=!1,m=Math.max(2*t.shapeExisting.r-2*(l.padding||0),1)):t.dlOptions?.textPath&&!t.dlOptions.textPath.enabled&&"circular"===_&&(l.textPath.enabled=!0),l.textPath.enabled&&(l.rotation=0,m=Math.max((u+h)/2-2*(l.padding||0),1),d.whiteSpace="nowrap")),d.width=m+"px",l}function getAnimation(e,t){var r=t.point,i=t.radians,s=t.innerR,a=t.idRoot,o=t.idPreviousRoot,n=t.shapeExisting,l=t.shapeRoot,d=t.shapePreviousRoot,t=t.visible;let h={},u={end:e.end,start:e.start,innerR:e.innerR,r:e.r,x:e.x,y:e.y};return t?!r.graphic&&d&&((h=a===r.id?{start:i.start,end:i.end}:d.end<=e.start?{start:i.end,end:i.end}:{start:i.start,end:i.start}).innerR=h.r=s):r.graphic&&(o===r.id?u={innerR:s,r:s}:l&&(u=l.end<=n.start?{innerR:s,r:s,start:i.end,end:i.end}:{innerR:s,r:s,start:i.start,end:i.start})),{from:h,to:u}}function getDrillId(e,t,r){var i=e.node;let s;return s=i.isLeaf?s:t===e.id?r[t].parent:e.id}function cbSetTreeValuesBefore(e,t){const r=t.mapIdToNode,i=e.parent,s=i?r[i]:void 0,a=t.series,o=a.chart,n=a.points,l=n[e.i],d=a.options.colors||o&&o.options.colors,h=SunburstSeries_getColor(e,{colors:d,colorIndex:a.colorIndex,index:t.index,mapOptionsToLevel:t.mapOptionsToLevel,parentColor:s&&s.color,parentColorIndex:s&&s.colorIndex,series:t.series,siblings:t.siblings});return e.color=h.color,e.colorIndex=h.colorIndex,l&&(l.color=e.color,l.colorIndex=e.colorIndex,e.sliced=e.id!==t.idRoot&&l.sliced),e}class SunburstSeries extends SunburstSeries_TreemapSeries{alignDataLabel(e,t,r){if(!r.textPath||!r.textPath.enabled)return t.placed=!1,super.alignDataLabel.apply(this,arguments)}animate(e){const t=this.chart,r=[t.plotWidth/2,t.plotHeight/2],i=t.plotLeft,s=t.plotTop,a=this.group;let o;e?(o={translateX:r[0]+i,translateY:r[1]+s,scaleX:.001,scaleY:.001,rotation:10,opacity:.01},a.attr(o)):(o={translateX:i,translateY:s,scaleX:1,scaleY:1,rotation:0,opacity:1},a.animate(o,this.options.animation))}drawPoints(){const r=this,i=r.mapOptionsToLevel,s=r.shapeRoot,a=r.group,o=r.hasRendered,n=r.rootNode,l=r.idPreviousRoot,d=r.nodeMap,e=d[l],h=e&&e.shapeArgs,t=r.points,u=r.startAndEndRadians,p=r.chart,c=p&&p.options&&p.options.chart||{},_=!isBoolean(c.animation)||c.animation,m=r.center,g={x:m[0],y:m[1]},b=m[3]/2,f=r.chart.renderer,v=!!(_&&o&&n!==l&&r.dataLabelsGroup);let S,x=!1,T=!1;v&&(r.dataLabelsGroup.attr({opacity:0}),S=function(){const e=r;x=!0,e.dataLabelsGroup&&e.dataLabelsGroup.animate({opacity:1,visibility:"inherit"})});for(const y of t){const P=y.node,L=i[P.level],C=y.shapeExisting||{},A=P.shapeArgs||{},w=!(!P.visible||!P.shapeArgs);let e,t;A.borderRadius=r.options.borderRadius,e=o&&_?getAnimation(A,{center:g,point:y,radians:u,innerR:b,idRoot:n,idPreviousRoot:l,shapeExisting:C,shapeRoot:s,shapePreviousRoot:h,visible:w}):{to:A,from:{}},SunburstSeries_extend(y,{shapeExisting:A,tooltipPos:[A.plotX,A.plotY],drillId:getDrillId(y,n,d),name:""+(y.name||y.id||y.index),plotX:A.plotX,plotY:A.plotY,value:P.val,isInside:w,isNull:!w}),y.dlOptions=getDlOptions({point:y,level:L,optionsPoint:y.options,shapeArgs:A}),!T&&w&&(T=!0,t=S),y.draw({animatableAttribs:e.to,attribs:SunburstSeries_extend(e.from,!p.styledMode&&r.pointAttribs(y,y.selected&&"select")),onComplete:t,group:a,renderer:f,shapeType:"arc",shapeArgs:A})}v&&T?(r.hasRendered=!1,r.options.dataLabels.defer=!0,SunburstSeries_ColumnSeries.prototype.drawDataLabels.call(r),r.hasRendered=!0,x&&S()):SunburstSeries_ColumnSeries.prototype.drawDataLabels.call(r),r.idPreviousRoot=n}layoutAlgorithm(e,t,r){let s=e.start;const a=e.end-s,o=e.val,n=e.x,l=e.y,d=r&&SunburstSeries_isObject(r.levelSize)&&SunburstSeries_isNumber(r.levelSize.value)?r.levelSize.value:0,h=e.r,u=h+d,p=r&&SunburstSeries_isNumber(r.slicedOffset)?r.slicedOffset:0;return(t||[]).reduce((e,t)=>{var r=1/o*t.val*a,i=s+r/2,i=getEndPoint(n,l,i,p),t={x:t.sliced?i.x:n,y:t.sliced?i.y:l,innerR:h,r:u,radius:d,start:s,end:s+r};return e.push(t),s=t.end,e},[])}setRootNode(e,t,r){if(1===this.nodeMap[e].level&&1===this.nodeList.filter(e=>1===e.level).length){if(""===this.idPreviousRoot)return;e=""}super.setRootNode(e,t,r)}setShapeArgs(e,t,r){var i=r[e.level+1],e=e.children.filter(function(e){return e.visible}),s=this.layoutAlgorithm(t,e,i);let a=-1;for(const h of e){var o=s[++a],n=o.start+(o.end-o.start)/2,l=o.innerR+(o.r-o.innerR)/2,d=o.end-o.start,n=0===o.innerR&&6.28<d?{x:o.x,y:o.y}:getEndPoint(o.x,o.y,n,l),l=!h.val||h.childrenTotal>h.val?h.childrenTotal:h.val;this.points[h.i]&&(this.points[h.i].innerArcLength=d*o.innerR,this.points[h.i].outerArcLength=d*o.r),h.shapeArgs=SunburstSeries_merge(o,{plotX:n.x,plotY:n.y}),h.values=SunburstSeries_merge(o,{val:l}),h.children.length&&this.setShapeArgs(h,h.values,r)}}translate(){var e=this,t=e.options,r=e.center=e.getCenter(),i=e.startAndEndRadians=getStartAndEndRadians(t.startAngle,t.endAngle),s=r[3]/2,a=r[2]/2-s,o=SunburstSeries_updateRootId(e);let n=e.nodeMap,l,d=n&&n[o],h={};e.shapeRoot=d&&d.shapeArgs,e.generatePoints(),SunburstSeries_fireEvent(e,"afterTranslate");var u=e.tree=e.getTree(),p=(n=e.nodeMap,d=n[o],SunburstSeries_isString(d.parent)?d.parent:""),p=n[p],{from:c,to:_}=Sunburst_SunburstUtilities.getLevelFromAndTo(d),a=(l=SunburstSeries_getLevelOptions({from:c,levels:e.options.levels,to:_,defaults:{colorByPoint:t.colorByPoint,dataLabels:t.dataLabels,levelIsConstant:t.levelIsConstant,levelSize:t.levelSize,slicedOffset:t.slicedOffset}}),l=Sunburst_SunburstUtilities.calculateLevelSizes(l,{diffRadius:a,from:c,to:_}),SunburstSeries_setTreeValues(u,{before:cbSetTreeValuesBefore,idRoot:o,levelIsConstant:t.levelIsConstant,mapOptionsToLevel:l,mapIdToNode:n,points:e.points,series:e}),n[""].shapeArgs={end:i.end,r:s,start:i.start,val:d.val,x:r[0],y:r[1]});this.setShapeArgs(p,a,l),e.mapOptionsToLevel=l;for(const m of e.points)h[m.id]&&SunburstSeries_error(31,!1,e.chart),h[m.id]=!0;h={}}}SunburstSeries.defaultOptions=SunburstSeries_merge(SunburstSeries_TreemapSeries.defaultOptions,Sunburst_SunburstSeriesDefaults),SunburstSeries_extend(SunburstSeries.prototype,{axisTypes:[],drawDataLabels:SunburstSeries_noop,getCenter:getCenter,isCartesian:!1,onPointSupported:!0,pointAttribs:SunburstSeries_ColumnSeries.prototype.pointAttribs,pointClass:Sunburst_SunburstPoint,NodeClass:Sunburst_SunburstNode,utils:Sunburst_SunburstUtilities}),external_highcharts_src_js_default_SeriesRegistry_default().registerSeriesType("sunburst",SunburstSeries);const Sunburst_SunburstSeries=null,G=external_highcharts_src_js_default_default(),sunburst_src=(G.Breadcrumbs=G.Breadcrumbs||Breadcrumbs_Breadcrumbs,G.Breadcrumbs.compose(G.Chart,G.defaultOptions),external_highcharts_src_js_default_default());export{sunburst_src as default};