import*as __WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__ from"../highcharts.src.js";var __webpack_require__={n:e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},d:(e,t)=>{for(var a in t)__webpack_require__.o(t,a)&&!__webpack_require__.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const external_highcharts_src_js_default_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default;var external_highcharts_src_js_default_default=__webpack_require__.n(external_highcharts_src_js_default_namespaceObject);const FunnelSeriesDefaults={animation:!1,borderRadius:0,center:["50%","50%"],width:"90%",neckWidth:"30%",height:"100%",neckHeight:"25%",reversed:!1,size:!0,dataLabels:{connectorWidth:1,verticalAlign:"middle"},states:{select:{color:"#cccccc",borderColor:"#000000"}}},Funnel_FunnelSeriesDefaults=FunnelSeriesDefaults,defaultOptions=external_highcharts_src_js_default_default()["defaultOptions"],noop=external_highcharts_src_js_default_default()["noop"],{addEvent,extend,isObject,merge,relativeLength}=external_highcharts_src_js_default_default(),defaultBorderRadiusOptions={radius:0,scope:"stack",where:void 0};let oldArc=noop,oldRoundedRect=noop;function applyBorderRadius(e,t,a){var s=e[t];let r=e[t+1];"Z"===r[0]&&(r=e[0]);let i,n,d;if("M"!==s[0]&&"L"!==s[0]||"A"!==r[0]?"A"!==s[0]||"M"!==r[0]&&"L"!==r[0]||(i=r,n=s):(i=s,n=r,d=!0),i&&n&&n.params){const h=n[1],c=n[5],_=n.params,{start:u,end:p,cx:g,cy:f}=_;var s=c?h-a:h+a,o=s?Math.asin(a/s):0,l=c?o:-o,o=Math.cos(o)*s;d?(_.start=u+l,i[1]=g+o*Math.cos(u),i[2]=f+o*Math.sin(u),e.splice(t+1,0,["A",a,a,0,0,1,g+h*Math.cos(_.start),f+h*Math.sin(_.start)])):(_.end=p-l,n[6]=g+h*Math.cos(_.end),n[7]=f+h*Math.sin(_.end),e.splice(t+1,0,["A",a,a,0,0,1,g+o*Math.cos(p),f+o*Math.sin(p)])),n[4]=Math.abs(_.end-_.start)<Math.PI?0:1}}function arc(e,t,a,s,r={}){var i=oldArc(e,t,a,s,r),{innerR:e=0,r:t=a,start:s=0,end:a=0}=r;if(r.open||!r.borderRadius)return i;var a=a-s,s=Math.sin(a/2),n=Math.max(Math.min(relativeLength(r.borderRadius||0,t-e),(t-e)/2,t*s/(1+s)),0),d=Math.min(n,a/Math.PI*2*e);let o=i.length-1;for(;o--;)applyBorderRadius(i,o,1<o?d:n);return i}function seriesOnAfterColumnTranslate(){if(this.options.borderRadius&&(!this.chart.is3d||!this.chart.is3d())){const{options:o,yAxis:l}=this,h="percent"===o.stacking,e=defaultOptions.plotOptions?.[this.type]?.borderRadius,c=optionsToObject(o.borderRadius,isObject(e)?e:{}),_=l.options.reversed;for(const u of this.points){var s=u["shapeArgs"];if("roundedRect"===u.shapeType&&s){var{width:r=0,height:i=0,y:n=0}=s;let e=n,t=i;"stack"===c.scope&&u.stackTotal&&(n=l.translate(h?100:u.stackTotal,!1,!0,!1,!0),d=l.translate(o.threshold||0,!1,!0,!1,!0),n=this.crispCol(0,Math.min(n,d),0,Math.abs(n-d)),e=n.y,t=n.height);var d=(u.negative?-1:1)*(_?-1:1)==-1;let a=c.where;a=(a=!a&&this.is("waterfall")&&Math.abs((u.yBottom||0)-(this.translatedThreshold||0))>this.borderWidth?"all":a)||"end";n=Math.min(relativeLength(c.radius,r),r/2,"all"===a?i/2:1/0)||0;"end"===a&&(d&&(e-=n),t+=n),extend(s,{brBoxHeight:t,brBoxY:e,r:n})}}}}function compose(e,t,a){var s=e.types.pie;if(!t.symbolCustomAttribs.includes("borderRadius")){const r=a.prototype.symbols;addEvent(e,"afterColumnTranslate",seriesOnAfterColumnTranslate,{order:9}),addEvent(s,"afterTranslate",pieSeriesOnAfterTranslate),t.symbolCustomAttribs.push("borderRadius","brBoxHeight","brBoxY"),oldArc=r.arc,oldRoundedRect=r.roundedRect,r.arc=arc,r.roundedRect=roundedRect}}function optionsToObject(e,t){return isObject(e)||(e={radius:e||0}),merge(defaultBorderRadiusOptions,t,e)}function pieSeriesOnAfterTranslate(){var e=optionsToObject(this.options.borderRadius);for(const t of this.points){const a=t.shapeArgs;a&&(a.borderRadius=relativeLength(e.radius,(a.r||0)-(a.innerR||0)))}}function roundedRect(e,t,a,s,r={}){const i=oldRoundedRect(e,t,a,s,r),{r:n=0,brBoxHeight:d=s,brBoxY:o=t}=r,l=t-o,h=o+d-(t+s),c=-.1<l-n?0:n,_=-.1<h-n?0:n,u=Math.max(c&&l,0),p=Math.max(_&&h,0),g=[e+c,t],f=[e+a-c,t],x=[e+a,t+c],b=[e+a,t+s-_],y=[e+a-_,t+s],m=[e+_,t+s],L=[e,t+s-_],S=[e,t+c];var M,r=(e,t)=>Math.sqrt(Math.pow(e,2)-Math.pow(t,2));return u&&(M=r(c,c-u),g[0]-=M,f[0]+=M,x[1]=S[1]=t+c-u),s<c-u&&(M=r(c,c-u-s),x[0]=b[0]=e+a-c+M,y[0]=Math.min(x[0],y[0]),m[0]=Math.max(b[0],m[0]),L[0]=S[0]=e+c-M,x[1]=S[1]=t+s),p&&(M=r(_,_-p),y[0]+=M,m[0]-=M,b[1]=L[1]=t+s-_+p),s<_-p&&(M=r(_,_-p-s),x[0]=b[0]=e+a-_+M,f[0]=Math.min(x[0],f[0]),g[0]=Math.max(b[0],g[0]),L[0]=S[0]=e+_-M,b[1]=L[1]=t),i.length=0,i.push(["M",...g],["L",...f],["A",c,c,0,0,1,...x],["L",...b],["A",_,_,0,0,1,...y],["L",...m],["A",_,_,0,0,1,...L],["L",...S],["A",c,c,0,0,1,...g],["Z"]),i}const BorderRadius={compose:compose,optionsToObject:optionsToObject},Extensions_BorderRadius=BorderRadius,external_highcharts_src_js_default_SeriesRegistry_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default.SeriesRegistry;var external_highcharts_src_js_default_SeriesRegistry_default=__webpack_require__.n(external_highcharts_src_js_default_SeriesRegistry_namespaceObject);const{composed,noop:FunnelSeries_noop}=external_highcharts_src_js_default_default(),{column:ColumnSeries,pie:PieSeries}=external_highcharts_src_js_default_SeriesRegistry_default().seriesTypes,{addEvent:FunnelSeries_addEvent,correctFloat,extend:FunnelSeries_extend,fireEvent,isArray,merge:FunnelSeries_merge,pick,pushUnique,relativeLength:FunnelSeries_relativeLength,splat}=external_highcharts_src_js_default_default(),baseAlignDataLabel=external_highcharts_src_js_default_SeriesRegistry_default().series.prototype.alignDataLabel;function getLength(e,t){return/%$/.test(e)?t*parseInt(e,10)/100:parseInt(e,10)}class FunnelSeries extends PieSeries{alignDataLabel(e,t,a,s,r){const i=e.series,n=i.options.reversed,d=e.dlBox||e.shapeArgs,{align:o,padding:l=0,verticalAlign:h}=a,c=((i.options||{}).dataLabels||{}).inside,_=i.center[1],u=e.plotY||0,p=n?2*_-u:u,g=t.height??t.getBBox().height,f=i.getWidthAt(p-d.height/2+g),x="middle"===h?(d.topWidth-d.bottomWidth)/4:(f-d.bottomWidth)/2;let b=d.y,y=d.x;"middle"===h?b=d.y-d.height/2+g/2:"top"===h&&(b=d.y-d.height+g+l),("top"===h&&!n||"bottom"===h&&n||"middle"===h)&&("right"===o?y=d.x-l+x:"left"===o&&(y=d.x+l-x)),s={x:y,y:n?b-d.height:b,width:d.bottomWidth,height:d.height},a.verticalAlign="bottom",c&&(a.distance=void 0),c&&e.visible&&baseAlignDataLabel.call(i,e,t,a,s,r),c&&(!e.visible&&e.dataLabel&&(e.dataLabel.placed=!1),e.contrastColor&&t.css({color:e.contrastColor}))}drawDataLabels(){(splat(this.options.dataLabels||{})[0].inside?ColumnSeries:PieSeries).prototype.drawDataLabels.call(this)}getDataLabelPosition(e,t){var a=e.plotY||0,s=e.half?1:-1,r=this.getX(a,!!e.half,e);return{distance:t,natural:{x:0,y:a},computed:{},alignment:e.half?"right":"left",connectorPosition:{breakAt:{x:r+(t-5)*s,y:a},touchingSliceAt:{x:r+t*s,y:a}}}}translate(){const s=this,e=s.chart,t=s.options,d=t.reversed,a=t.ignoreHiddenPoint,r=Extensions_BorderRadius.optionsToObject(t.borderRadius),i=e.plotWidth,n=e.plotHeight,W=t.center,o=getLength(W[0],i),l=getLength(W[1],n),h=getLength(t.width,i),c=getLength(t.height,n),_=getLength(t.neckWidth,i),u=getLength(t.neckHeight,n),p=l-c/2+c-u,g=s.points,D=FunnelSeries_relativeLength(r.radius,h),f=r.scope,w="left"===t.dataLabels.position?1:0,x=e=>{var t=Math.tan(e/2),a=Math.cos(S),s=Math.sin(S);let r=D,i=r/t,n=Math.tan((Math.PI-e)/3.2104);return i>M&&(i=M,r=i*t),n*=r,{dx:[i*a,(i-n)*a,i-n,i],dy:[i*s,(i-n)*s,i-n,i].map(e=>d?-e:e)}};let b=0,q=0,y,m,L,S,M,v,A,R,j,F,O,P;s.getWidthAt=function(e){var t=l-c/2;return e>p||c===u?_:_+(h-_)*(1-(e-t)/(c-u))},s.getX=function(e,t,a){return o+(t?-1:1)*(s.getWidthAt(d?2*l-e:e)/2+(a.dataLabel?.dataLabelPosition?.distance??FunnelSeries_relativeLength(this.options.dataLabels?.distance||0,h)))},s.center=[o,l,c],s.centerX=o;for(const B of g)!B.y||!B.isValid()||a&&!1===B.visible||(b+=B.y);for(const E of g){if(P=null,L=b?E.y/b:0,A=l-c/2+q*c,F=A+L*c,y=s.getWidthAt(A),v=o-y/2,R=v+y,y=s.getWidthAt(F),j=o-y/2,O=j+y,correctFloat(A)>=p?(v=j=o-_/2,R=O=o+_/2):F>p&&(P=F,y=s.getWidthAt(p),j=o-y/2,O=j+y,F=p),d&&(A=2*l-A,F=2*l-F,null!==P&&(P=2*l-P)),!D||"point"!==f&&0!==E.index&&E.index!==g.length-1&&null===P)m=[["M",v,A],["L",R,A],["L",O,F]],null!==P&&m.push(["L",O,P],["L",j,P]),m.push(["L",j,F]);else{var C=Math.abs(F-A),T=R-O,k=O-j,H=Math.sqrt(T*T+C*C);S=Math.atan(0!=T?C/T:1/0),M=H/2,null!==P&&(M=Math.min(M,Math.abs(P-F)/2)),1<=k&&(M=Math.min(M,k/2));let e=x(S);m="stack"===f&&0!==E.index?[["M",v,A],["L",R,A]]:[["M",v+e.dx[0],A+e.dy[0]],["C",v+e.dx[1],A+e.dy[1],v+e.dx[2],A,v+e.dx[3],A],["L",R-e.dx[3],A],["C",R-e.dx[2],A,R-e.dx[1],A+e.dy[1],R-e.dx[0],A+e.dy[0]]],null!==P?(C=x(Math.PI/2),e=x(Math.PI/2+S),m.push(["L",O+e.dx[0],F-e.dy[0]],["C",O+e.dx[1],F-e.dy[1],O,F+e.dy[2],O,F+e.dy[3]]),"stack"===f&&E.index!==g.length-1?m.push(["L",O,P],["L",j,P]):m.push(["L",O,P-C.dy[3]],["C",O,P-C.dy[2],O-C.dx[2],P,O-C.dx[3],P],["L",j+C.dx[3],P],["C",j+C.dx[2],P,j,P-C.dy[2],j,P-C.dy[3]]),m.push(["L",j,F+e.dy[3]],["C",j,F+e.dy[2],j-e.dx[1],F-e.dy[1],j-e.dx[0],F-e.dy[0]])):1<=k?(e=x(Math.PI-S),"stack"===f&&0===E.index?m.push(["L",O,F],["L",j,F]):m.push(["L",O+e.dx[0],F-e.dy[0]],["C",O+e.dx[1],F-e.dy[1],O-e.dx[2],F,O-e.dx[3],F],["L",j+e.dx[3],F],["C",j+e.dx[2],F,j-e.dx[1],F-e.dy[1],j-e.dx[0],F-e.dy[0]])):(e=x(Math.PI-2*S),m.push(["L",j+e.dx[0],F-e.dy[0]],["C",j+e.dx[1],F-e.dy[1],j-e.dx[1],F-e.dy[1],j-e.dx[0],F-e.dy[0]]))}m.push(["Z"]),E.shapeType="path",E.shapeArgs={d:m},E.percentage=100*L,E.plotX=o,E.plotY=(A+(P||F))/2,E.tooltipPos=[o,E.plotY],E.dlBox={x:j,y:A,topWidth:R-v,bottomWidth:O-j,height:Math.abs(pick(P,F)-A),width:NaN},E.slice=FunnelSeries_noop,E.half=w,!E.isValid()||a&&!1===E.visible||(q+=L)}fireEvent(s,"afterTranslate")}sortByAngle(e){e.sort((e,t)=>e.plotY-t.plotY)}}FunnelSeries.defaultOptions=FunnelSeries_merge(PieSeries.defaultOptions,Funnel_FunnelSeriesDefaults),FunnelSeries_extend(FunnelSeries.prototype,{animate:FunnelSeries_noop}),function(){function t(){for(const t of this.series){let e=t.options&&t.options.dataLabels;isArray(e)&&(e=e[0]),t.is("pie")&&t.placeDataLabels&&e&&!e.inside&&t.placeDataLabels()}}(FunnelSeries||(FunnelSeries={})).compose=function(e){pushUnique(composed,"FunnelSeries")&&FunnelSeries_addEvent(e,"afterHideAllOverlappingLabels",t)}}(),external_highcharts_src_js_default_SeriesRegistry_default().registerSeriesType("funnel",FunnelSeries);const Funnel_FunnelSeries=FunnelSeries,PyramidSeriesDefaults={neckHeight:"0%",neckWidth:"0%",reversed:!0},Pyramid_PyramidSeriesDefaults=PyramidSeriesDefaults,PyramidSeries_merge=external_highcharts_src_js_default_default()["merge"];class PyramidSeries extends Funnel_FunnelSeries{}PyramidSeries.defaultOptions=PyramidSeries_merge(Funnel_FunnelSeries.defaultOptions,Pyramid_PyramidSeriesDefaults),external_highcharts_src_js_default_SeriesRegistry_default().registerSeriesType("pyramid",PyramidSeries);const Pyramid_PyramidSeries=null,G=external_highcharts_src_js_default_default(),funnel_src=(Funnel_FunnelSeries.compose(G.Chart),external_highcharts_src_js_default_default());export{funnel_src as default};