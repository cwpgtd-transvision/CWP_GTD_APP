import*as t from"../highcharts.js";var e={n:t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return e.d(r,{a:r}),r},d:(t,r)=>{for(var o in r)e.o(r,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:r[o]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};let o=t.default;var r=e.n(o);let a=t.default.Templating;var i=e.n(a);let h={enabled:!0,connectorAllowed:!1,connectorNeighbourDistance:24,format:void 0,formatter:void 0,minFontSize:null,maxFontSize:null,onArea:null,style:{fontSize:"0.8em",fontWeight:"bold"},useHTML:!1,boxesToAvoid:[]};function n(t,e,r,o,a,i){i=(i-e)*(r-t)-(o-e)*(a-t);return 0<i||!(i<0)}function l(t,e,r,o,a,i,h,l){return n(t,e,a,i,h,l)!==n(r,o,a,i,h,l)&&n(t,e,r,o,a,i)!==n(t,e,r,o,h,l)}let s=r()["animObject"],c=i()["format"],p=r()["setOptions"],d=r()["composed"],{boxIntersectLine:f,intersectRect:u}={boxIntersectLine:function(t,e,r,o,a,i,h,n){return l(t,e,t+r,e,a,i,h,n)||l(t+r,e,t+r,e+o,a,i,h,n)||l(t,e+o,t+r,e+o,a,i,h,n)||l(t,e,t,e+o,a,i,h,n)},intersectRect:function(t,e){return!(e.left>t.right||e.right<t.left||e.top>t.bottom||e.bottom<t.top)}},{addEvent:x,extend:b,fireEvent:g,isNumber:m,pick:y,pushUnique:X,syncTimeout:M}=r();function Y(r,o,a,i,h){let n=r.chart,l=r.options.label||{},s=y(l.onArea,!!r.area),c=s||l.connectorAllowed,t=n.boxesToAvoid,p=Number.MAX_VALUE,d=Number.MAX_VALUE,x,b,g,m,Y,X,M;for(X=0;t&&X<t.length;X+=1)if(u(t[X],{left:o,right:o+i.width,top:a,bottom:a+i.height}))return!1;for(X=0;X<n.series.length;X+=1){let t=n.series[X],e=t.interpolatedPoints&&[...t.interpolatedPoints];if(t.visible&&e){var w=n.plotHeight/10;for(let t=n.plotTop;t<=n.plotTop+n.plotHeight;t+=w)e.unshift({chartX:n.plotLeft,chartY:t}),e.push({chartX:n.plotLeft+n.plotWidth,chartY:t});for(M=1;M<e.length;M+=1){if(e[M].chartX>=o-16&&e[M-1].chartX<=o+i.width+16){if(f(o,a,i.width,i.height,e[M-1].chartX,e[M-1].chartY,e[M].chartX,e[M].chartY))return!1;r===t&&!g&&h&&(g=f(o-16,a-16,i.width+32,i.height+32,e[M-1].chartX,e[M-1].chartY,e[M].chartX,e[M].chartY))}!c&&!g||r===t&&!s||(p=Math.min(p,(m=o+i.width/2-e[M].chartX)*m+(Y=a+i.height/2-e[M].chartY)*Y))}if(!s&&c&&r===t&&(h&&!g||p<Math.pow(l.connectorNeighbourDistance||1,2))){for(M=1;M<e.length;M+=1)(x=Math.min(Math.pow(o+i.width/2-e[M].chartX,2)+Math.pow(a+i.height/2-e[M].chartY,2),Math.pow(o-e[M].chartX,2)+Math.pow(a-e[M].chartY,2),Math.pow(o+i.width-e[M].chartX,2)+Math.pow(a-e[M].chartY,2),Math.pow(o+i.width-e[M].chartX,2)+Math.pow(a+i.height-e[M].chartY,2),Math.pow(o-e[M].chartX,2)+Math.pow(a+i.height-e[M].chartY,2)))<d&&(d=x,b=e[M]);g=!0}}}return(!h||!!g)&&{x:o,y:a,weight:p-(b?d:0),connectorPoint:b}}function w(n){if(this.renderer){let h=this,i=s(h.renderer.globalAnimation).duration;h.labelSeries=[],h.labelSeriesMaxSum=0,h.seriesLabelTimer&&r().clearTimeout(h.seriesLabelTimer),h.series.forEach(function(t){let e=t.options.label||{},r=t.labelBySeries,o=r&&r.closest,a=t.getColumn("y");e.enabled&&t.visible&&(t.graph||t.area)&&!t.boosted&&h.labelSeries&&(h.labelSeries.push(t),e.minFontSize&&e.maxFontSize&&a.length&&(t.sum=a.reduce((t,e)=>(t||0)+(e||0),0),h.labelSeriesMaxSum=Math.max(h.labelSeriesMaxSum||0,t.sum||0)),"load"===n.type&&(i=Math.max(i,s(t.options.animation).duration)),o&&(void 0!==o[0].plotX?r.animate({x:o[0].plotX+o[1],y:o[0].plotY+o[2]}):r.attr({opacity:0})))}),h.seriesLabelTimer=M(function(){if(h.series&&h.labelSeries){var z=h;z.boxesToAvoid=[];let t=z.labelSeries||[],i=z.boxesToAvoid;z.series.forEach(a=>(a.points||[]).forEach(t=>(t.dataLabels||[]).forEach(t=>{var{width:e,height:r}=t.getBBox(),o=(t.translateX||0)+(a.xAxis?a.xAxis.pos:a.chart.plotLeft),t=(t.translateY||0)+(a.yAxis?a.yAxis.pos:a.chart.plotTop);i.push({left:o,top:t,right:o+e,bottom:t+r})}))),t.forEach(function(t){var e=t.options.label||{};t.interpolatedPoints=function(x){let b,g,Y,X,M;if(x.xAxis||x.yAxis){let t=x.points,r=[],e=x.graph||x.area,o=e&&e.element,h=x.chart.inverted,a=x.xAxis,i=x.yAxis,n=(h?i:a).pos,l=(h?a:i).pos,s=(h?a:i).len,c=(h?i:a).len,p=y((x.options.label||{}).onArea,!!x.area),d=i.getThreshold(x.options.threshold),f={},u=h?"chartCenterX":"chartCenterY";if(x.getPointSpline&&o&&o.getPointAtLength&&!p&&t.length<(x.chart.plotSizeX||0)/16){x=e.toD&&e.attr("d");for(e.toD&&e.attr({d:e.toD}),Y=o.getTotalLength(),b=0;b<Y;b+=16){var w=o.getPointAtLength(b),A=h?c-w.y:w.x,w=h?s-w.x:w.y;S({chartX:n+A,chartY:l+w,plotX:A,plotY:w})}x&&e.attr({d:x});x=t[t.length-1].pos();S({chartX:n+(x?.[0]||0),chartY:l+(x?.[1]||0)})}else{let i;for(b=0,Y=t.length;b<Y;b+=1){let e=t[b],[r,o]=e.pos()||[],a=e["plotHigh"];if(m(r)&&m(o)){let t={plotX:r,plotY:o,chartX:n+r,chartY:l+o};if(p&&(a&&(t.plotY=a,t.chartY=l+a),h?t.chartCenterX=n+c-((a||e.plotY||0)+y(e.yBottom,d))/2:t.chartCenterY=l+((a||o)+y(e.yBottom,d))/2),i&&16<(g=Math.max(Math.abs(t.chartX-i.chartX),Math.abs(t.chartY-i.chartY)))&&g<999)for(M=1,X=Math.ceil(g/16);M<X;M+=1)S({chartX:i.chartX+(t.chartX-i.chartX)*(M/X),chartY:i.chartY+(t.chartY-i.chartY)*(M/X),[u]:(i[u]||0)+((t[u]||0)-(i[u]||0))*(M/X),plotX:(i.plotX||0)+(r-(i.plotX||0))*(M/X),plotY:(i.plotY||0)+(o-(i.plotY||0))*(M/X)});S(t),i=t}}}return r;function S(t){var e=Math.round((t.plotX||0)/8)+","+Math.round((t.plotY||0)/8);f[e]||(f[e]=1,r.push(t))}}}(t),i.push(...e.boxesToAvoid||[])}),z.series.forEach(function(T){let P=T.options.label;if(P&&(T.xAxis||T.yAxis)){let e="highcharts-color-"+y(T.colorIndex,"none"),o=!T.labelBySeries,r=P.minFontSize,a=P.maxFontSize,t=z.inverted,i=(t?T.yAxis:T.xAxis).pos,h=(t?T.xAxis:T.yAxis).pos,n=(z.inverted?T.yAxis:T.xAxis).len,l=(z.inverted?T.xAxis:T.yAxis).len,p=T.interpolatedPoints,d=y(P.onArea,!!T.area),f=[],u=T.getColumn("x"),x,g,m,X,M,w,A=T.labelBySeries,S,v,L;if(d&&!t&&(S=[T.xAxis.toPixels(u[0]),T.xAxis.toPixels(u[u.length-1])],v=Math.min.apply(Math,S),L=Math.max.apply(Math,S)),T.visible&&!T.boosted&&p){if(!A){let t=T.name;"string"==typeof P.format?t=c(P.format,T,z):P.formatter&&(t=P.formatter.call(T)),T.labelBySeries=A=z.renderer.label(t,0,0,"connector",0,0,P.useHTML).addClass("highcharts-series-label highcharts-series-label-"+T.index+" "+(T.options.className||"")+" "+e),z.renderer.styledMode||(B="string"==typeof T.color?T.color:"#666666",A.css(b({color:d?z.renderer.getContrast(B):B},P.style||{})),A.attr({opacity:+!!z.renderer.forExport,stroke:T.color,"stroke-width":1})),r&&a&&A.css({fontSize:r+(T.sum||0)/(T.chart.labelSeriesMaxSum||0)*(a-r)+"px"}),A.attr({padding:0,zIndex:3}).add()}for((x=A.getBBox()).width=Math.round(x.width),M=p.length-1;0<M;--M)d?E(g=(p[M].chartCenterX??p[M].chartX)-x.width/2,m=(p[M].chartCenterY??p[M].chartY)-x.height/2,x)&&(w=Y(T,g,m,x)):((w=E(g=p[M].chartX+3,m=p[M].chartY-x.height-3,x)?Y(T,g,m,x,!0):w)&&f.push(w),(w=E(g=p[M].chartX+3,m=p[M].chartY+3,x)?Y(T,g,m,x,!0):w)&&f.push(w),(w=E(g=p[M].chartX-x.width-3,m=p[M].chartY+3,x)?Y(T,g,m,x,!0):w)&&f.push(w),E(g=p[M].chartX-x.width-3,m=p[M].chartY-x.height-3,x)&&(w=Y(T,g,m,x,!0))),w&&f.push(w);if(P.connectorAllowed&&!f.length&&!d)for(g=i+n-x.width;g>=i;g-=16)for(m=h;m<h+l-x.height;m+=16)(X=Y(T,g,m,x,!0))&&f.push(X);if(f.length){f.sort((t,e)=>e.weight-t.weight),w=f[0],(z.boxesToAvoid||[]).push({left:w.x,right:w.x+x.width,top:w.y,bottom:w.y+x.height});var B=Math.sqrt(Math.pow(Math.abs(w.x-(A.x||0)),2)+Math.pow(Math.abs(w.y-(A.y||0)),2));if(B&&T.labelBySeries){let t,e={opacity:+!!z.renderer.forExport,x:w.x,y:w.y},r={opacity:1};B<=10&&(r={x:e.x,y:e.y},e={}),o&&((t=s(T.options.animation)).duration*=.2),T.labelBySeries.attr(b(e,{anchorX:w.connectorPoint&&(w.connectorPoint.plotX||0)+i,anchorY:w.connectorPoint&&(w.connectorPoint.plotY||0)+h})).animate(r,t),T.options.kdNow=!0,T.buildKDTree();B=T.searchPoint({chartX:w.x,chartY:w.y},!0);B&&(A.closest=[B,w.x-(B.plotX||0),w.y-(B.plotY||0)])}}else C()}else C();function E(t,e,r){var o=Math.max(i,y(v,-1/0)),a=Math.min(i+n,y(L,1/0));return o<t&&t<=a-r.width&&e>=h&&e<=h+l-r.height}function C(){A&&(T.labelBySeries=A.destroy())}}}),g(z,"afterDrawSeriesLabels")}},h.renderer.forExport||!i?0:i)}}function A(t,e,r,o,a){let i=a&&a.anchorX,h=a&&a.anchorY,n,l,s=r/2;return m(i)&&m(h)&&(n=[["M",i,h]],(l=(l=e-h)<0?-o-l:l)<r&&(s=i<t+r/2?l:r-l),e+o<h?n.push(["L",t+s,e+o]):h<e?n.push(["L",t+s,e]):i<t?n.push(["L",t,e+o/2]):t+r<i&&n.push(["L",t+r,e+o/2])),n||[]}let S=r(),v=(!function(t,e){X(d,"SeriesLabel")&&(x(t,"load",w),x(t,"redraw",w),e.prototype.symbols.connector=A,p({plotOptions:{series:{label:h}}}))}(S.Chart,S.SVGRenderer),r());export{v as default};