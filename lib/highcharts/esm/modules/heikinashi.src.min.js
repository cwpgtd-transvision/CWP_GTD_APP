import*as __WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__ from"../highcharts.src.js";import*as __WEBPACK_EXTERNAL_MODULE__stock_src_js_3de69a45__ from"./stock.src.js";var __webpack_require__={n:e=>{var i=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(i,{a:i}),i},d:(e,i)=>{for(var s in i)__webpack_require__.o(i,s)&&!__webpack_require__.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:i[s]})},o:(e,i)=>Object.prototype.hasOwnProperty.call(e,i)};const external_highcharts_src_js_default_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default;var external_highcharts_src_js_default_default=__webpack_require__.n(external_highcharts_src_js_default_namespaceObject),x=e=>{var i={};return __webpack_require__.d(i,e),i},y=e=>()=>e;const external_stock_src_js_namespaceObject=x({}),external_highcharts_src_js_default_SeriesRegistry_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default.SeriesRegistry;var external_highcharts_src_js_default_SeriesRegistry_default=__webpack_require__.n(external_highcharts_src_js_default_SeriesRegistry_namespaceObject);const{candlestick:{prototype:{pointClass:CandlestickPoint}},hlc:{prototype:{pointClass:HLCPoint}}}=external_highcharts_src_js_default_SeriesRegistry_default().seriesTypes;class HeikinAshiPoint extends CandlestickPoint{}const HeikinAshi_HeikinAshiPoint=HeikinAshiPoint,HeikinAshiDefaults={dataGrouping:{groupAll:!0}},HeikinAshiSeriesDefaults=HeikinAshiDefaults,composed=external_highcharts_src_js_default_default()["composed"],CandlestickSeries=external_highcharts_src_js_default_SeriesRegistry_default().seriesTypes["candlestick"],{addEvent,merge,pushUnique}=external_highcharts_src_js_default_default();function onAxisPostProcessData(){const e=this.series;e.forEach(e=>{if(e.is("heikinashi")){const i=e;i.heikiashiData.length=0,i.getHeikinashiData()}})}function onHeikinAshiSeriesAfterTranslate(){var e=this,i=e.points,s=e.heikiashiData,t=e.cropStart||0;for(let e=0;e<i.length;e++){const a=i[e],r=s[e+t];a.open=r[0],a.high=r[1],a.low=r[2],a.close=r[3]}}function onHeikinAshiSeriesUpdatedData(){this.heikiashiData.length&&(this.heikiashiData.length=0)}class HeikinAshiSeries extends CandlestickSeries{constructor(){super(...arguments),this.heikiashiData=[]}static compose(e,i){CandlestickSeries.compose(e),pushUnique(composed,"HeikinAshi")&&(addEvent(i,"postProcessData",onAxisPostProcessData),addEvent(HeikinAshiSeries,"afterTranslate",onHeikinAshiSeriesAfterTranslate),addEvent(HeikinAshiSeries,"updatedData",onHeikinAshiSeriesUpdatedData))}getHeikinashiData(){const e=this,i=e.allGroupedTable||e.dataTable,s=i.rowCount,t=e.heikiashiData;if(!t.length&&s){this.modifyFirstPointValue(i.getRow(0,this.pointArrayMap));for(let e=1;e<s;e++)this.modifyDataPoint(i.getRow(e,this.pointArrayMap),t[e-1])}e.heikiashiData=t}init(){super.init.apply(this,arguments),this.heikiashiData=[]}modifyFirstPointValue(e){var i=(e[0]+e[1]+e[2]+e[3])/4,s=(e[0]+e[3])/2;this.heikiashiData.push([i,e[1],e[2],s])}modifyDataPoint(e,i){var i=(i[0]+i[3])/2,s=(e[0]+e[1]+e[2]+e[3])/4,t=Math.max(e[1],s,i),e=Math.min(e[2],s,i);this.heikiashiData.push([i,t,e,s])}}HeikinAshiSeries.defaultOptions=merge(CandlestickSeries.defaultOptions,HeikinAshiSeriesDefaults),HeikinAshiSeries.prototype.pointClass=HeikinAshi_HeikinAshiPoint,external_highcharts_src_js_default_SeriesRegistry_default().registerSeriesType("heikinashi",HeikinAshiSeries);const HeikinAshi_HeikinAshiSeries=HeikinAshiSeries,G=external_highcharts_src_js_default_default(),heikinashi_src=(HeikinAshi_HeikinAshiSeries.compose(G.Series,G.Axis),external_highcharts_src_js_default_default());export{heikinashi_src as default};