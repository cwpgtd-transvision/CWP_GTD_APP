import*as __WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__ from"../highcharts.src.js";var __webpack_require__={n:t=>{var i=t&&t.__esModule?()=>t.default:()=>t;return __webpack_require__.d(i,{a:i}),i},d:(t,i)=>{for(var e in i)__webpack_require__.o(i,e)&&!__webpack_require__.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:i[e]})},o:(t,i)=>Object.prototype.hasOwnProperty.call(t,i)};const external_highcharts_src_js_default_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default;var AnnotationChart,external_highcharts_src_js_default_default=__webpack_require__.n(external_highcharts_src_js_default_namespaceObject);const{addEvent,erase,find,fireEvent,isArray,isObject,pick,wrap}=external_highcharts_src_js_default_default();function chartAddAnnotation(t,i){const e=this.initAnnotation(t);return this.options.annotations.push(e.options),pick(i,!0)&&(e.redraw(),e.graphic.attr({opacity:1})),e}function chartCallback(){const r=this;r.plotBoxClip=this.renderer.clipRect(this.plotBox),r.controlPointsGroup=r.renderer.g("control-points").attr({zIndex:99}).clip(r.plotBoxClip).add(),r.options.annotations.forEach((i,t)=>{var e;r.annotations.some(t=>t.options===i)||(e=r.initAnnotation(i),r.options.annotations[t]=e.options)}),r.drawAnnotations(),addEvent(r,"redraw",r.drawAnnotations),addEvent(r,"destroy",function(){r.plotBoxClip.destroy(),r.controlPointsGroup.destroy()}),addEvent(r,"exportData",function(h){const t=r.annotations,e=(this.options.exporting&&this.options.exporting.csv||{}).columnHeaderFormatter,n=!h.dataRows[1].xValues,o=r.options.lang&&r.options.lang.exportData&&r.options.lang.exportData.annotationHeader,c=h.dataRows[0].length,p=r.options.exporting&&r.options.exporting.csv&&r.options.exporting.csv.annotations&&r.options.exporting.csv.annotations.itemDelimiter,d=r.options.exporting&&r.options.exporting.csv&&r.options.exporting.csv.annotations&&r.options.exporting.csv.annotations.join;t.forEach(t=>{t.options.labelOptions&&t.options.labelOptions.includeInDataExport&&t.labels.forEach(t=>{if(t.options.text){const l=t.options.text;t.points.forEach(t=>{const i=t.x,e=t.series.xAxis?t.series.xAxis.index:-1;let n=!1;if(-1===e){const o=h.dataRows[0].length,s=new Array(o);for(let t=0;t<o;++t)s[t]="";s.push(l),s.xValues=[],s.xValues[e]=i,h.dataRows.push(s),n=!0}if(n||h.dataRows.forEach(t=>{!n&&t.xValues&&void 0!==e&&i===t.xValues[e]&&(d&&t.length>c?t[t.length-1]+=p+l:t.push(l),n=!0)}),!n){const a=h.dataRows[0].length,r=new Array(a);for(let t=0;t<a;++t)r[t]="";r[0]=i,r.push(l),r.xValues=[],void 0!==e&&(r.xValues[e]=i),h.dataRows.push(r)}})}})});let i=0;h.dataRows.forEach(t=>{i=Math.max(i,t.length)});var s=i-h.dataRows[0].length;for(let t=0;t<s;t++){var a=function(t){let i;return e&&!1!==(i=e(t))?i:(i=o+" "+t,n?{columnTitle:i,topLevelColumnTitle:i}:i)}(t+1);n?(h.dataRows[0].push(a.topLevelColumnTitle),h.dataRows[1].push(a.columnTitle)):h.dataRows[0].push(a)}})}function chartDrawAnnotations(){this.plotBoxClip.attr(this.plotBox),this.annotations.forEach(t=>{t.redraw(),t.graphic.animate({opacity:1},t.animationConfig)})}function chartRemoveAnnotation(i){const t=this.annotations,e="annotations"===i.coll?i:find(t,function(t){return t.options.id===i});e&&(fireEvent(e,"remove"),erase(this.options.annotations,e.options),erase(t,e),e.destroy())}function onChartAfterInit(){var t=this.options.annotations,i=this.userOptions.annotations;this.annotations=[],isArray(this.options.annotations)||(this.options.annotations=[]),isObject(i,!0)&&isObject(t,!0)&&this.options.annotations.push(t)}function wrapPointerOnContainerMouseDown(t){this.chart.hasDraggedAnnotation||t.apply(this,Array.prototype.slice.call(arguments,1))}(AnnotationChart||(AnnotationChart={})).compose=function(n,t,i){const e=t.prototype;e.addAnnotation||(i=i.prototype,addEvent(t,"afterInit",onChartAfterInit),e.addAnnotation=chartAddAnnotation,e.callbacks.push(chartCallback),e.collectionsWithInit.annotations=[chartAddAnnotation],e.collectionsWithUpdate.push("annotations"),e.drawAnnotations=chartDrawAnnotations,e.removeAnnotation=chartRemoveAnnotation,e.initAnnotation=function(t){const i=n.types[t.type]||n,e=new i(this,t);return this.annotations.push(e),e},wrap(i,"onContainerMouseDown",wrapPointerOnContainerMouseDown))};const Annotations_AnnotationChart=AnnotationChart,defined=external_highcharts_src_js_default_default()["defined"],AnnotationDefaults={visible:!0,animation:{},crop:!0,draggable:"xy",labelOptions:{align:"center",allowOverlap:!1,backgroundColor:"rgba(0, 0, 0, 0.75)",borderColor:"#000000",borderRadius:3,borderWidth:1,className:"highcharts-no-tooltip",crop:!1,formatter:function(){return defined(this.y)?""+this.y:"Annotation label"},includeInDataExport:!0,overflow:"justify",padding:5,shadow:!1,shape:"callout",style:{fontSize:"0.7em",fontWeight:"normal",color:"contrast"},useHTML:!1,verticalAlign:"bottom",x:0,y:-16},shapeOptions:{stroke:"rgba(0, 0, 0, 0.75)",strokeWidth:1,fill:"rgba(0, 0, 0, 0.75)",r:0,snap:2},controlPointOptions:{events:{},style:{cursor:"pointer",fill:"#ffffff",stroke:"#000000","stroke-width":2},height:10,symbol:"circle",visible:!1,width:10},events:{},types:{},zIndex:6},Annotations_AnnotationDefaults=AnnotationDefaults,{doc,isTouchDevice}=external_highcharts_src_js_default_default(),{addEvent:EventEmitter_addEvent,fireEvent:EventEmitter_fireEvent,objectEach,pick:EventEmitter_pick,removeEvent}=external_highcharts_src_js_default_default();class EventEmitter{addEvents(){function i(t){EventEmitter_addEvent(t,isTouchDevice?"touchstart":"mousedown",t=>{n.onMouseDown(t)},{passive:!1})}const n=this;if(i(this.graphic.element),(n.labels||[]).forEach(t=>{t.options.useHTML&&t.graphic.text&&!t.graphic.text.foreignObject&&i(t.graphic.text.element)}),objectEach(n.options.events,(i,e)=>{function t(t){"click"===e&&n.cancelClick||i.call(n,n.chart.pointer?.normalize(t),n.target)}-1===(n.nonDOMEvents||[]).indexOf(e)?(EventEmitter_addEvent(n.graphic.element,e,t,{passive:!1}),n.graphic.div&&EventEmitter_addEvent(n.graphic.div,e,t,{passive:!1})):EventEmitter_addEvent(n,e,t,{passive:!1})}),n.options.draggable&&(EventEmitter_addEvent(n,"drag",n.onDrag),!n.graphic.renderer.styledMode)){const e={cursor:{x:"ew-resize",y:"ns-resize",xy:"move"}[n.options.draggable]};n.graphic.css(e),(n.labels||[]).forEach(t=>{t.options.useHTML&&t.graphic.text&&!t.graphic.text.foreignObject&&t.graphic.text.css(e)})}n.isUpdating||EventEmitter_fireEvent(n,"add")}destroy(){this.removeDocEvents(),removeEvent(this),this.hcEvents=null}mouseMoveToRadians(t,i,e){let n=t.prevChartY-e,o=t.prevChartX-i,s=t.chartY-e,a=t.chartX-i,r;return this.chart.inverted&&(r=o,o=n,n=r,r=a,a=s,s=r),Math.atan2(s,a)-Math.atan2(n,o)}mouseMoveToScale(t,i,e){var n=t.prevChartX-i,o=t.prevChartY-e;let s=(t.chartX-i||1)/(n||1),a=(t.chartY-e||1)/(o||1);return this.chart.inverted&&(i=a,a=s,s=i),{x:s,y:a}}mouseMoveToTranslation(t){let i=t.chartX-t.prevChartX,e=t.chartY-t.prevChartY,n;return this.chart.inverted&&(n=e,e=i,i=n),{x:i,y:e}}onDrag(t){if(this.chart.isInsidePlot(t.chartX-this.chart.plotLeft,t.chartY-this.chart.plotTop,{visiblePlotOnly:!0})){const i=this.mouseMoveToTranslation(t);"x"===this.options.draggable&&(i.y=0),"y"===this.options.draggable&&(i.x=0);this.points.length?this.translate(i.x,i.y):(this.shapes.forEach(t=>t.translate(i.x,i.y)),this.labels.forEach(t=>t.translate(i.x,i.y))),this.redraw(!1)}}onMouseDown(t){if(t.preventDefault&&t.preventDefault(),2!==t.button){const n=this,o=n.chart.pointer,s=t?.sourceCapabilities?.firesTouchEvents||!1;let i=(t=o?.normalize(t)||t).chartX,e=t.chartY;n.cancelClick=!1,n.chart.hasDraggedAnnotation=!0,n.removeDrag=EventEmitter_addEvent(doc,isTouchDevice||s?"touchmove":"mousemove",function(t){n.hasDragged=!0,(t=o?.normalize(t)||t).prevChartX=i,t.prevChartY=e,EventEmitter_fireEvent(n,"drag",t),i=t.chartX,e=t.chartY},isTouchDevice||s?{passive:!1}:void 0),n.removeMouseUp=EventEmitter_addEvent(doc,isTouchDevice||s?"touchend":"mouseup",function(){const t=EventEmitter_pick(n.target&&n.target.annotation,n.target);t&&(t.cancelClick=n.hasDragged),n.cancelClick=n.hasDragged,n.chart.hasDraggedAnnotation=!1,n.hasDragged&&EventEmitter_fireEvent(EventEmitter_pick(t,n),"afterUpdate"),n.hasDragged=!1,n.onMouseUp()},isTouchDevice||s?{passive:!1}:void 0)}}onMouseUp(){this.removeDocEvents()}removeDocEvents(){this.removeDrag&&(this.removeDrag=this.removeDrag()),this.removeMouseUp&&(this.removeMouseUp=this.removeMouseUp())}}const Annotations_EventEmitter=EventEmitter,{merge,pick:ControlPoint_pick}=external_highcharts_src_js_default_default();class ControlPoint extends Annotations_EventEmitter{constructor(t,i,e,n){super(),this.nonDOMEvents=["drag"],this.chart=t,this.target=i,this.options=e,this.index=ControlPoint_pick(e.index,n)}destroy(){super.destroy(),this.graphic&&(this.graphic=this.graphic.destroy()),this.chart=null,this.target=null,this.options=null}redraw(t){this.graphic[t?"animate":"attr"](this.options.positioner.call(this,this.target))}render(){const t=this.chart,i=this.options;this.graphic=t.renderer.symbol(i.symbol,0,0,i.width,i.height).add(t.controlPointsGroup).css(i.style),this.setVisibility(i.visible),this.addEvents()}setVisibility(t){this.graphic[t?"show":"hide"](),this.options.visible=t}update(t){var i=this.chart,e=this.target,n=this.index,t=merge(!0,this.options,t);this.destroy(),this.constructor(i,e,t,n),this.render(i.controlPointsGroup),this.redraw()}}const Annotations_ControlPoint=ControlPoint,external_highcharts_src_js_default_SeriesRegistry_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default.SeriesRegistry;var ControlTarget,external_highcharts_src_js_default_SeriesRegistry_default=__webpack_require__.n(external_highcharts_src_js_default_SeriesRegistry_namespaceObject);const{prototype:seriesProto}=external_highcharts_src_js_default_SeriesRegistry_default()["series"],{defined:MockPoint_defined,fireEvent:MockPoint_fireEvent}=external_highcharts_src_js_default_default();class MockPoint{static fromPoint(t){return new MockPoint(t.series.chart,null,{x:t.x,y:t.y,xAxis:t.series.xAxis,yAxis:t.series.yAxis})}static pointToPixels(t,i){const e=t.series,n=e.chart;let o=t.plotX||0,s=t.plotY||0,a;return n.inverted&&(s=t.mock?(o=t.plotY,t.plotX):(o=n.plotWidth-(t.plotY||0),n.plotHeight-(t.plotX||0))),e&&!i&&(a=e.getPlotBox(),o+=a.translateX,s+=a.translateY),{x:o,y:s}}static pointToOptions(t){return{x:t.x,y:t.y,xAxis:t.series.xAxis,yAxis:t.series.yAxis}}constructor(t,i,e){this.mock=!0,(this.point=this).series={visible:!0,chart:t,getPlotBox:seriesProto.getPlotBox},this.target=i||null,this.options=e,this.applyOptions(this.getOptions())}applyOptions(t){this.command=t.command,this.setAxis(t,"x"),this.setAxis(t,"y"),this.refresh()}getOptions(){return this.hasDynamicOptions()?this.options(this.target):this.options}hasDynamicOptions(){return"function"==typeof this.options}isInsidePlot(){const t=this.plotX,i=this.plotY,e=this.series.xAxis,n=this.series.yAxis,o={x:t,y:i,isInsidePlot:!0,options:{}};return e&&(o.isInsidePlot=MockPoint_defined(t)&&0<=t&&t<=e.len),n&&(o.isInsidePlot=o.isInsidePlot&&MockPoint_defined(i)&&0<=i&&i<=n.len),MockPoint_fireEvent(this.series.chart,"afterIsInsidePlot",o),o.isInsidePlot}refresh(){const t=this.series,i=t.xAxis,e=t.yAxis,n=this.getOptions();i?(this.x=n.x,this.plotX=i.toPixels(n.x,!0)):(this.x=void 0,this.plotX=n.x),e?(this.y=n.y,this.plotY=e.toPixels(n.y,!0)):(this.y=null,this.plotY=n.y),this.isInside=this.isInsidePlot()}refreshOptions(){const t=this.series,i=t.xAxis,e=t.yAxis;this.x=this.options.x=i?this.options.x=i.toValue(this.plotX,!0):this.plotX,this.y=this.options.y=e?e.toValue(this.plotY,!0):this.plotY}rotate(t,i,e){var n,o,s,a;this.hasDynamicOptions()||(n=Math.cos(e),e=Math.sin(e),a=(o=this.plotX-t)*e+(s=this.plotY-i)*n,this.plotX=o*n-s*e+t,this.plotY=a+i,this.refreshOptions())}scale(t,i,e,n){var o,s;this.hasDynamicOptions()||(o=this.plotX*e,s=this.plotY*n,n=(1-n)*i,this.plotX=(1-e)*t+o,this.plotY=n+s,this.refreshOptions())}setAxis(t,i){const e=i+"Axis",n=t[e],o=this.series.chart;this.series[e]="object"==typeof n?n:MockPoint_defined(n)?o[e][n]||o.get(n):null}toAnchor(){const t=[this.plotX,this.plotY,0,0];return this.series.chart.inverted&&(t[0]=this.plotY,t[1]=this.plotX),t}translate(t,i,e,n){this.hasDynamicOptions()||(this.plotX+=e,this.plotY+=n,this.refreshOptions())}}const Annotations_MockPoint=MockPoint,Annotations_ControlTarget=(!function(){function i(){const n=this.controlPoints,o=this.options.controlPoints||[];o.forEach((t,i)=>{const e=external_highcharts_src_js_default_default().merge(this.options.controlPointOptions,t);e.index||(e.index=i),o[i]=e,n.push(new Annotations_ControlPoint(this.chart,this,e))})}function e(t){const i=t.series.getPlotBox(),e=t.series.chart,n=t.mock?t.toAnchor():e.tooltip&&e.tooltip.getAnchor.call({chart:t.series.chart},t)||[0,0,0,0],o={x:n[0]+(this.options.x||0),y:n[1]+(this.options.y||0),height:n[2]||0,width:n[3]||0};return{relativePosition:o,absolutePosition:external_highcharts_src_js_default_default().merge(o,{x:o.x+(t.mock?i.translateX:e.plotLeft),y:o.y+(t.mock?i.translateY:e.plotTop)})}}function n(){this.controlPoints.forEach(t=>t.destroy()),this.chart=null,this.controlPoints=null,this.points=null,this.options=null,this.annotation&&(this.annotation=null)}function o(){var t=this.options;return t.points||t.point&&external_highcharts_src_js_default_default().splat(t.point)}function s(){const t=this.getPointsOptions(),i=this.points,e=t&&t.length||0;let n,o;for(n=0;n<e;n++){if(!(o=this.point(t[n],i[n])))return void(i.length=0);o.mock&&o.refresh(),i[n]=o}return i}function a(t,i){return t&&t.series?t:(i&&null!==i.series||(external_highcharts_src_js_default_default().isObject(t)?i=new Annotations_MockPoint(this.chart,this,t):external_highcharts_src_js_default_default().isString(t)?i=this.chart.get(t)||null:"function"==typeof t&&(i=(e=t.call(i,this)).series?e:new Annotations_MockPoint(this.chart,this,t))),i);var e}function r(i){this.controlPoints.forEach(t=>t.redraw(i))}function l(){this.controlPoints.forEach(t=>t.render())}function h(e,n,o,s,a){var t;this.chart.inverted&&(t=n,n=o,o=t),this.points.forEach((t,i)=>this.transformPoint(e,n,o,s,a,i),this)}function c(t,i,e,n,o,s){let a=this.points[s];(a=a.mock?a:this.points[s]=Annotations_MockPoint.fromPoint(a))[t](i,e,n,o)}function p(t,i){this.transform("translate",null,null,t,i)}function d(t,i,e){this.transformPoint("translate",null,null,t,i,e)}(ControlTarget||(ControlTarget={})).compose=function(t){(t=t.prototype).addControlPoints||external_highcharts_src_js_default_default().merge(!0,t,{addControlPoints:i,anchor:e,destroyControlTarget:n,getPointsOptions:o,linkPoints:s,point:a,redrawControlPoints:r,renderControlPoints:l,transform:h,transformPoint:c,translate:p,translatePoint:d})}}(),ControlTarget),Controllable_merge=external_highcharts_src_js_default_default()["merge"];class Controllable{constructor(t,i,e,n){this.annotation=t,this.chart=t.chart,this.collection="label"===n?"labels":"shapes",this.controlPoints=[],this.options=i,this.points=[],this.index=e,this.itemType=n,this.init(t,i,e)}attr(){this.graphic.attr.apply(this.graphic,arguments)}attrsFromOptions(t){const i=this.constructor.attrsMap,e={},n=this.chart.styledMode;let o,s;for(o in t)s=i[o],void 0===i[o]||n&&-1!==["fill","stroke","stroke-width"].indexOf(s)||(e[s]=t[o]);return e}destroy(){this.graphic&&(this.graphic=this.graphic.destroy()),this.tracker&&(this.tracker=this.tracker.destroy()),this.destroyControlTarget()}init(t,i,e){this.annotation=t,this.chart=t.chart,this.options=i,this.points=[],this.controlPoints=[],this.index=e,this.linkPoints(),this.addControlPoints()}redraw(t){this.redrawControlPoints(t)}render(t){this.options.className&&this.graphic&&this.graphic.addClass(this.options.className),this.renderControlPoints()}rotate(t,i,e){this.transform("rotate",t,i,e)}scale(t,i,e,n){this.transform("scale",t,i,e,n)}setControlPointsVisibility(i){this.controlPoints.forEach(t=>{t.setVisibility(i)})}shouldBeDrawn(){return!!this.points.length}translateShape(t,i,e){const n=this.annotation.chart,o=this.annotation.userOptions,s=n.annotations.indexOf(this.annotation),a=n.options.annotations[s];this.translatePoint(t,i,0),e&&this.translatePoint(t,i,1),a[this.collection][this.index].point=this.options.point,o[this.collection][this.index].point=this.options.point}update(t){const i=this.annotation,e=Controllable_merge(!0,this.options,t),n=this.graphic.parentGroup,o=this.constructor;this.destroy();t=new o(i,e,this.index,this.itemType);Controllable_merge(!0,this,t),this.render(n),this.redraw()}}Annotations_ControlTarget.compose(Controllable);const Controllables_Controllable=Controllable,defaultMarkers={arrow:{tagName:"marker",attributes:{id:"arrow",refY:5,refX:9,markerWidth:10,markerHeight:10},children:[{tagName:"path",attributes:{d:"M 0 0 L 10 5 L 0 10 Z","stroke-width":0}}]},"reverse-arrow":{tagName:"marker",attributes:{id:"reverse-arrow",refY:5,refX:1,markerWidth:10,markerHeight:10},children:[{tagName:"path",attributes:{d:"M 0 5 L 10 0 L 10 10 Z","stroke-width":0}}]}},ControllableDefaults={defaultMarkers:defaultMarkers},Controllables_ControllableDefaults=ControllableDefaults,ControllablePath_defaultMarkers=Controllables_ControllableDefaults["defaultMarkers"],{addEvent:ControllablePath_addEvent,defined:ControllablePath_defined,extend,merge:ControllablePath_merge,uniqueKey}=external_highcharts_src_js_default_default(),markerEndSetter=createMarkerSetter("marker-end"),markerStartSetter=createMarkerSetter("marker-start"),TRACKER_FILL="rgba(192,192,192,"+(external_highcharts_src_js_default_default().svg?1e-4:.002)+")";function createMarkerSetter(i){return function(t){this.attr(i,"url(#"+t+")")}}function onChartAfterGetContainer(){this.options.defs=ControllablePath_merge(ControllablePath_defaultMarkers,this.options.defs||{})}function svgRendererAddMarker(t,i){const e={attributes:{id:t}},n={stroke:i.color||"none",fill:i.color||"rgba(0, 0, 0, 0.75)"};e.children=i.children&&i.children.map(function(t){return ControllablePath_merge(n,t)});i=ControllablePath_merge(!0,{attributes:{markerWidth:20,markerHeight:20,refX:0,refY:0,orient:"auto"}},i,e);const o=this.definition(i);return o.id=t,o}class ControllablePath extends Controllables_Controllable{static compose(t,i){const e=i.prototype;e.addMarker||(ControllablePath_addEvent(t,"afterGetContainer",onChartAfterGetContainer),e.addMarker=svgRendererAddMarker)}constructor(t,i,e){super(t,i,e,"shape"),this.type="path"}toD(){const t=this.options.d;if(t)return"function"==typeof t?t.call(this):t;const i=this.points,e=i.length,n=[];let o=e,s=i[0],a=o&&this.anchor(s).absolutePosition,r=0,l;if(a)for(n.push(["M",a.x,a.y]);++r<e&&o;)l=(s=i[r]).command||"L",a=this.anchor(s).absolutePosition,"M"===l||"L"===l?n.push([l,a.x,a.y]):"Z"===l&&n.push([l]),o=s.series.visible;return o&&this.graphic?this.chart.renderer.crispLine(n,this.graphic.strokeWidth()):null}shouldBeDrawn(){return super.shouldBeDrawn()||!!this.options.d}render(t){var i=this.options,e=this.attrsFromOptions(i);this.graphic=this.annotation.chart.renderer.path([["M",0,0]]).attr(e).add(t),this.tracker=this.annotation.chart.renderer.path([["M",0,0]]).addClass("highcharts-tracker-line").attr({zIndex:2}).add(t),this.annotation.chart.styledMode||this.tracker.attr({"stroke-linejoin":"round",stroke:TRACKER_FILL,fill:TRACKER_FILL,"stroke-width":this.graphic.strokeWidth()+2*i.snap}),super.render(),extend(this.graphic,{markerStartSetter:markerStartSetter,markerEndSetter:markerEndSetter}),this.setMarkers(this)}redraw(t){var i,e;this.graphic&&(e=t?"animate":"attr",(i=this.toD())?(this.graphic[e]({d:i}),this.tracker[e]({d:i})):(this.graphic.attr({d:"M 0 "+-9e9}),this.tracker.attr({d:"M 0 "+-9e9})),this.graphic.placed=this.tracker.placed=!!i),super.redraw(t)}setMarkers(a){const r=a.options,l=a.chart,h=l.options.defs,t=r.fill,c=ControllablePath_defined(t)&&"none"!==t?t:r.stroke;["markerStart","markerEnd"].forEach(function(t){var i=r[t];let e,n,o,s;if(i){for(o in h)if((i===((e=h[o]).attributes&&e.attributes.id)||i===e.id)&&"marker"===e.tagName){n=e;break}n&&(s=a[t]=l.renderer.addMarker((r.id||uniqueKey())+"-"+i,ControllablePath_merge(n,{color:c})),a.attr(t,s.getAttribute("id")))}})}}ControllablePath.attrsMap={dashStyle:"dashstyle",strokeWidth:"stroke-width",stroke:"stroke",fill:"fill",zIndex:"zIndex"};const Controllables_ControllablePath=ControllablePath,ControllableRect_merge=external_highcharts_src_js_default_default()["merge"];class ControllableRect extends Controllables_Controllable{constructor(t,i,e){super(t,i,e,"shape"),this.type="rect",this.translate=super.translateShape}render(t){var i=this.attrsFromOptions(this.options);this.graphic=this.annotation.chart.renderer.rect(0,-9e9,0,0).attr(i).add(t),super.render()}redraw(t){var i;this.graphic&&((i=this.anchor(this.points[0]).absolutePosition)?this.graphic[t?"animate":"attr"]({x:i.x,y:i.y,width:this.options.width,height:this.options.height}):this.attr({x:0,y:-9e9}),this.graphic.placed=Boolean(i)),super.redraw(t)}}ControllableRect.attrsMap=ControllableRect_merge(Controllables_ControllablePath.attrsMap,{width:"width",height:"height"});const Controllables_ControllableRect=ControllableRect,ControllableCircle_merge=external_highcharts_src_js_default_default()["merge"];class ControllableCircle extends Controllables_Controllable{constructor(t,i,e){super(t,i,e,"shape"),this.type="circle",this.translate=super.translateShape}redraw(t){var i;this.graphic&&((i=this.anchor(this.points[0]).absolutePosition)?this.graphic[t?"animate":"attr"]({x:i.x,y:i.y,r:this.options.r}):this.graphic.attr({x:0,y:-9e9}),this.graphic.placed=!!i),super.redraw.call(this,t)}render(t){var i=this.attrsFromOptions(this.options);this.graphic=this.annotation.chart.renderer.circle(0,-9e9,0).attr(i).add(t),super.render()}setRadius(t){this.options.r=t}}ControllableCircle.attrsMap=ControllableCircle_merge(Controllables_ControllablePath.attrsMap,{r:"r"});const Controllables_ControllableCircle=ControllableCircle,{merge:ControllableEllipse_merge,defined:ControllableEllipse_defined}=external_highcharts_src_js_default_default();class ControllableEllipse extends Controllables_Controllable{constructor(t,i,e){super(t,i,e,"shape"),this.type="ellipse"}init(t,i,e){ControllableEllipse_defined(i.yAxis)&&i.points.forEach(t=>{t.yAxis=i.yAxis}),ControllableEllipse_defined(i.xAxis)&&i.points.forEach(t=>{t.xAxis=i.xAxis}),super.init(t,i,e)}render(t){this.graphic=this.annotation.chart.renderer.createElement("ellipse").attr(this.attrsFromOptions(this.options)).add(t),super.render()}translate(t,i){super.translateShape(t,i,!0)}getDistanceFromLine(t,i,e,n){return Math.abs((i.y-t.y)*e-(i.x-t.x)*n+i.x*t.y-i.y*t.x)/Math.sqrt((i.y-t.y)*(i.y-t.y)+(i.x-t.x)*(i.x-t.x))}getAttrs(t,i){var e=t.x,t=t.y,n=i.x,i=i.y,o=(e+n)/2,s=(t+i)/2,a=Math.sqrt((e-n)*(e-n)/4+(t-i)*(t-i)/4);let r=180*Math.atan((i-t)/(n-e))/Math.PI;return o<e&&(r+=180),{cx:o,cy:s,rx:a,ry:this.getRY(),angle:r}}getRY(){const t=this.getYAxis();return ControllableEllipse_defined(t)?Math.abs(t.toPixels(this.options.ry)-t.toPixels(0)):this.options.ry}getYAxis(){var t=this.options.yAxis;return this.chart.yAxis[t]}getAbsolutePosition(t){return this.anchor(t).absolutePosition}redraw(t){var i,e;this.graphic&&(i=this.getAbsolutePosition(this.points[0]),e=this.getAbsolutePosition(this.points[1]),e=this.getAttrs(i,e),i?this.graphic[t?"animate":"attr"]({cx:e.cx,cy:e.cy,rx:e.rx,ry:e.ry,rotation:e.angle,rotationOriginX:e.cx,rotationOriginY:e.cy}):this.graphic.attr({x:0,y:-9e9}),this.graphic.placed=Boolean(i)),super.redraw(t)}setYRadius(t){const i=this.annotation.userOptions.shapes;this.options.ry=t,i&&i[0]&&(i[0].ry=t,i[0].ry=t)}}ControllableEllipse.attrsMap=ControllableEllipse_merge(Controllables_ControllablePath.attrsMap,{ry:"ry"});const Controllables_ControllableEllipse=ControllableEllipse,external_highcharts_src_js_default_Templating_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default.Templating;var external_highcharts_src_js_default_Templating_default=__webpack_require__.n(external_highcharts_src_js_default_Templating_namespaceObject);const format=external_highcharts_src_js_default_Templating_default()["format"],{extend:ControllableLabel_extend,getAlignFactor,isNumber,pick:ControllableLabel_pick}=external_highcharts_src_js_default_default();function symbolConnector(t,i,e,n,o){var s=o&&o.anchorX,o=o&&o.anchorY;let a,r,l=e/2;return isNumber(s)&&isNumber(o)&&(a=[["M",s,o]],(r=(r=i-o)<0?-n-r:r)<e&&(l=s<t+e/2?r:e-r),i+n<o?a.push(["L",t+l,i+n]):o<i?a.push(["L",t+l,i]):s<t?a.push(["L",t,i+n/2]):t+e<s&&a.push(["L",t+e,i+n/2])),a||[]}class ControllableLabel extends Controllables_Controllable{static alignedPosition(t,i){return{x:Math.round((i.x||0)+(t.x||0)+(i.width-(t.width||0))*getAlignFactor(t.align)),y:Math.round((i.y||0)+(t.y||0)+(i.height-(t.height||0))*getAlignFactor(t.verticalAlign))}}static compose(t){const i=t.prototype.symbols;i.connector=symbolConnector}static justifiedOptions(t,i,e,n){const o=e.align,s=e.verticalAlign,a=!i.box&&i.padding||0,r=i.getBBox(),l={align:o,verticalAlign:s,x:e.x,y:e.y,width:i.width,height:i.height},h=(n.x||0)-t.plotLeft,c=(n.y||0)-t.plotTop;let p;return(p=h+a)<0&&("right"===o?l.align="left":l.x=(l.x||0)-p),(p=h+r.width-a)>t.plotWidth&&("left"===o?l.align="right":l.x=(l.x||0)+t.plotWidth-p),(p=c+a)<0&&("bottom"===s?l.verticalAlign="top":l.y=(l.y||0)-p),(p=c+r.height-a)>t.plotHeight&&("top"===s?l.verticalAlign="bottom":l.y=(l.y||0)+t.plotHeight-p),l}constructor(t,i,e){super(t,i,e,"label")}translatePoint(t,i){super.translatePoint(t,i,0)}translate(t,i){const e=this.annotation.chart,n=this.annotation.userOptions,o=e.annotations.indexOf(this.annotation),s=e.options.annotations,a=s[o];var r;e.inverted&&(r=t,t=i,i=r),this.options.x+=t,this.options.y+=i,a[this.collection][this.index].x=this.options.x,a[this.collection][this.index].y=this.options.y,n[this.collection][this.index].x=this.options.x,n[this.collection][this.index].y=this.options.y}render(t){const i=this.options,e=this.attrsFromOptions(i),n=i.style,o=this.annotation.chart.options.chart,s=o.plotBackgroundColor||o.backgroundColor;this.graphic=this.annotation.chart.renderer.label("",0,-9999,i.shape,void 0,void 0,i.useHTML,void 0,"annotation-label").attr(e).add(t),this.annotation.chart.styledMode||("contrast"===n.color&&(t=-1<ControllableLabel.shapesWithoutBackground.indexOf(i.shape)||"none"===i.backgroundColor?s:i.backgroundColor,n.color=this.annotation.chart.renderer.getContrast("string"==typeof t?t:"string"==typeof s?s:"#ffffff")),this.graphic.css(i.style).shadow(i.shadow)),this.graphic.labelrank=i.labelrank,super.render()}redraw(t){const i=this.options,e=this.text||i.format||i.text,n=this.graphic,o=this.points[0];if(n){n.attr({text:e?format(String(e),o,this.annotation.chart):i.formatter.call(o,this)});var s=this.anchor(o);const a=this.position(s);a?((n.alignAttr=a).anchorX=s.absolutePosition.x,a.anchorY=s.absolutePosition.y,n[t?"animate":"attr"](a)):n.attr({x:0,y:-9999}),n.placed=!!a,super.redraw(t)}else this.redraw(t)}anchor(t){const i=super.anchor.apply(this,arguments),e=this.options.x||0,n=this.options.y||0;return i.absolutePosition.x-=e,i.absolutePosition.y-=n,i.relativePosition.x-=e,i.relativePosition.y-=n,i}position(t){const i=this.graphic,e=this.annotation.chart,n=e.tooltip,o=this.points[0],s=this.options,a=t.absolutePosition,r=t.relativePosition;let l,h,c,p,d=o.series.visible&&Annotations_MockPoint.prototype.isInsidePlot.call(o);var u;return i&&d&&({width:t=0,height:u=0}=i,s.distance&&n?l=n.getPosition.call({chart:e,distance:ControllableLabel_pick(s.distance,16),getPlayingField:n.getPlayingField,pointer:n.pointer},t,u,{plotX:r.x,plotY:r.y,negative:o.negative,ttBelow:o.ttBelow,h:r.height||r.width}):s.positioner?l=s.positioner.call(this):(h={x:a.x,y:a.y,width:0,height:0},l=ControllableLabel.alignedPosition(ControllableLabel_extend(s,{width:t,height:u}),h),"justify"===this.options.overflow&&(l=ControllableLabel.alignedPosition(ControllableLabel.justifiedOptions(e,i,s,l),h))),s.crop&&(c=l.x-e.plotLeft,p=l.y-e.plotTop,d=e.isInsidePlot(c,p)&&e.isInsidePlot(c+t,p+u))),d?l:null}}ControllableLabel.attrsMap={backgroundColor:"fill",borderColor:"stroke",borderWidth:"stroke-width",zIndex:"zIndex",borderRadius:"r",padding:"padding"},ControllableLabel.shapesWithoutBackground=["connector"];const Controllables_ControllableLabel=ControllableLabel;class ControllableImage extends Controllables_Controllable{constructor(t,i,e){super(t,i,e,"shape"),this.type="image",this.translate=super.translateShape}render(t){var i=this.attrsFromOptions(this.options),e=this.options;this.graphic=this.annotation.chart.renderer.image(e.src,0,-9e9,e.width,e.height).attr(i).add(t),this.graphic.width=e.width,this.graphic.height=e.height,super.render()}redraw(t){var i;this.graphic&&(i=this.anchor(this.points[0]),(i=Controllables_ControllableLabel.prototype.position.call(this,i))?this.graphic[t?"animate":"attr"]({x:i.x,y:i.y}):this.graphic.attr({x:0,y:-9e9}),this.graphic.placed=Boolean(i)),super.redraw(t)}}ControllableImage.attrsMap={width:"width",height:"height",zIndex:"zIndex"};const Controllables_ControllableImage=ControllableImage,external_highcharts_src_js_default_AST_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default.AST;var DropdownProperties,ChartNavigationComposition,external_highcharts_src_js_default_AST_default=__webpack_require__.n(external_highcharts_src_js_default_AST_namespaceObject);const{addEvent:BaseForm_addEvent,createElement}=external_highcharts_src_js_default_default();class BaseForm{constructor(t,i){this.iconsURL=i,this.container=this.createPopupContainer(t),this.closeButton=this.addCloseButton()}createPopupContainer(t,i="highcharts-popup highcharts-no-tooltip"){return createElement("div",{className:i},void 0,t)}addCloseButton(t="highcharts-popup-close"){const i=this,e=this.iconsURL,n=createElement("button",{className:t},void 0,this.container);return createElement("span",{className:"highcharts-icon"},{backgroundImage:"url("+(e.match(/png|svg|jpeg|jpg|gif/gi)?e:e+"close.svg")+")"},n),["click","touchstart"].forEach(t=>{BaseForm_addEvent(n,t,i.closeButtonEvents.bind(i))}),BaseForm_addEvent(document,"keydown",function(t){"Escape"===t.code&&i.closeButtonEvents()}),n}closeButtonEvents(){this.closePopup()}showPopup(t="highcharts-annotation-toolbar"){const i=this.container,e=this.closeButton;this.type=void 0,i.innerHTML=external_highcharts_src_js_default_AST_default().emptyHTML,0<=i.className.indexOf(t)&&(i.classList.remove(t),i.removeAttribute("style")),i.appendChild(e),i.style.display="block",i.style.height=""}closePopup(){this.container.style.display="none"}}const Shared_BaseForm=BaseForm,{doc:PopupAnnotations_doc,isFirefox}=external_highcharts_src_js_default_default(),{createElement:PopupAnnotations_createElement,isArray:PopupAnnotations_isArray,isObject:PopupAnnotations_isObject,objectEach:PopupAnnotations_objectEach,pick:PopupAnnotations_pick,stableSort}=external_highcharts_src_js_default_default();function addForm(i,e,n,o){if(i){var s=this.container,a=this.lang;let t=PopupAnnotations_createElement("h2",{className:"highcharts-popup-main-title"},void 0,s);t.appendChild(PopupAnnotations_doc.createTextNode(a[e.langKey]||e.langKey||"")),t=PopupAnnotations_createElement("div",{className:"highcharts-popup-lhs-col highcharts-popup-lhs-full"},void 0,s);var r=PopupAnnotations_createElement("div",{className:"highcharts-popup-bottom-row"},void 0,s);addFormFields.call(this,t,i,"",e,[],!0),this.addButton(r,o?a.addButton||"Add":a.saveButton||"Save",o?"add":"save",s,n)}}function addToolbar(t,i,e){const n=this.lang,o=this.container,s=this.showForm,a="highcharts-annotation-toolbar",r=(-1===o.className.indexOf(a)&&(o.className+=" "+a+" highcharts-no-mousewheel"),t&&(o.style.top=t.plotTop+10+"px"),PopupAnnotations_createElement("p",{className:"highcharts-annotation-label"},void 0,o));r.setAttribute("aria-label","Annotation type"),r.appendChild(PopupAnnotations_doc.createTextNode(PopupAnnotations_pick(n[i.langKey]||i.langKey,i.shapes&&i.shapes[0].type,"")));let l=this.addButton(o,n.editButton||"Edit","edit",o,()=>{s.call(this,"annotation-edit",t,i,e)});l.className+=" highcharts-annotation-edit-button",PopupAnnotations_createElement("span",{className:"highcharts-icon"},{backgroundImage:`url(${this.iconsURL}edit.svg)`},l),(l=this.addButton(o,n.removeButton||"Remove","remove",o,e)).className+=" highcharts-annotation-remove-button",PopupAnnotations_createElement("span",{className:"highcharts-icon"},{backgroundImage:`url(${this.iconsURL}destroy.svg)`},l)}function addFormFields(o,s,a,t,r,i){if(s){const l=this.addInput,h=this.lang;let e,n;PopupAnnotations_objectEach(t,(t,i)=>{e=""!==a?a+"."+i:i,PopupAnnotations_isObject(t)&&(!PopupAnnotations_isArray(t)||PopupAnnotations_isArray(t)&&PopupAnnotations_isObject(t[0])?((n=h[i]||i).match(/\d/g)||r.push([!0,n,o]),addFormFields.call(this,o,s,e,t,r,!1)):r.push([this,e,"annotation",o,t]))}),i&&(stableSort(r,t=>t[1].match(/format/g)?-1:1),isFirefox&&r.reverse(),r.forEach(t=>{!0===t[0]?PopupAnnotations_createElement("span",{className:"highcharts-annotation-title"},void 0,t[2]).appendChild(PopupAnnotations_doc.createTextNode(t[1])):(t[4]={value:t[4][0],type:t[4][1]},l.apply(t[0],t.splice(1)))}))}}const PopupAnnotations={addForm:addForm,addToolbar:addToolbar},Popup_PopupAnnotations=PopupAnnotations,PopupIndicators_doc=external_highcharts_src_js_default_default()["doc"],seriesTypes=external_highcharts_src_js_default_SeriesRegistry_default()["seriesTypes"],{addEvent:PopupIndicators_addEvent,createElement:PopupIndicators_createElement,defined:PopupIndicators_defined,isArray:PopupIndicators_isArray,isObject:PopupIndicators_isObject,objectEach:PopupIndicators_objectEach,stableSort:PopupIndicators_stableSort}=external_highcharts_src_js_default_default(),dropdownParameters=(!function(t){t[t["params.algorithm"]=0]="params.algorithm",t[t["params.average"]=1]="params.average"}(DropdownProperties=DropdownProperties||{}),{"algorithm-pivotpoints":["standard","fibonacci","camarilla"],"average-disparityindex":["sma","ema","dema","tema","wma"]});function addColsContainer(t){var i=PopupIndicators_createElement("div",{className:"highcharts-popup-lhs-col"},void 0,t),t=PopupIndicators_createElement("div",{className:"highcharts-popup-rhs-col"},void 0,t);return PopupIndicators_createElement("div",{className:"highcharts-popup-rhs-col-wrapper"},void 0,t),{lhsCol:i,rhsCol:t}}function PopupIndicators_addForm(t,i,e){var n,o=this.lang;if(t){this.tabs.init.call(this,t);const s=this.container.querySelectorAll(".highcharts-tab-item-content");addColsContainer(s[0]),addSearchBox.call(this,t,s[0]),addIndicatorList.call(this,t,s[0],"add"),n=s[0].querySelectorAll(".highcharts-popup-rhs-col")[0],this.addButton(n,o.addButton||"add","add",n,e),addColsContainer(s[1]),addIndicatorList.call(this,t,s[1],"edit"),n=s[1].querySelectorAll(".highcharts-popup-rhs-col")[0],this.addButton(n,o.saveButton||"save","edit",n,e),this.addButton(n,o.removeButton||"remove","remove",n,e)}}function PopupIndicators_addFormFields(t,i,e,n){var o=i.params||i.options.params;n.innerHTML=external_highcharts_src_js_default_AST_default().emptyHTML,PopupIndicators_createElement("h3",{className:"highcharts-indicator-title"},void 0,n).appendChild(PopupIndicators_doc.createTextNode(getNameType(i,e).indicatorFullName)),PopupIndicators_createElement("input",{type:"hidden",name:"highcharts-type-"+e,value:e},void 0,n),listAllSeries.call(this,e,"series",t,n,i,i.linkedParent&&i.linkedParent.options.id),o.volumeSeriesID&&listAllSeries.call(this,e,"volume",t,n,i,i.linkedParent&&o.volumeSeriesID),addParamInputs.call(this,t,"params",o,e,n)}function addIndicatorList(n,t,i,e){function s(t,i){const e=g.parentNode.children[1];PopupIndicators_addFormFields.call(o,n,t,i,g),e&&(e.style.display="block"),h&&t.options&&PopupIndicators_createElement("input",{type:"hidden",name:"highcharts-id-"+i,value:t.options.id},void 0,g).setAttribute("highcharts-data-series-id",t.options.id)}const o=this,a=o.lang,r=t.querySelectorAll(".highcharts-popup-lhs-col")[0],l=t.querySelectorAll(".highcharts-popup-rhs-col")[0],h="edit"===i,c=h?n.series:n.options.plotOptions||{};if(!n&&c)return;let p,d=[];h||PopupIndicators_isArray(c)?PopupIndicators_isArray(c)&&(d=filterSeriesArray.call(this,c)):d=filterSeries.call(this,c,e),PopupIndicators_stableSort(d,(t,i)=>{t=t.indicatorFullName.toLowerCase(),i=i.indicatorFullName.toLowerCase();return t<i?-1:i<t?1:0}),r.children[1]&&r.children[1].remove();const u=PopupIndicators_createElement("ul",{className:"highcharts-indicator-list"},void 0,r),g=l.querySelectorAll(".highcharts-popup-rhs-col-wrapper")[0];if(d.forEach(t=>{const{indicatorFullName:i,indicatorType:e,series:n}=t,o=(p=PopupIndicators_createElement("li",{className:"highcharts-indicator-list"},void 0,u),PopupIndicators_createElement("button",{className:"highcharts-indicator-list-item",textContent:i},void 0,p));["click","touchstart"].forEach(t=>{PopupIndicators_addEvent(o,t,function(){s(n,e)})})}),0<d.length){const{series:c,indicatorType:_}=d[0];s(c,_)}else h||(external_highcharts_src_js_default_AST_default().setElementHTML(g.parentNode.children[0],a.noFilterMatch||""),g.parentNode.children[1].style.display="none")}function addParamInputs(o,s,t,a,r){if(o){const l=this.addInput;PopupIndicators_objectEach(t,(t,i)=>{var e,n=s+"."+i;PopupIndicators_defined(t)&&n&&(PopupIndicators_isObject(t)&&(l.call(this,n,a,r,{}),addParamInputs.call(this,o,n,t,a,r)),n in DropdownProperties?(e=addSelection.call(this,a,n,r),addSelectionOptions.call(this,o,s,e,a,i,t)):"params.volumeSeriesID"==n||PopupIndicators_isArray(t)||l.call(this,n,a,r,{value:t,type:"number"}))})}}function addSearchBox(i,t){function e(t){addIndicatorList.call(n,i,n.container,"add",t)}const n=this,o=t.querySelectorAll(".highcharts-popup-lhs-col")[0],s=this.lang.clearFilter,a=PopupIndicators_createElement("div",{className:"highcharts-input-wrapper"},void 0,o),r=this.addInput("searchIndicators","input",a,{value:"",type:"text",htmlFor:"search-indicators",labelClassName:"highcharts-input-search-indicators-label"}),l=PopupIndicators_createElement("a",{textContent:s},void 0,a);r.classList.add("highcharts-input-search-indicators"),l.classList.add("clear-filter-button"),PopupIndicators_addEvent(r,"input",function(){e(this.value),this.value.length?l.style.display="inline-block":l.style.display="none"}),["click","touchstart"].forEach(t=>{PopupIndicators_addEvent(l,t,function(){r.value="",e(""),l.style.display="none"})})}function addSelection(t,i,e){var n=i.split("."),n=n[n.length-1],t="highcharts-"+i+"-type-"+t,o=this.lang;PopupIndicators_createElement("label",{htmlFor:t},null,e).appendChild(PopupIndicators_doc.createTextNode(o[n]||i));const s=PopupIndicators_createElement("select",{name:t,className:"highcharts-popup-field",id:"highcharts-select-"+i},null,e);return s.setAttribute("id","highcharts-select-"+i),s}function addSelectionOptions(t,n,o,i,e,s,a){if("series"===n||"volume"===n)t.series.forEach(t=>{var i=t.options,e=i.name||i.params?t.name:i.id||"";"highcharts-navigator-series"!==i.id&&i.id!==(a&&a.options&&a.options.id)&&(PopupIndicators_defined(s)||"volume"!==n||"column"!==t.type||(s=i.id),PopupIndicators_createElement("option",{value:i.id},void 0,o).appendChild(PopupIndicators_doc.createTextNode(e)))});else if(i&&e){const r=e+"-"+i,l=dropdownParameters[r];l.forEach(t=>{PopupIndicators_createElement("option",{value:t},void 0,o).appendChild(PopupIndicators_doc.createTextNode(t))})}PopupIndicators_defined(s)&&(o.value=s)}function filterSeries(t,r){const i=this.chart&&this.chart.options.lang,l=i&&i.navigation&&i.navigation.popup&&i.navigation.popup.indicatorAliases,h=[];let c;return PopupIndicators_objectEach(t,(t,i)=>{var e=t&&t.options;if(t.params||e&&e.params){const{indicatorFullName:n,indicatorType:o}=getNameType(t,i);if(r){e=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");const s=new RegExp(e,"i"),a=l&&l[o]&&l[o].join(" ")||"";(n.match(s)||a.match(s))&&(c={indicatorFullName:n,indicatorType:o,series:t},h.push(c))}else c={indicatorFullName:n,indicatorType:o,series:t},h.push(c)}}),h}function filterSeriesArray(t){const i=[];return t.forEach(t=>{t.is("sma")&&i.push({indicatorFullName:t.name,indicatorType:t.type,series:t})}),i}function getAmount(){let i=0;return this.series.forEach(t=>{(t.params||t.options.params)&&i++}),i}function getNameType(t,i){var e=t.options;let n=seriesTypes[i]&&seriesTypes[i].prototype.nameBase||i.toUpperCase(),o=i;return e&&e.type&&(o=t.options.type,n=t.name),{indicatorFullName:n,indicatorType:o}}function listAllSeries(t,i,e,n,o,s){if(e){const a=addSelection.call(this,t,i,n);addSelectionOptions.call(this,e,i,a,void 0,void 0,void 0,o),PopupIndicators_defined(s)&&(a.value=s)}}const PopupIndicators={addForm:PopupIndicators_addForm,getAmount:getAmount},Popup_PopupIndicators=PopupIndicators,PopupTabs_doc=external_highcharts_src_js_default_default()["doc"],{addEvent:PopupTabs_addEvent,createElement:PopupTabs_createElement}=external_highcharts_src_js_default_default();function addContentItem(){var t=this.container;return PopupTabs_createElement("div",{className:"highcharts-tab-item-content highcharts-no-mousewheel"},void 0,t)}function addMenuItem(t,i){var e=this.container,n=this.lang;let o="highcharts-tab-item";0===i&&(o+=" highcharts-tab-disabled");const s=PopupTabs_createElement("button",{className:o},void 0,e);return s.appendChild(PopupTabs_doc.createTextNode(n[t+"Button"]||t)),s.setAttribute("highcharts-data-tab-type",t),s}function deselectAll(){const t=this.container,i=t.querySelectorAll(".highcharts-tab-item"),e=t.querySelectorAll(".highcharts-tab-item-content");for(let t=0;t<i.length;t++)i[t].classList.remove("highcharts-tab-item-active"),e[t].classList.remove("highcharts-tab-item-show")}function init(t){var i;t&&(t=this.indicators.getAmount.call(t),i=addMenuItem.call(this,"add"),addMenuItem.call(this,"edit",t),addContentItem.call(this),addContentItem.call(this),switchTabs.call(this,t),selectTab.call(this,i,0))}function selectTab(t,i){const e=this.container.querySelectorAll(".highcharts-tab-item-content");t.className+=" highcharts-tab-item-active",e[i].className+=" highcharts-tab-item-show"}function switchTabs(t){const n=this,i=this.container,e=i.querySelectorAll(".highcharts-tab-item");e.forEach((i,e)=>{0===t&&"edit"===i.getAttribute("highcharts-data-tab-type")||["click","touchstart"].forEach(t=>{PopupTabs_addEvent(i,t,function(){deselectAll.call(n),selectTab.call(n,this,e)})})})}const PopupTabs={init:init},Popup_PopupTabs=PopupTabs,Popup_doc=external_highcharts_src_js_default_default()["doc"],getOptions=external_highcharts_src_js_default_default()["getOptions"],{addEvent:Popup_addEvent,createElement:Popup_createElement,extend:Popup_extend,fireEvent:Popup_fireEvent,pick:Popup_pick}=external_highcharts_src_js_default_default();function getFields(t,i){const e=Array.prototype.slice.call(t.querySelectorAll("input")),n=Array.prototype.slice.call(t.querySelectorAll("select")),o=t.querySelectorAll("#highcharts-select-series > option:checked")[0],s=t.querySelectorAll("#highcharts-select-volume > option:checked")[0],a={actionType:i,linkedTo:o&&o.getAttribute("value")||"",fields:{}};return e.forEach(t=>{var i=t.getAttribute("highcharts-data-name");t.getAttribute("highcharts-data-series-id")?a.seriesId=t.value:i?a.fields[i]=t.value:a.type=t.value}),n.forEach(t=>{const i=t.id;var e;"highcharts-select-series"!==i&&"highcharts-select-volume"!==i&&(e=i.split("highcharts-select-")[1],a.fields[e]=t.value)}),s&&(a.fields["params.volumeSeriesID"]=s.getAttribute("value")||""),a}class Popup extends Shared_BaseForm{constructor(t,i,e){super(t,i),this.chart=e,this.lang=(getOptions().lang.navigation||{}).popup||{},Popup_addEvent(this.container,"mousedown",()=>{const t=e&&e.navigationBindings&&e.navigationBindings.activeAnnotation;if(t){t.cancelClick=!0;const i=Popup_addEvent(Popup_doc,"click",()=>{setTimeout(()=>{t.cancelClick=!1},0),i()})}})}addInput(t,i,e,n){const o=t.split("."),s=o[o.length-1],a=this.lang,r="highcharts-"+i+"-"+Popup_pick(n.htmlFor,s),l=(s.match(/^\d+$/)||Popup_createElement("label",{htmlFor:r,className:n.labelClassName},void 0,e).appendChild(Popup_doc.createTextNode(a[s]||s)),Popup_createElement("input",{name:r,value:n.value,type:n.type,className:"highcharts-popup-field"},void 0,e));return l.setAttribute("highcharts-data-name",t),l}closeButtonEvents(){var t;this.chart?(t=this.chart.navigationBindings,Popup_fireEvent(t,"closePopup"),t&&t.selectedButtonElement&&Popup_fireEvent(t,"deselectButton",{button:t.selectedButtonElement})):super.closeButtonEvents()}addButton(t,i,e,n,o){const s=Popup_createElement("button",void 0,void 0,t);return s.appendChild(Popup_doc.createTextNode(i)),o&&["click","touchstart"].forEach(t=>{Popup_addEvent(s,t,()=>(this.closePopup(),o(getFields(n,e))))}),s}showForm(t,i,e,n){i&&(this.showPopup(),"indicators"===t&&this.indicators.addForm.call(this,i,e,n),"annotation-toolbar"===t&&this.annotations.addToolbar.call(this,i,e,n),"annotation-edit"===t&&this.annotations.addForm.call(this,i,e,n),"flag"===t&&this.annotations.addForm.call(this,i,e,n,!0),this.type=t,this.container.style.height=this.container.offsetHeight+"px")}}Popup_extend(Popup.prototype,{annotations:Popup_PopupAnnotations,indicators:Popup_PopupIndicators,tabs:Popup_PopupTabs});const Popup_Popup=Popup,composed=external_highcharts_src_js_default_default()["composed"],{addEvent:PopupComposition_addEvent,pushUnique,wrap:PopupComposition_wrap}=external_highcharts_src_js_default_default();function compose(t,i){pushUnique(composed,"Popup")&&(PopupComposition_addEvent(t,"closePopup",onNavigationBindingsClosePopup),PopupComposition_addEvent(t,"showPopup",onNavigationBindingsShowPopup),PopupComposition_wrap(i.prototype,"onContainerMouseDown",wrapPointerOnContainerMouserDown))}function onNavigationBindingsClosePopup(){this.popup&&this.popup.closePopup()}function onNavigationBindingsShowPopup(t){this.popup||(this.popup=new Popup_Popup(this.chart.container,this.chart.options.navigation.iconsURL||this.chart.options.stockTools&&this.chart.options.stockTools.gui.iconsURL||"https://code.highcharts.com/12.3.0/gfx/stock-icons/",this.chart)),this.popup.showForm(t.formType,this.chart,t.options,t.onSubmit)}function wrapPointerOnContainerMouserDown(t,i){this.inClass(i.target,"highcharts-popup")||t.apply(this,Array.prototype.slice.call(arguments,1))}const PopupComposition={compose:compose},Popup_PopupComposition=PopupComposition,getDeferredAnimation=external_highcharts_src_js_default_default()["getDeferredAnimation"],defaultOptions=external_highcharts_src_js_default_default()["defaultOptions"],{destroyObjectProperties,erase:Annotation_erase,fireEvent:Annotation_fireEvent,merge:Annotation_merge,pick:Annotation_pick,splat}=external_highcharts_src_js_default_default();function adjustVisibility(t){const i=t.graphic,e=t.points.some(t=>!1!==t.series.visible&&!1!==t.visible);i&&(e?"hidden"===i.visibility&&i.show():i.hide())}function getLabelsAndShapesOptions(n,o){const s={};return["labels","shapes"].forEach(t=>{const e=n[t],i=o[t];e&&(s[t]=i?splat(i).map((t,i)=>Annotation_merge(e[i],t)):n[t])}),s}class Annotation extends Annotations_EventEmitter{static compose(t,i,e,n){Annotations_AnnotationChart.compose(Annotation,t,e),Controllables_ControllableLabel.compose(n),Controllables_ControllablePath.compose(t,n),i.compose(Annotation,t),Popup_PopupComposition.compose(i,e)}constructor(t,i){super(),this.coll="annotations",this.chart=t,this.points=[],this.controlPoints=[],this.coll="annotations",this.index=-1,this.labels=[],this.shapes=[],this.setOptions(i),this.userOptions=i;i=getLabelsAndShapesOptions(this.options,i);this.options.labels=i.labels,this.options.shapes=i.shapes,this.init(t,this.options)}addClipPaths(){this.setClipAxes(),this.clipXAxis&&this.clipYAxis&&this.options.crop&&(this.clipRect=this.chart.renderer.clipRect(this.getClipBox()))}addLabels(){const e=this.options.labels||[];e.forEach((t,i)=>{t=this.initLabel(t,i);Annotation_merge(!0,e[i],t.options)})}addShapes(){const e=this.options.shapes||[];e.forEach((t,i)=>{t=this.initShape(t,i);Annotation_merge(!0,e[i],t.options)})}destroy(){function t(t){t.destroy()}var i=this.chart;this.labels.forEach(t),this.shapes.forEach(t),this.clipXAxis=null,this.clipYAxis=null,Annotation_erase(i.labelCollectors,this.labelCollector),super.destroy(),this.destroyControlTarget(),destroyObjectProperties(this,i)}destroyItem(t){Annotation_erase(this[t.itemType+"s"],t),t.destroy()}getClipBox(){if(this.clipXAxis&&this.clipYAxis)return{x:this.clipXAxis.left,y:this.clipYAxis.top,width:this.clipXAxis.width,height:this.clipYAxis.height}}initProperties(t,i){this.setOptions(i);var e=getLabelsAndShapesOptions(this.options,i);this.options.labels=e.labels,this.options.shapes=e.shapes,this.chart=t,this.points=[],this.controlPoints=[],this.coll="annotations",this.userOptions=i,this.labels=[],this.shapes=[]}init(t,i,e=this.index){var n=this.chart,o=this.options.animation;this.index=e,this.linkPoints(),this.addControlPoints(),this.addShapes(),this.addLabels(),this.setLabelCollector(),this.animationConfig=getDeferredAnimation(n,o)}initLabel(t,i){const e=Annotation_merge(this.options.labelOptions,{controlPointOptions:this.options.controlPointOptions},t),n=new Controllables_ControllableLabel(this,e,i);return n.itemType="label",this.labels.push(n),n}initShape(t,i){const e=Annotation_merge(this.options.shapeOptions,{controlPointOptions:this.options.controlPointOptions},t),n=new Annotation.shapesMap[e.type](this,e,i);return n.itemType="shape",this.shapes.push(n),n}redraw(t){this.linkPoints(),this.graphic||this.render(),this.clipRect&&this.clipRect.animate(this.getClipBox()),this.redrawItems(this.shapes,t),this.redrawItems(this.labels,t),this.redrawControlPoints(t)}redrawItem(t,i){t.linkPoints(),t.shouldBeDrawn()?(t.graphic||this.renderItem(t),t.redraw(Annotation_pick(i,!0)&&t.graphic.placed),t.points.length&&adjustVisibility(t)):this.destroyItem(t)}redrawItems(t,i){let e=t.length;for(;e--;)this.redrawItem(t[e],i)}remove(){return this.chart.removeAnnotation(this)}render(){const t=this.chart.renderer;this.graphic=t.g("annotation").attr({opacity:0,zIndex:this.options.zIndex,visibility:this.options.visible?"inherit":"hidden"}).add(),this.shapesGroup=t.g("annotation-shapes").add(this.graphic),this.options.crop&&this.shapesGroup.clip(this.chart.plotBoxClip),this.labelsGroup=t.g("annotation-labels").attr({translateX:0,translateY:0}).add(this.graphic),this.addClipPaths(),this.clipRect&&this.graphic.clip(this.clipRect),this.renderItems(this.shapes),this.renderItems(this.labels),this.addEvents(),this.renderControlPoints()}renderItem(t){t.render("label"===t.itemType?this.labelsGroup:this.shapesGroup)}renderItems(t){let i=t.length;for(;i--;)this.renderItem(t[i])}setClipAxes(){const e=this.chart.xAxis,n=this.chart.yAxis,t=(this.options.labels||[]).concat(this.options.shapes||[]).reduce((t,i)=>{i=i&&(i.point||i.points&&i.points[0]);return[e[i&&i.xAxis]||t[0],n[i&&i.yAxis]||t[1]]},[]);this.clipXAxis=t[0],this.clipYAxis=t[1]}setControlPointsVisibility(i){function t(t){t.setControlPointsVisibility(i)}this.controlPoints.forEach(t=>{t.setVisibility(i)}),this.shapes.forEach(t),this.labels.forEach(t)}setLabelCollector(){const t=this;t.labelCollector=function(){return t.labels.reduce(function(t,i){return i.options.allowOverlap||t.push(i.graphic),t},[])},t.chart.labelCollectors.push(t.labelCollector)}setOptions(t){this.options=Annotation_merge(this.defaultOptions,t.type&&this.defaultOptions.types[t.type]||{},t)}setVisibility(t){const i=this.options,e=this.chart.navigationBindings,n=Annotation_pick(t,!i.visible);this.graphic.attr("visibility",n?"inherit":"hidden"),n||(this.shapes.forEach(t=function(t){t.setControlPointsVisibility(n)}),this.labels.forEach(t),e.activeAnnotation===this&&e.popup&&"annotation-toolbar"===e.popup.type&&Annotation_fireEvent(e,"closePopup")),i.visible=n}update(t,i){const e=this.chart,n=getLabelsAndShapesOptions(this.userOptions,t),o=e.annotations.indexOf(this),s=Annotation_merge(!0,this.userOptions,t);s.labels=n.labels,s.shapes=n.shapes,this.destroy(),this.initProperties(e,s),this.init(e,s),e.options.annotations[o]=this.options,this.isUpdating=!0,Annotation_pick(i,!0)&&e.drawAnnotations(),Annotation_fireEvent(this,"afterUpdate"),this.isUpdating=!1}}Annotation.ControlPoint=Annotations_ControlPoint,Annotation.MockPoint=Annotations_MockPoint,Annotation.shapesMap={rect:Controllables_ControllableRect,circle:Controllables_ControllableCircle,ellipse:Controllables_ControllableEllipse,path:Controllables_ControllablePath,image:Controllables_ControllableImage},Annotation.types={},Annotation.prototype.defaultOptions=Annotations_AnnotationDefaults,defaultOptions.annotations=Annotations_AnnotationDefaults,Annotation.prototype.nonDOMEvents=["add","afterUpdate","drag","remove"],Annotations_ControlTarget.compose(Annotation);const Annotations_Annotation=Annotation,Chart_ChartNavigationComposition=(!function(t){t.compose=function(t){return t.navigation||(t.navigation=new i(t)),t};class i{constructor(t){this.updates=[],this.chart=t}addUpdate(t){this.chart.navigation.updates.push(t)}update(i,e){this.updates.forEach(t=>{t.call(this.chart,i,e)})}}t.Additions=i}(ChartNavigationComposition=ChartNavigationComposition||{}),ChartNavigationComposition),{defined:NavigationBindingsUtilities_defined,isNumber:NavigationBindingsUtilities_isNumber,pick:NavigationBindingsUtilities_pick}=external_highcharts_src_js_default_default(),annotationsFieldsTypes={backgroundColor:"string",borderColor:"string",borderRadius:"string",color:"string",fill:"string",fontSize:"string",labels:"string",name:"string",stroke:"string",title:"string"};function getAssignedAxis(t){return t.filter(t=>{var i=t.axis.getExtremes(),e=i.min,i=i.max,n=NavigationBindingsUtilities_pick(t.axis.minPointOffset,0);return NavigationBindingsUtilities_isNumber(e)&&NavigationBindingsUtilities_isNumber(i)&&t.value>=e-n&&t.value<=i+n&&!t.axis.options.isInternal})[0]}function getFieldType(t,i){t=annotationsFieldsTypes[t];let e=typeof i;return{string:"text",number:"number",boolean:"checkbox"}[e=NavigationBindingsUtilities_defined(t)?t:e]}const NavigationBindingUtilities={annotationsFieldsTypes:annotationsFieldsTypes,getAssignedAxis:getAssignedAxis,getFieldType:getFieldType},NavigationBindingsUtilities=NavigationBindingUtilities,NavigationBindingsDefaults_getAssignedAxis=NavigationBindingsUtilities["getAssignedAxis"],{isNumber:NavigationBindingsDefaults_isNumber,merge:NavigationBindingsDefaults_merge}=external_highcharts_src_js_default_default(),lang={navigation:{popup:{simpleShapes:"Simple shapes",lines:"Lines",circle:"Circle",ellipse:"Ellipse",rectangle:"Rectangle",label:"Label",shapeOptions:"Shape options",typeOptions:"Details",fill:"Fill",format:"Text",strokeWidth:"Line width",stroke:"Line color",title:"Title",name:"Name",labelOptions:"Label options",labels:"Labels",backgroundColor:"Background color",backgroundColors:"Background colors",borderColor:"Border color",borderRadius:"Border radius",borderWidth:"Border width",style:"Style",padding:"Padding",fontSize:"Font size",color:"Color",height:"Height",shapes:"Shape options"}}},navigation={bindingsClassName:"highcharts-bindings-container",bindings:{circleAnnotation:{className:"highcharts-circle-annotation",start:function(t){var t=this.chart.pointer?.getCoordinates(t),i=t&&NavigationBindingsDefaults_getAssignedAxis(t.xAxis),t=t&&NavigationBindingsDefaults_getAssignedAxis(t.yAxis),e=this.chart.options.navigation;if(i&&t)return this.chart.addAnnotation(NavigationBindingsDefaults_merge({langKey:"circle",type:"basicAnnotation",shapes:[{type:"circle",point:{x:i.value,y:t.value,xAxis:i.axis.index,yAxis:t.axis.index},r:5}]},e.annotationsOptions,e.bindings.circleAnnotation.annotationsOptions))},steps:[function(t,i){var e,n,o=i.options.shapes,o=o&&o[0]&&o[0].point||{};let s;NavigationBindingsDefaults_isNumber(o.xAxis)&&NavigationBindingsDefaults_isNumber(o.yAxis)&&(e=this.chart.inverted,n=this.chart.xAxis[o.xAxis].toPixels(o.x),o=this.chart.yAxis[o.yAxis].toPixels(o.y),s=Math.max(Math.sqrt(Math.pow(e?o-t.chartX:n-t.chartX,2)+Math.pow(e?n-t.chartY:o-t.chartY,2)),5)),i.update({shapes:[{r:s}]})}]},ellipseAnnotation:{className:"highcharts-ellipse-annotation",start:function(t){var t=this.chart.pointer?.getCoordinates(t),i=t&&NavigationBindingsDefaults_getAssignedAxis(t.xAxis),t=t&&NavigationBindingsDefaults_getAssignedAxis(t.yAxis),e=this.chart.options.navigation;if(i&&t)return this.chart.addAnnotation(NavigationBindingsDefaults_merge({langKey:"ellipse",type:"basicAnnotation",shapes:[{type:"ellipse",xAxis:i.axis.index,yAxis:t.axis.index,points:[{x:i.value,y:t.value},{x:i.value,y:t.value}],ry:1}]},e.annotationsOptions,e.bindings.ellipseAnnotation.annotationsOptions))},steps:[function(t,i){const e=i.shapes[0],n=e.getAbsolutePosition(e.points[1]);e.translatePoint(t.chartX-n.x,t.chartY-n.y,1),e.redraw(!1)},function(t,i){const e=i.shapes[0],n=e.getAbsolutePosition(e.points[0]),o=e.getAbsolutePosition(e.points[1]),s=e.getDistanceFromLine(n,o,t.chartX,t.chartY),a=e.getYAxis(),r=Math.abs(a.toValue(0)-a.toValue(s));e.setYRadius(r),e.redraw(!1)}]},rectangleAnnotation:{className:"highcharts-rectangle-annotation",start:function(t){var i,e,n,t=this.chart.pointer?.getCoordinates(t),o=t&&NavigationBindingsDefaults_getAssignedAxis(t.xAxis),t=t&&NavigationBindingsDefaults_getAssignedAxis(t.yAxis);if(o&&t)return i=o.value,e=t.value,o=o.axis.index,t=t.axis.index,n=this.chart.options.navigation,this.chart.addAnnotation(NavigationBindingsDefaults_merge({langKey:"rectangle",type:"basicAnnotation",shapes:[{type:"path",points:[{xAxis:o,yAxis:t,x:i,y:e},{xAxis:o,yAxis:t,x:i,y:e},{xAxis:o,yAxis:t,x:i,y:e},{xAxis:o,yAxis:t,x:i,y:e},{command:"Z"}]}]},n.annotationsOptions,n.bindings.rectangleAnnotation.annotationsOptions))},steps:[function(t,i){const e=i.options.shapes,n=e&&e[0]&&e[0].points||[],o=this.chart.pointer?.getCoordinates(t),s=o&&NavigationBindingsDefaults_getAssignedAxis(o.xAxis),a=o&&NavigationBindingsDefaults_getAssignedAxis(o.yAxis);var r;s&&a&&(t=s.value,r=a.value,n[1].x=t,n[2].x=t,n[2].y=r,n[3].y=r,i.update({shapes:[{points:n}]}))}]},labelAnnotation:{className:"highcharts-label-annotation",start:function(t){var t=this.chart.pointer?.getCoordinates(t),i=t&&NavigationBindingsDefaults_getAssignedAxis(t.xAxis),t=t&&NavigationBindingsDefaults_getAssignedAxis(t.yAxis),e=this.chart.options.navigation;if(i&&t)return this.chart.addAnnotation(NavigationBindingsDefaults_merge({langKey:"label",type:"basicAnnotation",labelOptions:{format:"{y:.2f}",overflow:"none",crop:!0},labels:[{point:{xAxis:i.axis.index,yAxis:t.axis.index,x:i.value,y:t.value}}]},e.annotationsOptions,e.bindings.labelAnnotation.annotationsOptions))}}},events:{},annotationsOptions:{animation:{defer:0}}},NavigationBindingDefaults={lang:lang,navigation:navigation},NavigationBindingsDefaults=NavigationBindingDefaults,setOptions=external_highcharts_src_js_default_default()["setOptions"],NavigationBindings_format=external_highcharts_src_js_default_Templating_default()["format"],{composed:NavigationBindings_composed,doc:NavigationBindings_doc,win}=external_highcharts_src_js_default_default(),{getAssignedAxis:NavigationBindings_getAssignedAxis,getFieldType:NavigationBindings_getFieldType}=NavigationBindingsUtilities,{addEvent:NavigationBindings_addEvent,attr,defined:NavigationBindings_defined,fireEvent:NavigationBindings_fireEvent,isArray:NavigationBindings_isArray,isFunction,isNumber:NavigationBindings_isNumber,isObject:NavigationBindings_isObject,merge:NavigationBindings_merge,objectEach:NavigationBindings_objectEach,pick:NavigationBindings_pick,pushUnique:NavigationBindings_pushUnique}=external_highcharts_src_js_default_default();function closestPolyfill(t,i){const e=win.Element.prototype,n=e.matches||e.msMatchesSelector||e.webkitMatchesSelector;let o=null;if(e.closest)o=e.closest.call(t,i);else do{if(n.call(t,i))return t}while(null!==(t=t.parentElement||t.parentNode)&&1===t.nodeType);return o}function onAnnotationRemove(){this.chart.navigationBindings&&this.chart.navigationBindings.deselectAnnotation()}function onChartDestroy(){this.navigationBindings&&this.navigationBindings.destroy()}function onChartLoad(){var t=this.options;t&&t.navigation&&t.navigation.bindings&&(this.navigationBindings=new NavigationBindings(this,t.navigation),this.navigationBindings.initEvents(),this.navigationBindings.initUpdate())}function onChartRender(){const t=this.navigationBindings,a="highcharts-disabled-btn";if(this&&t){let s=!1;if(this.series.forEach(t=>{!t.options.isInternal&&t.visible&&(s=!0)}),this.navigationBindings&&this.navigationBindings.container&&this.navigationBindings.container[0]){const r=this.navigationBindings.container[0];NavigationBindings_objectEach(t.boundClassNames,(i,t)=>{var e=r.querySelectorAll("."+t);if(e)for(let t=0;t<e.length;t++){const n=e[t],o=n.className;"normal"===i.noDataState||s?-1!==o.indexOf(a)&&n.classList.remove(a):-1===o.indexOf(a)&&(n.className+=" "+a)}})}}}function NavigationBindings_onNavigationBindingsClosePopup(){this.deselectAnnotation()}function onNavigationBindingsDeselectButton(){this.selectedButtonElement=null}function selectableAnnotation(t){const e=t.prototype.defaultOptions.events&&t.prototype.defaultOptions.events.click;function i(t){const n=this,o=n.chart.navigationBindings,i=o.activeAnnotation;e&&e.call(n,t),i!==n?(o.deselectAnnotation(),(o.activeAnnotation=n).setControlPointsVisibility(!0),NavigationBindings_fireEvent(o,"showPopup",{annotation:n,formType:"annotation-toolbar",options:o.annotationToFields(n),onSubmit:function(t){if("remove"===t.actionType)o.activeAnnotation=!1,o.chart.removeAnnotation(n);else{var i={};o.fieldsToOptions(t.fields,i),o.deselectAnnotation();const e=i.typeOptions;"measure"===n.options.type&&(e.crosshairY.enabled=0!==e.crosshairY.strokeWidth,e.crosshairX.enabled=0!==e.crosshairX.strokeWidth),n.update(i)}}})):NavigationBindings_fireEvent(o,"closePopup"),t.activeAnnotation=!0}let n,o;NavigationBindings_merge(!0,t.prototype.defaultOptions.events,{click:i,touchstart:function(t){n=t.touches[0].clientX,o=t.touches[0].clientY},touchend:function(t){!!n&&4<=Math.sqrt(Math.pow(n-t.changedTouches[0].clientX,2)+Math.pow(o-t.changedTouches[0].clientY,2))||i.call(this,t)}})}class NavigationBindings{static compose(t,i){NavigationBindings_pushUnique(NavigationBindings_composed,"NavigationBindings")&&(NavigationBindings_addEvent(t,"remove",onAnnotationRemove),selectableAnnotation(t),NavigationBindings_objectEach(t.types,t=>{selectableAnnotation(t)}),NavigationBindings_addEvent(i,"destroy",onChartDestroy),NavigationBindings_addEvent(i,"load",onChartLoad),NavigationBindings_addEvent(i,"render",onChartRender),NavigationBindings_addEvent(NavigationBindings,"closePopup",NavigationBindings_onNavigationBindingsClosePopup),NavigationBindings_addEvent(NavigationBindings,"deselectButton",onNavigationBindingsDeselectButton),setOptions(NavigationBindingsDefaults))}constructor(t,i){this.boundClassNames=void 0,this.chart=t,this.options=i,this.eventsToUnbind=[],this.container=this.chart.container.getElementsByClassName(this.options.bindingsClassName||""),this.container.length||(this.container=NavigationBindings_doc.getElementsByClassName(this.options.bindingsClassName||""))}getCoords(t){t=this.chart.pointer?.getCoordinates(t);return[t&&NavigationBindings_getAssignedAxis(t.xAxis),t&&NavigationBindings_getAssignedAxis(t.yAxis)]}initEvents(){const n=this,i=n.chart,t=n.container,e=n.options;n.boundClassNames={},NavigationBindings_objectEach(e.bindings||{},t=>{n.boundClassNames[t.className]=t}),[].forEach.call(t,e=>{n.eventsToUnbind.push(NavigationBindings_addEvent(e,"click",t=>{const i=n.getButtonEvents(e,t);i&&!i.button.classList.contains("highcharts-disabled-btn")&&n.bindingsButtonClick(i.button,i.events,t)}))}),NavigationBindings_objectEach(e.events||{},(t,i)=>{isFunction(t)&&n.eventsToUnbind.push(NavigationBindings_addEvent(n,i,t,{passive:!1}))}),n.eventsToUnbind.push(NavigationBindings_addEvent(i.container,"click",function(t){!i.cancelClick&&i.isInsidePlot(t.chartX-i.plotLeft,t.chartY-i.plotTop,{visiblePlotOnly:!0})&&n.bindingsChartClick(this,t)})),n.eventsToUnbind.push(NavigationBindings_addEvent(i.container,external_highcharts_src_js_default_default().isTouchDevice?"touchmove":"mousemove",function(t){n.bindingsContainerMouseMove(this,t)},external_highcharts_src_js_default_default().isTouchDevice?{passive:!1}:void 0))}initUpdate(){const i=this;Chart_ChartNavigationComposition.compose(this.chart).navigation.addUpdate(t=>{i.update(t)})}bindingsButtonClick(t,i,e){const n=this,o=n.chart,s=o.renderer.boxWrapper;let a=!0;n.selectedButtonElement&&(n.selectedButtonElement.classList===t.classList&&(a=!1),NavigationBindings_fireEvent(n,"deselectButton",{button:n.selectedButtonElement}),n.nextEvent&&(n.currentUserDetails&&"annotations"===n.currentUserDetails.coll&&o.removeAnnotation(n.currentUserDetails),n.mouseMoveEvent=n.nextEvent=!1)),a?(n.selectedButton=i,n.selectedButtonElement=t,NavigationBindings_fireEvent(n,"selectButton",{button:t}),i.init&&i.init.call(n,t,e),(i.start||i.steps)&&o.renderer.boxWrapper.addClass("highcharts-draw-mode")):(o.stockTools&&t.classList.remove("highcharts-active"),s.removeClass("highcharts-draw-mode"),n.nextEvent=!1,n.mouseMoveEvent=!1,n.selectedButton=null)}bindingsChartClick(t,i){t=this.chart;const e=this,n=e.activeAnnotation,o=e.selectedButton,s=t.renderer.boxWrapper;n&&(n.cancelClick||i.activeAnnotation||!i.target.parentNode||closestPolyfill(i.target,".highcharts-popup")?n.cancelClick&&setTimeout(()=>{n.cancelClick=!1},0):NavigationBindings_fireEvent(e,"closePopup")),o&&o.start&&(e.nextEvent?(e.nextEvent(i,e.currentUserDetails),e.steps&&(e.stepIndex++,o.steps[e.stepIndex]?e.mouseMoveEvent=e.nextEvent=o.steps[e.stepIndex]:(NavigationBindings_fireEvent(e,"deselectButton",{button:e.selectedButtonElement}),s.removeClass("highcharts-draw-mode"),o.end&&o.end.call(e,i,e.currentUserDetails),e.nextEvent=!1,e.mouseMoveEvent=!1,e.selectedButton=null))):(e.currentUserDetails=o.start.call(e,i),e.currentUserDetails&&o.steps?(e.stepIndex=0,e.steps=!0,e.mouseMoveEvent=e.nextEvent=o.steps[e.stepIndex]):(NavigationBindings_fireEvent(e,"deselectButton",{button:e.selectedButtonElement}),s.removeClass("highcharts-draw-mode"),e.steps=!1,e.selectedButton=null,o.end&&o.end.call(e,i,e.currentUserDetails))))}bindingsContainerMouseMove(t,i){this.mouseMoveEvent&&this.mouseMoveEvent(i,this.currentUserDetails)}fieldsToOptions(t,e){return NavigationBindings_objectEach(t,(o,t)=>{const i=parseFloat(o),s=t.split("."),a=s.length-1;if("undefined"!==(o=!NavigationBindings_isNumber(i)||o.match(/px|em/g)||t.match(/format/g)?o:i)){let n=e;s.forEach((t,i)=>{if("__proto__"!==t&&"constructor"!==t){const e=NavigationBindings_pick(s[i+1],"");a===i?n[t]=o:n=n[t]||(n[t]=e.match(/\d/g)?[]:{},n[t])}})}}),e}deselectAnnotation(){this.activeAnnotation&&(this.activeAnnotation.setControlPointsVisibility(!1),this.activeAnnotation=!1)}annotationToFields(a){const i=a.options,n=NavigationBindings.annotationsEditable,r=n.nestedOptions,o=NavigationBindings_pick(i.type,i.shapes&&i.shapes[0]&&i.shapes[0].type,i.labels&&i.labels[0]&&i.labels[0].type,"label"),l=NavigationBindings.annotationsNonEditable[i.langKey]||[],s={langKey:i.langKey,type:o};function h(t,n,e,o,i){let s;e&&NavigationBindings_defined(t)&&-1===l.indexOf(n)&&(0<=(e.indexOf&&e.indexOf(n))||e[n]||!0===e)&&(NavigationBindings_isArray(t)?(o[n]=[],t.forEach((t,e)=>{NavigationBindings_isObject(t)?(o[n][e]={},NavigationBindings_objectEach(t,(t,i)=>{h(t,i,r[n],o[n][e],n)})):h(t,0,r[n],o[n],n)})):NavigationBindings_isObject(t)?(s={},NavigationBindings_isArray(o)?(o.push(s),s[n]={},s=s[n]):o[n]=s,NavigationBindings_objectEach(t,(t,i)=>{h(t,i,0===n?e:r[n],s,n)})):"format"===n?o[n]=[NavigationBindings_format(t,a.labels[0].points[0]).toString(),"text"]:NavigationBindings_isArray(o)?o.push([t,NavigationBindings_getFieldType(i,t)]):o[n]=[t,NavigationBindings_getFieldType(n,t)])}return NavigationBindings_objectEach(i,(t,e)=>{"typeOptions"===e?(s[e]={},NavigationBindings_objectEach(i[e],(t,i)=>{h(t,i,r,s[e],i)})):h(t,e,n[o],s,e)}),s}getClickedClassNames(t,i){let e=i.target,n=[],o;for(;e&&e.tagName;)if((o=attr(e,"class"))&&(n=n.concat(o.split(" ").map(t=>[t,e]))),(e=e.parentNode)===t)return n;return n}getButtonEvents(t,i){const e=this,n=this.getClickedClassNames(t,i);let o;return n.forEach(t=>{e.boundClassNames[t[0]]&&!o&&(o={events:e.boundClassNames[t[0]],button:t[1]})}),o}update(t){this.options=NavigationBindings_merge(!0,this.options,t),this.removeEvents(),this.initEvents()}removeEvents(){this.eventsToUnbind.forEach(t=>t())}destroy(){this.removeEvents()}}NavigationBindings.annotationsEditable={nestedOptions:{labelOptions:["style","format","backgroundColor"],labels:["style"],label:["style"],style:["fontSize","color"],background:["fill","strokeWidth","stroke"],innerBackground:["fill","strokeWidth","stroke"],outerBackground:["fill","strokeWidth","stroke"],shapeOptions:["fill","strokeWidth","stroke"],shapes:["fill","strokeWidth","stroke"],line:["strokeWidth","stroke"],backgroundColors:[!0],connector:["fill","strokeWidth","stroke"],crosshairX:["strokeWidth","stroke"],crosshairY:["strokeWidth","stroke"]},circle:["shapes"],ellipse:["shapes"],verticalLine:[],label:["labelOptions"],measure:["background","crosshairY","crosshairX"],fibonacci:[],tunnel:["background","line","height"],pitchfork:["innerBackground","outerBackground"],rect:["shapes"],crookedLine:[],basicAnnotation:["shapes","labelOptions"]},NavigationBindings.annotationsNonEditable={rectangle:["crosshairX","crosshairY","labelOptions"],ellipse:["labelOptions"],circle:["labelOptions"]};const Annotations_NavigationBindings=NavigationBindings,G=external_highcharts_src_js_default_default(),annotations_src=(G.Annotation=G.Annotation||Annotations_Annotation,G.NavigationBindings=G.NavigationBindings||Annotations_NavigationBindings,G.Annotation.compose(G.Chart,G.NavigationBindings,G.Pointer,G.SVGRenderer),external_highcharts_src_js_default_default());export{annotations_src as default};