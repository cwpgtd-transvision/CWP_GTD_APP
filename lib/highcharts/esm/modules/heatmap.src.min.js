import*as __WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__ from"../highcharts.src.js";import*as __WEBPACK_EXTERNAL_MODULE__coloraxis_src_js_cdd22a72__ from"./coloraxis.src.js";var __webpack_require__={n:e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},d:(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const external_highcharts_src_js_default_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default;var external_highcharts_src_js_default_default=__webpack_require__.n(external_highcharts_src_js_default_namespaceObject),x=e=>{var t={};return __webpack_require__.d(t,e),t},y=e=>()=>e;const external_coloraxis_src_js_namespaceObject=x({}),external_highcharts_src_js_default_Color_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default.Color;var external_highcharts_src_js_default_Color_default=__webpack_require__.n(external_highcharts_src_js_default_Color_namespaceObject);const external_highcharts_src_js_default_SeriesRegistry_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default.SeriesRegistry;var external_highcharts_src_js_default_SeriesRegistry_default=__webpack_require__.n(external_highcharts_src_js_default_SeriesRegistry_namespaceObject);const external_highcharts_src_js_default_SVGElement_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default.SVGElement;var ColorMapComposition,external_highcharts_src_js_default_SVGElement_default=__webpack_require__.n(external_highcharts_src_js_default_SVGElement_namespaceObject);const{prototype:columnProto}=external_highcharts_src_js_default_SeriesRegistry_default().seriesTypes["column"],{addEvent,defined}=external_highcharts_src_js_default_default(),Series_ColorMapComposition=(!function(e){function r(e){const t=this,r=t.series,a=r.chart.renderer;t.moveToTopOnHover&&t.graphic&&(r.stateMarkerGraphic||(r.stateMarkerGraphic=new(external_highcharts_src_js_default_SVGElement_default())(a,"use").css({pointerEvents:"none"}).add(t.graphic.parentGroup)),"hover"===e?.state?(t.graphic.attr({id:this.id}),r.stateMarkerGraphic.attr({href:a.url+"#"+this.id,visibility:"visible"})):r.stateMarkerGraphic.attr({href:""}))}e.pointMembers={dataLabelOnNull:!0,moveToTopOnHover:!0,isValid:function(){return null!==this.value&&this.value!==1/0&&this.value!==-1/0&&(void 0===this.value||!isNaN(this.value))}},e.seriesMembers={colorKey:"value",axisTypes:["xAxis","yAxis","colorAxis"],parallelArrays:["x","y","value"],pointArrayMap:["value"],trackerGroups:["group","markerGroup","dataLabelsGroup"],colorAttribs:function(e){const t={};!defined(e.color)||e.state&&"normal"!==e.state||(t[this.colorProp||"fill"]=e.color);return t},pointAttribs:columnProto.pointAttribs},e.compose=function(e){var t=e.prototype.pointClass;return addEvent(t,"afterSetState",r),e}}(ColorMapComposition=ColorMapComposition||{}),ColorMapComposition),{prototype:{pointClass:ScatterPoint}}=external_highcharts_src_js_default_SeriesRegistry_default().seriesTypes["scatter"],{clamp,defined:HeatmapPoint_defined,extend,pick}=external_highcharts_src_js_default_default();class HeatmapPoint extends ScatterPoint{applyOptions(e,t){return!this.isNull&&null!==this.value||delete this.color,super.applyOptions(e,t),this.formatPrefix=this.isNull||null===this.value?"null":"point",this}getCellAttributes(){const e=this,t=e.series,r=t.options,a=(r.colsize||1)/2,s=(r.rowsize||1)/2,i=t.xAxis,o=t.yAxis,l=e.options.marker||t.options.marker,n=t.pointPlacementToXValue(),_=pick(e.pointPadding,r.pointPadding,0),h={x1:clamp(Math.round(i.len-i.translate(e.x-a,!1,!0,!1,!0,-n)),-i.len,2*i.len),x2:clamp(Math.round(i.len-i.translate(e.x+a,!1,!0,!1,!0,-n)),-i.len,2*i.len),y1:clamp(Math.round(o.translate(e.y-s,!1,!0,!1,!0)),-o.len,2*o.len),y2:clamp(Math.round(o.translate(e.y+s,!1,!0,!1,!0)),-o.len,2*o.len)};for(const g of[["width","x"],["height","y"]]){var c=g[0],p=g[1];let e=p+"1",t=p+"2";var d=Math.abs(h[e]-h[t]),u=l&&l.lineWidth||0,m=Math.abs(h[e]+h[t])/2,c=l&&l[c];HeatmapPoint_defined(c)&&c<d&&(d=c/2+u/2,h[e]=m-d,h[t]=m+d),_&&(("x"===p&&i.reversed||"y"===p&&!o.reversed)&&(e=t,t=p+"1"),h[e]+=_,h[t]-=_)}return h}haloPath(e){if(!e)return[];var{x:t=0,y:r=0,width:a=0,height:s=0}=this.shapeArgs||{};return[["M",t-e,r-e],["L",t-e,r+s+e],["L",t+a+e,r+s+e],["L",t+a+e,r-e],["Z"]]}isValid(){return this.value!==1/0&&this.value!==-1/0}}extend(HeatmapPoint.prototype,{dataLabelOnNull:!0,moveToTopOnHover:!0,ttBelow:!1});const Heatmap_HeatmapPoint=HeatmapPoint,isNumber=external_highcharts_src_js_default_default()["isNumber"],HeatmapSeriesDefaults={animation:!1,borderRadius:0,borderWidth:0,interpolation:!1,nullColor:"#f7f7f7",dataLabels:{formatter:function(){const e=this.series.chart["numberFormatter"];var t=this.point["value"];return isNumber(t)?e(t,-1):""},inside:!0,verticalAlign:"middle",crop:!1,overflow:"allow",padding:0},marker:{symbol:"rect",radius:0,lineColor:void 0,states:{hover:{lineWidthPlus:0},select:{}}},clip:!0,pointRange:null,tooltip:{pointFormat:"{point.x}, {point.y}: {point.value}<br/>"},states:{hover:{halo:!1,brightness:.2}},legendSymbol:"rectangle"},Heatmap_HeatmapSeriesDefaults=HeatmapSeriesDefaults,external_highcharts_src_js_default_SVGRenderer_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default.SVGRenderer;var external_highcharts_src_js_default_SVGRenderer_default=__webpack_require__.n(external_highcharts_src_js_default_SVGRenderer_namespaceObject);const doc=external_highcharts_src_js_default_default()["doc"],{defined:InterpolationUtilities_defined,pick:InterpolationUtilities_pick}=external_highcharts_src_js_default_default();function colorFromPoint(e,t){const r=t.series.colorAxis;if(r){const a=r.toColor(e||0,t).split(")")[0].split("(")[1].split(",").map(e=>InterpolationUtilities_pick(parseFloat(e),parseInt(e,10)));return a[3]=255*InterpolationUtilities_pick(a[3],1),InterpolationUtilities_defined(e)&&t.visible||(a[3]=0),a}return[0,0,0,0]}function getContext(e){const{canvas:t,context:r}=e;return t&&r?(r.clearRect(0,0,t.width,t.height),r):(e.canvas=doc.createElement("canvas"),e.context=e.canvas.getContext("2d",{willReadFrequently:!0})||void 0,e.context)}const InterpolationUtilities={colorFromPoint:colorFromPoint,getContext:getContext},Series_InterpolationUtilities=InterpolationUtilities,{series:Series,seriesTypes:{column:ColumnSeries,scatter:ScatterSeries}}=external_highcharts_src_js_default_SeriesRegistry_default(),{symbols}=external_highcharts_src_js_default_SVGRenderer_default()["prototype"],{addEvent:HeatmapSeries_addEvent,extend:HeatmapSeries_extend,fireEvent,isNumber:HeatmapSeries_isNumber,merge,pick:HeatmapSeries_pick}=external_highcharts_src_js_default_default(),{colorFromPoint:HeatmapSeries_colorFromPoint,getContext:HeatmapSeries_getContext}=Series_InterpolationUtilities;class HeatmapSeries extends ScatterSeries{constructor(){super(...arguments),this.valueMax=NaN,this.valueMin=NaN,this.isDirtyCanvas=!0}drawPoints(){const t=this,e=t.options,r=e.interpolation,L=e.marker||{};if(r){const{image:s,chart:i,xAxis:o,yAxis:l}=t,{reversed:n=!1,len:_}=o,{reversed:h=!1,len:c}=l,p={width:_,height:c};if(!s||t.isDirtyData||t.isDirtyCanvas){const d=HeatmapSeries_getContext(t),{canvas:u,options:{colsize:m=1,rowsize:g=1},points:f,points:{length:x}}=t,b=x-1,y=i.colorAxis&&i.colorAxis[0];if(u&&d&&y){const{min:v,max:S}=o.getExtremes(),{min:C,max:M}=l.getExtremes(),j=S-v,k=M-C,A=Math.round(j/m/8*8),E=Math.round(k/g/8*8),[P,w]=[[A,A/j,n,"ceil"],[E,E/k,!h,"floor"]].map(([t,r,e,a])=>e?e=>Math[a](t-r*e):e=>Math[a](r*e)),H=u.width=A+1,O=u.height=E+1,R=H*O,T=b/R,D=new Uint8ClampedArray(4*R);t.buildKDTree();for(let e=0;e<R;e++){var a=f[Math.ceil(T*e)],{x:N,y:G}=a;D.set(HeatmapSeries_colorFromPoint(a.value,a),(a=N,4*Math.ceil(H*w(G-C)+P(a-v))))}d.putImageData(new ImageData(D,H),0,0),s?s.attr({...p,href:u.toDataURL("image/png",1)}):(t.directTouch=!1,t.image=i.renderer.image(u.toDataURL("image/png",1)).attr(p).add(t.group))}t.isDirtyCanvas=!1}else s.width===_&&s.height===c||s.attr(p)}else(L.enabled||t._hasPointMarkers)&&(Series.prototype.drawPoints.call(t),t.points.forEach(e=>{e.graphic&&(e.graphic[t.chart.styledMode?"css":"animate"](t.colorAttribs(e)),null===e.value&&e.graphic.addClass("highcharts-null-point"))}))}getExtremes(){var{dataMin:e,dataMax:t}=Series.prototype.getExtremes.call(this,this.getColumn("value"));return HeatmapSeries_isNumber(e)&&(this.valueMin=e),HeatmapSeries_isNumber(t)&&(this.valueMax=t),Series.prototype.getExtremes.call(this)}getValidPoints(e,t){return Series.prototype.getValidPoints.call(this,e,t,!0)}hasData(){return!!this.dataTable.rowCount}init(){super.init.apply(this,arguments);const e=this.options;e.pointRange=HeatmapSeries_pick(e.pointRange,e.colsize||1),this.yAxis.axisPointRange=e.rowsize||1,symbols.ellipse=symbols.circle,e.marker&&HeatmapSeries_isNumber(e.borderRadius)&&(e.marker.r=e.borderRadius)}markerAttribs(e,t){var r,a=e.shapeArgs||{};return e.hasImage?{x:e.plotX,y:e.plotY}:t&&"normal"!==t?(e=e.options.marker||{},r=(this.options.marker||{}).states?.[t]||{},t=((e=e.states?.[t]||{}).width||r.width||a.width||0)+(e.widthPlus||r.widthPlus||0),e=(e.height||r.height||a.height||0)+(e.heightPlus||r.heightPlus||0),{x:(a.x||0)+((a.width||0)-t)/2,y:(a.y||0)+((a.height||0)-e)/2,width:t,height:e}):a}pointAttribs(e,t){const r=Series.prototype.pointAttribs.call(this,e,t),a=this.options||{},s=this.chart.options.plotOptions||{},i=s.series||{},o=s.heatmap||{},l=e?.options.borderColor||a.borderColor||o.borderColor||i.borderColor,n=e?.options.borderWidth||a.borderWidth||o.borderWidth||i.borderWidth||r["stroke-width"];return r.stroke=e?.marker?.lineColor||a.marker?.lineColor||l||this.color,r["stroke-width"]=n,t&&"normal"!==t&&(e=merge(a.states?.[t],a.marker?.states?.[t],e?.options.states?.[t]||{}),r.fill=e.color||external_highcharts_src_js_default_Color_default().parse(r.fill).brighten(e.brightness||0).get(),r.stroke=e.lineColor||r.stroke),r}translate(){const e=this.options,{borderRadius:s,marker:t}=e,i=t?.symbol||"rect",o=symbols[i]?i:"rect",l=-1!==["circle","square"].indexOf(o);this.generatePoints();for(const h of this.points){var n,_=h.getCellAttributes();let e=Math.min(_.x1,_.x2),t=Math.min(_.y1,_.y2),r=Math.max(Math.abs(_.x2-_.x1),0),a=Math.max(Math.abs(_.y2-_.y1),0);h.hasImage=0===(h.marker?.symbol||i||"").indexOf("url"),l&&(n=Math.abs(r-a),e=Math.min(_.x1,_.x2)+(r<a?0:n/2),t=Math.min(_.y1,_.y2)+(r<a?n/2:0),r=a=Math.min(r,a)),h.hasImage&&(h.marker={width:r,height:a}),h.plotX=h.clientX=(_.x1+_.x2)/2,h.plotY=(_.y1+_.y2)/2,h.shapeType="path",h.shapeArgs=merge(!0,{x:e,y:t,width:r,height:a},{d:symbols[o](e,t,r,a,{r:HeatmapSeries_isNumber(s)?s:0})})}fireEvent(this,"afterTranslate")}}HeatmapSeries.defaultOptions=merge(ScatterSeries.defaultOptions,Heatmap_HeatmapSeriesDefaults),HeatmapSeries_addEvent(HeatmapSeries,"afterDataClassLegendClick",function(){this.isDirtyCanvas=!0,this.drawPoints()}),HeatmapSeries_extend(HeatmapSeries.prototype,{axisTypes:Series_ColorMapComposition.seriesMembers.axisTypes,colorKey:Series_ColorMapComposition.seriesMembers.colorKey,directTouch:!0,getExtremesFromAll:!0,keysAffectYAxis:["y"],parallelArrays:Series_ColorMapComposition.seriesMembers.parallelArrays,pointArrayMap:["y","value"],pointClass:Heatmap_HeatmapPoint,specialGroup:"group",trackerGroups:Series_ColorMapComposition.seriesMembers.trackerGroups,alignDataLabel:ColumnSeries.prototype.alignDataLabel,colorAttribs:Series_ColorMapComposition.seriesMembers.colorAttribs,getSymbol:Series.prototype.getSymbol}),Series_ColorMapComposition.compose(HeatmapSeries),external_highcharts_src_js_default_SeriesRegistry_default().registerSeriesType("heatmap",HeatmapSeries);const Heatmap_HeatmapSeries=null,heatmap_src=external_highcharts_src_js_default_default();export{heatmap_src as default};