import*as __WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__ from"../highcharts.src.js";import*as __WEBPACK_EXTERNAL_MODULE__datagrouping_src_js_902e97be__ from"./datagrouping.src.js";var __webpack_require__={n:e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},d:(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const external_highcharts_src_js_default_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default;var external_highcharts_src_js_default_default=__webpack_require__.n(external_highcharts_src_js_default_namespaceObject);const external_datagrouping_src_js_default_dataGrouping_approximations_namespaceObject=__WEBPACK_EXTERNAL_MODULE__datagrouping_src_js_902e97be__.default.dataGrouping.approximations;var external_datagrouping_src_js_default_dataGrouping_approximations_default=__webpack_require__.n(external_datagrouping_src_js_default_dataGrouping_approximations_namespaceObject);const external_highcharts_src_js_default_Series_types_column_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default.Series.types.column;var external_highcharts_src_js_default_Series_types_column_default=__webpack_require__.n(external_highcharts_src_js_default_Series_types_column_namespaceObject);const external_highcharts_src_js_default_Series_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default.Series;var OnSeriesComposition,external_highcharts_src_js_default_Series_default=__webpack_require__.n(external_highcharts_src_js_default_Series_namespaceObject);const composed=external_highcharts_src_js_default_default()["composed"],columnProto=external_highcharts_src_js_default_Series_types_column_default()["prototype"],seriesProto=external_highcharts_src_js_default_Series_default()["prototype"],{defined,pushUnique,stableSort}=external_highcharts_src_js_default_default(),Series_OnSeriesComposition=(!function(e){function r(e){return seriesProto.getPlotBox.call(this.options.onSeries&&this.chart.get(this.options.onSeries)||this,e)}function s(){columnProto.translate.apply(this);const s=this,e=s.options,t=s.chart,a=s.points,r=e.onSeries,i=r&&t.get(r),o=i&&i.options.step,_=i&&i.points,n=t.inverted,l=s.xAxis,c=s.yAxis;let h=a.length-1,p,d,u=e.onKey||"y",f=_&&_.length,b=0,g,x,m,j,S;if(i&&i.visible&&f)for(b=(i.pointXOffset||0)+(i.barW||0)/2,j=i.currentDataGrouping,x=_[f-1].x+(j?j.totalRange:0),stableSort(a,(e,t)=>e.x-t.x),u="plot"+u[0].toUpperCase()+u.substr(1);f--&&a[h];)if(g=_[f],(p=a[h]).y=g.y,g.x<=p.x&&void 0!==g[u]){if(p.x<=x&&(p.plotY=g[u],g.x<p.x&&!o&&(m=_[f+1])&&void 0!==m[u]))if(defined(p.plotX)&&i.is("spline")){const v=[g.plotX||0,g.plotY||0],L=[m.plotX||0,m.plotY||0],W=g.controlPoints?.high||v,E=m.controlPoints?.low||L,A=(e,t)=>Math.pow(1-e,3)*v[t]+3*(1-e)*(1-e)*e*W[t]+3*(1-e)*e*e*E[t]+e*e*e*L[t];let t=0,r=1,s;for(let e=0;e<100;e++){var y=(t+r)/2,O=A(y,0);if(null===O)break;if(Math.abs(O-p.plotX)<.25){s=y;break}O<p.plotX?t=y:r=y}defined(s)&&(p.plotY=A(s,1),p.y=c.toValue(p.plotY,!0))}else S=(p.x-g.x)/(m.x-g.x),p.plotY+=S*(m[u]-g[u]),p.y+=S*(m.y-g.y);if(h--,f++,h<0)break}a.forEach((e,t)=>{let r;e.plotX+=b,void 0!==e.plotY&&!n||(0<=e.plotX&&e.plotX<=l.len?n?(e.plotY=l.translate(e.x,0,1,0,1),e.plotX=defined(e.y)?c.translate(e.y,0,0,0,1):0):e.plotY=(l.opposite?0:s.yAxis.len)+l.offset:e.shapeArgs={}),(d=a[t-1])&&d.plotX===e.plotX&&(void 0===d.stackIndex&&(d.stackIndex=0),r=d.stackIndex+1),e.stackIndex=r}),this.onSeries=i}e.compose=function(e){if(pushUnique(composed,"OnSeries")){const t=e.prototype;t.getPlotBox=r,t.translate=s}return e},e.getPlotBox=r,e.translate=s}(OnSeriesComposition=OnSeriesComposition||{}),OnSeriesComposition),external_highcharts_src_js_default_SeriesRegistry_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default.SeriesRegistry;var external_highcharts_src_js_default_SeriesRegistry_default=__webpack_require__.n(external_highcharts_src_js_default_SeriesRegistry_namespaceObject);const isNumber=external_highcharts_src_js_default_default()["isNumber"];class WindbarbPoint extends external_highcharts_src_js_default_Series_types_column_default().prototype.pointClass{isValid(){return isNumber(this.value)&&0<=this.value}}const Windbarb_WindbarbPoint=WindbarbPoint,WindbarbSeriesDefaults={dataGrouping:{enabled:!0,approximation:"windbarb",groupPixelWidth:30},lineWidth:2,onSeries:null,states:{hover:{lineWidthPlus:0}},tooltip:{pointFormat:'<span style="color:{point.color}">‚óè</span> {series.name}: <b>{point.value}</b> ({point.beaufort})<br/>'},vectorLength:20,colorKey:"value",yOffset:-20,xOffset:0},Windbarb_WindbarbSeriesDefaults=WindbarbSeriesDefaults,animObject=external_highcharts_src_js_default_default()["animObject"],ColumnSeries=external_highcharts_src_js_default_SeriesRegistry_default().seriesTypes["column"],{extend,merge,pick}=external_highcharts_src_js_default_default();function registerApproximation(){external_datagrouping_src_js_default_dataGrouping_approximations_default().windbarb||(external_datagrouping_src_js_default_dataGrouping_approximations_default().windbarb=(r,s)=>{let a=0,i=0;for(let e=0,t=r.length;e<t;e++)a+=r[e]*Math.cos(s[e]*external_highcharts_src_js_default_default().deg2rad),i+=r[e]*Math.sin(s[e]*external_highcharts_src_js_default_default().deg2rad);return[r.reduce((e,t)=>e+t,0)/r.length,Math.atan2(i,a)/external_highcharts_src_js_default_default().deg2rad]})}class WindbarbSeries extends ColumnSeries{init(e,t){super.init(e,t)}pointAttribs(e,t){var r=this.options;let s=e.color||this.color,a=this.options.lineWidth;return t&&(s=r.states[t].color||s,a=(r.states[t].lineWidth||a)+(r.states[t].lineWidthPlus||0)),{stroke:s,"stroke-width":a}}windArrow(e){var t=e.beaufortLevel,r=this.options.vectorLength/20;let s=1.943844*e.value,a,i=-10;if(e.isNull)return[];if(0===t)return this.chart.renderer.symbols.circle(-10*r,-10*r,20*r,20*r);const o=[["M",0,7*r],["L",-1.5*r,7*r],["L",0,10*r],["L",1.5*r,7*r],["L",0,7*r],["L",0,-10*r]];if(0<(a=(s-s%50)/50))for(;a--;)o.push(-10===i?["L",0,i*r]:["M",0,i*r],["L",5*r,i*r+2],["L",0,i*r+4]),s-=50,i+=7;if(0<(a=(s-s%10)/10))for(;a--;)o.push(-10===i?["L",0,i*r]:["M",0,i*r],["L",7*r,i*r]),s-=10,i+=3;if(0<(a=(s-s%5)/5))for(;a--;)o.push(-10===i?["L",0,i*r]:["M",0,i*r],["L",4*r,i*r]),s-=5,i+=3;return o}drawPoints(){const e=this.chart,t=this.yAxis,r=e.inverted,s=this.options.vectorLength/2;for(const o of this.points){var a=o.plotX,i=o.plotY;!1===this.options.clip||e.isInsidePlot(a,0)?(o.graphic||(o.graphic=this.chart.renderer.path().add(this.markerGroup).addClass("highcharts-point highcharts-color-"+pick(o.colorIndex,o.series.colorIndex))),o.graphic.attr({d:this.windArrow(o),translateX:a+this.options.xOffset,translateY:i+this.options.yOffset,rotation:o.direction}),this.chart.styledMode||o.graphic.attr(this.pointAttribs(o))):o.graphic&&(o.graphic=o.graphic.destroy()),o.tooltipPos=[a+this.options.xOffset+(r&&!this.onSeries?s:0),i+this.options.yOffset-(r?0:s+t.pos-e.plotTop)]}}animate(e){e?this.markerGroup.attr({opacity:.01}):this.markerGroup.animate({opacity:1},animObject(this.options.animation))}markerAttribs(){return{}}getExtremes(){return{}}shouldShowTooltip(e,t,r={}){return r.ignoreX=this.chart.inverted,r.ignoreY=!r.ignoreX,super.shouldShowTooltip(e,t,r)}}WindbarbSeries.defaultOptions=merge(ColumnSeries.defaultOptions,Windbarb_WindbarbSeriesDefaults),Series_OnSeriesComposition.compose(WindbarbSeries),extend(WindbarbSeries.prototype,{beaufortFloor:[0,.3,1.6,3.4,5.5,8,10.8,13.9,17.2,20.8,24.5,28.5,32.7],beaufortName:["Calm","Light air","Light breeze","Gentle breeze","Moderate breeze","Fresh breeze","Strong breeze","Near gale","Gale","Strong gale","Storm","Violent storm","Hurricane"],invertible:!1,parallelArrays:["x","value","direction"],pointArrayMap:["value","direction"],pointClass:Windbarb_WindbarbPoint,trackerGroups:["markerGroup"],translate:function(){var t=this.beaufortFloor,r=this.beaufortName;Series_OnSeriesComposition.translate.call(this);for(const s of this.points){let e=0;for(;e<t.length&&!(t[e]>s.value);e++);s.beaufortLevel=e-1,s.beaufort=r[e-1]}}}),external_highcharts_src_js_default_SeriesRegistry_default().registerSeriesType("windbarb",WindbarbSeries),registerApproximation();const Windbarb_WindbarbSeries=null,windbarb_src=external_highcharts_src_js_default_default();export{windbarb_src as default};