import*as t from"../highcharts.js";var e={n:t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return e.d(r,{a:r}),r},d:(t,r)=>{for(var i in r)e.o(r,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:r[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};let i=t.default;var r=e.n(i);e.d({},{});let a=r()["animObject"],s=r()["getOptions"],{addEvent:o,defined:n,erase:h,extend:l,merge:d,pick:p,removeEvent:c,wrap:f}=r(),g=function(){let t=[],e=s().colors,r=0;for(var i of["M 0 0 L 5 5 M 4.5 -0.5 L 5.5 0.5 M -0.5 4.5 L 0.5 5.5","M 0 5 L 5 0 M -0.5 0.5 L 0.5 -0.5 M 4.5 5.5 L 5.5 4.5","M 2 0 L 2 5 M 4 0 L 4 5","M 0 2 L 5 2 M 0 4 L 5 4","M 0 1.5 L 2.5 1.5 L 2.5 0 M 2.5 5 L 2.5 3.5 L 5 3.5"])t.push({path:i,color:e[r++],width:5,height:5,patternTransform:"scale(1.4 1.4)"});for(var a of(r=5,["M 0 0 L 5 10 L 10 0","M 3 3 L 8 3 L 8 8 L 3 8 Z","M 5 5 m -4 0 a 4 4 0 1 1 8 0 a 4 4 0 1 1 -8 0","M 0 0 L 10 10 M 9 -1 L 11 1 M -1 9 L 1 11","M 0 10 L 10 0 M -1 1 L 1 -1 M 9 11 L 11 9"]))t.push({path:a,color:e[r],width:10,height:10}),r+=5;return t}();function u(t,e){let r=JSON.stringify(t),i=r.length||0,a=0,s=0,o;if(e){o=Math.max(Math.floor(i/500),1);for(let t=0;t<i;t+=o)a+=r.charCodeAt(t);a&=a}for(;s<i;++s)a=(a<<5)-a+r.charCodeAt(s),a&=a;return a.toString(16).replace("-","1")}function m(){if(this.renderer&&(this.renderer.defIds||[]).filter(t=>t&&t.indexOf&&0===t.indexOf("highcharts-pattern-")).length){for(var t of this.series)if(t.visible)for(var e of t.points){let t=e.options&&e.options.color;t&&t.pattern&&(t.pattern._width="defer",t.pattern._height="defer")}this.redraw(!1)}}function x(){let r={},i=this.renderer,t=(i.defIds||[]).filter(t=>t.indexOf&&0===t.indexOf("highcharts-pattern-"));if(t.length)for(var e of([].forEach.call(this.renderTo.querySelectorAll('[color^="url("], [fill^="url("], [stroke^="url("]'),t=>{let e=t.getAttribute("fill")||t.getAttribute("color")||t.getAttribute("stroke");e&&(r[e.replace(i.url,"").replace("url(#","").replace(")","")]=!0)}),t))r[e]||(h(i.defIds,e),i.patternElements[e]&&(i.patternElements[e].destroy(),delete i.patternElements[e]))}function w(){let t=this.options.color;t&&t.pattern&&("string"==typeof t.pattern.path&&(t.pattern.path={d:t.pattern.path}),this.color=this.options.color=d(this.series.options.color,t))}function y(t){let e=t.args[0],r=t.args[1],i=t.args[2],a=this.chartIndex||0,s=e.pattern,o="#333333";if(!(s=void 0!==e.patternIndex&&g?g[e.patternIndex]:s))return!0;if(s.image||"string"==typeof s.path||s.path&&s.path.d){let t=i.parentNode&&i.parentNode.getAttribute("class");t=t&&-1<t.indexOf("highcharts-legend"),"defer"!==s._width&&"defer"!==s._height||A.call({graphic:{element:i}},s),!t&&s.id||((s=d({},s)).id="highcharts-pattern-"+a+"-"+u(s)+u(s,!0)),this.addPattern(s,!this.forExport&&p(s.animation,this.globalAnimation,{duration:100})),o=`url(${this.url}#${s.id+(this.forExport?"-export":"")})`}else o=s.color||o;return i.setAttribute(r,o),!(e.toString=function(){return o})}function b(){var e=this.chart.isResizing;if(this.isDirtyData||e||!this.chart.hasRendered)for(var r of this.points){let t=r.options&&r.options.color;t&&t.pattern&&(!e||r.shapeArgs&&r.shapeArgs.width&&r.shapeArgs.height?r.calculatePatternDimensions(t.pattern):(t.pattern._width="defer",t.pattern._height="defer"))}}function A(r){if(!r.width||!r.height){let t=this.graphic&&(this.graphic.getBBox&&this.graphic.getBBox(!0)||this.graphic.element&&this.graphic.element.getBBox())||{},e=this.shapeArgs;if(e&&(t.width=e.width||t.width,t.height=e.height||t.height,t.x=e.x||t.x,t.y=e.y||t.y),r.image){var i;if(!t.width||!t.height)return r._width="defer",r._height="defer",i=this.series.chart.mapView&&this.series.chart.mapView.getSVGTransform().scaleY,void(n(i)&&i<0&&(r._inverted=!0));r.aspectRatio&&(t.aspectRatio=t.width/t.height,r.aspectRatio>t.aspectRatio?t.aspectWidth=t.height*r.aspectRatio:t.aspectHeight=t.width/r.aspectRatio),r._width=r.width||Math.ceil(t.aspectWidth||t.width),r._height=r.height||Math.ceil(t.aspectHeight||t.height)}r.width||(r._x=r.x||0,r._x+=t.x-Math.round(t.aspectWidth?Math.abs(t.aspectWidth-t.width)/2:0)),r.height||(r._y=r.y||0,r._y+=t.y-Math.round(t.aspectHeight?Math.abs(t.aspectHeight-t.height)/2:0))}}function M(i,s){let o=p(s,!0),n=a(o),h=i.color||"#333333",l=i.height||("number"==typeof i._height?i._height:0)||32,d=i.width||("number"==typeof i._width?i._width:0)||32,f,g=i.id,u;if(g||(this.idCounter=this.idCounter||0,g="highcharts-pattern-"+this.idCounter+"-"+(this.chartIndex||0),++this.idCounter),this.forExport&&(g+="-export"),this.defIds=this.defIds||[],!(-1<this.defIds.indexOf(g))){this.defIds.push(g);let t={id:g,patternUnits:"userSpaceOnUse",patternContentUnits:i.patternContentUnits||"userSpaceOnUse",width:d,height:l,x:i._x||i.x||0,y:i._y||i.y||0},e=(i._inverted&&(t.patternTransform="scale(1, -1)",i.patternTransform&&(i.patternTransform+=" scale(1, -1)")),i.patternTransform&&(t.patternTransform=i.patternTransform),this.createElement("pattern").attr(t).add(this.defs));return e.id=g,i.path?(u=r().isObject(i.path)?i.path:{d:i.path},i.backgroundColor&&(s=i.backgroundColor,this.rect(0,0,d,l).attr({fill:s}).add(e)),f={d:u.d},this.styledMode||(f.stroke=u.stroke||h,f["stroke-width"]=p(u.strokeWidth,2),f.fill=u.fill||"none"),u.transform&&(f.transform=u.transform),this.createElement("path").attr(f).add(e),e.color=h):i.image&&(o?this.image(i.image,0,0,d,l,function(){this.animate({opacity:p(i.opacity,1)},n),c(this.element,"load")}).attr({opacity:0}):this.image(i.image,0,0,d,l)).add(e),i.image&&o||void 0===i.opacity||[].forEach.call(e.element.childNodes,t=>{t.setAttribute("opacity",i.opacity)}),this.patternElements=this.patternElements||{},this.patternElements[g]=e}}function C(t){let e=this.options.color;e&&e.pattern&&!e.pattern.color?(delete this.options.color,t.apply(this,[].slice.call(arguments,1)),e.pattern.color=this.color,this.color=this.options.color=e):t.apply(this,[].slice.call(arguments,1))}function k(){if(this.chart?.mapView){let e=this.chart.renderer,r=e.patternElements;e.defIds?.length&&r&&this.points.filter(function(t){return!!t.graphic&&(t.graphic.element.hasAttribute("fill")||t.graphic.element.hasAttribute("color")||t.graphic.element.hasAttribute("stroke"))&&!t.options.color?.pattern?.image&&!!t.group?.scaleX&&!!t.group?.scaleY}).map(function(t){return{id:(t.graphic?.element.getAttribute("fill")||t.graphic?.element.getAttribute("color")||t.graphic?.element.getAttribute("stroke")||"").replace(e.url,"").replace("url(#","").replace(")",""),x:t.group?.scaleX||1,y:t.group?.scaleY||1}}).filter(function(r,i,t){return""!==r.id&&-1!==r.id.indexOf("highcharts-pattern-")&&!t.some(function(t,e){return t.id===r.id&&e<i})}).forEach(function(t){var e=t.id;r[e].scaleX=1/t.x,r[e].scaleY=1/t.y,r[e].updateTransform("patternTransform")})}}let v=t.default.Chart;var E=e.n(v);let L=t.default.SeriesRegistry;var _=e.n(L);let O=r()["defined"],S={rescalePatternFill:function(n,h,l,d,p=1){let t=n&&n.attr("fill"),e=t&&t.match(/url\(([^)]+)\)/);if(e){let o=document.querySelector(e[1]+" path");if(o){let e=o.getBBox();if(0===e.width){let t=o.parentElement;n.renderer.box.appendChild(o),e=o.getBBox(),t.appendChild(o)}let t=1/(e.width+p),r=h/d/e.height,i=e.width/e.height,a=l/h,s=-e.width/2;i<a&&(t=t*i/a),o.setAttribute("stroke-width",p/(l*t)),o.setAttribute("transform",`translate(0.5, 0)scale(${t} ${r}) translate(${s+p*t/2}, ${-e.y})`)}}},invertShadowGroup:function(t,e){e=e.chart.inverted;e&&t.attr({rotation:90*!!e,scaleX:e?-1:1})},getStackMetrics:function(t,e){let r=t.len,i=0;return e&&O(e.max)&&(i=t.toPixels(e.max,!0),r=t.len-i),{height:r,y:i}}},G=_().seriesTypes.column.prototype.pointClass,{rescalePatternFill:B,getStackMetrics:W}=S,D=class extends G{setState(){super.setState.apply(this,arguments);var t=this.series,e=t.options.paths;this.graphic&&this.shapeArgs&&e&&(e=e[this.index%e.length],B(this.graphic,W(t.yAxis,e).height,this.shapeArgs.width||0,this.shapeArgs.height||1/0,this.series.options.borderWidth||0))}},I=t.default.Series;var R=e.n(I);let T=t.default.StackItem;var P=e.n(T);let j=t.default.SVGRenderer;var U=e.n(j);let X=_().seriesTypes.column,$=([function(t,e,r){var i=e.prototype.pointClass,a=i.prototype;a.calculatePatternDimensions||(o(t,"endResize",m),o(t,"redraw",x),l(a,{calculatePatternDimensions:A}),o(i,"afterInit",w),o(e,"render",b),f(e.prototype,"getColor",C),o(e,"afterRender",k),o(e,"mapZoomComplete",k),l(r.prototype,{addPattern:M}),o(r,"complexColor",y))},g][0](E(),R(),U()),r())["animObject"],{getStackMetrics:Y,invertShadowGroup:F,rescalePatternFill:V}=S,{addEvent:H,defined:N,merge:q,objectEach:z,pick:Z}=r();class J extends X{animate(t){let{chart:e,group:r}=this,i=$(this.options.animation),a=[this.getSharedClipKey(),i.duration,i.easing,i.defer].join(","),s=e.sharedClips[a];if(t&&r){let t=e.getClipBox(this);s||(t.y=t.height,t.height=0,s=e.renderer.clipRect(t),e.sharedClips[a]=s),r.clip(s)}else s&&!s.hasClass("highcharts-animating")&&(t=e.getClipBox(this),s.addClass("highcharts-animating").animate(t,i))}animateDrilldown(){}animateDrillupFrom(){}pointAttribs(t){let e=super.pointAttribs.apply(this,arguments),r=this.options.paths;var i,a,s;return t&&t.shapeArgs&&r&&(s=r[t.index%r.length],{y:i,height:a}=Y(this.yAxis,s),(s=s.definition)!==t.pathDef?(t.pathDef=s,e.fill={pattern:{path:{d:s,fill:e.fill,strokeWidth:e["stroke-width"],stroke:e.stroke},x:t.shapeArgs.x,y:i,width:t.shapeArgs.width||0,height:a,patternContentUnits:"objectBoundingBox",backgroundColor:"none",color:"#ff0000"}}):t.pathDef&&t.graphic&&delete e.fill),delete e.stroke,delete e.strokeWidth,e}getExtremes(){let e=super.getExtremes.apply(this,arguments),t=this.options.paths;return t&&t.forEach(function(t){N(t.max)&&N(e.dataMax)&&t.max>e.dataMax&&(e.dataMax=t.max)}),e}}function K(g){let t=Object.keys(g.points).filter(t=>1<t.split(",").length),e=g.axis.chart.series,r=t.map(t=>parseFloat(t.split(",")[0])),i=-1,u=(r.forEach(t=>{e[t]&&e[t].visible&&(i=t)}),g.axis.chart.series[i]);if(u&&u.is("pictorial")&&g.axis.hasData()&&u.xAxis.hasData()){let r=u.xAxis,t=g.axis.options,i=g.axis.chart,a=g.shadow,e=r.toPixels(g.x,!0),s=i.inverted?r.len-e:e,o=u.options.paths||[],n=g.x%o.length,h=o[n],l=u.getColumnMetrics&&u.getColumnMetrics().width,{height:d,y:p}=Y(u.yAxis,h),c=t.stackShadow,f=Z(c&&c.borderWidth,u.options.borderWidth,1);if(!a&&c&&c.enabled&&h)g.shadowGroup||(g.shadowGroup=i.renderer.g("shadow-group").add()),g.shadowGroup.attr({translateX:(i.inverted?g.axis:r).pos,translateY:(i.inverted?r:g.axis).pos}),g.shadow=i.renderer.rect(s,p,l,d).attr({fill:{pattern:{path:{d:h.definition,fill:c.color||"#dedede",strokeWidth:f,stroke:c.borderColor||"transparent"},x:s,y:p,width:l,height:d,patternContentUnits:"objectBoundingBox",backgroundColor:"none",color:"#dedede"}}}).add(g.shadowGroup),F(g.shadowGroup,g.axis),V(g.shadow,d,l,d,f),g.setOffset(u.pointXOffset||0,u.barW||0);else if(a&&g.shadowGroup){a.animate({x:s,y:p,width:l,height:d});let t=a.attr("fill"),e=t&&t.match(/url\(([^)]+)\)/);e&&i.renderer.patternElements&&i.renderer.patternElements[e[1].slice(1)].animate({x:s,y:p,width:l,height:d}),g.shadowGroup.animate({translateX:(i.inverted?g.axis:r).pos,translateY:(i.inverted?r:g.axis).pos}),F(g.shadowGroup,g.axis),V(a,d,l,d,f),g.setOffset(u.pointXOffset||0,u.barW||0)}}else g.shadow&&g.shadowGroup&&(g.shadow.destroy(),g.shadow=void 0,g.shadowGroup.destroy(),g.shadowGroup=void 0)}function Q(t,e){t.axes&&t.axes.forEach(function(t){t.stacking&&z(t.stacking.stacks,function(t){z(t,function(t){e(t)})})})}function tt(t){Q(t,function(t){t.shadow&&t.shadowGroup&&(t.shadow.destroy(),t.shadowGroup.destroy(),delete t.shadow,delete t.shadowGroup)})}J.defaultOptions=q(X.defaultOptions,{borderWidth:0}),H(J,"afterRender",function(){let o=this,n=o.options.paths,h=/url\(([^)]+)\)/;o.points.forEach(function(s){if(s.graphic&&s.shapeArgs&&n){let t=n[s.index%n.length],e=s.graphic.attr("fill"),r=e&&e.match(h),{y:i,height:a}=Y(o.yAxis,t);if(r&&o.chart.renderer.patternElements){let t=o.chart.renderer.patternElements[r[1].slice(1)];t&&t.animate({x:s.shapeArgs.x,y:i,width:s.shapeArgs.width||0,height:a})}V(s.graphic,Y(o.yAxis,t).height,s.shapeArgs.width||0,s.shapeArgs.height||1/0,o.options.borderWidth||0)}})}),H(E(),"render",function(){Q(this,K)}),H(P(),"afterSetOffset",function(t){var e,r,i;this.shadow&&({chart:i,len:e}=this.axis,{xOffset:t,width:r}=t,t=i.inverted?t-i.xAxis[0].len:t,i=i.inverted?-e:0,this.shadow.attr({translateX:t,translateY:i}),this.shadow.animate({width:r}))}),H(E(),"afterDrilldown",function(){tt(this)}),H(E(),"afterDrillUp",function(){tt(this)}),J.prototype.pointClass=D,_().registerSeriesType("pictorial",J);let te=r();export{te as default};