import*as __WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__ from"../highcharts.src.js";import*as __WEBPACK_EXTERNAL_MODULE__treemap_src_js_d9a26ac3__ from"./treemap.src.js";var __webpack_require__={n:e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},d:(e,t)=>{for(var i in t)__webpack_require__.o(t,i)&&!__webpack_require__.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const external_highcharts_src_js_default_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default;var external_highcharts_src_js_default_default=__webpack_require__.n(external_highcharts_src_js_default_namespaceObject),x=e=>{var t={};return __webpack_require__.d(t,e),t},y=e=>()=>e;const external_treemap_src_js_namespaceObject=x({}),getLinkPath={default:getDefaultPath,straight:getStraightPath,curved:getCurvedPath};function getDefaultPath(e){var{x1:e,y1:t,x2:i,y2:r,width:s=0,inverted:a=!1,radius:o,parentVisible:n}=e,l=[["M",e,t],["L",e,t],["C",e,t,e,r,e,r],["L",e,r],["C",e,t,e,r,e,r],["L",e,r]];return n?applyRadius([["M",e,t],["L",e+s*(a?-.5:.5),t],["L",e+s*(a?-.5:.5),r],["L",i,r]],o):l}function getStraightPath(e){var{x1:e,y1:t,x2:i,y2:r,width:s=0,inverted:a=!1,parentVisible:o}=e;return o?[["M",e,t],["L",e+s*(a?-1:1),r],["L",i,r]]:[["M",e,t],["L",e,r],["L",e,r]]}function getCurvedPath(e){var{x1:e,y1:t,x2:i,y2:r,offset:s=0,width:a=0,inverted:o=!1,parentVisible:n}=e;return n?[["M",e,t],["C",e+s,t,e-s+a*(o?-1:1),r,e+a*(o?-1:1),r],["L",i,r]]:[["M",e,t],["C",e,t,e,r,e,r],["L",i,r]]}function applyRadius(t,i){const r=[];for(let e=0;e<t.length;e++){var s,a,o,n,l,h,d=t[e][1],p=t[e][2];"number"==typeof d&&"number"==typeof p&&(0===e?r.push(["M",d,p]):e!==t.length-1&&i?(a=t[e-1],n=t[e+1],a&&n&&(s=a[1],a=a[2],o=n[1],n=n[2],"number"==typeof s&&"number"==typeof o&&"number"==typeof a&&"number"==typeof n&&s!==o&&a!==n&&(l=s<o?1:-1,h=a<n?1:-1,r.push(["L",d-l*Math.min(Math.abs(d-s),i),p-h*Math.min(Math.abs(p-a),i)],["C",d,p,d,p,d+l*Math.min(Math.abs(d-o),i),p+h*Math.min(Math.abs(p-n),i)])))):r.push(["L",d,p]))}return r}const PathUtilities={applyRadius:applyRadius,getLinkPath:getLinkPath},Series_PathUtilities=PathUtilities,external_highcharts_src_js_default_SeriesRegistry_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default.SeriesRegistry;var external_highcharts_src_js_default_SeriesRegistry_default=__webpack_require__.n(external_highcharts_src_js_default_SeriesRegistry_namespaceObject);const external_highcharts_src_js_default_SVGRenderer_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default.SVGRenderer;var external_highcharts_src_js_default_SVGRenderer_default=__webpack_require__.n(external_highcharts_src_js_default_SVGRenderer_namespaceObject);const{treemap:{prototype:{NodeClass:TreemapNode}}}=external_highcharts_src_js_default_SeriesRegistry_default()["seriesTypes"];class TreegraphNode extends TreemapNode{constructor(){super(...arguments),this.mod=0,this.shift=0,this.change=0,this.children=[],this.preX=0,this.hidden=!1,this.wasVisited=!1,this.collapsed=!1}nextLeft(){return this.getLeftMostChild()||this.thread}nextRight(){return this.getRightMostChild()||this.thread}getAncestor(e,t){return e.ancestor.children[0]===this.children[0]?e.ancestor:t}getLeftMostSibling(){var e=this.getParent();if(e)for(const t of e.children)if(t&&t.point.visible)return t}hasChildren(){var t=this.children;for(let e=0;e<t.length;e++)if(t[e].point.visible)return!0;return!1}getLeftSibling(){var e=this.getParent();if(e){var t=e.children;for(let e=this.relativeXPosition-1;0<=e;e--)if(t[e]&&t[e].point.visible)return t[e]}}getLeftMostChild(){var t=this.children;for(let e=0;e<t.length;e++)if(t[e].point.visible)return t[e]}getRightMostChild(){var t=this.children;for(let e=t.length-1;0<=e;e--)if(t[e].point.visible)return t[e]}getParent(){return this.parentNode}getFirstChild(){var t=this.children;for(let e=0;e<t.length;e++)if(t[e].point.visible)return t[e]}}const Treegraph_TreegraphNode=TreegraphNode,external_highcharts_src_js_default_Point_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default.Point;var external_highcharts_src_js_default_Point_default=__webpack_require__.n(external_highcharts_src_js_default_Point_namespaceObject);const{treemap:{prototype:{pointClass:TreemapPoint}}}=external_highcharts_src_js_default_SeriesRegistry_default()["seriesTypes"],{addEvent,fireEvent,merge}=external_highcharts_src_js_default_default();class TreegraphPoint extends TreemapPoint{constructor(){super(...arguments),this.dataLabelOnHidden=!0,this.isLink=!1,this.setState=external_highcharts_src_js_default_Point_default().prototype.setState}draw(){super.draw.apply(this,arguments);const e=this.graphic;e&&e.animate({visibility:this.visible?"inherit":"hidden"}),this.renderCollapseButton()}renderCollapseButton(){const e=this,t=e.series,i=e.graphic&&e.graphic.parentGroup,r=t.mapOptionsToLevel[e.node.level||0]||{},s=merge(t.options.collapseButton,r.collapseButton,e.options.collapseButton),{width:a,height:o,shape:n,style:l}=s,h=this.series.chart,d=!e.visible||!e.collapsed&&s.onlyOnHover&&"hover"!==e.state?0:1;var p,c,_;e.shapeArgs&&(this.collapseButtonOptions=s,e.collapseButton?e.node.children.length&&s.enabled?({x:p,y:c}=this.getCollapseBtnPosition(s),e.collapseButton.attr({text:e.collapsed?"+":"-",rotation:h.inverted?90:0,rotationOriginX:a/2,rotationOriginY:o/2,visibility:e.visible?"inherit":"hidden"}).animate({x:p,y:c,opacity:d})):(e.collapseButton.destroy(),delete e.collapseButton):e.node.children.length&&s.enabled&&({x:p,y:c}=this.getCollapseBtnPosition(s),_=s.fillColor||e.color||"#cccccc",e.collapseButton=h.renderer.label(e.collapsed?"+":"-",p,c,n).attr({height:o-4,width:a-4,padding:2,fill:_,rotation:h.inverted?90:0,rotationOriginX:a/2,rotationOriginY:o/2,stroke:s.lineColor||"#ffffff","stroke-width":s.lineWidth,"text-align":"center",align:"center",zIndex:1,opacity:d,visibility:e.visible?"inherit":"hidden"}).addClass("highcharts-tracker").addClass("highcharts-collapse-button").removeClass("highcharts-no-tooltip").css(merge({color:"string"==typeof _?h.renderer.getContrast(_):"#333333"},l)).add(i),e.collapseButton.element.point=e))}toggleCollapse(e){const t=this.series;this.update({collapsed:e??!this.collapsed},!1,void 0,!1),fireEvent(t,"toggleCollapse"),t.redraw()}destroy(){this.collapseButton&&(this.collapseButton.destroy(),delete this.collapseButton,this.collapseButton=void 0),this.linkToParent&&(this.linkToParent.destroy(),delete this.linkToParent),super.destroy.apply(this,arguments)}getCollapseBtnPosition(e){var t=this.series.chart.inverted,i=e.width,r=e.height,{x:s=0,y:a=0,width:o=0,height:n=0}=this.shapeArgs||{};return{x:s+e.x+(t?.3*-r:o+-.3*i),y:a+n/2-r/2+e.y}}}addEvent(TreegraphPoint,"mouseOut",function(){const e=this.collapseButton,t=this.collapseButtonOptions;e&&t?.onlyOnHover&&!this.collapsed&&e.animate({opacity:0})}),addEvent(TreegraphPoint,"mouseOver",function(){this.collapseButton&&this.visible&&this.collapseButton.animate({opacity:1},this.series.options.states?.hover?.animation)}),addEvent(TreegraphPoint,"click",function(){this.toggleCollapse()});const Treegraph_TreegraphPoint=TreegraphPoint,external_highcharts_src_js_default_Color_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default.Color;var external_highcharts_src_js_default_Color_default=__webpack_require__.n(external_highcharts_src_js_default_Color_namespaceObject);const{extend,isArray,isNumber,isObject,merge:TreeUtilities_merge,pick,relativeLength}=external_highcharts_src_js_default_default();function getColor(e,t){const i=t.index,r=t.mapOptionsToLevel,s=t.parentColor,a=t.parentColorIndex,o=t.series,n=t.colors,l=t.siblings,h=o.points,d=o.chart.options.chart;let p,c,_,g,u,f;var v;return e&&(p=h[e.i],c=r[e.level]||{},p&&c.colorByPoint&&(g=p.index%(n?n.length:d.colorCount),_=n&&n[g]),o.chart.styledMode||(u=pick(p&&p.options.color,c&&c.color,_,s&&(e=s,(v=c&&c.colorVariation)&&"brightness"===v.key&&i&&l?external_highcharts_src_js_default_Color_default().parse(e).brighten(v.to*(i/l)).get():e),o.color)),f=pick(p&&p.options.colorIndex,c&&c.colorIndex,g,a,t.colorIndex)),{color:u,colorIndex:f}}function getLevelOptions(e){const t={};let a,i,r,o,s,n;if(isObject(e))for(o=isNumber(e.from)?e.from:1,n=e.levels,i={},a=isObject(e.defaults)?e.defaults:{},isArray(n)&&(i=n.reduce((e,t)=>{let i,r,s;return isObject(t)&&isNumber(t.level)&&(s=TreeUtilities_merge({},t),r=pick(s.levelIsConstant,a.levelIsConstant),delete s.levelIsConstant,delete s.level,i=t.level+(r?0:o-1),isObject(e[i])?TreeUtilities_merge(!0,e[i],s):e[i]=s),e},{})),s=isNumber(e.to)?e.to:1,r=0;r<=s;r++)t[r]=TreeUtilities_merge({},a,isObject(i[r])?i[r]:{});return t}function setTreeValues(r,s){const e=s.before,t=s.idRoot,i=s.mapIdToNode,a=i[t],o=!1!==s.levelIsConstant,n=s.points,l=n[r.i],h=l&&l.options||{},d=[];let p=0;r.levelDynamic=r.level-(o?0:a.level),r.name=pick(l&&l.name,""),r.visible=t===r.id||!0===s.visible,(r="function"==typeof e?e(r,s):r).children.forEach((e,t)=>{var i=extend({},s);extend(i,{index:t,siblings:r.children.length,visible:r.visible}),e=setTreeValues(e,i),d.push(e),e.visible&&(p+=e.val)});var c=pick(h.value,p);return r.visible=0<=c&&(0<p||r.visible),r.children=d,r.childrenTotal=p,r.isLeaf=r.visible&&!p,r.val=c,r}function updateRootId(e){let t,i;return isObject(e)&&(i=isObject(e.options)?e.options:{},t=pick(e.rootNode,i.rootId,""),isObject(e.userOptions)&&(e.userOptions.rootId=t),e.rootNode=t),t}function getNodeWidth(e,t){var{chart:e,options:i}=e,{nodeDistance:i=0,nodeWidth:r=0}=i,{plotSizeX:e=1}=e;if("auto"!==r)return relativeLength(r,e);if("string"==typeof i&&/%$/.test(i))return e/(t+parseFloat(i)/100*(t-1));r=Number(i);return(e+r)/(t||1)-r}const TreeUtilities={getColor:getColor,getLevelOptions:getLevelOptions,getNodeWidth:getNodeWidth,setTreeValues:setTreeValues,updateRootId:updateRootId},Series_TreeUtilities=TreeUtilities,{pick:TreegraphLink_pick,extend:TreegraphLink_extend}=external_highcharts_src_js_default_default(),{column:{prototype:{pointClass:ColumnPoint}}}=external_highcharts_src_js_default_SeriesRegistry_default()["seriesTypes"];class LinkPoint extends ColumnPoint{constructor(e,t,i,r){super(e,t,i),this.dataLabelOnNull=!0,this.formatPrefix="link",this.isLink=!0,this.node={},this.formatPrefix="link",this.dataLabelOnNull=!0,r&&(this.fromNode=r.node.parentNode.point,this.visible=r.visible,this.toNode=r,this.id=this.toNode.id+"-"+this.fromNode.id)}update(e,t,i,r){var s={id:this.id,formatPrefix:this.formatPrefix};external_highcharts_src_js_default_Point_default().prototype.update.call(this,e,!this.isLink&&t,i,r),this.visible=this.toNode.visible,TreegraphLink_extend(this,s),TreegraphLink_pick(t,!0)&&this.series.chart.redraw(i)}}const TreegraphLink=LinkPoint;class TreegraphLayout{static createDummyNode(e,t,i){const r=new Treegraph_TreegraphNode;return r.id=e.id+"-"+i,r.ancestor=e,r.children.push(t),r.parent=e.id,r.parentNode=e,r.point=t.point,r.level=t.level-i,r.relativeXPosition=t.relativeXPosition,r.visible=t.visible,e.children[t.relativeXPosition]=r,t.oldParentNode=e,t.relativeXPosition=0,t.parentNode=r,t.parent=r.id,r}calculatePositions(e){var t=this,i=e.nodeList,e=(this.resetValues(i),e.tree);e&&(t.calculateRelativeX(e,0),t.beforeLayout(i),t.firstWalk(e),t.secondWalk(e,-e.preX),t.afterLayout(i))}beforeLayout(e){for(const i of e)for(var t of i.children)if(t&&1<t.level-i.level){let e=t.level-i.level-1;for(;0<e;)t=TreegraphLayout.createDummyNode(i,t,e),e--}}resetValues(e){for(const t of e)t.mod=0,(t.ancestor=t).shift=0,t.thread=void 0,t.change=0,t.preX=0}calculateRelativeX(e,t){var i=e.children;for(let e=0,t=i.length;e<t;++e)this.calculateRelativeX(i[e],e);e.relativeXPosition=t}firstWalk(t){let i;if(t.hasChildren()){let e=t.getLeftMostChild();for(const a of t.children)this.firstWalk(a),e=this.apportion(a,e);this.executeShifts(t);var r=t.getLeftMostChild(),s=t.getRightMostChild(),r=(r.preX+s.preX)/2;(i=t.getLeftSibling())?(t.preX=i.preX+1,t.mod=t.preX-r):t.preX=r}else(i=t.getLeftSibling())?(t.preX=i.preX+1,t.mod=t.preX):t.preX=0}secondWalk(e,t){e.yPosition=e.preX+t,e.xPosition=e.level;for(const i of e.children)this.secondWalk(i,t+e.mod)}executeShifts(t){let i=0,r=0;for(let e=t.children.length-1;0<=e;e--){const s=t.children[e];s.preX+=i,s.mod+=i,r+=s.change,i+=s.shift+r}}apportion(l,h){var d=l.getLeftSibling();if(d){let e=l,t=l,i=d,r=e.getLeftMostSibling(),s=e.mod,a=t.mod,o=i.mod,n=r.mod;for(;i&&i.nextRight()&&e&&e.nextLeft();){i=i.nextRight(),r=r.nextLeft(),e=e.nextLeft(),(t=t.nextRight()).ancestor=l;var p=i.preX+o-(e.preX+s)+1;0<p&&(this.moveSubtree(l.getAncestor(i,h),l,p),s+=p,a+=p),o+=i.mod,s+=e.mod,n+=r.mod,a+=t.mod}i&&i.nextRight()&&!t.nextRight()&&(t.thread=i.nextRight(),t.mod+=o-a),e&&e.nextLeft()&&!r.nextLeft()&&(r.thread=e.nextLeft(),r.mod+=s-n),h=l}return h}moveSubtree(e,t,i){var r=t.relativeXPosition-e.relativeXPosition;t.change-=i/r,t.shift+=i,t.preX+=i,t.mod+=i,e.change+=i/r}afterLayout(e){for(const t of e)t.oldParentNode&&(t.relativeXPosition=t.parentNode.relativeXPosition,t.parent=t.oldParentNode.parent,t.parentNode=t.oldParentNode,delete t.oldParentNode.children[t.relativeXPosition],(t.oldParentNode.children[t.relativeXPosition]=t).oldParentNode=void 0)}}const Treegraph_TreegraphLayout=TreegraphLayout,TreegraphSeriesDefaults={reversed:!1,marker:{radius:10,lineWidth:0,symbol:"circle",fillOpacity:1,states:{}},link:{color:"#666666",lineWidth:1,radius:10,cursor:"default",type:"curved"},collapseButton:{onlyOnHover:!0,enabled:!0,lineWidth:1,x:0,y:0,height:18,width:18,shape:"circle",style:{cursor:"pointer",fontWeight:"bold",fontSize:"1em"}},fillSpace:!1,tooltip:{linkFormat:"{point.fromNode.id} → {point.toNode.id}",pointFormat:"{point.id}"},dataLabels:{defer:!0,linkTextPath:{attributes:{startOffset:"50%"}},enabled:!0,linkFormatter:()=>"",padding:5,style:{textOverflow:"none"}},nodeDistance:30,nodeWidth:void 0},Treegraph_TreegraphSeriesDefaults=TreegraphSeriesDefaults,external_highcharts_src_js_default_SVGElement_namespaceObject=__WEBPACK_EXTERNAL_MODULE__highcharts_src_js_8202131d__.default.SVGElement;var external_highcharts_src_js_default_SVGElement_default=__webpack_require__.n(external_highcharts_src_js_default_SVGElement_namespaceObject);const deg2rad=external_highcharts_src_js_default_default()["deg2rad"],{addEvent:TextPath_addEvent,merge:TextPath_merge,uniqueKey,defined,extend:TextPath_extend}=external_highcharts_src_js_default_default();function setTextPath(s,e){e=TextPath_merge(!0,{enabled:!0,attributes:{dy:-5,startOffset:"50%",textAnchor:"middle"}},e);const a=this.renderer.url,o=this.text||this,t=o.textPath,{attributes:n,enabled:l}=e;return s=s||t&&t.path,t&&t.undo(),s&&l?(e=TextPath_addEvent(o,"afterModifyTree",t=>{if(s&&l){let e=s.attr("id");e||s.attr("id",e=uniqueKey());const r={x:0,y:0};defined(n.dx)&&(r.dx=n.dx,delete n.dx),defined(n.dy)&&(r.dy=n.dy,delete n.dy),o.attr(r),this.attr({transform:""}),this.box&&(this.box=this.box.destroy());var i=t.nodes.slice(0);t.nodes.length=0,t.nodes[0]={tagName:"textPath",attributes:TextPath_extend(n,{"text-anchor":n.textAnchor,href:a+"#"+e}),children:i}}}),o.textPath={path:s,undo:e}):(o.attr({dx:0,dy:0}),delete o.textPath),this.added&&(o.textCache="",this.renderer.buildText(o)),this}function setPolygon(e){const t=e.bBox,s=this.element?.querySelector("textPath");if(s){const c=[],{b:_,h:i}=this.renderer.fontMetrics(this.element),g=i-_,u=new RegExp('(<tspan>|<tspan(?!\\sclass="highcharts-br")[^>]*>|<\\/tspan>)',"g"),f=s.innerHTML.replace(u,"").split(/<tspan class="highcharts-br"[^>]*>/),v=f.length;var r=(e,t)=>{var{x:t,y:i}=t,e=(s.getRotationOfChar(e)-90)*deg2rad,r=Math.cos(e),e=Math.sin(e);return[[t-g*r,i-g*e],[t+_*r,i+_*e]]};for(let t=0,i=0;i<v;i++){var a=f[i].length;for(let e=0;e<a;e+=5)try{var o=t+e+i,[n,l]=r(o,s.getStartPositionOfChar(o));0===e?(c.push(l),c.push(n)):(0===i&&c.unshift(l),i===v-1&&c.push(n))}catch(e){break}t+=a-1;try{var h=t+i,[d,p]=r(h,s.getEndPositionOfChar(h));c.unshift(p),c.unshift(d)}catch(e){break}}c.length&&c.push(c[0].slice()),t.polygon=c}return t}function drawTextPath(e){const t=e.labelOptions,i=e.point,r=t[i.formatPrefix+"TextPath"]||t.textPath;r&&!t.useHTML&&(this.setTextPath(i.getDataLabelPath?.(this)||i.graphic,r),i.dataLabelPath&&!r.enabled&&(i.dataLabelPath=i.dataLabelPath.destroy()))}function compose(e){TextPath_addEvent(e,"afterGetBBox",setPolygon),TextPath_addEvent(e,"beforeAddingDataLabel",drawTextPath);const t=e.prototype;t.setTextPath||(t.setTextPath=setTextPath)}const TextPath={compose:compose},Extensions_TextPath=TextPath,TreegraphSeries_getLinkPath=Series_PathUtilities["getLinkPath"],{series:{prototype:seriesProto},seriesTypes:{treemap:TreemapSeries,column:ColumnSeries}}=external_highcharts_src_js_default_SeriesRegistry_default(),{symbols}=external_highcharts_src_js_default_SVGRenderer_default()["prototype"],{getLevelOptions:TreegraphSeries_getLevelOptions,getNodeWidth:TreegraphSeries_getNodeWidth}=Series_TreeUtilities,{arrayMax,crisp,extend:TreegraphSeries_extend,merge:TreegraphSeries_merge,pick:TreegraphSeries_pick,relativeLength:TreegraphSeries_relativeLength,splat}=external_highcharts_src_js_default_default();Extensions_TextPath.compose(external_highcharts_src_js_default_SVGElement_default());class TreegraphSeries extends TreemapSeries{constructor(){super(...arguments),this.nodeList=[],this.links=[]}init(){super.init.apply(this,arguments),this.layoutAlgorythm=new Treegraph_TreegraphLayout;const i=this,e=this.chart.labelCollectors;e.some(e=>"collectorFunc"===e.name)||e.push(function(){const e=[];if(i.options.dataLabels&&!splat(i.options.dataLabels)[0].allowOverlap)for(const t of i.links||[])t.dataLabel&&e.push(t.dataLabel);return e})}getLayoutModifiers(){const e=this.chart,d=this,p=e.plotSizeX,c=e.plotSizeY,_=arrayMax(this.points.map(e=>e.node.xPosition));let g=1/0,u=-1/0,f=1/0,v=-1/0,x=0,m=0,b=0,y=0;this.points.forEach(t=>{if(!this.options.fillSpace||t.visible){const i=t.node,r=d.mapOptionsToLevel[t.node.level]||{},s=TreegraphSeries_merge(this.options.marker,r.marker,t.options.marker),a=s.width??TreegraphSeries_getNodeWidth(this,_),o=TreegraphSeries_relativeLength(s.radius||0,Math.min(p,c)),n=s.symbol,l="circle"!==n&&s.height?TreegraphSeries_relativeLength(s.height,c):2*o,h="circle"!==n&&a?TreegraphSeries_relativeLength(a,p):2*o;i.nodeSizeX=h,i.nodeSizeY=l;let e;i.xPosition<=g&&(g=i.xPosition,e=s.lineWidth||0,m=Math.max(h+e,m)),i.xPosition>=u&&(u=i.xPosition,e=s.lineWidth||0,x=Math.max(h+e,x)),i.yPosition<=f&&(f=i.yPosition,e=s.lineWidth||0,y=Math.max(l+e,y)),i.yPosition>=v&&(v=i.yPosition,e=s.lineWidth||0,b=Math.max(l+e,b))}});var t=v===f?1:(c-(y+b)/2)/(v-f),i=v===f?c/2:-t*f+y/2,r=u===g?1:(p-(x+x)/2)/(u-g);return{ax:r,bx:u===g?p/2:-r*g+m/2,ay:t,by:i}}getLinks(){const i=this,r=[];return this.data.forEach(e=>{var t=i.mapOptionsToLevel[e.node.level||0]||{};e.node.parent?(t=TreegraphSeries_merge(t,e.options),!e.linkToParent||e.linkToParent.destroyed?(t=new i.LinkClass(i,t,void 0,e),e.linkToParent=t):(e.collapsed=TreegraphSeries_pick(e.collapsed,(this.mapOptionsToLevel[e.node.level]||{}).collapsed),e.linkToParent.visible=e.linkToParent.toNode.visible),e.linkToParent.index=r.push(e.linkToParent)-1):e.linkToParent&&(i.links.splice(e.linkToParent.index),e.linkToParent.destroy(),delete e.linkToParent)}),r}buildTree(e,t,i,r,s){var a=this.points[t];return i=a&&a.level||i,super.buildTree.call(this,e,t,i,r,s)}markerAttribs(){return{}}setCollapsedStatus(e,t){const i=e.point;i&&(i.collapsed=TreegraphSeries_pick(i.collapsed,(this.mapOptionsToLevel[e.level]||{}).collapsed),t=!1!==(i.visible=t)&&!i.collapsed),e.children.forEach(e=>{this.setCollapsedStatus(e,t)})}drawTracker(){ColumnSeries.prototype.drawTracker.apply(this,arguments),ColumnSeries.prototype.drawTracker.call(this,this.links)}translate(){var e=this,t=e.options;let i=Series_TreeUtilities.updateRootId(e),r;seriesProto.translate.call(e);var s=e.tree=e.getTree();r=e.nodeMap[i],""===i||r&&r.children.length||(e.setRootNode("",!1),i=e.rootNode,r=e.nodeMap[i]),e.mapOptionsToLevel=TreegraphSeries_getLevelOptions({from:r.level+1,levels:t.levels,to:s.height,defaults:{levelIsConstant:e.options.levelIsConstant,colorByPoint:t.colorByPoint}}),this.setCollapsedStatus(s,!0),e.links=e.getLinks(),e.setTreeValues(s),this.layoutAlgorythm.calculatePositions(e),e.layoutModifier=this.getLayoutModifiers(),this.points.forEach(e=>{this.translateNode(e)}),this.points.forEach(e=>{e.linkToParent&&this.translateLink(e.linkToParent)}),t.colorByPoint||e.setColorRecursive(e.tree)}translateLink(i){var r=i.fromNode,s=i.toNode,a=this.options.link?.lineWidth||0,o=TreegraphSeries_pick(this.options.link?.curveFactor,.5),n=TreegraphSeries_pick(i.options.link?.type,this.options.link?.type,"default");if(r.shapeArgs&&s.shapeArgs){var l=r.shapeArgs.width||0,h=this.chart.inverted,d=crisp((r.shapeArgs.y||0)+(r.shapeArgs.height||0)/2,a),p=crisp((s.shapeArgs.y||0)+(s.shapeArgs.height||0)/2,a);let e=crisp((r.shapeArgs.x||0)+l,a),t=crisp(s.shapeArgs.x||0,a);h&&(e-=l,t+=s.shapeArgs.width||0);var r=s.node.xPosition-r.node.xPosition,c=(i.shapeType="path",Math.abs(t-e)+l),c=c/r-l,r=c*o*(h?-1:1),l=crisp((t+e)/2,a);i.plotX=l,i.plotY=p,i.shapeArgs={d:TreegraphSeries_getLinkPath[n]({x1:e,y1:d,x2:t,y2:p,width:c,offset:r,inverted:h,parentVisible:s.visible,radius:this.options.link?.radius})},i.dlBox={x:(e+t)/2,y:(d+p)/2,height:a,width:0},i.tooltipPos=h?[(this.chart.plotSizeY||0)-i.dlBox.y,(this.chart.plotSizeX||0)-i.dlBox.x]:[i.dlBox.x,i.dlBox.y]}}drawNodeLabels(e){var i=this,t=i.mapOptionsToLevel;let r,s;for(const a of e){if(s=t[a.node.level],r={style:{}},s&&s.dataLabels&&(r=TreegraphSeries_merge(r,s.dataLabels),i.hasDataLabels=()=>!0),a.shapeArgs&&i.options.dataLabels){const o={};let{width:e=0,height:t=0}=a.shapeArgs;i.chart.inverted&&([e,t]=[t,e]),splat(i.options.dataLabels)[0].style?.width||(o.width=e+"px"),splat(i.options.dataLabels)[0].style?.lineClamp||(o.lineClamp=Math.floor(t/16)),TreegraphSeries_extend(r.style,o),a.dataLabel?.css(o)}a.dlOptions=TreegraphSeries_merge(r,a.options.dataLabels)}seriesProto.drawDataLabels.call(this,e)}alignDataLabel(e,t){const i=e.visible;e.visible=!0,super.alignDataLabel.apply(this,arguments),t.animate({opacity:!1===i?0:1},void 0,function(){i||t.hide()}),e.visible=i}drawDataLabels(){this.options.dataLabels&&(this.options.dataLabels=splat(this.options.dataLabels),this.drawNodeLabels(this.points),seriesProto.drawDataLabels.call(this,this.links))}destroy(){if(this.links){for(const e of this.links)e.destroy();this.links.length=0}return seriesProto.destroy.apply(this,arguments)}pointAttribs(e,t){var i=this,r=e&&i.mapOptionsToLevel[e.node.level||0]||{},s=e&&e.options,a=r.states&&r.states[t]||{};e&&(e.options.marker=TreegraphSeries_merge(i.options.marker,r.marker,e.options.marker));const o=TreegraphSeries_pick(a&&a.link&&a.link.color,s&&s.link&&s.link.color,r&&r.link&&r.link.color,i.options.link&&i.options.link.color),n=TreegraphSeries_pick(a&&a.link&&a.link.lineWidth,s&&s.link&&s.link.lineWidth,r&&r.link&&r.link.lineWidth,i.options.link&&i.options.link.lineWidth),l=seriesProto.pointAttribs.call(i,e,t);return e&&(e.isLink&&(l.stroke=o,l["stroke-width"]=n,delete l.fill),e.visible||(l.opacity=0)),l}drawPoints(){TreemapSeries.prototype.drawPoints.apply(this,arguments),ColumnSeries.prototype.drawPoints.call(this,this.links)}translateNode(e){const t=this.chart,i=e.node,r=t.plotSizeY,s=t.plotSizeX,{ax:a,bx:o,ay:n,by:l}=this.layoutModifier,h=a*i.xPosition+o,d=n*i.yPosition+l,p=this.mapOptionsToLevel[i.level]||{},c=TreegraphSeries_merge(this.options.marker,p.marker,e.options.marker),_=c.symbol,g=i.nodeSizeY,u=i.nodeSizeX,f=this.options.reversed,v=i.x=t.inverted?s-u/2-h:h-u/2,x=i.y=f?d-g/2:r-d-g/2,m=TreegraphSeries_pick(e.options.borderRadius,p.borderRadius,this.options.borderRadius),b=symbols[_||"circle"];if(void 0===b?(e.hasImage=!0,e.shapeType="image",e.imageUrl=_.match(/^url\((.*?)\)$/)[1]):e.shapeType="path",!e.visible&&e.linkToParent){var y=e.linkToParent.fromNode;if(y){const T=y.shapeArgs||{},{x:h=0,y:d=0,width:u=0,height:g=0}=T;e.shapeArgs||(e.shapeArgs={}),e.hasImage||TreegraphSeries_extend(e.shapeArgs,{d:b(h,d,u,g,m?{r:m}:void 0)}),TreegraphSeries_extend(e.shapeArgs,{x:h,y:d}),e.plotX=y.plotX,e.plotY=y.plotY}}else e.plotX=v,e.plotY=x,e.shapeArgs={x:v,y:x,width:u,height:g,cursor:e.node.isLeaf?"default":"pointer"},e.hasImage||(e.shapeArgs.d=b(v,x,u,g,m?{r:m}:void 0));e.tooltipPos=t.inverted?[r-x-g/2,s-v-u/2]:[v+u/2,x]}}TreegraphSeries.defaultOptions=TreegraphSeries_merge(TreemapSeries.defaultOptions,Treegraph_TreegraphSeriesDefaults),TreegraphSeries_extend(TreegraphSeries.prototype,{forceDL:!0,pointClass:Treegraph_TreegraphPoint,NodeClass:Treegraph_TreegraphNode,LinkClass:TreegraphLink,isCartesian:!1}),external_highcharts_src_js_default_SeriesRegistry_default().registerSeriesType("treegraph",TreegraphSeries);const Treegraph_TreegraphSeries=null,treegraph_src=external_highcharts_src_js_default_default();export{treegraph_src as default};