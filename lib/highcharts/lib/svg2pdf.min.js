!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("jspdf")):"function"==typeof define&&define.amd?define(["exports","jspdf"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).svg2pdf={},t.jspdf)}(this,function(_,c){"use strict";var H=function(t,e){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)};function t(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}H(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var R=function(){return(R=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};function l(t,s,o,l){return new(o=o||Promise)(function(r,e){function i(t){try{a(l.next(t))}catch(t){e(t)}}function n(t){try{a(l.throw(t))}catch(t){e(t)}}function a(t){var e;t.done?r(t.value):((e=t.value)instanceof o?e:new o(function(t){t(e)})).then(i,n)}a((l=l.apply(t,s||[])).next())})}function w(i,n){var a,s,o,l={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(r){return function(t){var e=[r,t];if(a)throw new TypeError("Generator is already executing.");for(;l;)try{if(a=1,s&&(o=2&e[0]?s.return:e[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,e[1])).done)return o;switch(s=0,(e=o?[2&e[0],o.value]:e)[0]){case 0:case 1:o=e;break;case 4:return l.label++,{value:e[1],done:!1};case 5:l.label++,s=e[1],e=[0];continue;case 7:e=l.ops.pop(),l.trys.pop();continue;default:if(!((o=0<(o=l.trys).length&&o[o.length-1])||6!==e[0]&&2!==e[0])){l=0;continue}if(3===e[0]&&(!o||e[1]>o[0]&&e[1]<o[3])){l.label=e[1];break}if(6===e[0]&&l.label<o[1]){l.label=o[1],o=e;break}if(o&&l.label<o[2]){l.label=o[2],l.ops.push(e);break}o[2]&&l.ops.pop(),l.trys.pop();continue}e=n.call(i,l)}catch(t){e=[6,t],s=0}finally{a=o=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}}h.prototype.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},h.prototype.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+(this.a||"1")+")"},h.prototype.toHex=function(){var t=this.r.toString(16),e=this.g.toString(16),r=this.b.toString(16);return"#"+(t=1==t.length?"0"+t:t)+(e=1==e.length?"0"+e:e)+(r=1==r.length?"0"+r:r)},h.prototype.getHelpXML=function(){for(var t,e=[],r=0;r<this.colorDefs.length;r++)for(var i=this.colorDefs[r].example,n=0;n<i.length;n++)e[e.length]=i[n];for(t in this.simpleColors)e[e.length]=t;var a=document.createElement("ul");for(a.setAttribute("id","rgbcolor-examples"),r=0;r<e.length;r++)try{var s=document.createElement("li"),o=new h(e[r]),l=document.createElement("div"),u=(l.style.cssText="margin: 3px; border: 1px solid black; background:"+o.toHex()+"; color:"+o.toHex(),l.appendChild(document.createTextNode("test")),document.createTextNode(" "+e[r]+" -> "+o.toRGB()+" -> "+o.toHex()));s.appendChild(l),s.appendChild(u),a.appendChild(s)}catch(t){}return a};var D,j,u=h,f=(V.prototype.getFillData=function(t,e){return l(this,void 0,void 0,function(){return w(this,function(t){return[2,void 0]})})},V),d=(e.prototype.clone=function(){var t=new e;return t.xmlSpace=this.xmlSpace,t.fill=this.fill,t.fillOpacity=this.fillOpacity,t.fontFamily=this.fontFamily,t.fontSize=this.fontSize,t.fontStyle=this.fontStyle,t.fontWeight=this.fontWeight,t.opacity=this.opacity,t.stroke=this.stroke,t.strokeDasharray=this.strokeDasharray,t.strokeDashoffset=this.strokeDashoffset,t.strokeLinecap=this.strokeLinecap,t.strokeLinejoin=this.strokeLinejoin,t.strokeMiterlimit=this.strokeMiterlimit,t.strokeOpacity=this.strokeOpacity,t.strokeWidth=this.strokeWidth,t.textAnchor=this.textAnchor,t.alignmentBaseline=this.alignmentBaseline,t.visibility=this.visibility,t.color=this.color,t.fillRule=this.fillRule,t.contextFill=this.contextFill,t.contextStroke=this.contextStroke,t},e.default=function(){var t=new e;return t.xmlSpace="default",t.fill=new f(new u("rgb(0, 0, 0)")),t.fillOpacity=1,t.fontFamily="times",t.fontSize=16,t.fontStyle="normal",t.fontWeight="normal",t.opacity=1,t.stroke=null,t.strokeDasharray=null,t.strokeDashoffset=0,t.strokeLinecap="butt",t.strokeLinejoin="miter",t.strokeMiterlimit=4,t.strokeOpacity=1,t.strokeWidth=1,t.alignmentBaseline="baseline",t.textAnchor="start",t.visibility="visible",t.color=new u("rgb(0, 0, 0)"),t.fillRule="nonzero",t.contextFill=null,t.contextStroke=null,t},e.getContextColors=function(t,e){void 0===e&&(e=!1);var r={};return t.attributeState.contextFill&&(r.contextFill=t.attributeState.contextFill),t.attributeState.contextStroke&&(r.contextStroke=t.attributeState.contextStroke),e&&t.attributeState.color&&(r.color=t.attributeState.color),r},e),g=(q.prototype.clone=function(t){var e;return new q(this.pdf,{svg2pdfParameters:this.svg2pdfParameters,attributeState:((t=void 0===t?{}:t).attributeState?t:this).attributeState.clone(),viewport:null!=(e=t.viewport)?e:this.viewport,refsHandler:this.refsHandler,styleSheets:this.styleSheets,textMeasure:this.textMeasure,transform:null!=(e=t.transform)?e:this.transform,withinClipPath:null!=(e=t.withinClipPath)?e:this.withinClipPath,withinUse:null!=(e=t.withinUse)?e:this.withinUse})},q);function q(t,e){this.pdf=t,this.svg2pdfParameters=e.svg2pdfParameters,this.attributeState=e.attributeState?e.attributeState.clone():d.default(),this.viewport=e.viewport,this.refsHandler=e.refsHandler,this.styleSheets=e.styleSheets,this.textMeasure=e.textMeasure,this.transform=null!=(t=e.transform)?t:this.pdf.unitMatrix,this.withinClipPath=null!=(t=e.withinClipPath)&&t,this.withinUse=null!=(t=e.withinUse)&&t}function e(){this.xmlSpace="",this.fill=null,this.fillOpacity=1,this.fontFamily="",this.fontSize=16,this.fontStyle="",this.fontWeight="",this.opacity=1,this.stroke=null,this.strokeDasharray=null,this.strokeDashoffset=0,this.strokeLinecap="",this.strokeLinejoin="",this.strokeMiterlimit=4,this.strokeOpacity=1,this.strokeWidth=1,this.alignmentBaseline="",this.textAnchor="",this.visibility="",this.color=null,this.contextFill=null,this.contextStroke=null,this.fillRule=null}function V(t){this.color=t}function h(t){if(this.a=void 0,this.r=0,this.g=0,this.b=0,this.simpleColors={},this.colorDefs=[],this.ok=!1,t){for(var e in t=(t=(t="#"==t.charAt(0)?t.substr(1,6):t).replace(/ /g,"")).toLowerCase(),this.simpleColors={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgrey:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",grey:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightslategrey:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"},this.simpleColors)t==e&&(t=this.simpleColors[e]);this.colorDefs=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(t){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])]}},{re:/^rgb\(([0-9.]+)%,\s*([0-9.]+)%,\s*([0-9.]+)%\)$/,example:["rgb(50.5%, 25.75%, 75.5%)","rgb(100%,0%,0%)"],process:function(t){return[Math.round(2.55*parseFloat(t[1])),Math.round(2.55*parseFloat(t[2])),Math.round(2.55*parseFloat(t[3]))]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}}];for(var r=0;r<this.colorDefs.length;r++){var i=this.colorDefs[r].re,n=this.colorDefs[r].process,i=i.exec(t);i&&(n=n(i),this.r=n[0],this.g=n[1],this.b=n[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:255<this.r?255:this.r,this.g=this.g<0||isNaN(this.g)?0:255<this.g?255:this.g,this.b=this.b<0||isNaN(this.b)?0:255<this.b?255:this.b}}function W(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var G=W(function(){if(j)return D;j=1;function c(t,e){"single"!=(e=function(t,e){if(!t)return e;var r,i={};for(r in e)i[r]=(f.call(t,r)?t:e)[r];return i}(e,c.options)).quotes&&"double"!=e.quotes&&(e.quotes="single");for(var r="double"==e.quotes?'"':"'",i=e.isIdentifier,n=t.charAt(0),a="",s=0,o=t.length;s<o;){var l,u=t.charAt(s++),h=u.charCodeAt();a+=h<32||126<h?(55296<=h&&h<=56319&&s<o&&(56320==(64512&(l=t.charCodeAt(s++)))?h=((1023&h)<<10)+(1023&l)+65536:s--),"\\"+h.toString(16).toUpperCase()+" "):e.escapeEverything?p.test(u)?"\\"+u:"\\"+h.toString(16).toUpperCase()+" ":/[\t\n\f\r\x0B]/.test(u)?"\\"+h.toString(16).toUpperCase()+" ":"\\"==u||!i&&('"'==u&&r==u||"'"==u&&r==u)||i&&d.test(u)?"\\"+u:u}return i&&(/^-[-\d]/.test(a)?a="\\-"+a.slice(1):/\d/.test(n)&&(a="\\3"+n+" "+a.slice(1))),a=a.replace(g,function(t,e,r){return e&&e.length%2?t:(e||"")+r}),!i&&e.wrap?r+a+r:a}var f={}.hasOwnProperty,p=/[ -,\.\/:-@\[-\^`\{-~]/,d=/[ -,\.\/:-@\[\]\^`\{-~]/,g=/(^|\\+)?(\\[A-F0-9]{1,6})\x20(?![a-fA-F0-9\x20])/g;return c.options={escapeEverything:!1,isIdentifier:!1,quotes:"single",wrap:!1},c.version="3.0.0",D=c}()),U=(r.prototype.getRendered=function(i,n,a){return l(this,void 0,void 0,function(){var e,r;return w(this,function(t){switch(t.label){case 0:return e=this.generateKey(i,n),this.renderedElements.hasOwnProperty(e)?[2,this.renderedElements[i]]:(r=this.get(i),this.renderedElements[e]=r,[4,a(r)]);case 1:return t.sent(),[2,r]}})})},r.prototype.get=function(t){return this.idMap[G(t,{isIdentifier:!0})]},r.prototype.generateKey=function(t,e){var r="";return e&&(r=["color","contextFill","contextStroke"].map(function(t){return null!=(t=null==(t=e[t])?void 0:t.toRGBA())?t:""}).join("|")),this.idPrefix+"|"+t+"|"+r},r.instanceCounter=0,r);function r(t){this.renderedElements={},this.idMap=t,this.idPrefix=String(r.instanceCounter++)}function z(t,e){return Math.atan2(e[1]-t[1],e[0]-t[0])}function Y(t,e){return[2/3*(e[0]-t[0])+t[0],2/3*(e[1]-t[1])+t[1]]}function X(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]);return[t[0]/e,t[1]/e]}function y(t,e){return X([e[0]-t[0],e[1]-t[1]])}function Q(t,e){return[t[0]+e[0],t[1]+e[1]]}function $(t,e){var r=t[0],t=t[1];return[e.a*r+e.c*t+e.e,e.b*r+e.d*t+e.f]}i.prototype.moveTo=function(t,e){return this.segments.push(new b(t,e)),this},i.prototype.lineTo=function(t,e){return this.segments.push(new x(t,e)),this},i.prototype.curveTo=function(t,e,r,i,n,a){return this.segments.push(new v(t,e,r,i,n,a)),this},i.prototype.close=function(){return this.segments.push(new K),this},i.prototype.transform=function(i){this.segments.forEach(function(t){var e,r;(t instanceof b||t instanceof x||t instanceof v)&&(e=$([t.x,t.y],i),t.x=e[0],t.y=e[1]),t instanceof v&&(e=$([t.x1,t.y1],i),r=$([t.x2,t.y2],i),t.x1=e[0],t.y1=e[1],t.x2=r[0],t.y2=r[1])})},i.prototype.draw=function(t){var e=t.pdf;this.segments.forEach(function(t){t instanceof b?e.moveTo(t.x,t.y):t instanceof x?e.lineTo(t.x,t.y):t instanceof v?e.curveTo(t.x1,t.y1,t.x2,t.y2,t.x,t.y):e.close()})};var o=i,b=function(t,e){this.x=t,this.y=e},x=function(t,e){this.x=t,this.y=e},v=function(t,e,r,i,n,a){this.x1=t,this.y1=e,this.x2=r,this.y2=i,this.x=n,this.y=a},K=function(){};function i(){this.segments=[]}function m(t,e){return 0<=e.split(",").indexOf((t.nodeName||t.tagName).toLowerCase())}function S(t,e,r,i){void 0===i&&(i=r);var n=null==(n=t.style)?void 0:n.getPropertyValue(i);return n||e.getPropertyValue(t,i)||t.hasAttribute(r)&&t.getAttribute(r)||void 0}function n(t,e,r){if("none"===S(t.element,r.styleSheets,"display"))return!1;t=S(t.element,r.styleSheets,"visibility");return e=t?"hidden"!==t:e}function a(t,e,r){var i=n(t,e,r);return 0!==t.element.childNodes.length&&(t.children.forEach(function(t){t.isVisible(i,r)&&(i=!0)}),i)}function k(t,e,r,i){void 0===i&&(i=!1),this.id=t,this.anchor=e,this.angle=r,this.isStartMarker=i}nt.prototype.addMarker=function(t){this.markers.push(t)},nt.prototype.draw=function(o){return l(this,void 0,void 0,function(){var e,r,i,n,a,s;return w(this,function(t){switch(t.label){case 0:e=0,t.label=1;case 1:return e<this.markers.length?(r=this.markers[e],i=void 0,s=r.angle,n=r.anchor,a=Math.cos(s),s=Math.sin(s),i=o.pdf.Matrix(a,s,-s,a,n[0],n[1]),i=o.pdf.matrixMult(o.pdf.Matrix(o.attributeState.strokeWidth,0,0,o.attributeState.strokeWidth,0,0),i),i=o.pdf.matrixMult(i,o.transform),o.pdf.saveGraphicsState(),s=d.getContextColors(o),[4,o.refsHandler.getRendered(r.id,s,function(t){return t.apply(o)})]):[3,4];case 2:t.sent(),o.pdf.doFormObject(o.refsHandler.generateKey(r.id,s),i),o.pdf.restoreGraphicsState(),t.label=3;case 3:return e++,[3,1];case 4:return[2]}})})};var Z,J,tt=nt,et=/url\(["']?#([^"']+)["']?\)/,rt={bottom:"bottom","text-bottom":"bottom",top:"top","text-top":"top",hanging:"hanging",middle:"middle",central:"middle",center:"middle",mathematical:"middle",ideographic:"ideographic",alphabetic:"alphabetic",baseline:"alphabetic"},it="http://www.w3.org/2000/svg";function nt(){this.markers=[]}function M(t,e){var r;return(r=t&&t.toString().match(/^([\-0-9.]+)em$/))?parseFloat(r[1])*e:(r=t&&t.toString().match(/^([\-0-9.]+)(px|)$/))?parseFloat(r[1]):0}function at(t){return rt[t]||"alphabetic"}function C(t){for(var e,r=[],i=/[+-]?(?:(?:\d+\.?\d*)|(?:\d*\.?\d+))(?:[eE][+-]?\d+)?/g;e=i.exec(t);)r.push(parseFloat(e[0]));return r}function st(t,e){if("transparent"===t)return(r=new u("rgb(0,0,0)")).a=0,r;if(e&&"currentcolor"===t.toLowerCase())return e.color||new u("rgb(0,0,0)");if(e&&"context-stroke"===t.toLowerCase())return e.contextStroke||new u("rgb(0,0,0)");if(e&&"context-fill"===t.toLowerCase())return e.contextFill||new u("rgb(0,0,0)");var r=/\s*rgba\(((?:[^,\)]*,){3}[^,\)]*)\)\s*/.exec(t);return r?(e=C(r[1]),(r=new u("rgb("+e.slice(0,3).join(",")+")")).a=e[3],r):new u(t)}var ot=W(function(){if(J)return Z;J=1;var l=/[a-z0-9_-]/i,u=/[\s\t]/,o=/[^a-z0-9_-]/i;return Z={parse:function(t){for(var e,r,i=!0,n=0,a="",s=0,o=[];;){if(r=t[s],0===n){if(!r&&i)break;if(!r&&!i)throw new Error("Parse error");if('"'===r||"'"===r)e=r,i=!(n=1);else if(!u.test(r)){if(!l.test(r))throw new Error("Parse error");i=!(n=3),s--}}else if(1===n){if(!r)throw new Error("Parse Error");"\\"===r?n=2:r===e?(o.push(a),a="",n=4):a+=r}else if(2===n){if(r!==e&&"\\"!==r)throw new Error("Parse error");a+=r,n=1}else if(3===n){if(!r){o.push(a);break}if(l.test(r))a+=r;else if(","===r)o.push(a),a="",n=0;else{if(!u.test(r))throw new Error("Parse error");n=5}}else if(5===n){if(!r){o.push(a);break}if(l.test(r))a+=" "+r,n=3;else if(","===r)o.push(a),a="",n=0;else if(!u.test(r))throw new Error("Parse error")}else if(4===n){if(!r)break;if(","===r)n=0;else if(!u.test(r))throw new Error("Parse error")}s++}return o},stringify:function(t,e){var r=e&&e.quote||'"';if('"'!==r&&"'"!==r)throw new Error("Quote must be `'` or `\"`");for(var i=new RegExp(r,"g"),n=[],a=0;a<t.length;++a){var s=t[a];o.test(s)&&(s=r+(s=s.replace(/\\/g,"\\\\").replace(i,"\\"+r))+r),n.push(s)}return n.join(", ")}}}()),p={"sans-serif":"helvetica",verdana:"helvetica",arial:"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",serif:"times",cursive:"times",fantasy:"times"},lt=(xt=c.jsPDF.version.split("."),2===parseFloat(xt[0])&&3===parseFloat(xt[1]));function ut(t,e){return lt?400==e?"italic"==t?"italic":"normal":700==e&&"italic"!==t?"bold":t+""+e:400==e||"normal"===e?"italic"===t?"italic":"normal":700!=e&&"bold"!==e||"normal"!==t?(700==e?"bold":e)+""+t:"bold"}function ht(r,t){if("none"===S(t.element,r.styleSheets,"display"))return[0,0,0,0];var i=[];return t.children.forEach(function(t){var e=t.getBoundingBox(r);0===e[0]&&0===e[1]&&0===e[2]&&0===e[3]||(t=t.computeNodeTransform(r),e[0]=e[0]*t.sx+t.tx,e[1]=e[1]*t.sy+t.ty,e[2]=e[2]*t.sx,e[3]=e[3]*t.sy,i=0===i.length?e:[Math.min(i[0],e[0]),Math.min(i[1],e[1]),Math.max(i[0]+i[2],e[0]+e[2])-Math.min(i[0],e[0]),Math.max(i[1]+i[3],e[1]+e[3])-Math.min(i[1],e[1])])}),0===i.length?[0,0,0,0]:i}function ct(t,e){var r=parseFloat,i=r(t.getAttribute("x1"))||r(S(t,e.styleSheets,"x"))||r(S(t,e.styleSheets,"cx"))-r(S(t,e.styleSheets,"r"))||0,n=r(t.getAttribute("x2"))||i+r(S(t,e.styleSheets,"width"))||r(S(t,e.styleSheets,"cx"))+r(S(t,e.styleSheets,"r"))||0,a=r(t.getAttribute("y1"))||r(S(t,e.styleSheets,"y"))||r(S(t,e.styleSheets,"cy"))-r(S(t,e.styleSheets,"r"))||0,r=r(t.getAttribute("y2"))||a+r(S(t,e.styleSheets,"height"))||r(S(t,e.styleSheets,"cy"))+r(S(t,e.styleSheets,"r"))||0;return[Math.min(i,n),Math.min(a,r),Math.max(i,n)-Math.min(i,n),Math.max(a,r)-Math.min(a,r)]}function ft(t,e,r,i,n,a,s,o){void 0===o&&(o=!1);var l,u=e[0],h=e[1],c=e[2],e=e[3],f=n/c,p=a/e,t=t.getAttribute("preserveAspectRatio");if(t=t?(l=(t="defer"===(t=t.split(" "))[0]?t.slice(1):t)[0],t[1]||"meet"):(l="xMidYMid","meet"),"none"!==l&&("meet"===t?f=p=Math.min(f,p):"slice"===t&&(f=p=Math.max(f,p))),o)return s.pdf.Matrix(f,0,0,p,0,0);t=r-u*f,o=i-h*p,0<=l.indexOf("xMid")?t+=(n-c*f)/2:0<=l.indexOf("xMax")&&(t+=n-c*f),0<=l.indexOf("YMid")?o+=(a-e*p)/2:0<=l.indexOf("YMax")&&(o+=a-e*p),r=s.pdf.Matrix(1,0,0,1,t,o),u=s.pdf.Matrix(f,0,0,p,0,0);return s.pdf.matrixMult(u,r)}function pt(t,e){if(!t||"none"===t)return e.pdf.unitMatrix;for(var r=/^[\s,]*matrix\(([^)]+)\)\s*/,i=/^[\s,]*translate\(([^)]+)\)\s*/,n=/^[\s,]*rotate\(([^)]+)\)\s*/,a=/^[\s,]*scale\(([^)]+)\)\s*/,s=/^[\s,]*skewX\(([^)]+)\)\s*/,o=/^[\s,]*skewY\(([^)]+)\)\s*/,l=e.pdf.unitMatrix;0<t.length&&t.length!==f;){var u,h,c,f=t.length,p=r.exec(t);p&&(u=C(p[1]),l=e.pdf.matrixMult(e.pdf.Matrix(u[0],u[1],u[2],u[3],u[4],u[5]),l),t=t.substr(p[0].length)),(p=n.exec(t))&&(u=C(p[1]),h=Math.PI*u[0]/180,l=e.pdf.matrixMult(e.pdf.Matrix(Math.cos(h),Math.sin(h),-Math.sin(h),Math.cos(h),0,0),l),(u[1]||u[2])&&(h=e.pdf.Matrix(1,0,0,1,u[1],u[2]),c=e.pdf.Matrix(1,0,0,1,-u[1],-u[2]),l=e.pdf.matrixMult(c,e.pdf.matrixMult(l,h))),t=t.substr(p[0].length)),(p=i.exec(t))&&(u=C(p[1]),l=e.pdf.matrixMult(e.pdf.Matrix(1,0,0,1,u[0],u[1]||0),l),t=t.substr(p[0].length)),(p=a.exec(t))&&((u=C(p[1]))[1]||(u[1]=u[0]),l=e.pdf.matrixMult(e.pdf.Matrix(u[0],0,0,u[1],0,0),l),t=t.substr(p[0].length)),(p=s.exec(t))&&(u=parseFloat(p[1]),u*=Math.PI/180,l=e.pdf.matrixMult(e.pdf.Matrix(1,0,Math.tan(u),1,0,0),l),t=t.substr(p[0].length)),(p=o.exec(t))&&(u=parseFloat(p[1]),u*=Math.PI/180,l=e.pdf.matrixMult(e.pdf.Matrix(1,Math.tan(u),0,1,0,0),l),t=t.substr(p[0].length))}return l}Ot.prototype.setParent=function(t){this.parent=t},Ot.prototype.getParent=function(){return this.parent},Ot.prototype.getBoundingBox=function(t){return"none"===S(this.element,t.styleSheets,"display")?[0,0,0,0]:this.getBoundingBoxCore(t)},Ot.prototype.computeNodeTransform=function(t){var e=this.computeNodeTransformCore(t),r=S(this.element,t.styleSheets,"transform");return r?t.pdf.matrixMult(e,pt(r,t)):e};var dt,gt,mt,yt,bt,xt=Ot,vt=(t(Et,bt=xt),Et.prototype.render=function(t){return Promise.resolve()},Et.prototype.getBoundingBoxCore=function(t){return[]},Et.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},Et),St=(t(s,yt=vt),s.prototype.apply=function(s){return l(this,void 0,void 0,function(){var e,r,i,n,a;return w(this,function(t){return(e=this.element.getAttribute("id"))&&(a=this.getStops(s.styleSheets),r=0,i=!1,a.forEach(function(t){t=t.opacity;t&&1!==t&&(r+=t,i=!0)}),i&&(n=new c.GState({opacity:r/a.length})),a=new c.ShadingPattern(this.pdfGradientType,this.getCoordinates(),a,n),s.pdf.addShadingPattern(e,a)),[2]})})},s.prototype.getStops=function(i){var n=this;if(this.stops)return this.stops;if(void 0===this.contextColor){this.contextColor=null;for(var t=this;t;){var e=S(t.element,i,"color");if(e){this.contextColor=st(e,null);break}t=t.getParent()}}var a=[];return this.children.forEach(function(t){var e,r;"stop"===t.element.tagName.toLowerCase()&&(e=S(t.element,i,"color"),e=st(S(t.element,i,"stop-color")||"",e?{color:st(e,null)}:{color:n.contextColor}),r=parseFloat(S(t.element,i,"stop-opacity")||"1"),a.push({offset:s.parseGradientOffset(t.element.getAttribute("offset")||"0"),color:[e.r,e.g,e.b],opacity:r}))}),this.stops=a},s.prototype.getBoundingBoxCore=function(t){return ct(this.element,t)},s.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},s.prototype.isVisible=function(t,e){return a(this,t,e)},s.parseGradientOffset=function(t){var e=parseFloat(t);return!isNaN(e)&&0<=t.indexOf("%")?e/100:e},s),wt=(t(Nt,mt=St),Nt.prototype.getCoordinates=function(){return[parseFloat(this.element.getAttribute("x1")||"0"),parseFloat(this.element.getAttribute("y1")||"0"),parseFloat(this.element.getAttribute("x2")||"1"),parseFloat(this.element.getAttribute("y2")||"0")]},Nt),kt=(t(Bt,gt=St),Bt.prototype.getCoordinates=function(){var t=this.element.getAttribute("cx"),e=this.element.getAttribute("cy"),r=this.element.getAttribute("fx"),i=this.element.getAttribute("fy");return[parseFloat(r||t||"0.5"),parseFloat(i||e||"0.5"),0,parseFloat(t||"0.5"),parseFloat(e||"0.5"),parseFloat(this.element.getAttribute("r")||"0.5")]},Bt),Mt=(Pt.prototype.getFillData=function(i,n){return l(this,void 0,void 0,function(){var e,r;return w(this,function(t){switch(t.label){case 0:return[4,n.refsHandler.getRendered(this.key,null,function(t){return t.apply(new g(n.pdf,{refsHandler:n.refsHandler,textMeasure:n.textMeasure,styleSheets:n.styleSheets,viewport:n.viewport,svg2pdfParameters:n.svg2pdfParameters}))})];case 1:return t.sent(),e=this.gradient.element.hasAttribute("gradientUnits")&&"objectboundingbox"!==this.gradient.element.getAttribute("gradientUnits").toLowerCase()?n.pdf.unitMatrix:(e=i.getBoundingBox(n),n.pdf.Matrix(e[2],0,0,e[3],e[0],e[1])),r=pt(S(this.gradient.element,n.styleSheets,"gradientTransform","transform"),n),[2,{key:this.key,matrix:n.pdf.matrixMult(r,e)}]}})})},Pt),Ct=(t(Tt,dt=vt),Tt.prototype.apply=function(a){return l(this,void 0,void 0,function(){var e,r,i,n;return w(this,function(t){switch(t.label){case 0:if(!(e=this.element.getAttribute("id")))return[2];r=this.getBoundingBox(a),r=new c.TilingPattern([r[0],r[1],r[0]+r[2],r[1]+r[3]],r[2],r[3]),a.pdf.beginTilingPattern(r),i=0,n=this.children,t.label=1;case 1:return i<n.length?[4,n[i].render(new g(a.pdf,{attributeState:a.attributeState,refsHandler:a.refsHandler,styleSheets:a.styleSheets,viewport:a.viewport,svg2pdfParameters:a.svg2pdfParameters,textMeasure:a.textMeasure}))]:[3,4];case 2:t.sent(),t.label=3;case 3:return i++,[3,1];case 4:return a.pdf.endTilingPattern(e,r),[2]}})})},Tt.prototype.getBoundingBoxCore=function(t){return ct(this.element,t)},Tt.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},Tt.prototype.isVisible=function(t,e){return a(this,t,e)},Tt),Ft=(At.prototype.getFillData=function(f,p){return l(this,void 0,void 0,function(){var e,r,i,n,a,s,o,l,u,h,c;return w(this,function(t){switch(t.label){case 0:return[4,p.refsHandler.getRendered(this.key,null,function(t){return t.apply(new g(p.pdf,{refsHandler:p.refsHandler,textMeasure:p.textMeasure,styleSheets:p.styleSheets,viewport:p.viewport,svg2pdfParameters:p.svg2pdfParameters}))})];case 1:return t.sent(),e={key:this.key,boundingBox:void 0,xStep:0,yStep:0,matrix:void 0},i=p.pdf.unitMatrix,this.pattern.element.hasAttribute("patternUnits")&&"objectboundingbox"!==this.pattern.element.getAttribute("patternUnits").toLowerCase()||(r=f.getBoundingBox(p),i=p.pdf.Matrix(1,0,0,1,r[0],r[1]),a=this.pattern.getBoundingBox(p),s=a[0]*r[0]||0,o=a[1]*r[1]||0,l=a[2]*r[2]||0,u=a[3]*r[3]||0,e.boundingBox=[s,o,s+l,o+u],e.xStep=l,e.yStep=u),n=p.pdf.unitMatrix,this.pattern.element.hasAttribute("patternContentUnits")&&"objectboundingbox"===this.pattern.element.getAttribute("patternContentUnits").toLowerCase()&&(r=r||f.getBoundingBox(p),n=p.pdf.Matrix(r[2],0,0,r[3],0,0),a=e.boundingBox||this.pattern.getBoundingBox(p),s=a[0]/r[0]||0,o=a[1]/r[1]||0,l=a[2]/r[2]||0,u=a[3]/r[3]||0,e.boundingBox=[s,o,s+l,o+u],e.xStep=l,e.yStep=u),h=p.pdf.unitMatrix,(c=S(this.pattern.element,p.styleSheets,"patternTransform","transform"))&&(h=pt(c,p)),c=n,c=p.pdf.matrixMult(c,i),c=p.pdf.matrixMult(c,h),c=p.pdf.matrixMult(c,p.transform),e.matrix=c,[2,e]}})})},At);function At(t,e){this.key=t,this.pattern=e}function Tt(){return null!==dt&&dt.apply(this,arguments)||this}function Pt(t,e){this.key=t,this.gradient=e}function Bt(t,e){return gt.call(this,"radial",t,e)||this}function Nt(t,e){return mt.call(this,"axial",t,e)||this}function s(t,e,r){e=yt.call(this,e,r)||this;return e.pdfGradientType=t,e.contextColor=void 0,e}function Et(){return null!==bt&&bt.apply(this,arguments)||this}function Ot(t,e){this.element=t,this.children=e,this.parent=null}function Lt(t,e,r){var i,n,a,r=r||e.element,e=S(r,t.styleSheets,"color"),e=(e&&((e=st(e,t.attributeState)).ok?t.attributeState.color=e:t.attributeState.color=new u("rgb(0,0,0)")),S(r,t.styleSheets,"visibility")),e=(e&&(t.attributeState.visibility=e),S(r,t.styleSheets,"fill")),s=(e&&(t.attributeState.fill=function(t,e){var r,i,n,a,s,o=et.exec(t);if(o)return o=o[1],(r=e.refsHandler.get(o))&&(r instanceof wt||r instanceof kt)?(i=o,0===(s=(n=r).getStops(e.styleSheets)).length?null:1===s.length?(l=s[0].color,(a=new u).ok=!0,a.r=l[0],a.g=l[1],a.b=l[2],a.a=s[0].opacity,new f(a)):new Mt(i,n)):r&&r instanceof Ct?new Ft(o,r):new f(new u("rgb(0, 0, 0)"));var l=st(t,e.attributeState);return l.ok?new f(l):null}(e,t)),S(r,t.styleSheets,"fill-opacity")),s=(s&&(t.attributeState.fillOpacity=parseFloat(s)),S(r,t.styleSheets,"stroke-opacity")),s=(s&&(t.attributeState.strokeOpacity=parseFloat(s)),S(r,t.styleSheets,"opacity")),s=(s&&(t.attributeState.opacity=parseFloat(s)),S(r,t.styleSheets,"stroke-width")),s=(void 0!==s&&""!==s&&(t.attributeState.strokeWidth=Math.abs(parseFloat(s))),S(r,t.styleSheets,"stroke")),o=(s&&("none"===s?t.attributeState.stroke=null:(o=st(s,t.attributeState)).ok&&(t.attributeState.stroke=new f(o))),s&&t.attributeState.stroke instanceof f&&(t.attributeState.contextStroke=t.attributeState.stroke.color),e&&t.attributeState.fill instanceof f&&(t.attributeState.contextFill=t.attributeState.fill.color),S(r,t.styleSheets,"stroke-linecap")),s=(o&&(t.attributeState.strokeLinecap=o),S(r,t.styleSheets,"stroke-linejoin")),e=(s&&(t.attributeState.strokeLinejoin=s),S(r,t.styleSheets,"stroke-dasharray")),s=(e&&(o=parseInt(S(r,t.styleSheets,"stroke-dashoffset")||"0"),t.attributeState.strokeDasharray=C(e),t.attributeState.strokeDashoffset=o),S(r,t.styleSheets,"stroke-miterlimit")),e=(void 0!==s&&""!==s&&(t.attributeState.strokeMiterlimit=parseFloat(s)),r.getAttribute("xml:space")),o=(e&&(t.attributeState.xmlSpace=e),S(r,t.styleSheets,"font-weight")),s=(o&&(t.attributeState.fontWeight=o),S(r,t.styleSheets,"font-style")),e=(s&&(t.attributeState.fontStyle=s),S(r,t.styleSheets,"font-family")),o=(e&&(o=ot.parse(e),t.attributeState.fontFamily=(s=t.attributeState,e=o,i=ut(s.fontStyle,s.fontWeight),n=t.pdf.getFontList(),a="",a=e.some(function(t){var e=n[t];return e&&0<=e.indexOf(i)?(a=t,!0):(t=t.toLowerCase(),!!p.hasOwnProperty(t)&&(a=t,!0))})?a:"times")),S(r,t.styleSheets,"font-size")),e=(o&&(s=t.pdf.getFontSize(),t.attributeState.fontSize=M(o,s)),S(r,t.styleSheets,"vertical-align")||S(r,t.styleSheets,"alignment-baseline")),s=(!e||(o=e.match(/(baseline|text-bottom|alphabetic|ideographic|middle|central|mathematical|text-top|bottom|center|top|hanging)/))&&(t.attributeState.alignmentBaseline=o[0]),S(r,t.styleSheets,"text-anchor")),e=(s&&(t.attributeState.textAnchor=s),S(r,t.styleSheets,"fill-rule"));e&&(t.attributeState.fillRule=e)}function It(t,e,r){var i=1,n=1,i=(i*=t.attributeState.fillOpacity)*t.attributeState.opacity;t.attributeState.fill instanceof f&&void 0!==t.attributeState.fill.color.a&&(i*=t.attributeState.fill.color.a),n=(n*=t.attributeState.strokeOpacity)*t.attributeState.opacity,t.attributeState.stroke instanceof f&&void 0!==t.attributeState.stroke.color.a&&(n*=t.attributeState.stroke.color.a);var a,s,o,l=i<1,u=n<1;m(r,"use")?(u=l=!0,i*=t.attributeState.fill?1:0,n*=t.attributeState.stroke?1:0):t.withinUse&&(t.attributeState.fill!==e.attributeState.fill?(l=!0,i*=t.attributeState.fill?1:0):l&&!t.attributeState.fill&&(i=0),t.attributeState.stroke!==e.attributeState.stroke?(u=!0,n*=t.attributeState.stroke?1:0):u&&!t.attributeState.stroke&&(n=0)),(l||u)&&(o={},l&&(o.opacity=i),u&&(o["stroke-opacity"]=n),t.pdf.setGState(new c.GState(o))),t.attributeState.fill&&t.attributeState.fill!==e.attributeState.fill&&t.attributeState.fill instanceof f&&t.attributeState.fill.color.ok&&!m(r,"text")&&t.pdf.setFillColor(t.attributeState.fill.color.r,t.attributeState.fill.color.g,t.attributeState.fill.color.b),t.attributeState.strokeWidth!==e.attributeState.strokeWidth&&t.pdf.setLineWidth(t.attributeState.strokeWidth),t.attributeState.stroke!==e.attributeState.stroke&&t.attributeState.stroke instanceof f&&t.pdf.setDrawColor(t.attributeState.stroke.color.r,t.attributeState.stroke.color.g,t.attributeState.stroke.color.b),t.attributeState.strokeLinecap!==e.attributeState.strokeLinecap&&t.pdf.setLineCap(t.attributeState.strokeLinecap),t.attributeState.strokeLinejoin!==e.attributeState.strokeLinejoin&&t.pdf.setLineJoin(t.attributeState.strokeLinejoin),t.attributeState.strokeDasharray===e.attributeState.strokeDasharray&&t.attributeState.strokeDashoffset===e.attributeState.strokeDashoffset||!t.attributeState.strokeDasharray||t.pdf.setLineDashPattern(t.attributeState.strokeDasharray,t.attributeState.strokeDashoffset),t.attributeState.strokeMiterlimit!==e.attributeState.strokeMiterlimit&&t.pdf.setLineMiterLimit(t.attributeState.strokeMiterlimit),t.attributeState.fontFamily!==e.attributeState.fontFamily&&(a=p.hasOwnProperty(t.attributeState.fontFamily)?p[t.attributeState.fontFamily]:t.attributeState.fontFamily),t.attributeState.fill&&t.attributeState.fill!==e.attributeState.fill&&t.attributeState.fill instanceof f&&t.attributeState.fill.color.ok&&(l=t.attributeState.fill.color,t.pdf.setTextColor(l.r,l.g,l.b)),t.attributeState.fontWeight===e.attributeState.fontWeight&&t.attributeState.fontStyle===e.attributeState.fontStyle||(s=ut(t.attributeState.fontStyle,t.attributeState.fontWeight)),void 0===a&&void 0===s||(void 0===a&&(a=p.hasOwnProperty(t.attributeState.fontFamily)?p[t.attributeState.fontFamily]:t.attributeState.fontFamily),t.pdf.setFont(a,s)),t.attributeState.fontSize!==e.attributeState.fontSize&&t.pdf.setFontSize(t.attributeState.fontSize*t.pdf.internal.scaleFactor)}function _t(t,e,r){var t=et.exec(t);if(t)return t=t[1],r.refsHandler.get(t)||void 0}function Ht(i,n,a){return l(this,void 0,void 0,function(){var e,r;return w(this,function(t){switch(t.label){case 0:return e=a.clone(),n.element.hasAttribute("clipPathUnits")&&"objectboundingbox"===n.element.getAttribute("clipPathUnits").toLowerCase()&&(r=i.getBoundingBox(a),e.transform=a.pdf.matrixMult(a.pdf.Matrix(r[2],0,0,r[3],r[0],r[1]),a.transform)),[4,n.apply(e)];case 1:return t.sent(),[2]}})})}t(Wt,jt=xt),Wt.prototype.render=function(n){return l(this,void 0,void 0,function(){var e,r,i;return w(this,function(t){switch(t.label){case 0:return this.isVisible("hidden"!==n.attributeState.visibility,n)?((e=n.clone()).transform=e.pdf.matrixMult(this.computeNodeTransform(e),n.transform),Lt(e,this),i=S(this.element,e.styleSheets,"clip-path"),(r=i&&"none"!==i)?(i=_t(i,0,e))?i.isVisible(!0,e)?(e.pdf.saveGraphicsState(),[4,Ht(this,i,e)]):[3,2]:[3,4]:[3,5]):[2];case 1:return t.sent(),[3,3];case 2:return[2];case 3:return[3,5];case 4:r=!1,t.label=5;case 5:return e.withinClipPath||e.pdf.saveGraphicsState(),It(e,n,this.element),[4,this.renderCore(e)];case 6:return t.sent(),e.withinClipPath||e.pdf.restoreGraphicsState(),r&&e.pdf.restoreGraphicsState(),[2]}})})};var Rt,Dt,jt,St=Wt,qt=(t(Vt,Dt=St),Vt),F=(t(A,Rt=qt),A.prototype.renderCore=function(r){return l(this,void 0,void 0,function(){var e;return w(this,function(t){switch(t.label){case 0:return null===(e=this.getCachedPath(r))||0===e.segments.length?[2]:(r.withinClipPath?e.transform(r.transform):r.pdf.setCurrentTransformationMatrix(r.transform),e.draw(r),[4,this.fillOrStroke(r)]);case 1:return t.sent(),this.hasMarkers?[4,this.drawMarkers(r,e)]:[3,3];case 2:t.sent(),t.label=3;case 3:return[2]}})})},A.prototype.getCachedPath=function(t){return this.cachedPath||(this.cachedPath=this.getPath(t))},A.prototype.drawMarkers=function(e,r){return l(this,void 0,void 0,function(){return w(this,function(t){switch(t.label){case 0:return[4,this.getMarkers(r,e).draw(e.clone({transform:e.pdf.unitMatrix}))];case 1:return t.sent(),[2]}})})},A.prototype.fillOrStroke=function(s){return l(this,void 0,void 0,function(){var e,r,i,n,a;return w(this,function(t){switch(t.label){case 0:return s.withinClipPath?[2]:(e=s.attributeState.fill,r=s.attributeState.stroke&&0!==s.attributeState.strokeWidth,e?[4,e.getFillData(this,s)]:[3,2]);case 1:return n=t.sent(),[3,3];case 2:n=void 0,t.label=3;case 3:return i=n,a="evenodd"===s.attributeState.fillRule,e&&r||s.withinUse?a?s.pdf.fillStrokeEvenOdd(i):s.pdf.fillStroke(i):e?a?s.pdf.fillEvenOdd(i):s.pdf.fill(i):r?s.pdf.stroke():s.pdf.discardPath(),[2]}})})},A.prototype.getBoundingBoxCore=function(t){var e=this.getCachedPath(t);if(!e||!e.segments.length)return[0,0,0,0];for(var r=Number.POSITIVE_INFINITY,i=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,a=Number.NEGATIVE_INFINITY,s=0,o=0,l=0;l<e.segments.length;l++){var u=e.segments[l];(u instanceof b||u instanceof x||u instanceof v)&&(s=u.x,o=u.y),a=u instanceof v?(r=Math.min(r,s,u.x1,u.x2,u.x),n=Math.max(n,s,u.x1,u.x2,u.x),i=Math.min(i,o,u.y1,u.y2,u.y),Math.max(a,o,u.y1,u.y2,u.y)):(r=Math.min(r,s),n=Math.max(n,s),i=Math.min(i,o),Math.max(a,o))}return[r,i,n-r,a-i]},A.prototype.getMarkers=function(t,r){var o=S(this.element,r.styleSheets,"marker-start"),l=S(this.element,r.styleSheets,"marker-mid"),u=S(this.element,r.styleSheets,"marker-end"),h=new tt;if(o||l||u)for(var u=u&&Gt(u),o=o&&Gt(o),l=l&&Gt(l),c=t.segments,f=[1,0],p=void 0,d=!1,g=[1,0],m=!1,e=0;e<c.length;e++)!function(r){var t,e=c[r],i=o&&(1===r||!(c[r]instanceof b)&&c[r-1]instanceof b),n=(i&&c.forEach(function(t,e){!m&&t instanceof K&&r<e&&(t=c[e-1],m=(t instanceof b||t instanceof x||t instanceof v)&&t)}),u&&(r===c.length-1||!(c[r]instanceof b)&&c[r+1]instanceof b)),a=l&&0<r&&!(1===r&&c[r-1]instanceof b),s=c[r-1]||null;s instanceof b||s instanceof x||s instanceof v?e instanceof v?(i&&h.addMarker(new k(o,[s.x,s.y],z(m?[m.x,m.y]:[s.x,s.y],[e.x1,e.y1]),!0)),n&&h.addMarker(new k(u,[e.x,e.y],z([e.x2,e.y2],[e.x,e.y]))),a&&(p=y([s.x,s.y],[e.x1,e.y1]),p=s instanceof b?p:X(Q(f,p)),h.addMarker(new k(l,[s.x,s.y],Math.atan2(p[1],p[0])))),f=y([e.x2,e.y2],[e.x,e.y])):e instanceof b||e instanceof x?(p=y([s.x,s.y],[e.x,e.y]),i&&(t=m?y([m.x,m.y],[e.x,e.y]):p,h.addMarker(new k(o,[s.x,s.y],Math.atan2(t[1],t[0]),!0))),n&&h.addMarker(new k(u,[e.x,e.y],Math.atan2(p[1],p[0]))),a&&(t=e instanceof b?f:s instanceof b?p:X(Q(f,p)),h.addMarker(new k(l,[s.x,s.y],Math.atan2(t[1],t[0])))),f=p):e instanceof K&&(p=y([s.x,s.y],[d.x,d.y]),a&&(t=s instanceof b?p:X(Q(f,p)),h.addMarker(new k(l,[s.x,s.y],Math.atan2(t[1],t[0])))),n&&(t=X(Q(p,g)),h.addMarker(new k(u,[d.x,d.y],Math.atan2(t[1],t[0])))),f=p):(d=e instanceof b&&e,((i=c[r+1])instanceof b||i instanceof x||i instanceof v)&&(g=y([d.x,d.y],[i.x,i.y])))}(e);return h.markers.forEach(function(t){var e=r.refsHandler.get(t.id);e&&null!=(e=S(e.element,r.styleSheets,"orient"))&&(t.isStartMarker&&"auto-start-reverse"===e&&(t.angle+=Math.PI),isNaN(Number(e))||(t.angle=parseFloat(e)/180*Math.PI))}),h},A);function A(t,e,r){e=Rt.call(this,e,r)||this;return e.cachedPath=null,e.hasMarkers=t,e}function Vt(){return null!==Dt&&Dt.apply(this,arguments)||this}function Wt(){return null!==jt&&jt.apply(this,arguments)||this}function Gt(t){t=et.exec(t);return t&&t[1]||void 0}function Ut(t,e){this.width=t,this.height=e}t(le,Kt=F),le.prototype.getPath=function(t){if(t.withinClipPath||null===t.attributeState.stroke)return null;var t=parseFloat(this.element.getAttribute("x1")||"0"),e=parseFloat(this.element.getAttribute("y1")||"0"),r=parseFloat(this.element.getAttribute("x2")||"0"),i=parseFloat(this.element.getAttribute("y2")||"0");return t||r||e||i?(new o).moveTo(t,e).lineTo(r,i):null},le.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},le.prototype.isVisible=function(t,e){return n(this,t,e)},le.prototype.fillOrStroke=function(e){return l(this,void 0,void 0,function(){return w(this,function(t){switch(t.label){case 0:return e.attributeState.fill=null,[4,Kt.prototype.fillOrStroke.call(this,e)];case 1:return t.sent(),[2]}})})};var zt,Yt,Xt,Qt,$t,Kt,Zt=le,Jt=(t(oe,$t=vt),oe.prototype.apply=function(a){return l(this,void 0,void 0,function(){var e,r,i,n;return w(this,function(t){switch(t.label){case 0:return this.isVisible("hidden"!==a.attributeState.visibility,a)?((e=a.clone()).transform=e.pdf.unitMatrix,Lt(e,this),(r=S(this.element,e.styleSheets,"clip-path"))&&"none"!==r&&(r=_t(r,0,e))?r.isVisible(!0,e)?[4,Ht(this,r,e)]:[3,2]:[3,3]):[2];case 1:return t.sent(),[3,3];case 2:return[2];case 3:It(e,a,this.element),i=0,n=this.children,t.label=4;case 4:return i<n.length?[4,n[i].render(e)]:[3,7];case 5:t.sent(),t.label=6;case 6:return i++,[3,4];case 7:return[2]}})})},oe.prototype.getBoundingBoxCore=function(t){return ht(t,this)},oe.prototype.isVisible=function(t,e){return a(this,t,e)},oe.prototype.computeNodeTransformCore=function(t){var e,r,i=parseFloat(S(this.element,t.styleSheets,"x")||"0"),n=parseFloat(S(this.element,t.styleSheets,"y")||"0"),a=this.element.getAttribute("viewBox");return a?(e=C(a),r=parseFloat(S(this.element,t.styleSheets,"width")||S(this.element.ownerSVGElement,t.styleSheets,"width")||a[2]),a=parseFloat(S(this.element,t.styleSheets,"height")||S(this.element.ownerSVGElement,t.styleSheets,"height")||a[3]),ft(this.element,e,i,n,r,a,t)):t.pdf.Matrix(1,0,0,1,i,n)},oe),te=(t(T,Qt=qt),T.prototype.renderCore=function(p){return l(this,void 0,void 0,function(){var e,r,i,n,a,s,o,l,u,h,c,f;return w(this,function(t){switch(t.label){case 0:return e=parseFloat,(h=this.element.getAttribute("href")||this.element.getAttribute("xlink:href"))?(r=h.substring(1),i=p.refsHandler.get(r),n=m(i.element,"symbol,svg")&&i.element.hasAttribute("viewBox"),a=e(S(this.element,p.styleSheets,"x")||"0"),s=e(S(this.element,p.styleSheets,"y")||"0"),l=o=void 0,u=n?(o=e(S(this.element,p.styleSheets,"width")||S(i.element,p.styleSheets,"width")||"0"),l=e(S(this.element,p.styleSheets,"height")||S(i.element,p.styleSheets,"height")||"0"),a+=e(S(i.element,p.styleSheets,"x")||"0"),s+=e(S(i.element,p.styleSheets,"y")||"0"),h=C(i.element.getAttribute("viewBox")),ft(i.element,h,a,s,o,l,p)):p.pdf.Matrix(1,0,0,1,a,s),c=d.getContextColors(p,!0),f=new g(p.pdf,{refsHandler:p.refsHandler,styleSheets:p.styleSheets,withinUse:!0,viewport:n?new Ut(o,l):p.viewport,svg2pdfParameters:p.svg2pdfParameters,textMeasure:p.textMeasure,attributeState:Object.assign(d.default(),c)}),[4,p.refsHandler.getRendered(r,c,function(t){return T.renderReferencedNode(t,r,f)})]):[2];case 1:return t.sent(),p.pdf.saveGraphicsState(),p.pdf.setCurrentTransformationMatrix(p.transform),n&&"visible"!==S(i.element,p.styleSheets,"overflow")&&(p.pdf.rect(a,s,o,l),p.pdf.clip().discardPath()),p.pdf.doFormObject(p.refsHandler.generateKey(r,c),u),p.pdf.restoreGraphicsState(),[2]}})})},T.renderReferencedNode=function(r,i,n){return l(this,void 0,void 0,function(){var e;return w(this,function(t){switch(t.label){case 0:return e=[(e=r.getBoundingBox(n))[0]-.5*e[2],e[1]-.5*e[3],2*e[2],2*e[3]],n.pdf.beginFormObject(e[0],e[1],e[2],e[3],n.pdf.unitMatrix),r instanceof Jt?[4,r.apply(n)]:[3,2];case 1:return t.sent(),[3,4];case 2:return[4,r.render(n)];case 3:t.sent(),t.label=4;case 4:return n.pdf.endFormObject(n.refsHandler.generateKey(i,n.attributeState)),[2]}})})},T.prototype.getBoundingBoxCore=function(t){return ct(this.element,t)},T.prototype.isVisible=function(t,e){return n(this,t,e)},T.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},T),ee=(t(se,Xt=F),se.prototype.getPath=function(t){var e=parseFloat(S(this.element,t.styleSheets,"width")||"0"),r=parseFloat(S(this.element,t.styleSheets,"height")||"0");if(!isFinite(e)||e<=0||!isFinite(r)||r<=0)return null;var i=S(this.element,t.styleSheets,"rx"),n=S(this.element,t.styleSheets,"ry"),a=Math.min(parseFloat(i||n||"0"),.5*e),n=Math.min(parseFloat(n||i||"0"),.5*r),i=parseFloat(S(this.element,t.styleSheets,"x")||"0"),t=parseFloat(S(this.element,t.styleSheets,"y")||"0"),s=4/3*(Math.SQRT2-1);return(0===a&&0===n?(new o).moveTo(i,t).lineTo(i+e,t).lineTo(i+e,t+r).lineTo(i,t+r):(new o).moveTo(i+=a,t).lineTo(i+=e-2*a,t).curveTo(i+a*s,t,i+a,t+(n-n*s),i+=a,t+=n).lineTo(i,t+=r-2*n).curveTo(i,t+n*s,i-a*s,t+n,i-=a,t+=n).lineTo(i+=2*a-e,t).curveTo(i-a*s,t,i-a,t-n*s,i-=a,t-=n).lineTo(i,t+=2*n-r).curveTo(i,t-n*s,i+a*s,t-n,i+=a,t-=n)).close()},se.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},se.prototype.isVisible=function(t,e){return n(this,t,e)},se),re=(t(ae,Yt=F),ae.prototype.getPath=function(t){var e=this.getRx(t),r=this.getRy(t);if(!isFinite(e)||r<=0||!isFinite(r)||r<=0)return null;var i=parseFloat(S(this.element,t.styleSheets,"cx")||"0"),t=parseFloat(S(this.element,t.styleSheets,"cy")||"0"),n=4/3*(Math.SQRT2-1)*e,a=4/3*(Math.SQRT2-1)*r;return(new o).moveTo(i+e,t).curveTo(i+e,t-a,i+n,t-r,i,t-r).curveTo(i-n,t-r,i-e,t-a,i-e,t).curveTo(i-e,t+a,i-n,t+r,i,t+r).curveTo(i+n,t+r,i+e,t+a,i+e,t)},ae.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},ae.prototype.isVisible=function(t,e){return n(this,t,e)},ae),ie=(t(ne,zt=re),ne.prototype.getRx=function(t){return parseFloat(S(this.element,t.styleSheets,"rx")||"0")},ne.prototype.getRy=function(t){return parseFloat(S(this.element,t.styleSheets,"ry")||"0")},ne);function ne(t,e){return zt.call(this,t,e)||this}function ae(t,e){return Yt.call(this,!1,t,e)||this}function se(t,e){return Xt.call(this,!1,t,e)||this}function T(){return null!==Qt&&Qt.apply(this,arguments)||this}function oe(){return null!==$t&&$t.apply(this,arguments)||this}function le(t,e){return Kt.call(this,!0,t,e)||this}function ue(t){var e="invisible",r=t.stroke&&0!==t.strokeWidth,t=t.fill;return t&&r?e="fillThenStroke":t?e="fill":r&&(e="stroke"),e}function he(t){return t.replace(/[\n\r]/g,"")}function ce(t){return t.replace(/[\t]/g," ")}function fe(t){return t.replace(/ +/g," ")}function pe(t,e,r){switch(S(t,r.styleSheets,"text-transform")){case"uppercase":return e.toUpperCase();case"lowercase":return e.toLowerCase();default:return e}}B.prototype.setX=function(t){this.originX=t},B.prototype.setY=function(t){this.originY=t},B.prototype.add=function(t,e,r){this.texts.push(e),this.textNodes.push(t),this.contexts.push(r)},B.prototype.rightTrimText=function(){for(var t=this.texts.length-1;0<=t;t--)if("default"===this.contexts[t].attributeState.xmlSpace&&(this.texts[t]=this.texts[t].replace(/\s+$/,"")),this.texts[t].match(/[^\s]/))return!1;return!0},B.prototype.measureText=function(t){for(var e=0;e<this.texts.length;e++)this.textMeasures.push({width:t.textMeasure.measureTextWidth(this.texts[e],this.contexts[e].attributeState),length:this.texts[e].length})},B.prototype.put=function(t,e){for(var r=[],i=[],n=[],a=this.originX,s=this.originY,o=a,l=a,u=0;u<this.textNodes.length;u++){var h,c=this.textNodes[u],f=this.contexts[u],p=this.textMeasures[u]||{width:t.textMeasure.measureTextWidth(this.texts[u],this.contexts[u].attributeState),length:this.texts[u].length},d=a,g=s;"#text"===c.nodeName||r.includes(c)||(r.push(c),null!==(h=B.resolveRelativePositionAttribute(c,"dx"))&&(d+=M(h,f.attributeState.fontSize)),null!==(h=B.resolveRelativePositionAttribute(c,"dy"))&&(g+=M(h,f.attributeState.fontSize))),i[u]=d,n[u]=g,a=d+p.width+p.length*e,s=g,o=Math.min(o,d),l=Math.max(l,a)}var m,y,b=0;switch(this.textAnchor){case"start":b=0;break;case"middle":b=(l-o)/2;break;case"end":b=l-o}for(u=0;u<this.textNodes.length;u++)c=this.textNodes[u],f=this.contexts[u],"#text"!==c.nodeName&&"hidden"===f.attributeState.visibility||(t.pdf.saveGraphicsState(),It(f,t,c),m=f.attributeState.alignmentBaseline,y=ue(f.attributeState),t.pdf.text(this.texts[u],i[u]-b,n[u],{baseline:at(m),angle:t.transform,renderingMode:"fill"===y?void 0:y,charSpace:0===e?void 0:e}),t.pdf.restoreGraphicsState());return[a,s]},B.resolveRelativePositionAttribute=function(t,e){for(var r,i=t;i&&m(i,"tspan");){if(i.hasAttribute(e))return i.getAttribute(e);if((null==(r=t.parentElement)?void 0:r.firstChild)!==t)break;i=i.parentElement}return null};var de,ge,me,ye,be,xe,ve,Se,we,ke,Me,Ce,Fe,Ae=B,Te=(t(P,Fe=qt),P.prototype.processTSpans=function(t,e,r,i,n,a){for(var s=r.pdf.getFontSize(),o=r.attributeState.xmlSpace,l=!0,u=!1,h=0;h<e.childNodes.length;h++){var c,f,p=e.childNodes[h];p.textContent&&(f=p.textContent,"#text"===p.nodeName?(c=ce(c=he(f)),"default"===o&&(c=fe(c),l&&c.match(/^\s/)&&(u=!0),c.match(/[^\s]/)&&(l=!1),a.prevText.match(/\s$/)&&(c=c.replace(/^\s+/,""))),c=pe(e,c,r),n.add(e,c,r),a.prevText=f,a.prevContext=r):m(p,"title")||m(p,"tspan")&&(null!==(f=(c=p).getAttribute("x"))&&(p=M(f,s),n=new Ae(this,S(c,r.styleSheets,"text-anchor")||r.attributeState.textAnchor,p,0),i.push({type:"y",chunk:n})),null!==(f=c.getAttribute("y"))&&(p=M(f,s),n=new Ae(this,S(c,r.styleSheets,"text-anchor")||r.attributeState.textAnchor,0,p),i.push({type:"x",chunk:n})),Lt(f=r.clone(),t,c),this.processTSpans(t,c,f,i,n,a)))}return u},P.prototype.renderCore=function(S){return l(this,void 0,void 0,function(){var i,n,a,s,o,l,u,h,c,f,p,d,g,m,y,b,x,v;return w(this,function(t){if(S.pdf.saveGraphicsState(),n=0,a=1,s=S.pdf.getFontSize(),o=M(this.element.getAttribute("x"),s),l=M(this.element.getAttribute("y"),s),u=M(this.element.getAttribute("dx"),s),h=M(this.element.getAttribute("dy"),s),c=parseFloat(this.element.getAttribute("textLength")||"0"),g=S.attributeState.visibility,0===this.element.childElementCount)m=this.element.textContent||"",e=m,r=S.attributeState,e=ce(e=he(e)),f=e="default"===r.xmlSpace?fe(e=e.trim()):e,f=pe(this.element,f,S),i=S.textMeasure.getTextOffset(f,S.attributeState),0<c&&(p=S.textMeasure.measureTextWidth(f,S.attributeState),"default"===S.attributeState.xmlSpace&&m.match(/^\s/)&&(a=0),n=(c-p)/(f.length-a)||0),"visible"===g&&(m=S.attributeState.alignmentBaseline,p=ue(S.attributeState),S.pdf.text(f,o+u-i,l+h,{baseline:at(m),angle:S.transform,renderingMode:"fill"===p?void 0:p,charSpace:0===n?void 0:n}),this.boundingBox=[o+u-i,l+h+.1*s,S.textMeasure.measureTextWidth(f,S.attributeState),s]);else{for(d=[],g=new Ae(this,S.attributeState.textAnchor,o+u,l+h),d.push({type:"",chunk:g}),m=this.processTSpans(this,this.element,S,d,g,{prevText:" ",prevContext:S}),a=m?0:1,y=!0,b=d.length-1;0<=b;b--)y=y&&d[b].chunk.rightTrimText();0<c&&(v=x=0,d.forEach(function(t){t=t.chunk;t.measureText(S),t.textMeasures.forEach(function(t){var e=t.width,t=t.length;x+=e,v+=t})}),n=(c-x)/(v-a)),d.reduce(function(t,e){var r=e.type,e=e.chunk;return"x"===r?e.setX(t[0]):"y"===r&&e.setY(t[1]),e.put(S,n)},[0,0])}var e,r;return S.pdf.restoreGraphicsState(),[2]})})},P.prototype.isVisible=function(t,e){return a(this,t,e)},P.prototype.getBoundingBoxCore=function(t){return 0<this.boundingBox.length?this.boundingBox:ct(this.element,t)},P.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},P);function P(){var t=null!==Fe&&Fe.apply(this,arguments)||this;return t.boundingBox=[],t}function B(t,e,r,i){this.textNode=t,this.texts=[],this.textNodes=[],this.contexts=[],this.textAnchor=e,this.originX=r,this.originY=i,this.textMeasures=[]}function Pe(){return ye?me:(ye=1,t.prototype.matrix=function(t){return 1===t[0]&&0===t[1]&&0===t[2]&&1===t[3]&&0===t[4]&&0===t[5]||(this.cache=null,this.queue.push(t)),this},t.prototype.translate=function(t,e){return 0===t&&0===e||(this.cache=null,this.queue.push([1,0,0,1,t,e])),this},t.prototype.scale=function(t,e){return 1===t&&1===e||(this.cache=null,this.queue.push([t,0,0,e,0,0])),this},t.prototype.rotate=function(t,e,r){var i;return 0!==t&&(this.translate(e,r),t=t*Math.PI/180,i=Math.cos(t),t=Math.sin(t),this.queue.push([i,t,-t,i,0,0]),this.cache=null,this.translate(-e,-r)),this},t.prototype.skewX=function(t){return 0!==t&&(this.cache=null,this.queue.push([1,0,Math.tan(t*Math.PI/180),1,0,0])),this},t.prototype.skewY=function(t){return 0!==t&&(this.cache=null,this.queue.push([1,Math.tan(t*Math.PI/180),0,1,0,0])),this},t.prototype.toArray=function(){if(this.cache)return this.cache;if(!this.queue.length)return this.cache=[1,0,0,1,0,0],this.cache;if(this.cache=this.queue[0],1===this.queue.length)return this.cache;for(var t,e,r=1;r<this.queue.length;r++)this.cache=(t=this.cache,e=this.queue[r],[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]);return this.cache},t.prototype.calc=function(t,e,r){var i;return this.queue.length?(this.cache||(this.cache=this.toArray()),[t*(i=this.cache)[0]+e*i[2]+(r?0:i[4]),t*i[1]+e*i[3]+(r?0:i[5])]):[t,e]},me=t);function t(){if(!(this instanceof t))return new t;this.queue=[],this.cache=null}}function Be(){if(Se)return ve;Se=1;var O=2*Math.PI;function L(t,e,r,i){var n=t*r+e*i;return(n=1<n?1:n)<-1&&(n=-1),(t*i-e*r<0?-1:1)*Math.acos(n)}return ve=function(t,e,r,i,n,a,s,o,l){var u=Math.sin(l*O/360),h=Math.cos(l*O/360),l=h*(t-r)/2+u*(e-i)/2,c=-u*(t-r)/2+h*(e-i)/2;if(0==l&&0==c)return[];if(0===s||0===o)return[];s=Math.abs(s),o=Math.abs(o);var f,p,d,g,m,y,b,x,v,l=l*l/(s*s)+c*c/(o*o),S=(1<l&&(s*=Math.sqrt(l),o*=Math.sqrt(l)),c=n,l=a,(v=(a=(n=s)*n)*(y=(f=o)*f)-a*(x=(m=-(p=u)*((t=t)-(r=r))/2+(d=h)*((e=e)-(i=i))/2)*m)-y*(b=(g=d*(t-r)/2+p*(e-i)/2)*g))<0&&(v=0),v/=a*x+y*b,a=(v=Math.sqrt(v)*(c===l?-1:1))*n/f*m,y=d*a-p*(x=v*-f/n*g)+(t+r)/2,b=p*a+d*x+(e+i)/2,t=(-g-a)/n,r=(-m-x)/f,p=L(1,0,c=(g-a)/n,v=(m-x)/f),d=L(c,v,t,r),0===l&&0<d&&(d-=O),1===l&&d<0&&(d+=O),[y,b,p,d]),w=[],k=S[2],M=S[3],C=Math.max(Math.ceil(Math.abs(M)/(O/4)),1);M/=C;for(var F,A,T,P,B,N,E=0;E<C;E++)w.push((F=k,A=M,N=B=P=T=void 0,T=4/3*Math.tan(A/4),P=Math.cos(F),B=Math.sin(F),N=Math.cos(F+A),F=Math.sin(F+A),[P,B,P-B*T,B+P*T,N+F*T,F-N*T,N,F])),k+=M;return w.map(function(t){for(var e=0;e<t.length;e+=2){var r=t[e+0],i=t[e+1],n=h*(r*=s)-u*(i*=o),r=u*r+h*i;t[e+0]=n+S[0],t[e+1]=r+S[1]}return t})}}var Ne,Ee,Oe,Le,Ie,_e,He,Re,De,je,qe,Ve,We,Ge=W(function(){if(Ce)return Me;Ce=1;var e=function(){if(ge)return de;var h={a:7,c:6,h:ge=1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},r=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];function c(t){return 48<=t&&t<=57}function i(t){this.index=0,this.path=t,this.max=t.length,this.result=[],this.param=0,this.err="",this.segmentStart=0,this.data=[]}function f(t){for(;t.index<t.max&&(10===(e=t.path.charCodeAt(t.index))||13===e||8232===e||8233===e||32===e||9===e||11===e||12===e||160===e||5760<=e&&0<=r.indexOf(e));)t.index++;var e}function p(t){var e,r=(e=t.path[t.segmentStart]).toLowerCase(),i=t.data;if("m"===r&&2<i.length&&(t.result.push([e,i[0],i[1]]),i=i.slice(2),r="l",e="m"===e?"l":"L"),"r"===r)t.result.push([e].concat(i));else for(;i.length>=h[r]&&(t.result.push([e].concat(i.splice(0,h[r]))),h[r]););}function n(t){var e,r,i,n,a,s,o,l,u=t.max;if(t.segmentStart=t.index,r=97==(32|(e=t.path.charCodeAt(t.index))),function(){switch(32|e){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:case 114:return 1}}())if(n=h[t.path[t.index].toLowerCase()],t.index++,f(t),t.data=[],n){for(i=!1;;){for(a=n;0<a;a--){if(!r||3!==a&&4!==a?function(t){var e,r,i=t.index,n=i,a=t.max,s=!1,o=!1,l=!1;if(a<=n)t.err="SvgPath: missed param (at pos "+n+")";else if(c(e=43!==(e=t.path.charCodeAt(n))&&45!==e?e:++n<a?t.path.charCodeAt(n):0)||46===e){if(46!==e){if(r=48===e,e=++n<a?t.path.charCodeAt(n):0,r&&n<a&&e&&c(e))return t.err="SvgPath: numbers started with `0` such as `09` are illegal (at pos "+i+")";for(;n<a&&c(t.path.charCodeAt(n));)n++,s=!0;e=n<a?t.path.charCodeAt(n):0}if(46===e){for(l=!0,n++;c(t.path.charCodeAt(n));)n++,o=!0;e=n<a?t.path.charCodeAt(n):0}if(101===e||69===e){if(l&&!s&&!o)return t.err="SvgPath: invalid float exponent (at pos "+n+")";if(43!==(e=++n<a?t.path.charCodeAt(n):0)&&45!==e||n++,!(n<a&&c(t.path.charCodeAt(n))))return t.err="SvgPath: invalid float exponent (at pos "+n+")";for(;n<a&&c(t.path.charCodeAt(n));)n++}t.index=n,t.param=parseFloat(t.path.slice(i,n))+0}else t.err="SvgPath: param should start with 0..9 or `.` (at pos "+n+")"}(t):(l=void 0,48===(l=(o=t).path.charCodeAt(o.index))?(o.param=0,o.index++):49===l?(o.param=1,o.index++):o.err="SvgPath: arc flag can be 0 or 1 only (at pos "+o.index+")"),t.err.length)return;t.data.push(t.param),f(t),i=!1,t.index<u&&44===t.path.charCodeAt(t.index)&&(t.index++,f(t),i=!0)}if(!i){if(t.index>=t.max)break;if(!(48<=(s=t.path.charCodeAt(t.index))&&s<=57||43===s||45===s||46===s))break}}p(t)}else p(t);else t.err="SvgPath: bad command "+t.path[t.index]+" (at pos "+t.index+")"}return de=function(t){var e=new i(t),r=e.max;for(f(e);e.index<r&&!e.err.length;)n(e);return e.err.length?e.result=[]:e.result.length&&("mM".indexOf(e.result[0][0])<0?(e.err="SvgPath: string should start with `M` or `m`",e.result=[]):e.result[0][0]="M"),{err:e.err,segments:e.result}}}(),r=function(){if(xe)return be;xe=1;var n=Pe(),a={matrix:!0,scale:!0,rotate:!0,translate:!0,skewX:!0,skewY:!0},s=/\s*(matrix|translate|scale|rotate|skewX|skewY)\s*\(\s*(.+?)\s*\)[\s,]*/,o=/[\s,]+/;return be=function(t){var e,r,i=new n;return t.split(s).forEach(function(t){if(t.length)if(void 0===a[t])switch(r=t.split(o).map(function(t){return+t||0}),e){case"matrix":return void(6===r.length&&i.matrix(r));case"scale":return void(1===r.length?i.scale(r[0],r[0]):2===r.length&&i.scale(r[0],r[1]));case"rotate":return void(1===r.length?i.rotate(r[0],0,0):3===r.length&&i.rotate(r[0],r[1],r[2]));case"translate":return void(1===r.length?i.translate(r[0],0):2===r.length&&i.translate(r[0],r[1]));case"skewX":return void(1===r.length&&i.skewX(r[0]));case"skewY":return void(1===r.length&&i.skewY(r[0]))}else e=t}),i}}(),i=Pe(),o=Be(),f=function(){if(ke)return we;ke=1;var s=1e-10,o=Math.PI/180;function i(t,e,r){if(!(this instanceof i))return new i(t,e,r);this.rx=t,this.ry=e,this.ax=r}return i.prototype.transform=function(t){var e=Math.cos(this.ax*o),r=Math.sin(this.ax*o),r=[this.rx*(t[0]*e+t[2]*r),this.rx*(t[1]*e+t[3]*r),this.ry*(-t[0]*r+t[2]*e),this.ry*(-t[1]*r+t[3]*e)],t=r[0]*r[0]+r[2]*r[2],e=r[1]*r[1]+r[3]*r[3],i=((r[0]-r[3])*(r[0]-r[3])+(r[2]+r[1])*(r[2]+r[1]))*((r[0]+r[3])*(r[0]+r[3])+(r[2]-r[1])*(r[2]-r[1])),n=(t+e)/2;if(i<s*n)return this.rx=this.ry=Math.sqrt(n),this.ax=0,this;var r=r[0]*r[1]+r[2]*r[3],a=n+(i=Math.sqrt(i))/2,n=n-i/2;return this.ax=Math.abs(r)<s&&Math.abs(a-e)<s?90:180*Math.atan(Math.abs(r)>Math.abs(a-e)?(a-t)/r:r/(a-e))/Math.PI,0<=this.ax?(this.rx=Math.sqrt(a),this.ry=Math.sqrt(n)):(this.ax+=90,this.rx=Math.sqrt(n),this.ry=Math.sqrt(a)),this},i.prototype.isDegenerate=function(){return this.rx<s*this.ry||this.ry<s*this.rx},we=i}();function n(t){if(!(this instanceof n))return new n(t);t=e(t);this.segments=t.segments,this.err=t.err,this.__stack=[]}return n.from=function(t){if("string"==typeof t)return new n(t);var e;if(t instanceof n)return(e=new n("")).err=t.err,e.segments=t.segments.map(function(t){return t.slice()}),e.__stack=t.__stack.map(function(t){return i().matrix(t.toArray())}),e;throw new Error("SvgPath.from: invalid param type "+t)},n.prototype.__matrix=function(u){var h,c=this;u.queue.length&&this.iterate(function(t,e,r,i){var n,a,s;switch(t[0]){case"v":a=0===(n=u.calc(0,t[1],!0))[0]?["v",n[1]]:["l",n[0],n[1]];break;case"V":a=(n=u.calc(r,t[1],!1))[0]===u.calc(r,i,!1)[0]?["V",n[1]]:["L",n[0],n[1]];break;case"h":a=0===(n=u.calc(t[1],0,!0))[1]?["h",n[0]]:["l",n[0],n[1]];break;case"H":a=(n=u.calc(t[1],i,!1))[1]===u.calc(r,i,!1)[1]?["H",n[0]]:["L",n[0],n[1]];break;case"a":case"A":var o=u.toArray(),l=f(t[1],t[2],t[3]).transform(o);if(o[0]*o[3]-o[1]*o[2]<0&&(t[5]=t[5]?"0":"1"),n=u.calc(t[6],t[7],"a"===t[0]),"A"===t[0]&&t[6]===r&&t[7]===i||"a"===t[0]&&0===t[6]&&0===t[7]){a=["a"===t[0]?"l":"L",n[0],n[1]];break}a=l.isDegenerate()?["a"===t[0]?"l":"L",n[0],n[1]]:[t[0],l.rx,l.ry,l.ax,t[4],t[5],n[0],n[1]];break;case"m":a=["m",(n=u.calc(t[1],t[2],s=0<e))[0],n[1]];break;default:for(a=[o=t[0]],s=o.toLowerCase()===o,h=1;h<t.length;h+=2)n=u.calc(t[h],t[h+1],s),a.push(n[0],n[1])}c.segments[e]=a},!0)},n.prototype.__evaluateStack=function(){var t,e;if(this.__stack.length){if(1===this.__stack.length)return this.__matrix(this.__stack[0]),void(this.__stack=[]);for(t=i(),e=this.__stack.length;0<=--e;)t.matrix(this.__stack[e].toArray());this.__matrix(t),this.__stack=[]}},n.prototype.toString=function(){var t="",e="",r=!1;this.__evaluateStack();for(var i=0,n=this.segments.length;i<n;i++){for(var a=this.segments[i],s=a[0],r=s===e&&"m"!==s&&"M"!==s||("m"===s&&"z"===e&&(t+=" "),t+=s,!1),o=1;o<a.length;o++){var l=a[o];1===o?r&&0<=l&&(t+=" "):0<=l&&(t+=" "),t+=l}e=s}return t},n.prototype.translate=function(t,e){return this.__stack.push(i().translate(t,e||0)),this},n.prototype.scale=function(t,e){return this.__stack.push(i().scale(t,e||0===e?e:t)),this},n.prototype.rotate=function(t,e,r){return this.__stack.push(i().rotate(t,e||0,r||0)),this},n.prototype.skewX=function(t){return this.__stack.push(i().skewX(t)),this},n.prototype.skewY=function(t){return this.__stack.push(i().skewY(t)),this},n.prototype.matrix=function(t){return this.__stack.push(i().matrix(t)),this},n.prototype.transform=function(t){return t.trim()&&this.__stack.push(r(t)),this},n.prototype.round=function(i){var e,n=0,a=0,s=0,o=0;return i=i||0,this.__evaluateStack(),this.segments.forEach(function(r){var t=r[0].toLowerCase()===r[0];switch(r[0]){case"H":case"h":return t&&(r[1]+=s),s=r[1]-r[1].toFixed(i),void(r[1]=+r[1].toFixed(i));case"V":case"v":return t&&(r[1]+=o),o=r[1]-r[1].toFixed(i),void(r[1]=+r[1].toFixed(i));case"Z":case"z":return s=n,void(o=a);case"M":case"m":return t&&(r[1]+=s,r[2]+=o),s=r[1]-r[1].toFixed(i),o=r[2]-r[2].toFixed(i),n=s,a=o,r[1]=+r[1].toFixed(i),void(r[2]=+r[2].toFixed(i));case"A":case"a":return t&&(r[6]+=s,r[7]+=o),s=r[6]-r[6].toFixed(i),o=r[7]-r[7].toFixed(i),r[1]=+r[1].toFixed(i),r[2]=+r[2].toFixed(i),r[3]=+r[3].toFixed(i+2),r[6]=+r[6].toFixed(i),void(r[7]=+r[7].toFixed(i));default:return e=r.length,t&&(r[e-2]+=s,r[e-1]+=o),s=r[e-2]-r[e-2].toFixed(i),o=r[e-1]-r[e-1].toFixed(i),void r.forEach(function(t,e){e&&(r[e]=+r[e].toFixed(i))})}}),this},n.prototype.iterate=function(n,t){var e,r,i,a=this.segments,s={},o=!1,l=0,u=0,h=0,c=0;if(t||this.__evaluateStack(),a.forEach(function(t,e){var r=n(t,e,l,u),i=(Array.isArray(r)&&(s[e]=r,o=!0),t[0]===t[0].toLowerCase());switch(t[0]){case"m":case"M":return l=t[1]+(i?l:0),u=t[2]+(i?u:0),h=l,void(c=u);case"h":case"H":return void(l=t[1]+(i?l:0));case"v":case"V":return void(u=t[1]+(i?u:0));case"z":case"Z":return l=h,void(u=c);default:l=t[t.length-2]+(i?l:0),u=t[t.length-1]+(i?u:0)}}),!o)return this;for(i=[],e=0;e<a.length;e++)if(void 0!==s[e])for(r=0;r<s[e].length;r++)i.push(s[e][r]);else i.push(a[e]);return this.segments=i,this},n.prototype.abs=function(){return this.iterate(function(t,e,r,i){var n,a=t[0],s=a.toUpperCase();if(a!==s)switch(t[0]=s,a){case"v":return void(t[1]+=i);case"a":return t[6]+=r,void(t[7]+=i);default:for(n=1;n<t.length;n++)t[n]+=n%2?r:i}},!0),this},n.prototype.rel=function(){return this.iterate(function(t,e,r,i){var n,a=t[0],s=a.toLowerCase();if(a!==s&&(0!==e||"M"!==a))switch(t[0]=s,a){case"V":return void(t[1]-=i);case"A":return t[6]-=r,void(t[7]-=i);default:for(n=1;n<t.length;n++)t[n]-=n%2?r:i}},!0),this},n.prototype.unarc=function(){return this.iterate(function(t,e,r,i){var n,a=[],s=t[0];return"A"!==s&&"a"!==s?null:(s="a"===s?(n=r+t[6],i+t[7]):(n=t[6],t[7]),0===(r=o(r,i,n,s,t[4],t[5],t[1],t[2],t[3])).length?[["a"===t[0]?"l":"L",t[6],t[7]]]:(r.forEach(function(t){a.push(["C",t[2],t[3],t[4],t[5],t[6],t[7]])}),a))}),this},n.prototype.unshort=function(){var o,l,u,h,c,f=this.segments;return this.iterate(function(t,e,r,i){var n,a=t[0],s=a.toUpperCase();e&&("T"===s?(l="Q"===(u=f[e-1])[0]?(o=u[1]-r,u[2]-i):"q"===u[0]?(o=u[1]-u[3],u[2]-u[4]):o=0,h=-o,c=-l,(n="t"===a)||(h+=r,c+=i),f[e]=[n?"q":"Q",h,c,t[1],t[2]]):"S"===s&&(l="C"===(u=f[e-1])[0]?(o=u[3]-r,u[4]-i):"c"===u[0]?(o=u[3]-u[5],u[4]-u[6]):o=0,h=-o,c=-l,(n="s"===a)||(h+=r,c+=i),f[e]=[n?"c":"C",h,c,t[1],t[2],t[3],t[4]]))}),this},Me=n}()),Ue=(t(fr,We=F),fr.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},fr.prototype.isVisible=function(t,e){return n(this,t,e)},fr.prototype.getPath=function(t){var i,n,t=new Ge(S(this.element,t.styleSheets,"d")||"").unshort().unarc().abs(),a=new o;return t.iterate(function(t){switch(t[0]){case"M":a.moveTo(t[1],t[2]);break;case"L":a.lineTo(t[1],t[2]);break;case"H":a.lineTo(t[1],n);break;case"V":a.lineTo(i,t[1]);break;case"C":a.curveTo(t[1],t[2],t[3],t[4],t[5],t[6]);break;case"Q":var e=Y([i,n],[t[1],t[2]]),r=Y([t[3],t[4]],[t[1],t[2]]);a.curveTo(e[0],e[1],r[0],r[1],t[3],t[4]);break;case"Z":a.close()}switch(t[0]){case"M":case"L":i=t[1],n=t[2];break;case"H":i=t[1];break;case"V":n=t[1];break;case"C":i=t[5],n=t[6];break;case"Q":i=t[3],n=t[4]}}),a},fr),ze=/^\s*data:(([^/,;]+\/[^/,;]+)(?:;([^,;=]+=[^,;=]+))?)?(?:;(base64))?,((?:.|\s)*)$/i,Ye=(t(O,Ve=qt),O.prototype.renderCore=function(f){return l(this,void 0,void 0,function(){var e,r,i,n,a,s,o,l,u,h,c;return w(this,function(t){switch(t.label){case 0:return this.imageLoadingPromise?(f.pdf.setCurrentTransformationMatrix(f.transform),e=parseFloat(S(this.element,f.styleSheets,"width")||"0"),r=parseFloat(S(this.element,f.styleSheets,"height")||"0"),i=parseFloat(S(this.element,f.styleSheets,"x")||"0"),n=parseFloat(S(this.element,f.styleSheets,"y")||"0"),!isFinite(e)||e<=0||!isFinite(r)||r<=0?[2]:[4,this.imageLoadingPromise]):[2];case 1:return s=t.sent(),a=s.data,0!==(s=s.format).indexOf("svg")?[3,3]:(l=new DOMParser,l=l.parseFromString(a,"image/svg+xml").firstElementChild,(u=this.element.getAttribute("preserveAspectRatio"))&&!(u.indexOf("defer")<0)&&l.getAttribute("preserveAspectRatio")||l.setAttribute("preserveAspectRatio",u||""),l.setAttribute("x",String(i)),l.setAttribute("y",String(n)),l.setAttribute("width",String(e)),l.setAttribute("height",String(r)),[4,pr(l,u={}).render(new g(f.pdf,{refsHandler:new U(u),styleSheets:f.styleSheets,viewport:new Ut(e,r),svg2pdfParameters:f.svg2pdfParameters,textMeasure:f.textMeasure}))]);case 2:return t.sent(),[2];case 3:o="data:image/".concat(s,";base64,").concat(btoa(a)),t.label=4;case 4:return t.trys.push([4,6,,7]),[4,O.getImageDimensions(o)];case 5:return l=t.sent(),u=l[0],h=l[1],c=[0,0,u,h],c=ft(this.element,c,i,n,e,r,f),f.pdf.setCurrentTransformationMatrix(c),f.pdf.addImage(o,"",0,0,u,h),[3,7];case 6:return c=t.sent(),"object"==typeof console&&console.warn&&console.warn("Could not load image ".concat(this.imageUrl,". \n").concat(c)),[3,7];case 7:return[2]}})})},O.prototype.getBoundingBoxCore=function(t){return ct(this.element,t)},O.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},O.prototype.isVisible=function(t,e){return n(this,t,e)},O.fetchImageData=function(n){return l(this,void 0,void 0,function(){var e,r,i;return w(this,function(t){switch(t.label){case 0:if(!(r=n.match(ze)))return[3,1];if(i=r[2],"image"!==(i=i.split("/"))[0])throw new Error("Unsupported image URL: ".concat(n));return i=i[1],e=r[5],e="base64"===r[4]?(e=e.replace(/\s/g,""),atob(e)):decodeURIComponent(e),[3,3];case 1:return[4,O.fetchImage(n)];case 2:e=t.sent(),i=n.substring(n.lastIndexOf(".")+1),t.label=3;case 3:return[2,{data:e,format:i}]}})})},O.fetchImage=function(a){return new Promise(function(i,t){var n=new XMLHttpRequest;n.open("GET",a,!0),n.responseType="arraybuffer",n.onload=function(){if(200!==n.status)throw new Error("Error ".concat(n.status,": Failed to load image '").concat(a,"'"));for(var t=new Uint8Array(n.response),e="",r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);i(e)},n.onerror=t,n.onabort=t,n.send(null)})},O.getMimeType=function(t){switch(t=t.toLowerCase()){case"jpg":case"jpeg":return"image/jpeg";default:return"image/".concat(t)}},O.getImageDimensions=function(i){return new Promise(function(t,e){var r=new Image;r.onload=function(){t([r.width,r.height])},r.onerror=e,r.src=i})},O),qt=(t(E,qe=F),E.prototype.getPath=function(t){if(!this.element.hasAttribute("points")||""===this.element.getAttribute("points"))return null;var e=E.parsePointsString(this.element.getAttribute("points")),r=new o;if(e.length<1)return r;r.moveTo(e[0][0],e[0][1]);for(var i=1;i<e.length;i++)r.lineTo(e[i][0],e[i][1]);return this.closed&&r.close(),r},E.prototype.isVisible=function(t,e){return n(this,t,e)},E.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},E.parsePointsString=function(t){for(var e=C(t),r=[],i=0;i<e.length-1;i+=2){var n=e[i],a=e[i+1];r.push([n,a])}return r},E),Xe=(t(cr,je=qt),cr),Qe=(t(hr,De=xt),hr.prototype.render=function(t){return Promise.resolve()},hr.prototype.getBoundingBoxCore=function(t){return[0,0,0,0]},hr.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},hr.prototype.isVisible=function(t,e){return n(this,t,e)},hr),$e=(t(ur,Re=vt),ur.prototype.apply=function(h){return l(this,void 0,void 0,function(){var s,o,l,u;return w(this,function(t){switch(t.label){case 0:o=this.computeNodeTransform(h),s=this.getBoundingBox(h),h.pdf.beginFormObject(s[0],s[1],s[2],s[3],o),s=d.getContextColors(h),e=o=new g(h.pdf,{refsHandler:h.refsHandler,styleSheets:h.styleSheets,viewport:h.viewport,svg2pdfParameters:h.svg2pdfParameters,textMeasure:h.textMeasure,attributeState:Object.assign(d.default(),s)}),r=e.attributeState,e=e.pdf,n=i=1,i=(i*=r.fillOpacity)*r.opacity,r.fill instanceof f&&void 0!==r.fill.color.a&&(i*=r.fill.color.a),n=(n*=r.strokeOpacity)*r.opacity,r.stroke instanceof f&&void 0!==r.stroke.color.a&&(n*=r.stroke.color.a),(a={}).opacity=i,a["stroke-opacity"]=n,e.setGState(new c.GState(a)),r.fill&&r.fill instanceof f&&r.fill.color.ok?e.setFillColor(r.fill.color.r,r.fill.color.g,r.fill.color.b):e.setFillColor(0,0,0),e.setLineWidth(r.strokeWidth),r.stroke instanceof f?e.setDrawColor(r.stroke.color.r,r.stroke.color.g,r.stroke.color.b):e.setDrawColor(0,0,0),e.setLineCap(r.strokeLinecap),e.setLineJoin(r.strokeLinejoin),r.strokeDasharray?e.setLineDashPattern(r.strokeDasharray,r.strokeDashoffset):e.setLineDashPattern([],0),e.setLineMiterLimit(r.strokeMiterlimit),i=p.hasOwnProperty(r.fontFamily)?p[r.fontFamily]:r.fontFamily,r.fill&&r.fill instanceof f&&r.fill.color.ok?(n=r.fill.color,e.setTextColor(n.r,n.g,n.b)):e.setTextColor(0,0,0),a="","bold"===r.fontWeight&&(a="bold"),"italic"===r.fontStyle&&(a+="italic"),""===a&&(a="normal"),void 0!==i||void 0!==a?(void 0===i&&(i=p.hasOwnProperty(r.fontFamily)?p[r.fontFamily]:r.fontFamily),e.setFont(i,a)):e.setFont("helvetica",a),e.setFontSize(r.fontSize*e.internal.scaleFactor),l=0,u=this.children,t.label=1;case 1:return l<u.length?[4,u[l].render(o)]:[3,4];case 2:t.sent(),t.label=3;case 3:return l++,[3,1];case 4:return h.pdf.endFormObject(o.refsHandler.generateKey(this.element.getAttribute("id"),s)),[2]}var e,r,i,n,a})})},ur.prototype.getBoundingBoxCore=function(t){var e,r=this.element.getAttribute("viewBox");return[(e=r?C(r):e)&&e[0]||0,e&&e[1]||0,e&&e[2]||parseFloat(this.element.getAttribute("markerWidth")||"3"),e&&e[3]||parseFloat(this.element.getAttribute("markerHeight")||"3")]},ur.prototype.computeNodeTransformCore=function(t){var e,r=parseFloat(this.element.getAttribute("refX")||"0"),i=parseFloat(this.element.getAttribute("refY")||"0"),n=this.element.getAttribute("viewBox");return e=n?(n=C(n),e=ft(this.element,n,0,0,parseFloat(this.element.getAttribute("markerWidth")||"3"),parseFloat(this.element.getAttribute("markerHeight")||"3"),t,!0),t.pdf.matrixMult(t.pdf.Matrix(1,0,0,1,-r,-i),e)):t.pdf.Matrix(1,0,0,1,-r,-i)},ur.prototype.isVisible=function(t,e){return a(this,t,e)},ur),Ke=(t(lr,He=re),lr.prototype.getR=function(t){var e;return null!=(e=this.r)?e:this.r=parseFloat(S(this.element,t.styleSheets,"r")||"0")},lr.prototype.getRx=function(t){return this.getR(t)},lr.prototype.getRy=function(t){return this.getR(t)},lr),Ze=(t(or,_e=qt),or),F=(t(sr,Ie=St),sr.prototype.renderCore=function(i){return l(this,void 0,void 0,function(){var e,r;return w(this,function(t){switch(t.label){case 0:e=0,r=this.children,t.label=1;case 1:return e<r.length?[4,r[e].render(i)]:[3,4];case 2:t.sent(),t.label=3;case 3:return e++,[3,1];case 4:return[2]}})})},sr.prototype.getBoundingBoxCore=function(t){return ht(t,this)},sr),Je=(t(N,Le=F),N.prototype.isVisible=function(t,e){return a(this,t,e)},N.prototype.render=function(s){return l(this,void 0,void 0,function(){var e,r,i,n,a;return w(this,function(t){switch(t.label){case 0:return this.isVisible("hidden"!==s.attributeState.visibility,s)?(e=this.getX(s),r=this.getY(s),i=this.getWidth(s),n=this.getHeight(s),s.pdf.saveGraphicsState(),a=s.transform,this.element.hasAttribute("transform")&&(a=s.pdf.matrixMult(pt(this.element.getAttribute("transform"),s),a)),s.pdf.setCurrentTransformationMatrix(a),s.withinUse||"visible"===S(this.element,s.styleSheets,"overflow")||s.pdf.rect(e,r,i,n).clip().discardPath(),[4,Le.prototype.render.call(this,s.clone({transform:s.pdf.unitMatrix,viewport:s.withinUse?s.viewport:new Ut(i,n)}))]):[2];case 1:return t.sent(),s.pdf.restoreGraphicsState(),[2]}})})},N.prototype.computeNodeTransform=function(t){return this.computeNodeTransformCore(t)},N.prototype.computeNodeTransformCore=function(t){if(t.withinUse)return t.pdf.unitMatrix;var e,r,i=this.getX(t),n=this.getY(t),a=this.getViewBox();return a?(e=this.getWidth(t),r=this.getHeight(t),ft(this.element,a,i,n,e,r,t)):t.pdf.Matrix(1,0,0,1,i,n)},N.prototype.getWidth=function(t){if(void 0!==this.width)return this.width;var e,r,i=t.svg2pdfParameters;return r=this.isOutermostSvg(t)?null!=i.width?i.width:(e=S(this.element,t.styleSheets,"width"))?parseFloat(e):(r=this.getViewBox())&&(null!=i.height||S(this.element,t.styleSheets,"height"))?(i=r[2]/r[3],this.getHeight(t)*i):Math.min(300,t.viewport.width,2*t.viewport.height):(e=S(this.element,t.styleSheets,"width"))?parseFloat(e):t.viewport.width,this.width=r},N.prototype.getHeight=function(t){if(void 0!==this.height)return this.height;var e,r=t.svg2pdfParameters;return r=this.isOutermostSvg(t)?null!=r.height?r.height:(e=S(this.element,t.styleSheets,"height"))?parseFloat(e):(r=this.getViewBox())?(r=r[2]/r[3],this.getWidth(t)/r):Math.min(150,t.viewport.width/2,t.viewport.height):(e=S(this.element,t.styleSheets,"height"))?parseFloat(e):t.viewport.height,this.height=r},N.prototype.getX=function(t){if(void 0!==this.x)return this.x;if(this.isOutermostSvg(t))return this.x=0;t=S(this.element,t.styleSheets,"x");return this.x=t?parseFloat(t):0},N.prototype.getY=function(t){if(void 0!==this.y)return this.y;if(this.isOutermostSvg(t))return this.y=0;t=S(this.element,t.styleSheets,"y");return this.y=t?parseFloat(t):0},N.prototype.getViewBox=function(){if(void 0!==this.viewBox)return this.viewBox;var t=this.element.getAttribute("viewBox");return this.viewBox=t?C(t):void 0},N.prototype.isOutermostSvg=function(t){return t.svg2pdfParameters.element===this.element},N),tr=(t(ar,Oe=F),ar.prototype.isVisible=function(t,e){return a(this,t,e)},ar.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},ar),er=(t(nr,Ee=tr),nr.prototype.renderCore=function(a){return l(this,void 0,void 0,function(){var e,r,i,n;return w(this,function(t){switch(t.label){case 0:return[4,Ee.prototype.renderCore.call(this,a)];case 1:return t.sent(),(e=S(this.element,a.styleSheets,"href"))&&(r=this.getBoundingBox(a),i=a.pdf.internal.scaleFactor,n=a.pdf.internal.pageSize.getHeight(),a.pdf.link(i*(r[0]*a.transform.sx+a.transform.tx),n-i*(r[1]*a.transform.sy+a.transform.ty),i*r[2],i*r[3],{url:e})),[2]}})})},nr),rr=(t(ir,Ne=vt),ir.prototype.apply=function(a){return l(this,void 0,void 0,function(){var e,r,i,n;return w(this,function(t){switch(t.label){case 0:if(!this.isVisible(!0,a))return[2];e=a.pdf.matrixMult(this.computeNodeTransform(a),a.transform),a.pdf.setCurrentTransformationMatrix(e),r=0,i=this.children,t.label=1;case 1:return r<i.length?[4,i[r].render(new g(a.pdf,{refsHandler:a.refsHandler,styleSheets:a.styleSheets,viewport:a.viewport,withinClipPath:!0,svg2pdfParameters:a.svg2pdfParameters,textMeasure:a.textMeasure}))]:[3,4];case 2:t.sent(),t.label=3;case 3:return r++,[3,1];case 4:return n=0<this.children.length&&!!S(this.children[0].element,a.styleSheets,"clip-rule"),n=n?this.getClipRuleAttr(this.children[0].element,a.styleSheets):this.getClipRuleAttr(this.element,a.styleSheets),a.pdf.clip(n).discardPath(),a.pdf.setCurrentTransformationMatrix(e.inversed()),[2]}})})},ir.prototype.getBoundingBoxCore=function(t){return ht(t,this)},ir.prototype.isVisible=function(t,e){return a(this,t,e)},ir.prototype.getClipRuleAttr=function(t,e){return"evenodd"===S(t,e,"clip-rule")?"evenodd":void 0},ir);function ir(){return null!==Ne&&Ne.apply(this,arguments)||this}function nr(){return null!==Ee&&Ee.apply(this,arguments)||this}function ar(){return null!==Oe&&Oe.apply(this,arguments)||this}function N(){return null!==Le&&Le.apply(this,arguments)||this}function sr(){return null!==Ie&&Ie.apply(this,arguments)||this}function or(t,e){return _e.call(this,!1,t,e)||this}function lr(t,e){return He.call(this,t,e)||this}function ur(){return null!==Re&&Re.apply(this,arguments)||this}function hr(){return null!==De&&De.apply(this,arguments)||this}function cr(t,e){return je.call(this,!0,t,e)||this}function E(t,e,r){e=qe.call(this,!0,e,r)||this;return e.closed=t,e}function O(t,e){t=Ve.call(this,t,e)||this;return t.imageLoadingPromise=null,t.imageUrl=t.element.getAttribute("xlink:href")||t.element.getAttribute("href"),t.imageUrl&&(t.imageLoadingPromise=O.fetchImageData(t.imageUrl)),t}function fr(t,e){return We.call(this,!0,t,e)||this}function pr(t,a){var e,r,s=[];switch(function(t){for(var e,r=[],i=0;i<t.childNodes.length;i++){var n=t.childNodes[i];"#"!==n.nodeName.charAt(0)&&r.push(n)}for(i=0;i<r.length;i++)e=r[i],s.push(pr(e,a))}(t),t.tagName.toLowerCase()){case"a":e=new er(t,s);break;case"g":e=new tr(t,s);break;case"circle":e=new Ke(t,s);break;case"clippath":e=new rr(t,s);break;case"ellipse":e=new ie(t,s);break;case"lineargradient":e=new wt(t,s);break;case"image":e=new Ye(t,s);break;case"line":e=new Zt(t,s);break;case"marker":e=new $e(t,s);break;case"path":e=new Ue(t,s);break;case"pattern":e=new Ct(t,s);break;case"polygon":e=new Xe(t,s);break;case"polyline":e=new Ze(t,s);break;case"radialgradient":e=new kt(t,s);break;case"rect":e=new ee(t,s);break;case"svg":e=new Je(t,s);break;case"symbol":e=new Jt(t,s);break;case"text":e=new Te(t,s);break;case"use":e=new te(t,s);break;default:e=new Qe(t,s)}return null!=a&&e.element.hasAttribute("id")&&(r=G(e.element.id,{isIdentifier:!0}),a[r]=a[r]||e),e.children.forEach(function(t){return t.setParent(e)}),e}function dr(l){var u=l,h={a:0,b:0,c:0},c=[],t=function(t,e){var r,i,n,a,s,o;if(t.test(u))for(i=0,n=(r=u.match(t)).length;i<n;i+=1)h[e]+=1,a=r[i],s=u.indexOf(a),o=a.length,c.push({selector:l.substr(s,o),type:e,index:s,length:o}),u=u.replace(a,Array(o+1).join(" "))};(a=function(t){var e,r,i,n;if(t.test(u))for(r=0,i=(e=u.match(t)).length;r<i;r+=1)n=e[r],u=u.replace(n,Array(n.length+1).join("A"))})(/\\[0-9A-Fa-f]{6}\s?/g),a(/\\[0-9A-Fa-f]{1,5}\s/g),a(/\\./g);var e,r,i,n,a=/{[^]*/gm;if(a.test(u))for(r=0,i=(e=u.match(a)).length;r<i;r+=1)n=e[r],u=u.replace(n,Array(n.length+1).join(" "));return t(/(\[[^\]]+\])/g,"b"),t(/(#[^\#\s\+>~\.\[:\)]+)/g,"a"),t(/(\.[^\s\+>~\.\[:\)]+)/g,"b"),t(/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/gi,"c"),t(/(:(?!not|global|local)[\w-]+\([^\)]*\))/gi,"b"),t(/(:(?!not|global|local)[^\s\+>~\.\[:]+)/g,"b"),u=(u=(u=(u=(u=(u=u.replace(/[\*\s\+>~]/g," ")).replace(/[#\.]/g," ")).replace(/:not/g,"    ")).replace(/:local/g,"      ")).replace(/:global/g,"       ")).replace(/[\(\)]/g," "),t(/([^\s\+>~\.\[:]+)/g,"c"),c.sort(function(t,e){return t.index-e.index}),{selector:l,specificity:"0,"+h.a.toString()+","+h.b.toString()+","+h.c.toString(),specificityArray:[0,h.a,h.b,h.c],parts:c}}I.prototype.load=function(){return l(this,void 0,void 0,function(){var e;return w(this,function(t){switch(t.label){case 0:return[4,this.collectStyleSheetTexts()];case 1:return e=t.sent(),this.parseCssSheets(e),[2]}})})},I.prototype.collectStyleSheetTexts=function(){return l(this,void 0,void 0,function(){var e,r,i,n,a;return w(this,function(t){switch(t.label){case 0:if(e=[],this.loadExternalSheets&&this.rootSvg.ownerDocument)for(n=0;n<this.rootSvg.ownerDocument.childNodes.length;n++)"xml-stylesheet"===(r=this.rootSvg.ownerDocument.childNodes[n]).nodeName&&"string"==typeof r.data&&e.push(I.loadSheet(r.data.match(/href=["'].*?["']/)[0].split("=")[1].slice(1,-1)));for(i=this.rootSvg.querySelectorAll("style,link"),n=0;n<i.length;n++)m(a=i[n],"style")?e.push(a.textContent):this.loadExternalSheets&&m(a,"link")&&"stylesheet"===a.getAttribute("rel")&&a.hasAttribute("href")&&e.push(I.loadSheet(a.getAttribute("href")));return[4,Promise.all(e)];case 1:return[2,t.sent().filter(function(t){return null!==t})]}})})},I.prototype.parseCssSheets=function(t){for(var e=document.implementation.createHTMLDocument(""),r=0,i=t;r<i.length;r++){var n=i[r],a=e.createElement("style"),s=(a.textContent=n,e.body.appendChild(a),a.sheet);if(s instanceof CSSStyleSheet){for(var o=s.cssRules.length-1;0<=o;o--){var l=s.cssRules[o];if(l instanceof CSSStyleRule){if(0<=l.selectorText.indexOf(",")){s.deleteRule(o);for(var u=l.cssText.substring(l.selectorText.length),h=I.splitSelectorAtCommas(l.selectorText),c=0;c<h.length;c++)s.insertRule(h[c]+u,o+c)}}else s.deleteRule(o)}this.styleSheets.push(s)}}},I.splitSelectorAtCommas=function(t){for(var e,r=/,|["']/g,i=/[^\\]["]/g,n=/[^\\][']/g,a=[],s="initial",o=-1,l=i,u=0;u<t.length;)switch(s){case"initial":r.lastIndex=u,u=(e=r.exec(t))?(","===e[0]?(a.push(t.substring(o+1,r.lastIndex-1).trim()),o=r.lastIndex-1):(s="withinQuotes",l='"'===e[0]?i:n),r.lastIndex):(a.push(t.substring(o+1).trim()),t.length);break;case"withinQuotes":l.lastIndex=u,(e=l.exec(t))&&(u=l.lastIndex,s="initial")}return a},I.loadSheet=function(i){return new Promise(function(t,e){var r=new XMLHttpRequest;r.open("GET",i,!0),r.responseType="text",r.onload=function(){200!==r.status&&e(new Error("Error ".concat(r.status,": Failed to load '").concat(i,"'"))),t(r.responseText)},r.onerror=e,r.onabort=e,r.send(null)}).catch(function(){return null})},I.prototype.getPropertyValue=function(t,s){for(var e=[],r=0,i=this.styleSheets;r<i.length;r++)for(var n=i[r],a=0;a<n.cssRules.length;a++){var o=n.cssRules[a];o.style.getPropertyValue(s)&&t.matches(o.selectorText)&&e.push(o)}if(0!==e.length)return e.reduce(function(t,e){return 1===function(t,e){var r,i,n,a=t.style.getPropertyPriority(s);if(a!==e.style.getPropertyPriority(s))return"important"===a?1:-1;a=t.selectorText,t=e.selectorText;if("string"==typeof a){if(-1!==a.indexOf(","))throw"Invalid CSS selector";r=dr(a).specificityArray}else{if(!Array.isArray(a))throw"Invalid CSS selector or specificity array";if(4!==a.filter(function(t){return"number"==typeof t}).length)throw"Invalid specificity array";r=a}if("string"==typeof t){if(-1!==t.indexOf(","))throw"Invalid CSS selector";i=dr(t).specificityArray}else{if(!Array.isArray(t))throw"Invalid CSS selector or specificity array";if(4!==t.filter(function(t){return"number"==typeof t}).length)throw"Invalid specificity array";i=t}for(n=0;n<4;n+=1){if(r[n]<i[n])return-1;if(r[n]>i[n])return 1}return 0}(t,e)?t:e}).style.getPropertyValue(s)||void 0};var gr=I,mr=(L.prototype.getTextOffset=function(t,e){var r=e.textAnchor;if("start"===r)return 0;var i=this.measureTextWidth(t,e),n=0;switch(r){case"end":n=i;break;case"middle":n=i/2}return n},L.prototype.measureTextWidth=function(t,e){if(0===t.length)return 0;var r=e.fontFamily;return this.getMeasureFunction(r).call(this,t,e.fontFamily,e.fontSize+"px",e.fontStyle,e.fontWeight)},L.prototype.getMeasurementTextNode=function(){var t;return this.textMeasuringTextElement||(this.textMeasuringTextElement=document.createElementNS(it,"text"),(t=document.createElementNS(it,"svg")).appendChild(this.textMeasuringTextElement),t.style.setProperty("position","absolute"),t.style.setProperty("visibility","hidden"),document.body.appendChild(t)),this.textMeasuringTextElement},L.prototype.canvasTextMeasure=function(t,e,r,i,n){var a=document.createElement("canvas").getContext("2d");return null!=a?(a.font=[i,n,r,e].join(" "),a.measureText(t).width):0},L.prototype.svgTextMeasure=function(t,e,r,i,n,a){a=void 0===a?this.getMeasurementTextNode():a;return a.setAttribute("font-family",e),a.setAttribute("font-size",r),a.setAttribute("font-style",i),a.setAttribute("font-weight",n),a.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),a.textContent=t,a.getBBox().width},L.prototype.getMeasureFunction=function(t){var e,r,i=this.measureMethods[t];return i||(e=this.canvasTextMeasure(L.testString,t,"16px","normal","normal"),r=this.svgTextMeasure(L.testString,t,"16px","normal","normal"),i=Math.abs(e-r)<L.epsilon?this.canvasTextMeasure:this.svgTextMeasure,this.measureMethods[t]=i),i},L.prototype.cleanupTextMeasuring=function(){var t;this.textMeasuringTextElement&&((t=this.textMeasuringTextElement.parentNode)&&document.body.removeChild(t),this.textMeasuringTextElement=void 0)},L.testString="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789!\"$%&/()=?'\\+*-_.:,;^}][{#~|<>",L.epsilon=.1,L);function L(){this.measureMethods={}}function I(t,e){this.rootSvg=t,this.loadExternalSheets=e,this.styleSheets=[]}function yr(t,e){return l(this,arguments,void 0,function(e,r,i){var n,a,s,o,l,u,h,c;return void 0===i&&(i={}),w(this,function(t){switch(t.label){case 0:return u=null!=(u=i.x)?u:0,h=null!=(h=i.y)?h:0,c=null!=(c=i.loadExternalStyleSheets)&&c,a=new U(n={}),[4,(c=new gr(e,c)).load()];case 1:return t.sent(),o=new Ut(r.internal.pageSize.getWidth(),r.internal.pageSize.getHeight()),l=R(R({},i),{element:e}),s=new mr,o=new g(r,{refsHandler:a,styleSheets:c,viewport:o,svg2pdfParameters:l,textMeasure:s}),r.advancedAPI(),r.saveGraphicsState(),r.setCurrentTransformationMatrix(r.Matrix(1,0,0,1,u,h)),r.setLineWidth(o.attributeState.strokeWidth),l=o.attributeState.fill.color,r.setFillColor(l.r,l.g,l.b),r.setFont(o.attributeState.fontFamily),r.setFontSize(o.attributeState.fontSize*r.internal.scaleFactor),[4,pr(e,n).render(o)];case 2:return t.sent(),r.restoreGraphicsState(),r.compatAPI(),o.textMeasure.cleanupTextMeasuring(),[2,r]}})})}c.jsPDF.API.svg=function(t,e){return yr(t,this,e=void 0===e?{}:e)},_.svg2pdf=yr});