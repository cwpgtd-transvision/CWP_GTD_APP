"use strict";import H from"../Globals.js";const composed=H["composed"];import U from"../Utilities.js";const{addEvent,defined,pick,pushUnique}=U;var ScrollbarAxis;!function(i){let o;function c(i){var t=pick(i.options?.min,i.min),o=pick(i.options?.max,i.max);return{axisMin:t,axisMax:o,scrollMin:defined(i.dataMin)?Math.min(t,i.min,i.dataMin,pick(i.threshold,1/0)):t,scrollMax:defined(i.dataMax)?Math.max(o,i.max,i.dataMax,pick(i.threshold,-1/0)):o}}function e(){var i=this,t=i.scrollbar,o=t&&!t.options.opposite,o=i.horiz?2:o?3:1;t&&(i.chart.scrollbarsOffsets=[0,0],i.chart.axisOffset[o]+=t.size+(t.options.margin||0))}function s(){const n=this;n.options?.scrollbar?.enabled&&(n.options.scrollbar.vertical=!n.horiz,n.options.startOnTick=n.options.endOnTick=!1,n.scrollbar=new o(n.chart.renderer,n.options.scrollbar,n.chart),addEvent(n.scrollbar,"changed",function(i){var{axisMin:t,axisMax:o,scrollMin:e,scrollMax:s}=c(n),s=s-e;let a,r;defined(t)&&defined(o)&&(r=n.horiz&&!n.reversed||!n.horiz&&n.reversed?(a=e+s*this.to,e+s*this.from):(a=e+s*(1-this.from),e+s*(1-this.to)),this.shouldUpdateExtremes(i.DOMType)?(t="mousemove"!==i.DOMType&&"touchmove"!==i.DOMType&&void 0,n.setExtremes(r,a,!0,t,i)):this.setRange(this.from,this.to))}))}function a(){const t=this,{scrollMin:i,scrollMax:o}=c(t),e=t.scrollbar,s=t.axisTitleMargin+(t.titleOffset||0),a=t.chart.scrollbarsOffsets,r=t.options.margin||0;let n,l,p;if(e&&a){if(t.horiz)t.opposite||(a[1]+=s),e.position(t.left,t.top+t.height+2+a[1]-(t.opposite?r:0),t.width,t.height),t.opposite||(a[1]+=r),n=1;else{t.opposite&&(a[0]+=s);let i;i=e.options.opposite?t.left+t.width+2+a[0]-(t.opposite?0:r):t.opposite?0:r,e.position(i,t.top,t.width,t.height),t.opposite&&(a[0]+=r),n=0}var d;a[n]+=e.size+(e.options.margin||0),isNaN(i)||isNaN(o)||!defined(t.min)||!defined(t.max)||t.dataMin===t.dataMax?e.setRange(0,1):t.min===t.max?(d=t.pointRange/(t.dataMax+1),l=d*t.min,p=d*(t.max+1),e.setRange(l,p)):(l=(t.min-i)/(o-i),p=(t.max-i)/(o-i),t.horiz&&!t.reversed||!t.horiz&&t.reversed?e.setRange(l,p):e.setRange(1-p,1-l))}}i.compose=function(i,t){pushUnique(composed,"Axis.Scrollbar")&&(o=t,addEvent(i,"afterGetOffset",e),addEvent(i,"afterInit",s),addEvent(i,"afterRender",a))}}(ScrollbarAxis=ScrollbarAxis||{});export default ScrollbarAxis;