"use strict";import H from"../Core/Globals.js";const composed=H["composed"];import U from"../Core/Utilities.js";const{addEvent,merge,pushUnique}=U;function compose(s){pushUnique(composed,"PriceIndication")&&addEvent(s,"afterRender",onSeriesAfterRender)}function onSeriesAfterRender(){var s=this,e=s.options,r=e.lastVisiblePrice,o=e.lastPrice;if((r||o)&&"highcharts-navigator-series"!==e.id){const i=s.xAxis,c=s.yAxis,t=c.crosshair,l=c.cross,a=c.crossLabel,n=s.points,d=n.length,b=s.dataTable.rowCount,h=s.getColumn("x")[b-1],P=s.getColumn("y")[b-1]??s.getColumn("close")[b-1];o&&o.enabled&&(c.crosshair=c.options.crosshair=e.lastPrice,!s.chart.styledMode&&c.crosshair&&c.options.crosshair&&e.lastPrice&&(c.crosshair.color=c.options.crosshair.color=e.lastPrice.color||s.color),c.cross=s.lastPrice,o=P,s.lastPriceLabel&&s.lastPriceLabel.destroy(),delete c.crossLabel,c.drawCrosshair(null,{x:h,y:o,plotX:i.toPixels(h,!0),plotY:c.toPixels(o,!0)}),s.yAxis.cross&&(s.lastPrice=s.yAxis.cross,s.lastPrice.addClass("highcharts-color-"+s.colorIndex),s.lastPrice.y=o),s.lastPriceLabel=c.crossLabel),r&&r.enabled&&0<d&&(c.crosshair=c.options.crosshair=merge({color:"transparent"},e.lastVisiblePrice),c.cross=s.lastVisiblePrice,o=n[d-1].isInside?n[d-1]:n[d-2],s.lastVisiblePriceLabel&&s.lastVisiblePriceLabel.destroy(),delete c.crossLabel,c.drawCrosshair(null,o),c.cross&&(s.lastVisiblePrice=c.cross,o&&"number"==typeof o.y&&(s.lastVisiblePrice.y=o.y)),s.lastVisiblePriceLabel=c.crossLabel),c.crosshair=c.options.crosshair=t,c.cross=l,c.crossLabel=a}}const PriceIndication={compose:compose};export default PriceIndication;