"use strict";import H from"../../../Core/Globals.js";const{doc,isFirefox}=H;import U from"../../../Core/Utilities.js";const{createElement,isArray,isObject,objectEach,pick,stableSort}=U;function addForm(a,e,o,s){if(a){var i=this.container,n=this.lang;let t=createElement("h2",{className:"highcharts-popup-main-title"},void 0,i);t.appendChild(doc.createTextNode(n[e.langKey]||e.langKey||"")),t=createElement("div",{className:"highcharts-popup-lhs-col highcharts-popup-lhs-full"},void 0,i);var c=createElement("div",{className:"highcharts-popup-bottom-row"},void 0,i);addFormFields.call(this,t,a,"",e,[],!0),this.addButton(c,s?n.addButton||"Add":n.saveButton||"Save",s?"add":"save",i,o)}}function addToolbar(t,a,e){const o=this.lang,s=this.container,i=this.showForm,n="highcharts-annotation-toolbar",c=(-1===s.className.indexOf(n)&&(s.className+=" "+n+" highcharts-no-mousewheel"),t&&(s.style.top=t.plotTop+10+"px"),createElement("p",{className:"highcharts-annotation-label"},void 0,s));c.setAttribute("aria-label","Annotation type"),c.appendChild(doc.createTextNode(pick(o[a.langKey]||a.langKey,a.shapes&&a.shapes[0].type,"")));let r=this.addButton(s,o.editButton||"Edit","edit",s,()=>{i.call(this,"annotation-edit",t,a,e)});r.className+=" highcharts-annotation-edit-button",createElement("span",{className:"highcharts-icon"},{backgroundImage:`url(${this.iconsURL}edit.svg)`},r),(r=this.addButton(s,o.removeButton||"Remove","remove",s,e)).className+=" highcharts-annotation-remove-button",createElement("span",{className:"highcharts-icon"},{backgroundImage:`url(${this.iconsURL}destroy.svg)`},r)}function addFormFields(s,i,n,t,c,a){if(i){const r=this.addInput,l=this.lang;let e,o;objectEach(t,(t,a)=>{e=""!==n?n+"."+a:a,isObject(t)&&(!isArray(t)||isArray(t)&&isObject(t[0])?((o=l[a]||a).match(/\d/g)||c.push([!0,o,s]),addFormFields.call(this,s,i,e,t,c,!1)):c.push([this,e,"annotation",s,t]))}),a&&(stableSort(c,t=>t[1].match(/format/g)?-1:1),isFirefox&&c.reverse(),c.forEach(t=>{!0===t[0]?createElement("span",{className:"highcharts-annotation-title"},void 0,t[2]).appendChild(doc.createTextNode(t[1])):(t[4]={value:t[4][0],type:t[4][1]},r.apply(t[0],t.splice(1)))}))}}const PopupAnnotations={addForm:addForm,addToolbar:addToolbar};export default PopupAnnotations;