"use strict";import DataGroupingAxisComposition from"./DataGroupingAxisComposition.js";import DataGroupingDefaults from"./DataGroupingDefaults.js";import DataGroupingSeriesComposition from"./DataGroupingSeriesComposition.js";import F from"../../Core/Templating.js";const format=F["format"];import H from"../../Core/Globals.js";const composed=H["composed"];import U from"../../Core/Utilities.js";const{addEvent,extend,isNumber,pick,pushUnique}=U;function compose(o,t,e){DataGroupingAxisComposition.compose(o),DataGroupingSeriesComposition.compose(t),e&&pushUnique(composed,"DataGrouping")&&addEvent(e,"headerFormatter",onTooltipHeaderFormatter)}function onTooltipHeaderFormatter(o){const t=this.chart,e=t.time,a=o.point,i=a.series,r=i.options,s=i.tooltipOptions,p=r.dataGrouping,m=i.xAxis;let n=s.xDateFormat||"",u,d,c,g,D,l=s[o.isFooter?"footerFormat":"headerFormat"];var f,F;m&&"datetime"===m.options.type&&p&&isNumber(a.key)&&(d=i.currentDataGrouping,c=p.dateTimeLabelFormats||DataGroupingDefaults.common.dateTimeLabelFormats,d?(g=c[d.unitName],1===d.count?n=g[0]:(n=g[1],u=g[2])):!n&&c&&m.dateTime&&(n=m.dateTime.getXDateFormat(a.x,s.dateTimeLabelFormats)),F=(f=pick(i.groupMap?.[a.index].groupStart,a.key))+(d?.totalRange||0)-1,D=e.dateFormat(n,f),u&&(D+=e.dateFormat(u,F)),i.chart.styledMode&&(l=this.styledModeFormat(l)),o.text=format(l,{point:extend(a,{key:D}),series:i},t),o.preventDefault())}const DataGroupingComposition={compose:compose,groupData:DataGroupingSeriesComposition.groupData};export default DataGroupingComposition;