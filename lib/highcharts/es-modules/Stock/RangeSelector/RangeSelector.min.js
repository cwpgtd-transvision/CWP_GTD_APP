"use strict";import Axis from"../../Core/Axis/Axis.js";import D from"../../Core/Defaults.js";const defaultOptions=D["defaultOptions"];import H from"../../Core/Globals.js";import RangeSelectorComposition from"./RangeSelectorComposition.js";import SVGElement from"../../Core/Renderer/SVG/SVGElement.js";import T from"../../Core/Templating.js";const format=T["format"];import U from"../../Core/Utilities.js";import OrdinalAxis from"../../Core/Axis/OrdinalAxis.js";const{addEvent,createElement,css,defined,destroyObjectProperties,diffObjects,discardElement,extend,fireEvent,isNumber,isString,merge,objectEach,pick,splat}=U;function preferredInputType(e){var t=t=>new RegExp("%[[a-zA-Z]*"+t).test(e);if(isString(e)?-1!==e.indexOf("%L"):e.fractionalSecondDigits)return"text";var i=isString(e)?["a","A","d","e","w","b","B","m","o","y","Y"].some(t):e.dateStyle||e.day||e.month||e.year,t=isString(e)?["H","k","I","l","M","S"].some(t):e.timeStyle||e.hour||e.minute||e.second;return i&&t?"datetime-local":i?"date":t?"time":"text"}class RangeSelector{static compose(t,e){RangeSelectorComposition.compose(t,e,RangeSelector)}constructor(t){this.isDirty=!1,this.buttonOptions=[],this.initialButtonGroupWidth=0,this.maxButtonWidth=()=>{let e=0;return this.buttons.forEach(t=>{t=t.getBBox();t.width>e&&(e=t.width)}),e},this.init(t)}clickButton(t,e){const i=this,n=i.chart,o=i.buttonOptions[t],s=n.xAxis[0],a=n.scroller&&n.scroller.getUnionExtremes()||s||{},r=o.type,h=o.dataGrouping;let d=a.dataMin,l=a.dataMax,p,u=isNumber(s?.max)?Math.round(Math.min(s.max,l??s.max)):void 0,c,m=o._range,g,x,b,f=!0;if(null!==d&&null!==l){if(i.setSelected(t),h&&(this.forcedDataGrouping=!0,Axis.prototype.setDataGrouping.call(s||{chart:this.chart},h,!1),this.frozenStates=o.preserveDataGrouping),"month"===r||"year"===r)s?(x={range:o,max:u,chart:n,dataMin:d,dataMax:l},p=s.minFromRange.call(x),isNumber(x.newMax)&&(u=x.newMax),f=!1):m=o;else if(m)isNumber(u)&&(p=Math.max(u-m,d),u=Math.min(p+m,l),f=!1);else if("ytd"===r){if(!s)return void(i.deferredYTDClick=t);!s.hasData()||isNumber(l)&&isNumber(d)||(d=Number.MAX_VALUE,l=-Number.MAX_VALUE,n.series.forEach(t=>{t=t.getColumn("x");t.length&&(d=Math.min(t[0],d),l=Math.max(t[t.length-1],l))}),e=!1),isNumber(l)&&isNumber(d)&&(b=i.getYTDExtremes(l,d),p=g=b.min,u=b.max)}else"all"===r&&s&&(n.navigator&&n.navigator.baseSeries[0]&&(n.navigator.baseSeries[0].xAxis.options.range=void 0),p=d,u=l);if(f&&o._offsetMin&&defined(p)&&(p+=o._offsetMin),o._offsetMax&&defined(u)&&(u+=o._offsetMax),this.dropdown&&(this.dropdown.selectedIndex=t+1),s)isNumber(p)&&isNumber(u)&&(s.setExtremes(p,u,pick(e,!0),void 0,{trigger:"rangeSelectorButton",rangeSelectorButton:o}),n.setFixedRange(o._range));else{c=splat(n.options.xAxis||{})[0];const v=addEvent(n,"afterCreateAxes",function(){const t=n.xAxis[0];t.range=t.options.range=m,t.min=t.options.min=g});addEvent(n,"load",function(){const t=n.xAxis[0];n.setFixedRange(o._range),t.options.range=c.range,t.options.min=c.min,v()})}fireEvent(this,"afterBtnClick")}}setSelected(t){this.selected=this.options.selected=t}init(e){function t(){var t=i.minInput,e=i.maxInput;t&&t.blur&&fireEvent(t,"blur"),e&&e.blur&&fireEvent(e,"blur")}const i=this,n=e.options.rangeSelector,o=e.options.lang,s=n.buttons,a=n.selected;i.chart=e,i.options=n,i.buttons=[],i.buttonOptions=s.map(t=>(t.type&&o.rangeSelector&&(t.text??(t.text=o.rangeSelector[t.type+"Text"]),t.title??(t.title=o.rangeSelector[t.type+"Title"])),t.text=format(t.text,{count:t.count||1}),t.title=format(t.title,{count:t.count||1}),t)),this.eventsToUnbind=[],this.eventsToUnbind.push(addEvent(e.container,"mousedown",t)),this.eventsToUnbind.push(addEvent(e,"resize",t)),s.forEach(i.computeButtonRange),void 0!==a&&s[a]&&this.clickButton(a,!1),this.eventsToUnbind.push(addEvent(e,"load",function(){e.xAxis&&e.xAxis[0]&&addEvent(e.xAxis[0],"setExtremes",function(t){isNumber(this.max)&&isNumber(this.min)&&this.max-this.min!==e.fixedRange&&"rangeSelectorButton"!==t.trigger&&"updatedData"!==t.trigger&&i.forcedDataGrouping&&!i.frozenStates&&this.setDataGrouping(!1,!1)})})),this.createElements()}updateButtonStates(){const u=this,t=this.chart,e=this.dropdown,i=this.dropdownLabel,c=t.xAxis[0],m=Math.round(c.max-c.min),g=!c.hasVisibleSeries,n=t.scroller&&t.scroller.getUnionExtremes()||c,x=n.dataMin,b=n.dataMax,o=u.getYTDExtremes(b,x),f=o.min,v=o.max,y=u.selected,B=u.options.allButtonsEnabled,w=new Array(u.buttonOptions.length).fill(0),S=isNumber(y),s=u.buttons;let E=!1,I=null;u.buttonOptions.forEach((t,e)=>{var i=t._range,n=t.type,o=t.count||1,t=t._offsetMax-t._offsetMin,s=e===y,a=i>b-x,r=i<c.minRange;let h=!1,d=i===m;s&&a&&(E=!0),c.isOrdinal&&c.ordinal?.positions&&i&&m<i?(l=c.ordinal.positions,p=OrdinalAxis.Additions.findIndexOf(l,c.min,!0),l[Math.min(OrdinalAxis.Additions.findIndexOf(l,c.max,!0)+1,l.length-1)]-l[p]>i&&(d=!0)):("month"===n||"year"===n)&&m+36e5>=864e5*{month:28,year:365}[n]*o-t&&m-36e5<=864e5*{month:31,year:366}[n]*o+t?d=!0:"ytd"===n?(d=v-f+t===m,h=!s):"all"===n&&(d=c.max-c.min>=b-x);var l=!B&&!(E&&"all"===n)&&(a||r||g),p=E&&"all"===n||!h&&d||s&&u.frozenStates;l?w[e]=3:!p||S&&e!==y||(I=e)}),null!==I?(w[I]=2,u.setSelected(I),this.dropdown&&(this.dropdown.selectedIndex=I+1)):(u.setSelected(),this.dropdown&&(this.dropdown.selectedIndex=-1),i&&(i.setState(0),i.attr({text:(defaultOptions.lang.rangeSelectorZoom||"")+" ▾"})));for(let t=0;t<w.length;t++){var a=w[t];const r=s[t];r.state!==a&&(r.setState(a),e&&(e.options[t+1].disabled=3===a,2===a&&(i&&(i.setState(2),i.attr({text:u.buttonOptions[t].text+" ▾"})),e.selectedIndex=t+1),a=i.getBBox(),css(e,{width:a.width+"px",height:a.height+"px"})))}}computeButtonRange(t){var e=t.type,i=t.count||1,n={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5};n[e]?t._range=n[e]*i:"month"!==e&&"year"!==e||(t._range=24*{month:30,year:365}[e]*36e5*i),t._offsetMin=pick(t.offsetMin,0),t._offsetMax=pick(t.offsetMax,0),t._range+=t._offsetMax-t._offsetMin}getInputValue(t){t="min"===t?this.minInput:this.maxInput;const e=this.chart.options.rangeSelector;var i=this.chart.time;return t?("text"===t.type&&e.inputDateParser||this.defaultInputDateParser)(t.value,"UTC"===i.timezone,i):0}setInputValue(e,i){const n=this.options,o=this.chart.time,s="min"===e?this.minInput:this.maxInput,a="min"===e?this.minDateBox:this.maxDateBox;if(s){s.setAttribute("type",preferredInputType(n.inputDateFormat||"%e %b %Y"));var e=s.getAttribute("data-hc-time");let t=defined(e)?Number(e):void 0;defined(i)&&(e=t,defined(e)&&s.setAttribute("data-hc-time-previous",e),s.setAttribute("data-hc-time",i),t=i),s.value=o.dateFormat(this.inputTypeFormats[s.type]||n.inputEditDateFormat,t),a&&a.attr({text:o.dateFormat(n.inputDateFormat,t)})}}setInputExtremes(t,e,i){const n="min"===t?this.minInput:this.maxInput;if(n){t=this.inputTypeFormats[n.type];const o=this.chart.time;t&&(e=o.dateFormat(t,e),n.min!==e&&(n.min=e),e=o.dateFormat(t,i),n.max!==e&&(n.max=e))}}showInput(t){var e,i,n,o,s,a,r="min"===t?this.minDateBox:this.maxDateBox,t="min"===t?this.minInput:this.maxInput;t&&r&&this.inputGroup&&(e="text"===t.type,{translateX:i=0,translateY:n=0}=this.inputGroup,{x:r=0,width:o=0,height:s=0}=r,a=this.options["inputBoxWidth"],css(t,{width:e?o+(a?-2:20)+"px":"auto",height:s-2+"px",border:"2px solid silver"}),e&&a?css(t,{left:i+r+"px",top:n+"px"}):css(t,{left:Math.min(Math.round(r+i-(t.offsetWidth-o)/2),this.chart.chartWidth-t.offsetWidth)+"px",top:n-(t.offsetHeight-s)/2+"px"}))}hideInput(t){t="min"===t?this.minInput:this.maxInput;t&&css(t,{top:"-9999em",border:0,width:"1px",height:"1px"})}defaultInputDateParser(t,e,i){return i?.parse(t)||0}drawInput(e){const{chart:d,div:t,inputGroup:i}=this,l=this,n=d.renderer.style||{},o=d.renderer,s=d.options.rangeSelector,a=defaultOptions.lang,p="min"===e;function r(t){const{maxInput:e,minInput:i}=l,n=d.xAxis[0],o=d.scroller?.getUnionExtremes()||n,s=o.dataMin,a=o.dataMax,r=d.xAxis[0].getExtremes()[t];let h=l.getInputValue(t);isNumber(h)&&h!==r&&(p&&e&&isNumber(s)?h>Number(e.getAttribute("data-hc-time"))?h=void 0:h<s&&(h=s):i&&isNumber(a)&&(h<Number(i.getAttribute("data-hc-time"))?h=void 0:h>a&&(h=a)),void 0!==h&&n.setExtremes(p?h:n.min,p?n.max:h,void 0,void 0,{trigger:"rangeSelectorInput"}))}var h=a[p?"rangeSelectorFrom":"rangeSelectorTo"]||"";const u=o.label(h,0).addClass("highcharts-range-label").attr({padding:h?2:0,height:h?s.inputBoxHeight:0}).add(i),c=o.label("",0).addClass("highcharts-range-input").attr({padding:2,width:s.inputBoxWidth,height:s.inputBoxHeight,"text-align":"center"}).on("click",function(){l.showInput(e),l[e+"Input"].focus()}),m=(d.styledMode||c.attr({stroke:s.inputBoxBorderColor,"stroke-width":1}),c.add(i),createElement("input",{name:e,className:"highcharts-range-selector"},void 0,t));m.setAttribute("type",preferredInputType(s.inputDateFormat||"%e %b %Y")),d.styledMode||(u.css(merge(n,s.labelStyle)),c.css(merge({color:"#333333"},n,s.inputStyle)),css(m,extend({position:"absolute",border:0,boxShadow:"0 0 15px rgba(0,0,0,0.3)",width:"1px",height:"1px",padding:0,textAlign:"center",fontSize:n.fontSize,fontFamily:n.fontFamily,top:"-9999em"},s.inputStyle))),m.onfocus=()=>{l.showInput(e)};let g=!(m.onblur=()=>{m===H.doc.activeElement&&r(e),l.hideInput(e),l.setInputValue(e),m.blur()});return m.onchange=()=>{g||(r(e),l.hideInput(e),m.blur())},m.onkeypress=t=>{13===t.keyCode&&r(e)},m.onkeydown=t=>{g=!0,"ArrowUp"!==t.key&&"ArrowDown"!==t.key&&"Tab"!==t.key||r(e)},m.onkeyup=()=>{g=!1},{dateBox:c,input:m,label:u}}getPosition(){var t=this.chart,e=t.options.rangeSelector,t="top"===e.verticalAlign?t.plotTop-t.axisOffset[0]:0;return{buttonTop:t+e.buttonPosition.y,inputTop:t+e.inputPosition.y-10}}getYTDExtremes(t,e){const i=this.chart.time,n=i.toParts(t)[0],o=i.makeTime(n,0);return{max:t,min:Math.max(e,o)}}createElements(){const t=this.chart,e=t.renderer,i=t.container,n=t.options,o=n.rangeSelector,s=o.inputEnabled,a=pick(n.chart.style?.zIndex,0)+1;!1!==o.enabled&&(this.group=e.g("range-selector-group").attr({zIndex:7}).add(),this.div=createElement("div",void 0,{position:"relative",height:0,zIndex:a}),this.buttonOptions.length&&this.renderButtons(),i.parentNode&&i.parentNode.insertBefore(this.div,i),s&&this.createInputs())}createInputs(){this.inputGroup=this.chart.renderer.g("input-group").add(this.group);var t=this.drawInput("min"),t=(this.minDateBox=t.dateBox,this.minLabel=t.label,this.minInput=t.input,this.drawInput("max"));this.maxDateBox=t.dateBox,this.maxLabel=t.label,this.maxInput=t.input}render(t,e){if(!1!==this.options.enabled){const i=this.chart,n=i.options,o=n.rangeSelector,s=o.inputEnabled;if(s){this.inputGroup||this.createInputs(),this.setInputValue("min",t),this.setInputValue("max",e),this.chart.styledMode||(this.maxLabel?.css(o.labelStyle),this.minLabel?.css(o.labelStyle));t=i.scroller&&i.scroller.getUnionExtremes()||i.xAxis[0]||{};if(defined(t.dataMin)&&defined(t.dataMax)&&(e=i.xAxis[0].minRange||0,this.setInputExtremes("min",t.dataMin,Math.min(t.dataMax,this.getInputValue("max"))-e),this.setInputExtremes("max",Math.max(t.dataMin,this.getInputValue("min"))+e,t.dataMax)),this.inputGroup){let i=0;[this.minLabel,this.minDateBox,this.maxLabel,this.maxDateBox].forEach(t=>{var e;t&&(e=t.getBBox()["width"],e&&(t.attr({x:i}),i+=e+o.inputSpacing))})}}else this.inputGroup&&(this.inputGroup.destroy(),delete this.inputGroup);this.chart.styledMode||this.zoomText&&this.zoomText.css(o.labelStyle),this.alignElements(),this.updateButtonStates()}}renderButtons(){var{chart:t,options:e}=this,i=defaultOptions.lang;const n=t.renderer,o=merge(e.buttonTheme);var s=o&&o.states;delete o.width,delete o.states,this.buttonGroup=n.g("range-selector-buttons").add(this.group);const a=this.dropdown=createElement("select",void 0,{position:"absolute",padding:0,border:0,cursor:"pointer",opacity:1e-4},this.div);var t=t.userOptions.rangeSelector?.buttonTheme;this.dropdownLabel=n.button("",0,0,()=>{},merge(o,{"stroke-width":pick(o["stroke-width"],0),width:"auto",paddingLeft:pick(e.buttonTheme.paddingLeft,t?.padding,8),paddingRight:pick(e.buttonTheme.paddingRight,t?.padding,8)}),s&&s.hover,s&&s.select,s&&s.disabled).hide().add(this.group),addEvent(a,"touchstart",()=>{a.style.fontSize="16px"});const r=H.isMS?"mouseover":"mouseenter",h=H.isMS?"mouseout":"mouseleave";addEvent(a,r,()=>{fireEvent(this.dropdownLabel.element,r)}),addEvent(a,h,()=>{fireEvent(this.dropdownLabel.element,h)}),addEvent(a,"change",()=>{var t=this.buttons[a.selectedIndex-1];fireEvent(t.element,"click")}),this.zoomText=n.label(i.rangeSelectorZoom||"",0).attr({padding:e.buttonTheme.padding,height:e.buttonTheme.height,paddingLeft:0,paddingRight:0}).add(this.buttonGroup),this.chart.styledMode||(this.zoomText.css(e.labelStyle),(t=e.buttonTheme)["stroke-width"]??(t["stroke-width"]=0)),createElement("option",{textContent:this.zoomText.textStr,disabled:!0},void 0,a),this.createButtons()}createButtons(){var t=this["options"];const e=merge(t.buttonTheme),i=e&&e.states,n=e.width||28;delete e.width,delete e.states,this.buttonOptions.forEach((t,e)=>{this.createButton(t,e,n,i)})}createButton(n,o,t,e){const{dropdown:i,buttons:s,chart:a,options:r}=this,h=a.renderer;var d=merge(r.buttonTheme);i?.add(createElement("option",{textContent:n.title||n.text}),o+2),s[o]=h.button(n.text??"",0,0,t=>{const e=n.events&&n.events.click;let i;!1!==(i=e?e.call(n,t):i)&&this.clickButton(o),this.isActive=!0},d,e&&e.hover,e&&e.select,e&&e.disabled).attr({"text-align":"center",width:t}).add(this.buttonGroup),n.title&&s[o].attr("title",n.title)}alignElements(){const{buttonGroup:o,buttons:s,chart:a,group:r,inputGroup:h,options:d,zoomText:l}=this;var p=a.options;const n=p.exporting&&!1!==p.exporting.enabled&&p.navigation&&p.navigation.buttonOptions,{buttonPosition:u,inputPosition:c,verticalAlign:m}=d;p=(t,e,i)=>n&&this.titleCollision(a)&&"top"===m&&i&&e.y-t.getBBox().height-12<(n.y||0)+(n.height||0)+a.spacing[0]?-40:0;let g=a.plotLeft;if(r&&u&&c){let t=u.x-a.spacing[3];if(o){if(this.positionButtons(),!this.initialButtonGroupWidth){let i=0;l&&(i+=l.getBBox().width+5),s.forEach((t,e)=>{i+=t.width||0,e!==s.length-1&&(i+=d.buttonSpacing)}),this.initialButtonGroupWidth=i}g-=a.spacing[3];var x=p(o,u,"right"===u.align||"right"===c.align);this.alignButtonGroup(x),this.buttonGroup?.translateY&&this.dropdownLabel.attr({y:this.buttonGroup.translateY}),r.placed=o.placed=a.hasLoaded}let e=0;d.inputEnabled&&h&&(e=p(h,c,"right"===u.align||"right"===c.align),"left"===c.align?t=g:"right"===c.align&&(t=-Math.max(a.axisOffset[1],-e)),h.align({y:c.y,width:h.getBBox().width,align:c.align,x:c.x+t-2},!0,a.spacingBox),h.placed=a.hasLoaded),this.handleCollision(e),r.align({verticalAlign:m},!0,a.spacingBox);x=r.alignAttr.translateY;let i=r.getBBox().height+20,n=0;"bottom"===m&&(p=(p=a.legend&&a.legend.options)&&"bottom"===p.verticalAlign&&p.enabled&&!p.floating?a.legend.legendHeight+pick(p.margin,10):0,i=i+p-20,n=x-i-(d.floating?0:d.y)-(a.titleOffset?a.titleOffset[2]:0)-10),"top"===m?(d.floating&&(n=0),a.titleOffset&&a.titleOffset[0]&&(n=a.titleOffset[0]),n+=a.margin[0]-a.spacing[0]||0):"middle"===m&&(c.y===u.y?n=x:(c.y||u.y)&&(c.y<0||u.y<0?n-=Math.min(c.y,u.y):n=x-i)),r.translate(d.x,d.y+Math.floor(n));const{minInput:b,maxInput:f,dropdown:v}=this;d.inputEnabled&&b&&f&&(b.style.marginTop=r.translateY+"px",f.style.marginTop=r.translateY+"px"),v&&(v.style.marginTop=r.translateY+"px")}}redrawElements(){var t=this.chart,{inputBoxHeight:e,inputBoxBorderColor:i}=this.options;if(this.maxDateBox?.attr({height:e}),this.minDateBox?.attr({height:e}),t.styledMode||(this.maxDateBox?.attr({stroke:i}),this.minDateBox?.attr({stroke:i})),this.isDirty){this.isDirty=!1,this.isCollapsed=void 0;var n=this.options.buttons??[],e=Math.min(n.length,this.buttonOptions.length);const{dropdown:r,options:h}=this;var t=merge(h.buttonTheme),o=t&&t.states,s=t.width||28;if(n.length<this.buttonOptions.length)for(let t=this.buttonOptions.length-1;t>=n.length;t--){const d=this.buttons.pop();d?.destroy(),this.dropdown?.options.remove(t+1)}for(let t=e-1;0<=t;t--){var a=diffObjects(n[t],this.buttonOptions[t]);0!==Object.keys(a).length&&(a=n[t],this.buttons[t].destroy(),r?.options.remove(t+1),this.createButton(a,t,s,o),this.computeButtonRange(a))}if(n.length>this.buttonOptions.length)for(let t=this.buttonOptions.length;t<n.length;t++)this.createButton(n[t],t,s,o),this.computeButtonRange(n[t]);this.buttonOptions=this.options.buttons??[],defined(this.options.selected)&&this.buttons.length&&this.clickButton(this.options.selected,!1)}}alignButtonGroup(t,e){const{chart:i,options:n,buttonGroup:o,dropdown:s,dropdownLabel:a}=this;var r=n["buttonPosition"],h=i.plotLeft-i.spacing[3];let d=r.x-i.spacing[3],l=i.plotLeft;"right"===r.align?(d+=t-h,this.hasVisibleDropdown&&(l=i.chartWidth+t-this.maxButtonWidth()-20)):"center"===r.align&&(d-=h/2,this.hasVisibleDropdown&&(l=i.chartWidth/2-this.maxButtonWidth())),s&&css(s,{left:l+"px",top:o?.translateY+"px"}),a?.attr({x:l}),o&&o.align({y:r.y,width:pick(e,this.initialButtonGroupWidth),align:r.align,x:d},!0,i.spacingBox)}positionButtons(){const{buttons:i,chart:t,options:n,zoomText:e}=this;var o=t.hasLoaded?"animate":"attr",s=n["buttonPosition"],a=t.plotLeft;let r=a;e&&"hidden"!==e.visibility&&(e[o]({x:pick(a+s.x,a)}),r+=s.x+e.getBBox().width+5);for(let t=0,e=this.buttonOptions.length;t<e;++t)"hidden"!==i[t].visibility?(i[t][o]({x:r}),r+=(i[t].width||0)+n.buttonSpacing):i[t][o]({x:a})}handleCollision(t){const{chart:e,buttonGroup:i,inputGroup:n,initialButtonGroupWidth:o}=this;var{buttonPosition:s,dropdown:a,inputPosition:r}=this.options,h=()=>{n&&i&&n.attr({translateX:n.alignAttr.translateX+(e.axisOffset[1]>=-t?0:-t),translateY:n.alignAttr.translateY+i.getBBox().height+10})};n&&i?r.align===s.align?(h(),o>e.plotWidth+t-20?this.collapseButtons():this.expandButtons()):o-t+n.getBBox().width>e.plotWidth?"responsive"===a?this.collapseButtons():h():this.expandButtons():i&&"responsive"===a&&(o>e.plotWidth?this.collapseButtons():this.expandButtons()),i&&("always"===a&&this.collapseButtons(),"never"===a&&this.expandButtons()),this.alignButtonGroup(t)}collapseButtons(){const{buttons:t,zoomText:e}=this;!0!==this.isCollapsed&&(this.isCollapsed=!0,e.hide(),t.forEach(t=>{t.hide()}),this.showDropdown())}expandButtons(){const{buttons:t,zoomText:e}=this;!1!==this.isCollapsed&&(this.isCollapsed=!1,this.hideDropdown(),e.show(),t.forEach(t=>{t.show()}),this.positionButtons())}showDropdown(){const{buttonGroup:t,dropdownLabel:e,dropdown:i}=this;t&&i&&(e.show(),css(i,{visibility:"inherit"}),this.hasVisibleDropdown=!0)}hideDropdown(){var t=this["dropdown"];t&&(this.dropdownLabel.hide(),css(t,{visibility:"hidden",width:"1px",height:"1px"}),this.hasVisibleDropdown=!1)}getHeight(){const t=this.options,e=this.group,i=t.inputPosition,n=t.buttonPosition,o=t.y,s=n.y,a=i.y;let r=0;if(t.height)return t.height;this.alignElements(),r=e?e.getBBox(!0).height+13+o:0;var h=Math.min(a,s);return(a<0&&s<0||0<a&&0<s)&&(r+=Math.abs(h)),r}titleCollision(t){return!(t.options.title.text||t.options.subtitle.text)}update(t,e=!0){const i=this.chart;if(merge(!0,this.options,t),this.options.selected&&this.options.selected>=this.options.buttons.length&&(this.options.selected=void 0,i.options.rangeSelector.selected=void 0),defined(t.enabled))return this.destroy(),this.init(i);this.isDirty=!!t.buttons,e&&this.render()}destroy(){const i=this,t=i.minInput,e=i.maxInput;i.eventsToUnbind&&(i.eventsToUnbind.forEach(t=>t()),i.eventsToUnbind=void 0),destroyObjectProperties(i.buttons),t&&(t.onfocus=t.onblur=t.onchange=null),e&&(e.onfocus=e.onblur=e.onchange=null),objectEach(i,function(t,e){t&&"chart"!==e&&(t instanceof SVGElement?t.destroy():t instanceof window.HTMLElement&&discardElement(t),delete i[e]),t!==RangeSelector.prototype[e]&&(i[e]=null)},this),this.buttons=[]}}extend(RangeSelector.prototype,{inputTypeFormats:{"datetime-local":"%Y-%m-%dT%H:%M:%S",date:"%Y-%m-%d",time:"%H:%M:%S"}});export default RangeSelector;