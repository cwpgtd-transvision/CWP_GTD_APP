"use strict";import HollowCandlestickPoint from"./HollowCandlestickPoint.js";import SeriesRegistry from"../../Core/Series/SeriesRegistry.js";import U from"../../Core/Utilities.js";import Axis from"../../Core/Axis/Axis.js";const{candlestick:CandlestickSeries}=SeriesRegistry["seriesTypes"],{addEvent,merge}=U;class HollowCandlestickSeries extends CandlestickSeries{constructor(){super(...arguments),this.hollowCandlestickData=[]}getPriceMovement(){const i=this,e=i.allGroupedTable||i.dataTable,o=e.rowCount,s=this.hollowCandlestickData;let l;for(let t=s.length=0;t<o;t++){var r=e.getRow(t,this.pointArrayMap);s.push(i.isBullish(r,t?l:r)),l=r}}getLineColor(t){return"up"===t?this.options.upColor||"#06b535":this.options.color||"#f21313"}getPointFill(t){return t.isBullish?"transparent":"up"===t.trendDirection?this.options.upColor||"#06b535":this.options.color||"#f21313"}init(){super.init.apply(this,arguments),this.hollowCandlestickData=[]}isBullish(t,i){return{isBullish:(t[0]||0)<=(t[3]||0),trendDirection:(t[3]||0)<(i?.[3]||0)?"down":"up"}}pointAttribs(t,i){const e=super.pointAttribs.call(this,t,i);var t=t.index,t=this.hollowCandlestickData[t];return e.fill=this.getPointFill(t)||e.fill,e.stroke=this.getLineColor(t.trendDirection)||e.stroke,i&&(t=this.options.states[i],e.fill=t.color||e.fill,e.stroke=t.lineColor||e.stroke,e["stroke-width"]=t.lineWidth||e["stroke-width"]),e}}HollowCandlestickSeries.defaultOptions=merge(CandlestickSeries.defaultOptions,{color:"#f21313",dataGrouping:{groupAll:!0,groupPixelWidth:10},lineColor:"#f21313",upColor:"#06b535",upLineColor:"#06b535"}),addEvent(HollowCandlestickSeries,"updatedData",function(){this.hollowCandlestickData.length&&(this.hollowCandlestickData.length=0)}),addEvent(Axis,"postProcessData",function(){const t=this.series;t.forEach(function(t){if(t.is("hollowcandlestick")){const i=t;i.getPriceMovement()}})}),HollowCandlestickSeries.prototype.pointClass=HollowCandlestickPoint,SeriesRegistry.registerSeriesType("hollowcandlestick",HollowCandlestickSeries);export default HollowCandlestickSeries;