!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(t._Highcharts,t._Highcharts.SeriesRegistry,t._Highcharts.SVGElement):"function"==typeof define&&define.amd?define("highcharts/modules/organization",["highcharts/highcharts"],function(t){return e(t,t.SeriesRegistry,t.SVGElement)}):"object"==typeof exports?exports["highcharts/modules/organization"]=e(t._Highcharts,t._Highcharts.SeriesRegistry,t._Highcharts.SVGElement):t.Highcharts=e(t.Highcharts,t.Highcharts.SeriesRegistry,t.Highcharts.SVGElement)}("undefined"==typeof window?this:window,(W,F,H)=>(()=>{"use strict";var i={28:t=>{t.exports=H},512:t=>{t.exports=F},944:t=>{t.exports=W}},n={};function s(t){var e=n[t];if(void 0!==e)return e.exports;e=n[t]={exports:{}};return i[t](e,e.exports,s),e.exports}s.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return s.d(e,{a:e}),e},s.d=(t,e)=>{for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var t={},e=(s.d(t,{default:()=>S}),s(944)),e=s.n(e),r=s(512),r=s.n(r);let{pointClass:a}=r().seriesTypes["sankey"]["prototype"],{defined:o,find:h,pick:l}=e(),d=class extends a{constructor(t,e,i){super(t,e,i),this.isNode||(this.dataLabelOnNull=!0,this.formatPrefix="link")}getSum(){return 1}setNodeColumn(){super.setNodeColumn();let n=this,s=n.getFromNode().fromNode;if(!o(n.options.column)&&0!==n.linksTo.length&&s&&"hanging"===s.options.layout){let i=-1,e;n.options.layout=l(n.options.layout,"hanging"),n.hangsFrom=s,h(s.linksFrom,(t,e)=>{t=t.toNode===n;return t&&(i=e),t});for(let t=0;t<s.linksFrom.length;++t)(e=s.linksFrom[t]).toNode.id===n.id?t=s.linksFrom.length:i+=function e(t){let i=t.linksFrom.length;return t.linksFrom.forEach(t=>{t.id===t.toNode.linksTo[0].id?i+=e(t.toNode):i--}),i}(e.toNode);n.column=(n.column||0)+i}}},k={applyRadius:function(e,i){let n=[];for(let t=0;t<e.length;t++){var s,r,a,o,h,l,d=e[t][1],p=e[t][2];"number"==typeof d&&"number"==typeof p&&(0===t?n.push(["M",d,p]):t!==e.length-1&&i?(r=e[t-1],o=e[t+1],r&&o&&(s=r[1],r=r[2],a=o[1],o=o[2],"number"==typeof s&&"number"==typeof a&&"number"==typeof r&&"number"==typeof o&&s!==a&&r!==o&&(h=s<a?1:-1,l=r<o?1:-1,n.push(["L",d-h*Math.min(Math.abs(d-s),i),p-l*Math.min(Math.abs(p-r),i)],["C",d,p,d,p,d+h*Math.min(Math.abs(d-a),i),p+l*Math.min(Math.abs(p-o),i)])))):n.push(["L",d,p]))}return n}};var p=s(28),p=s.n(p);let x=e()["deg2rad"],{addEvent:g,merge:u,uniqueKey:c,defined:f,extend:y}=e();function m(s,t){t=u(!0,{enabled:!0,attributes:{dy:-5,startOffset:"50%",textAnchor:"middle"}},t);let r=this.renderer.url,a=this.text||this,e=a.textPath,{attributes:o,enabled:h}=t;return s=s||e&&e.path,e&&e.undo(),s&&h?(t=g(a,"afterModifyTree",i=>{if(s&&h){let t=s.attr("id"),e=(t||s.attr("id",t=c()),{x:0,y:0});f(o.dx)&&(e.dx=o.dx,delete o.dx),f(o.dy)&&(e.dy=o.dy,delete o.dy),a.attr(e),this.attr({transform:""}),this.box&&(this.box=this.box.destroy());var n=i.nodes.slice(0);i.nodes.length=0,i.nodes[0]={tagName:"textPath",attributes:y(o,{"text-anchor":o.textAnchor,href:r+"#"+t}),children:n}}}),a.textPath={path:s,undo:t}):(a.attr({dx:0,dy:0}),delete a.textPath),this.added&&(a.textCache="",this.renderer.buildText(a)),this}function b(l){let i=l.bBox,d=this.element?.querySelector("textPath");if(d){let n=[],{b:s,h:t}=this.renderer.fontMetrics(this.element),r=t-s,e=RegExp('(<tspan>|<tspan(?!\\sclass="highcharts-br")[^>]*>|<\\/tspan>)',"g"),a=d.innerHTML.replace(e,"").split(/<tspan class="highcharts-br"[^>]*>/),o=a.length,h=(t,e)=>{var{x:e,y:i}=e,t=(d.getRotationOfChar(t)-90)*x,n=Math.cos(t),t=Math.sin(t);return[[e-r*n,i-r*t],[e+s*n,i+s*t]]};for(let e=0,i=0;i<o;i++){var p=a[i].length;for(let t=0;t<p;t+=5)try{var g=e+t+i,[u,c]=h(g,d.getStartPositionOfChar(g));0===t?(n.push(c),n.push(u)):(0===i&&n.unshift(c),i===o-1&&n.push(u))}catch(l){break}e+=p-1;try{var f=e+i,y=d.getEndPositionOfChar(f),[m,k]=h(f,y);n.unshift(k),n.unshift(m)}catch(l){break}}n.length&&n.push(n[0].slice()),i.polygon=n}return i}function A(t){let e=t.labelOptions,i=t.point,n=e[i.formatPrefix+"TextPath"]||e.textPath;n&&!e.useHTML&&(this.setTextPath(i.getDataLabelPath?.(this)||i.graphic,n),i.dataLabelPath&&!n.enabled&&(i.dataLabelPath=i.dataLabelPath.destroy()))}let L=r().seriesTypes["sankey"],{css:v,crisp:w,extend:M,isNumber:N,merge:O,pick:P}=e();{p=p(),g(p,"afterGetBBox",b),g(p,"beforeAddingDataLabel",A);let t=p.prototype;t.setTextPath||(t.setTextPath=m)}class T extends L{alignDataLabel(t,n,e){let s=t.shapeArgs,r=n.text;if(e.useHTML&&s){let t=this.options.borderWidth+2*this.options.dataLabels.padding,e=s.width||0,i=s.height||0;this.chart.inverted&&(e=i,i=s.width||0),i-=t,e-=t,r.foreignObject?.attr({x:0,y:0,width:e,height:i}),v(r.element.parentNode,{width:e+"px",height:i+"px"}),v(r.element,{left:0,top:0,width:"100%",height:"100%",overflow:"hidden"}),n.getBBox=()=>({width:e,height:i,x:0,y:0}),n.width=e,n.height=i}super.alignDataLabel.apply(this,arguments)}createNode(t){let e=super.createNode.call(this,t);return e.getSum=()=>1,e}pointAttribs(t,e){let i=L.prototype.pointAttribs.call(this,t,e),n=(t.isNode?t:t.fromNode).level,s=this.mapOptionsToLevel[n||0]||{},r=t.options,a=s.states&&s.states[e]||{},o=P(a.borderRadius,r.borderRadius,s.borderRadius,this.options.borderRadius),h=P(a.linkColor,r.linkColor,s.linkColor,this.options.linkColor,a.link&&a.link.color,r.link&&r.link.color,s.link&&s.link.color,this.options.link&&this.options.link.color),l=P(a.linkLineWidth,r.linkLineWidth,s.linkLineWidth,this.options.linkLineWidth,a.link&&a.link.lineWidth,r.link&&r.link.lineWidth,s.link&&s.link.lineWidth,this.options.link&&this.options.link.lineWidth),d=P(a.linkOpacity,r.linkOpacity,s.linkOpacity,this.options.linkOpacity,a.link&&a.link.linkOpacity,r.link&&r.link.linkOpacity,s.link&&s.link.linkOpacity,this.options.link&&this.options.link.linkOpacity);return t.isNode?N(o)&&(i.r=o):(i.stroke=h,i["stroke-width"]=l,i.opacity=d,delete i.fill),i}translateLink(d){var p=this.chart,g=this.options,u=d.fromNode,c=d.toNode,f=P(g.linkLineWidth,g.link.lineWidth,0),y=P(g.link.offset,.5),m=P(d.options.link&&d.options.link.type,g.link.type);if(u.shapeArgs&&c.shapeArgs){let t=g.hangingIndent,e="right"===g.hangingSide,i=c.options.offset,n=/%$/.test(i)&&parseInt(i,10),s=p.inverted,r=w((u.shapeArgs.x||0)+(u.shapeArgs.width||0),f),a=w((u.shapeArgs.y||0)+(u.shapeArgs.height||0)/2,f),o=w(c.shapeArgs.x||0,f),h=w((c.shapeArgs.y||0)+(c.shapeArgs.height||0)/2,f),l;s&&(r-=u.shapeArgs.width||0,o+=c.shapeArgs.width||0),l=this.colDistance?w(o+(s?1:-1)*(this.colDistance-this.nodeWidth)/2,f):w((o+r)/2,f),n&&(50<=n||n<=-50)&&(l=o=w(o+(s?-.5:.5)*(c.shapeArgs.width||0),f),h=c.shapeArgs.y||0,0<n&&(h+=c.shapeArgs.height||0)),c.hangsFrom===u&&(p.inverted?(a=e?w((u.shapeArgs.y||0)+t/2,f):w((u.shapeArgs.y||0)+(u.shapeArgs.height||0)-t/2,f),h=e?(c.shapeArgs.y||0)+t/2:(c.shapeArgs.y||0)+(c.shapeArgs.height||0)):a=w((u.shapeArgs.y||0)+t/2,f),l=o=w((c.shapeArgs.x||0)+(c.shapeArgs.width||0)/2,f)),d.plotX=l,d.plotY=(a+h)/2,d.shapeType="path","straight"===m?d.shapeArgs={d:[["M",r,a],["L",o,h]]}:"curved"===m?(p=Math.abs(o-r)*y*(s?-1:1),d.shapeArgs={d:[["M",r,a],["C",r+p,a,o-p,h,o,h]]}):d.shapeArgs={d:k.applyRadius([["M",r,a],["L",l,a],["L",l,h],["L",o,h]],P(g.linkRadius,g.link.radius))},d.dlBox={x:(r+o)/2,y:(a+h)/2,height:f,width:0}}}translateNode(t,e){super.translateNode(t,e);let i=this.chart,n=this.options,s=Math.max(Math.round(t.getSum()*this.translationFactor),n.minLinkWidth||0),r="right"===n.hangingSide,a=n.hangingIndent||0,o=n.hangingIndentTranslation,h=n.minNodeLength||10,l=Math.round(this.nodeWidth),d=t.shapeArgs,p=i.inverted?-1:1,g=t.hangsFrom;if(g)if("cumulative"===o)for(d.height-=a,i.inverted&&!r&&(d.y-=p*a);g;)d.y+=(r?1:p)*a,g=g.hangsFrom;else if("shrink"===o)for(;g&&d.height>a+h;)d.height-=a,i.inverted&&!r||(d.y+=a),g=g.hangsFrom;else d.height-=a,i.inverted&&!r||(d.y+=a);t.nodeHeight=i.inverted?d.width:d.height,t.shapeArgs&&!t.hangsFrom&&(t.shapeArgs=O(t.shapeArgs,{x:(t.shapeArgs.x||0)+l/2-(t.shapeArgs.width||0)/2,y:(t.shapeArgs.y||0)+s/2-(t.shapeArgs.height||0)/2}))}drawDataLabels(){var t=this.options.dataLabels;if(t.linkTextPath&&t.linkTextPath.enabled)for(var e of this.points)e.options.dataLabels=O(e.options.dataLabels,{useHTML:!1});super.drawDataLabels()}}T.defaultOptions=O(L.defaultOptions,{borderColor:"#666666",borderRadius:3,link:{color:"#666666",lineWidth:1,radius:10,type:"default"},borderWidth:1,dataLabels:{nodeFormatter:function(){let t={width:"100%",height:"100%",display:"flex","flex-direction":"row","align-items":"center","justify-content":"center"},e={"max-height":"100%","border-radius":"50%"},i={width:"100%",padding:0,"text-align":"center","white-space":"normal"};function n(i){return Object.keys(i).reduce(function(t,e){return t+e+":"+i[e]+";"},'style="')+'"'}var{description:s,image:r,title:a}=this.point;r&&(e["max-width"]="30%",i.width="70%"),this.series.chart.renderer.forExport&&(t.display="block",i.position="absolute",i.left=r?"30%":0,i.top=0);let o="<div "+n(t)+">";return r&&(o+='<img src="'+r+'" '+n(e)+">"),o+="<div "+n(i)+">",this.point.name&&(o+="<h4 "+n({margin:0})+">"+this.point.name+"</h4>"),a&&(o+="<p "+n({margin:0})+">"+(a||"")+"</p>"),s&&(o+="<p "+n({opacity:.75,margin:"5px"})+">"+s+"</p>"),o+="</div></div>"},style:{fontWeight:"normal",fontSize:"0.9em",textAlign:"left"},useHTML:!0,linkTextPath:{attributes:{startOffset:"95%",textAnchor:"end"}}},hangingIndent:20,hangingIndentTranslation:"inherit",hangingSide:"left",minNodeLength:10,nodeWidth:50,tooltip:{nodeFormat:"{point.name}<br>{point.title}<br>{point.description}"}}),M(T.prototype,{pointClass:d}),r().registerSeriesType("organization",T);let S=e();return t.default})());