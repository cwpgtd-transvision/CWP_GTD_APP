!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(t._Highcharts,t._Highcharts.SeriesRegistry):"function"==typeof define&&define.amd?define("highcharts/modules/geoheatmap",["highcharts/highcharts"],function(t){return e(t,t.SeriesRegistry)}):"object"==typeof exports?exports["highcharts/modules/geoheatmap"]=e(t._Highcharts,t._Highcharts.SeriesRegistry):t.Highcharts=e(t.Highcharts,t.Highcharts.SeriesRegistry)}("undefined"==typeof window?this:window,(v,D)=>(()=>{"use strict";var i={512:t=>{t.exports=D},944:t=>{t.exports=v}},o={};function a(t){var e=o[t];if(void 0!==e)return e.exports;e=o[t]={exports:{}};return i[t](e,e.exports,a),e.exports}a.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return a.d(e,{a:e}),e},a.d=(t,e)=>{for(var i in e)a.o(e,i)&&!a.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var t={},e=(a.d(t,{default:()=>w}),a(944)),e=a.n(e),r=a(512),r=a.n(r);let{pointClass:s}=r().seriesTypes["map"]["prototype"],n=e()["isNumber"],h=class extends s{applyOptions(t,e){let i=super.applyOptions.call(this,t,e),{lat:o,lon:a}=i.options;var r,s;return n(a)&&n(o)&&({colsize:t=1,rowsize:e=1}=this.series.options,r=a-t/2,s=o-e/2,i.geometry=i.options.geometry={type:"Polygon",coordinates:[[[r,s],[r+t,s],[r+t,s+e],[r,s+e],[r,s]]]}),i}},l=e()["doc"],{defined:p,pick:d}=e(),{animObject:z,stop:O}=e(),c=e()["noop"],{colorFromPoint:L,getContext:g}={colorFromPoint:function(e,i){let o=i.series.colorAxis;if(o){let t=o.toColor(e||0,i).split(")")[0].split("(")[1].split(",").map(t=>d(parseFloat(t),parseInt(t,10)));return t[3]=255*d(t[3],1),p(e)&&i.visible||(t[3]=0),t}return[0,0,0,0]},getContext:function(t){let{canvas:e,context:i}=t;return e&&i?(i.clearRect(0,0,e.width,e.height),i):(t.canvas=l.createElement("canvas"),t.context=t.canvas.getContext("2d",{willReadFrequently:!0})||void 0,t.context)}},u=r()["seriesTypes"]["map"],{addEvent:y,error:R,extend:m,isNumber:A,isObject:f,merge:U,pick:H}=e();function x(t){return t-360*Math.floor((t+180)/360)}class b extends u{constructor(){super(...arguments),this.isDirtyCanvas=!0}update(){this.options=U(this.options,arguments[0]),this.getInterpolation().enabled&&(this.isDirtyCanvas=!0,this.points.forEach(t=>{t.graphic&&(t.graphic.destroy(),delete t.graphic)})),super.update.apply(this,arguments)}translate(){this.getInterpolation().enabled&&this.image&&!this.isDirty&&!this.isDirtyData||super.translate.apply(this,arguments)}getInterpolation(){return f(this.options.interpolation)?this.options.interpolation:{blur:1,enabled:this.options.interpolation}}drawPoints(){let b=this.chart.mapView,o=this.options;if(this.getInterpolation().enabled&&b&&this.bounds){let u=this.context||g(this),{canvas:y,colorAxis:t,image:s,chart:n,points:m}=this,[f,x]=[H(o.colsize,1),H(o.rowsize,1)],e=b.projectedUnitsToPixels({x:this.bounds.x1,y:this.bounds.y2}),i=b.projectedUnitsToPixels({x:this.bounds.x2,y:this.bounds.y1});if(y&&u&&t&&e&&i){let{x:p,y:d}=e,c=i.x-p,g=i.y-d,t={x:p,y:d,width:c,height:g};if(this.isDirtyCanvas||this.isDirtyData||"Orthographic"===b.projection.options.name){let e=y.width=1+~~(360/f),i=y.height=1+~~(180/x),o=new Uint8ClampedArray(e*i*4),{lat:t=0,lon:a=0}=m[0].options,r=a%x!=0,s=t%f!=0,n=r?t=>Math.round(t/x)*x:t=>t,h=s?t=>Math.round(t/f)*f:t=>t,l=m.length;(r||s)&&R("Highcharts Warning: For best performance, lon/lat datapoints should spaced by a single colsize/rowsize",!1,this.chart,{colsize:String(f),rowsize:String(x)}),this.directTouch=!1,this.isDirtyCanvas=!0;for(let t=0;t<l;t++){var w=m[t],{lon:v,lat:D}=w.options;A(v)&&A(D)&&o.set(L(w.value,w),4*(w=n(v),Math.ceil(e*(i-1-(h(D)+90)/x)+(w+180)/f)))}var C=this.getInterpolation().blur,C=0===C?1:11*C,j=~~(e*C),C=~~(i*C),P=~~c,I=~~g,T=new ImageData(o,e,i),T=(y.width=j,y.height=C,u.putImageData(T,0,0),u.globalCompositeOperation="copy",u.drawImage(y,0,0,T.width,T.height,0,0,j,C),this.getProjectedImageData(b,P,I,u.getImageData(0,0,j,C),y,p,d));y.width=P,y.height=I,u.putImageData(new ImageData(T,P,I),0,0)}if(s)if(n.renderer.globalAnimation&&n.hasRendered){let i=Number(s.attr("x")),o=Number(s.attr("y")),a=Number(s.attr("width")),r=Number(s.attr("height")),t=U(z(n.renderer.globalAnimation)),e=t.step;t.step=function(){e&&e.apply(this,arguments),((t,e)=>{e=e.pos;s.attr({x:i+(p-i)*e,y:o+(d-o)*e,width:a+(c-a)*e,height:r+(g-r)*e})}).apply(this,arguments)},s.attr(U({animator:0},this.isDirtyCanvas?{href:y.toDataURL("image/png",1)}:void 0)).animate({animator:1},t)}else O(s),s.attr(U(t,this.isDirtyCanvas?{href:y.toDataURL("image/png",1)}:void 0));else this.image=n.renderer.image(y.toDataURL("image/png",1)).attr(t).add(this.group);this.isDirtyCanvas=!1}}else super.drawPoints.apply(this,arguments)}getProjectedImageData(i,o,t,a,r,s,n){let h=new Uint8ClampedArray(o*t*4),l=H(i.projection.options.rotation?.[0],0),p=r.width/360,d=-1*r.height/180,c=-1;for(let e=0;e<h.length;e+=4){var g,u=e/4%o;0==u&&c++;let t=i.pixelsToLonLat({x:s+u,y:n+c});t&&(t.lon>-180-l&&t.lon<180-l&&(t.lon=x(t.lon)),g=(u=[t.lon,t.lat])[0]*p+r.width/2,u=u[1]*d+r.height/2,0<=g&&g<=r.width&&0<=u&&u<=r.height&&(u=Math.floor(u)*r.width*4+4*Math.round(g),h[e]=a.data[u],h[e+1]=a.data[1+u],h[e+2]=a.data[2+u],h[e+3]=a.data[3+u]))}return h}searchPoint(t,e){let i=this.chart,o=i.mapView;if(o&&this.bounds&&this.image&&i.tooltip&&i.tooltip.options.enabled)if(!i.pointer.hasDragged&&(+this.image.attr("animator")<=.01||.99<=+this.image.attr("animator"))){var a=o.projectedUnitsToPixels({x:this.bounds.x1,y:this.bounds.y2}),r=o.projectedUnitsToPixels({x:this.bounds.x2,y:this.bounds.y1});if(i.pointer.normalize(t),t.lon&&t.lat&&a&&r&&t.chartX-i.plotLeft>a.x&&t.chartX-i.plotLeft<r.x&&t.chartY-i.plotTop>a.y&&t.chartY-i.plotTop<r.y)return this.searchKDTree({clientX:t.chartX,lon:x(t.lon),lat:t.lat},e,t)}else i.tooltip.destroy()}}b.defaultOptions=U(u.defaultOptions,{nullColor:"transparent",tooltip:{pointFormat:"Lat: {point.lat}, Lon: {point.lon}, Value: {point.value}<br/>"},borderWidth:0,colsize:1,rowsize:1,stickyTracking:!0,interpolation:{enabled:!1,blur:1}}),y(b,"afterDataClassLegendClick",function(){this.isDirtyCanvas=!0,this.drawPoints()}),m(b.prototype,{type:"geoheatmap",applyJitter:c,pointClass:h,pointArrayMap:["lon","lat","value"],kdAxisArray:["lon","lat"]}),r().registerSeriesType("geoheatmap",b);let w=e();return t.default})());