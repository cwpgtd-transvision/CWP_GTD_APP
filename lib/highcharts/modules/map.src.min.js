!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(t._Highcharts,t._Highcharts.Axis,t._Highcharts.Color,t._Highcharts.LegendSymbol,t._Highcharts.SeriesRegistry,t._Highcharts.SVGElement,t._Highcharts.Series,t._Highcharts.Chart,t._Highcharts.SVGRenderer,t._Highcharts.Templating,t._Highcharts.Series.types.scatter,t._Highcharts.Point):"function"==typeof define&&define.amd?define("highcharts/modules/map",["highcharts/highcharts"],function(t){return e(t,t.Axis,t.Color,t.LegendSymbol,t.SeriesRegistry,t.SVGElement,t.Series,t.Chart,t.SVGRenderer,t.Templating,t.Series,["types"],["scatter"],t.Point)}):"object"==typeof exports?exports["highcharts/modules/map"]=e(t._Highcharts,t._Highcharts.Axis,t._Highcharts.Color,t._Highcharts.LegendSymbol,t._Highcharts.SeriesRegistry,t._Highcharts.SVGElement,t._Highcharts.Series,t._Highcharts.Chart,t._Highcharts.SVGRenderer,t._Highcharts.Templating,t._Highcharts.Series.types.scatter,t._Highcharts.Point):t.Highcharts=e(t.Highcharts,t.Highcharts.Axis,t.Highcharts.Color,t.Highcharts.LegendSymbol,t.Highcharts.SeriesRegistry,t.Highcharts.SVGElement,t.Highcharts.Series,t.Highcharts.Chart,t.Highcharts.SVGRenderer,t.Highcharts.Templating,t.Highcharts.Series.types.scatter,t.Highcharts.Point)}("undefined"==typeof window?this:window,(os,is,ss,rs,as,ns,ls,hs,cs,ps,ds,us)=>(()=>{"use strict";var D={28:t=>{t.exports=ns},260:t=>{t.exports=us},500:t=>{t.exports=rs},512:t=>{t.exports=as},532:t=>{t.exports=is},540:t=>{t.exports=cs},620:t=>{t.exports=ss},632:t=>{t.exports=ds},820:t=>{t.exports=ls},944:t=>{t.exports=os},960:t=>{t.exports=hs},984:t=>{t.exports=ps}},O={};function i(t){var e=O[t];if(void 0!==e)return e.exports;e=O[t]={exports:{}};return D[t](e,e.exports,i),e.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var o in e)i.o(e,o)&&!i.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var V={},t=(i.d(V,{default:()=>ts}),i(944)),x=i.n(t),t=i(532),t=i.n(t),e=i(620),X=i.n(e);const G=X()["parse"],{addEvent:c,extend:R,merge:Y,pick:H,splat:W}=x();{e=o=o||{};let h;function F(){const t=this["userOptions"];this.colorAxis=[],t.colorAxis&&(t.colorAxis=W(t.colorAxis),t.colorAxis.map(t=>new h(this,t)))}function U(e){const t=this.chart.colorAxis||[],o=t=>{t=e.allItems.indexOf(t);-1!==t&&(this.destroyItem(e.allItems[t]),e.allItems.splice(t,1))};let i=[],s,r;for(t.forEach(function(t){(s=t.options)?.showInLegend&&(s.dataClasses&&s.visible?i=i.concat(t.getDataClassLegendSymbols()):s.visible&&i.push(t),t.series.forEach(function(t){t.options.showInLegend&&!s.dataClasses||("point"===t.options.legendType?t.points.forEach(function(t){o(t)}):o(t))}))}),r=i.length;r--;)e.allItems.unshift(i[r])}function Z(t){t.visible&&t.item.legendColor&&t.item.legendItem.symbol.attr({fill:t.item.legendColor})}function _(e){this.chart.colorAxis?.forEach(t=>{t.update({},e.redraw)})}function q(){(this.chart.colorAxis?.length||this.colorAttribs)&&this.translateColors()}function K(){const t=this.axisTypes;t?-1===t.indexOf("colorAxis")&&t.push("colorAxis"):this.axisTypes=["colorAxis"]}function $(t){const e=this,o=t?"show":"hide";e.visible=e.options.visible=Boolean(t),["graphic","dataLabel"].forEach(function(t){e[t]&&e[t][o]()}),this.series.buildKDTree()}function J(){const o=this,t=this.getPointsCollection(),i=this.options.nullColor,s=this.colorAxis,r=this.colorKey;t.forEach(t=>{var e=t.getNestedProperty(r),e=t.options.color||(t.isNull||null===t.value?i:s&&void 0!==e?s.toColor(e,t):t.color||o.color);e&&t.color!==e&&(t.color=e,"point"===o.options.legendType&&t.legendItem&&t.legendItem.label&&o.chart.legend.colorizeItem(t,t.visible))})}function Q(){this.elem.attr("fill",G(this.start).tweenTo(G(this.end),this.pos),void 0,!0)}function tt(){this.elem.attr("stroke",G(this.start).tweenTo(G(this.end),this.pos),void 0,!0)}e.compose=function(t,e,o,i,s){const r=e.prototype,a=o.prototype,n=s.prototype;if(!r.collectionsWithUpdate.includes("colorAxis")){h=t,r.collectionsWithUpdate.push("colorAxis"),r.collectionsWithInit.colorAxis=[r.addColorAxis],c(e,"afterCreateAxes",F);{o=e;const l=o.prototype.createAxis;o.prototype.createAxis=function(t,e){var o=this;if("colorAxis"!==t)return l.apply(o,arguments);t=new h(o,Y(e.axis,{index:o[t].length,isX:!1}));return o.isDirtyLegend=!0,o.axes.forEach(t=>{t.series=[]}),o.series.forEach(t=>{t.bindAxes(),t.isDirtyData=!0}),H(e.redraw,!0)&&o.redraw(e.animation),t}}a.fillSetter=Q,a.strokeSetter=tt,c(i,"afterGetAllItems",U),c(i,"afterColorizeItem",Z),c(i,"afterUpdate",_),R(n,{optionalAxis:"colorAxis",translateColors:J}),R(n.pointClass.prototype,{setVisible:$}),c(s,"afterTranslate",q,{order:1}),c(s,"bindAxes",K)}},e.pointSetVisible=$}const et=o;e={lineWidth:0,minPadding:0,maxPadding:0,gridLineColor:"#ffffff",gridLineWidth:1,tickPixelInterval:72,startOnTick:!0,endOnTick:!0,offset:0,marker:{animation:{duration:50},width:.01,color:"#999999"},labels:{distance:8,overflow:"justify",rotation:0},minColor:"#e6e9ff",maxColor:"#0022ff",tickLength:5,showInLegend:!0};const ot=X()["parse"],it=x()["merge"];(o=s=s||{}).initDataClasses=function(t){const e=this,o=e.chart,i=e.legendItem=e.legendItem||{},s=e.options,r=t.dataClasses||[];let a,n,l=o.options.chart.colorCount,h=0,c;e.dataClasses=n=[],i.labels=[];for(let t=0,e=r.length;t<e;++t)a=r[t],a=it(a),n.push(a),!o.styledMode&&a.color||("category"===s.dataClassColor?(o.styledMode||(c=o.options.colors||[],l=c.length,a.color=c[h]),a.colorIndex=h,++h===l&&(h=0)):a.color=ot(s.minColor).tweenTo(ot(s.maxColor),e<2?.5:t/(e-1)))},o.initStops=function(){const t=this.options,o=this.stops=t.stops||[[0,t.minColor||""],[1,t.maxColor||""]];for(let t=0,e=o.length;t<e;++t)o[t].color=ot(o[t][1])},o.normalizedValue=function(t){var e=this.max||0,o=this.min||0;return 1-(e-(t=this.logarithmic?this.logarithmic.log2lin(t):t))/(e-o||1)},o.toColor=function(t,e){var o=this.dataClasses,i=this.stops;let s,r,a,n,l,h;if(o){for(h=o.length;h--;)if(l=o[h],r=l.from,a=l.to,(void 0===r||t>=r)&&(void 0===a||t<=a)){n=l.color,e&&(e.dataClass=h,e.colorIndex=l.colorIndex);break}}else{for(s=this.normalizedValue(t),h=i.length;h--&&!(s>i[h][0]););r=i[h]||i[h+1],a=i[h+1]||r,s=1-(a[0]-s)/(a[0]-r[0]||1),n=r.color.tweenTo(a.color,s)}return n};var o=s,s=i(500),st=i.n(s),s=i(512),s=i.n(s);const rt=x()["defaultOptions"],at=s()["series"],{defined:nt,extend:lt,fireEvent:ht,isArray:ct,isNumber:pt,merge:dt,pick:u,relativeLength:ut}=x();rt.colorAxis=dt(rt.xAxis,e);class r extends t(){static compose(t,e,o,i){et.compose(r,t,e,o,i)}constructor(t,e){super(t,e),this.coll="colorAxis",this.visible=!0,this.init(t,e)}init(t,e){var o=this,i=t.options.legend||{},i=e.layout?"vertical"!==e.layout:"vertical"!==i.layout;o.side=e.side||i?2:1,o.reversed=e.reversed||!i,o.opposite=!i,super.init(t,e,"colorAxis"),this.userOptions=e,ct(t.userOptions.colorAxis)&&(t.userOptions.colorAxis[this.index]=e),e.dataClasses&&o.initDataClasses(e),o.initStops(),o.horiz=i,o.zoomEnabled=!1}hasData(){return!!(this.tickPositions||[]).length}setTickPositions(){if(!this.dataClasses)return super.setTickPositions()}setOptions(t){t=dt(rt.colorAxis,t,{showEmpty:!1,title:null,visible:this.chart.options.legend.enabled&&!1!==t.visible});super.setOptions(t),this.options.crosshair=this.options.marker}setAxisSize(){const t=this.chart,e=this.legendItem?.symbol;let{width:o,height:i}=this.getSize();e&&(this.left=+e.attr("x"),this.top=+e.attr("y"),this.width=o=+e.attr("width"),this.height=i=+e.attr("height"),this.right=t.chartWidth-this.left-o,this.bottom=t.chartHeight-this.top-i,this.pos=this.horiz?this.left:this.top),this.len=(this.horiz?o:i)||r.defaultLegendLength}getOffset(){var t=this,e=t.legendItem?.group,o=t.chart.axisOffset[t.side];if(e){t.axisParent=e,super.getOffset();const i=this.chart.legend;i.allItems.forEach(function(t){t instanceof r&&t.drawLegendSymbol(i,t)}),i.render(),this.chart.getMargins(!0),this.chart.series.some(t=>t.isDrilling)||(t.isDirty=!0),t.added||(t.added=!0,t.labelLeft=0,t.labelRight=t.width),t.chart.axisOffset[t.side]=o}}setLegendColor(){var t=this.horiz,e=this.reversed,o=e?1:0,e=e?0:1,t=t?[o,0,e,0]:[0,e,0,o];this.legendColor={linearGradient:{x1:t[0],y1:t[1],x2:t[2],y2:t[3]},stops:this.stops}}drawLegendSymbol(t,e){const o=e.legendItem||{},i=t.padding,s=t.options,r=this.options.labels,a=u(s.itemDistance,10),n=this.horiz,{width:l,height:h}=this.getSize(),c=u(s.labelPadding,n?16:30);this.setLegendColor(),o.symbol||(o.symbol=this.chart.renderer.symbol("roundedRect").attr({r:s.symbolRadius??3,zIndex:1}).add(o.group)),o.symbol.attr({x:0,y:(t.baseline||0)-11,width:l,height:h}),o.labelWidth=l+i+(n?a:u(r.x,r.distance)+(this.maxLabelLength||0)),o.labelHeight=h+i+(n?c:0)}setState(e){this.series.forEach(function(t){t.setState(e)})}setVisible(){}getSeriesExtremes(){var t,e=this.series;let o,i,s,r,a=e.length;for(this.dataMin=1/0,this.dataMax=-1/0;a--;){i=(r=e[a]).colorKey=u(r.options.colorKey,r.colorKey,r.pointValKey,r.zoneAxis,"y"),s=r[i+"Min"]&&r[i+"Max"];for(const n of[i,"value","y"])if((o=r.getColumn(n)).length)break;s?(r.minColorValue=r[i+"Min"],r.maxColorValue=r[i+"Max"]):(t=at.prototype.getExtremes.call(r,o),r.minColorValue=t.dataMin,r.maxColorValue=t.dataMax),nt(r.minColorValue)&&nt(r.maxColorValue)&&(this.dataMin=Math.min(this.dataMin,r.minColorValue),this.dataMax=Math.max(this.dataMax,r.maxColorValue)),s||at.prototype.applyExtremes.call(r)}}drawCrosshair(t,e){var o=this,i=o.legendItem||{},s=e?.plotX,r=e?.plotY,a=o.pos,n=o.len;let l;e&&((l=o.toPixels(e.getNestedProperty(e.series.colorKey)))<a?l=a-2:l>a+n&&(l=a+n+2),e.plotX=l,e.plotY=o.len-l,super.drawCrosshair(t,e),e.plotX=s,e.plotY=r,o.cross&&!o.cross.addedToColorAxis&&i.group&&(o.cross.addClass("highcharts-coloraxis-marker").add(i.group),o.cross.addedToColorAxis=!0,o.chart.styledMode||"object"!=typeof o.crosshair||o.cross.attr({fill:o.crosshair.color})))}getPlotLinePath(t){var e=this.left,o=t.translatedValue,i=this.top;return pt(o)?this.horiz?[["M",o-4,i-6],["L",o+4,i-6],["L",o,i],["Z"]]:[["M",e,o],["L",e-6,o+6],["L",e-6,o-6],["Z"]]:super.getPlotLinePath(t)}update(t,e){const o=this,i=o.chart,s=i.legend;this.series.forEach(t=>{t.isDirtyData=!0}),(t.dataClasses&&s.allItems||o.dataClasses)&&o.destroyItems(),super.update(t,e),o.legendItem?.label&&(o.setLegendColor(),s.colorizeItem(this,!0))}destroyItems(){const t=this.chart,e=this.legendItem||{};if(e.label)t.legend.destroyItem(this);else if(e.labels)for(const o of e.labels)t.legend.destroyItem(o);t.isDirtyLegend=!0}destroy(){this.chart.isDirtyLegend=!0,this.destroyItems(),super.destroy(...[].slice.call(arguments))}remove(t){this.destroyItems(),super.remove(t)}getDataClassLegendSymbols(){const a=this,n=a.chart,l=a.legendItem&&a.legendItem.labels||[],t=n.options.legend,h=u(t.valueDecimals,-1),c=u(t.valueSuffix,""),p=o=>a.series.reduce((t,e)=>(t.push(...e.points.filter(t=>t.dataClass===o)),t),[]);let d;return l.length||a.dataClasses.forEach((t,o)=>{const e=t.from,i=t.to,s=n["numberFormatter"];let r=!0;d="",void 0===e?d="< ":void 0===i&&(d="> "),void 0!==e&&(d+=s(e,h)+c),void 0!==e&&void 0!==i&&(d+=" - "),void 0!==i&&(d+=s(i,h)+c),l.push(lt({chart:n,name:d,options:{},drawLegendSymbol:st().rectangle,visible:!0,isDataClass:!0,setState:t=>{for(const e of p(o))e.setState(t)},setVisible:function(){this.visible=r=a.visible=!r;const t=[];for(const e of p(o))e.setVisible(r),e.hiddenInDataClass=!r,-1===t.indexOf(e.series)&&t.push(e.series);n.legend.colorizeItem(this,r),t.forEach(t=>{ht(t,"afterDataClassLegendClick")})}},t))}),l}getSize(){var{chart:t,horiz:e}=this,{height:o,width:i}=this.options,s=t.options["legend"];return{width:u(nt(i)?ut(i,t.chartWidth):void 0,s?.symbolWidth,e?r.defaultLegendLength:12),height:u(nt(o)?ut(o,t.chartHeight):void 0,s?.symbolHeight,e?12:r.defaultLegendLength)}}}r.defaultLegendLength=200,r.keepProps=["legendItem"],lt(r.prototype,o),Array.prototype.push.apply(t().keepProps,r.keepProps);e=r;const a=x();a.ColorAxis=a.ColorAxis||e,a.ColorAxis.compose(a.Chart,a.Fx,a.Legend,a.Series);const mt={lang:{zoomIn:"Zoom in",zoomOut:"Zoom out"},mapNavigation:{buttonOptions:{alignTo:"plotBox",align:"left",verticalAlign:"top",x:0,width:18,height:18,padding:5,style:{color:"#666666",fontSize:"1em",fontWeight:"bold"},theme:{fill:"#ffffff",stroke:"#e6e6e6","stroke-width":1,"text-align":"center"}},buttons:{zoomIn:{onclick:function(){this.mapZoom(.5)},text:"+",y:0},zoomOut:{onclick:function(){this.mapZoom(2)},text:"-",y:28}},mouseWheelSensitivity:1.1}},{defined:gt,extend:ft,pick:yt,wrap:bt}=x();{o=h=h||{};let i=0,s;function xt(t){const e=this.chart;t=this.normalize(t),e.options.mapNavigation.enableDoubleClickZoomTo?e.pointer.inClass(t.target,"highcharts-tracker")&&e.hoverPoint&&e.hoverPoint.zoomTo():e.isInsidePlot(t.chartX-e.plotLeft,t.chartY-e.plotTop)&&e.mapZoom(.5,void 0,void 0,t.chartX,t.chartY)}function vt(t){const e=this.chart;t=this.normalize(t);var o=gt(t.wheelDelta)&&-t.wheelDelta/120||t.deltaY||t.detail;1<=Math.abs(o)&&(i+=Math.abs(o),s&&clearTimeout(s),s=setTimeout(()=>{i=0},50)),i<10&&e.isInsidePlot(t.chartX-e.plotLeft,t.chartY-e.plotTop)&&e.mapView&&e.mapView.zoomBy((e.options.mapNavigation.mouseWheelSensitivity-1)*-o,void 0,[t.chartX,t.chartY],!(Math.abs(o)<1)&&void 0)}function Mt(t,e,o){const i=this.chart;return e=t.call(this,e,o),i&&i.mapView&&((t=i.mapView.pixelsToLonLat({x:e.chartX-i.plotLeft,y:e.chartY-i.plotTop}))&&ft(e,t)),e}function wt(t){var e=this.chart.options.mapNavigation;e&&yt(e.enableTouchZoom,e.enabled)&&(this.chart.zooming.pinchType="xy"),t.apply(this,[].slice.call(arguments,1))}o.compose=function(t){(t=t.prototype).onContainerDblClick||(ft(t,{onContainerDblClick:xt,onContainerMouseWheel:vt}),bt(t,"normalize",Mt),bt(t,"zoomOption",wt))}}const Ct=h;let Pt;function Lt(t,e,o,i,s){var r;return s&&(r=s?.r||0,s.brBoxY=e-r,s.brBoxHeight=i+r),Pt.roundedRect(t,e,o,i,s)}function Tt(t,e,o,i,s){var r;return s&&(r=s?.r||0,s.brBoxHeight=i+r),Pt.roundedRect(t,e,o,i,s)}const At={compose:function(t){(Pt=t.prototype.symbols).bottombutton=Lt,Pt.topbutton=Tt}},jt=x()["setOptions"],zt=x()["composed"],{addEvent:f,extend:kt,merge:St,objectEach:It,pick:Bt,pushUnique:Et}=x();function Dt(t){t&&(t.preventDefault?.(),t.stopPropagation?.(),t.cancelBubble=!0)}const Ot=class es{static compose(t,e,o){Ct.compose(e),At.compose(o),Et(zt,"Map.Navigation")&&(f(t,"beforeRender",function(){this.mapNavigation=new es(this),this.mapNavigation.update()}),jt(mt))}constructor(t){this.chart=t,this.navButtons=[]}update(t){function p(t){this.handler.call(u,t),Dt(t)}const d=this,u=d.chart,m=d.navButtons;let g=u.options.mapNavigation;for(t&&(g=u.options.mapNavigation=St(u.options.mapNavigation,t));m.length;)m.pop()?.destroy();if(!u.renderer.forExport&&Bt(g.enableButtons,g.enabled)){d.navButtonsGroup||(d.navButtonsGroup=u.renderer.g().attr({zIndex:7}).add()),It(g.buttons,(t,e)=>{const o={padding:(t=St(g.buttonOptions,t)).padding};!u.styledMode&&t.theme&&(kt(o,t.theme),o.style=St(t.theme.style,t.style));var{text:i,width:s=0,height:r=0,padding:a=0}=t;const n=u.renderer.button("+"!==i&&"-"!==i&&i||"",0,0,p,o,void 0,void 0,void 0,"zoomIn"===e?"topbutton":"bottombutton").addClass("highcharts-map-navigation highcharts-"+{zoomIn:"zoom-in",zoomOut:"zoom-out"}[e]).attr({width:s,height:r,title:u.options.lang[e],zIndex:5}).add(d.navButtonsGroup);if("+"===i||"-"===i){const l=s+1,h=[["M",a+3,a+r/2],["L",a+l-3,a+r/2]];"+"===i&&h.push(["M",a+l/2,a+3],["L",a+l/2,a+r-3]),u.renderer.path(h).addClass("highcharts-button-symbol").attr(u.styledMode?{}:{stroke:t.style?.color,"stroke-width":3,"stroke-linecap":"round"}).add(n)}if(n.handler=t.onclick,f(n.element,"dblclick",Dt),m.push(n),kt(t,{width:n.width,height:2*(n.height||0)}),u.hasLoaded)n.align(t,!1,t.alignTo);else{const c=f(u,"load",()=>{n.element&&n.align(t,!1,t.alignTo),c()})}});const i=(t,e)=>!(e.x>=t.x+t.width||e.x+e.width<=t.x||e.y>=t.y+t.height||e.y+e.height<=t.y);u.hasLoaded||f(u,"render",function(){var t,e,o=u.exporting?.group?.getBBox();o&&(e=d.navButtonsGroup.getBBox(),i(o,e)&&(t=-e.y-e.height+o.y-5,o=o.y+o.height-e.y+5,e=g.buttonOptions&&g.buttonOptions.verticalAlign,d.navButtonsGroup.attr({translateY:"bottom"===e?t:o})))})}this.updateEvents(g)}updateEvents(t){const o=this.chart;Bt(t.enableDoubleClickZoom,t.enabled)||t.enableDoubleClickZoomTo?this.unbindDblClick=this.unbindDblClick||f(o.container,"dblclick",function(t){o.pointer.onContainerDblClick(t)}):this.unbindDblClick&&(this.unbindDblClick=this.unbindDblClick()),Bt(t.enableMouseWheelZoom,t.enabled)?this.unbindMouseWheel=this.unbindMouseWheel||f(o.container,"wheel",function(t){var e;return o.pointer.inClass(t.target,"highcharts-no-mousewheel")||(e=o.mapView?.zoom,o.pointer.onContainerMouseWheel(t),e!==o.mapView?.zoom&&Dt(t)),!1}):this.unbindMouseWheel&&(this.unbindMouseWheel=this.unbindMouseWheel())}};var t=i(28),Vt=i.n(t);const Xt=s().seriesTypes["column"]["prototype"],{addEvent:Nt,defined:Gt}=x();function Rt(t){const e=this,o=e.series,i=o.chart.renderer;e.moveToTopOnHover&&e.graphic&&(o.stateMarkerGraphic||(o.stateMarkerGraphic=new(Vt())(i,"use").css({pointerEvents:"none"}).add(e.graphic.parentGroup)),"hover"===t?.state?(e.graphic.attr({id:this.id}),o.stateMarkerGraphic.attr({href:i.url+"#"+this.id,visibility:"visible"})):o.stateMarkerGraphic.attr({href:""}))}(e=l=l||{}).pointMembers={dataLabelOnNull:!0,moveToTopOnHover:!0,isValid:function(){return null!==this.value&&this.value!==1/0&&this.value!==-1/0&&(void 0===this.value||!isNaN(this.value))}},e.seriesMembers={colorKey:"value",axisTypes:["xAxis","yAxis","colorAxis"],parallelArrays:["x","y","value"],pointArrayMap:["value"],trackerGroups:["group","markerGroup","dataLabelsGroup"],colorAttribs:function(t){const e={};!Gt(t.color)||t.state&&"normal"!==t.state||(e[this.colorProp||"fill"]=t.color);return e},pointAttribs:Xt.pointAttribs},e.compose=function(t){var e=t.prototype.pointClass;return Nt(e,"afterSetState",Rt),t};const n=l;var o=i(820),Yt=i.n(o);const Ht=x()["deg2rad"],{fireEvent:Wt,isNumber:Ft,pick:Ut,relativeLength:Zt}=x();(h=p=p||{}).getCenter=function(){var t=this.options,e=this.chart,o=2*(t.slicedOffset||0),i=e.plotWidth-2*o,s=e.plotHeight-2*o,r=t.center,a=Math.min(i,s),n=t.thickness;let l,h=t.size,c=t.innerSize||0,p,d;"string"==typeof h&&(h=parseFloat(h)),"string"==typeof c&&(c=parseFloat(c));const u=[Ut(r?.[0],"50%"),Ut(r?.[1],"50%"),Ut(h&&h<0?void 0:t.size,"100%"),Ut(c&&c<0?void 0:t.innerSize||0,"0%")];for(!e.angular||this instanceof Yt()||(u[3]=0),p=0;p<4;++p)d=u[p],l=p<2||2===p&&/%$/.test(d),u[p]=Zt(d,[i,s,a,u[2]][p])+(l?o:0);return u[3]>u[2]&&(u[3]=u[2]),Ft(n)&&2*n<u[2]&&0<n&&(u[3]=u[2]-2*n),Wt(this,"afterGetCenter",{positions:u}),u},h.getStartAndEndRadians=function(t,e){return t=Ft(t)?t:0,e=Ft(e)&&t<e&&e-t<360?e:t+360,{start:Ht*(t+-90),end:Ht*(e+-90)}};var _t,t=p,e=i(960),l=i.n(e),o=i(540),qt=i.n(o);const Kt=x()["getOptions"],{isNumber:$t,merge:Jt,pick:Qt}=x();class te extends l(){init(t,e){var o=Kt().credits,o=Jt({chart:{panning:{enabled:!0,type:"xy"},type:"map"},credits:{mapText:Qt(o.mapText,' Â© <a href="{geojson.copyrightUrl}">{geojson.copyrightShort}</a>'),mapTextFull:Qt(o.mapTextFull,"{geojson.copyright}")},mapView:{},tooltip:{followTouchMove:!1}},t);super.init(o,e)}mapZoom(t,e,o,i,s){this.mapView&&($t(t)&&(t=Math.log(t)/Math.log(.5)),this.mapView.zoomBy(t,$t(e)&&$t(o)?this.mapView.projection.inverse([e,o]):void 0,$t(i)&&$t(s)?[i,s]:void 0))}update(t){t.chart&&"map"in t.chart&&this.mapView?.recommendMapView(this,[t.chart.map,...(this.options.series||[]).map(t=>t.mapData)],!0),super.update.apply(this,arguments)}}(_t=te=te||{}).maps={},_t.mapChart=function(t,e,o){return new _t(t,e,o)},_t.splitPath=function(t){let e;if("string"==typeof t){const o=(t=t.replace(/([A-Z])/gi," $1 ").replace(/^\s*/,"").replace(/\s*$/,"")).split(/[ ,;]+/);e=o.map(t=>/[A-Z]/i.test(t)?t:parseFloat(t))}else e=t;return qt().prototype.pathToSegments(e)};var h=te,p={boundsFromPath:function(t){let o=-Number.MAX_VALUE,i=Number.MAX_VALUE,s=-Number.MAX_VALUE,r=Number.MAX_VALUE,a;if(t.forEach(t=>{var e=t[t.length-2],t=t[t.length-1];"number"==typeof e&&"number"==typeof t&&(i=Math.min(i,e),o=Math.max(o,e),r=Math.min(r,t),s=Math.max(s,t),a=!0)}),a)return{x1:i,y1:r,x2:o,y2:s}}};const ee=p["boundsFromPath"];e=s().seriesTypes.scatter.prototype.pointClass;const{extend:oe,isNumber:ie,pick:se}=x();class re extends e{static getProjectedPath(t,e){return t.projectedPath||(e&&t.geometry?(e.hasCoordinates=!0,t.projectedPath=e.path(t.geometry)):t.projectedPath=t.path),t.projectedPath||[]}applyOptions(t,e){const o=this.series,i=super.applyOptions(t,e),s=o.joinBy;return o.mapData&&o.mapMap&&(t=s[1],(t=void 0!==(e=super.getNestedProperty(t))&&o.mapMap[e])?oe(i,{...t,name:i.name??t.name}):-1!==o.pointArrayMap.indexOf("value")&&(i.value=i.value||null)),i}getProjectedBounds(t){const e=re.getProjectedPath(this,t),o=ee(e),i=this.properties,s=this.series.chart.mapView;if(o){var r=i?.["hc-middle-lon"],a=i?.["hc-middle-lat"];if(s&&ie(r)&&ie(a)){t=t.forward([r,a]);o.midX=t[0],o.midY=t[1]}else{r=i?.["hc-middle-x"],a=i?.["hc-middle-y"];o.midX=o.x1+(o.x2-o.x1)*se(this.middleX,ie(r)?r:.5);let t=se(this.middleY,ie(a)?a:.5);this.geometry||(t=1-t),o.midY=o.y2-(o.y2-o.y1)*t}return o}}onMouseOver(t){x().clearTimeout(this.colorInterval),!this.isNull&&this.visible||this.series.options.nullInteraction?super.onMouseOver.call(this,t):this.series.onMouseOut()}setVisible(t){var e=t?"show":"hide";this.visible=this.options.visible=!!t,this.dataLabel&&this.dataLabel[e](),this.graphic&&this.graphic.attr(this.series.pointAttribs(this))}zoomTo(t){const e=this,o=e.series.chart,i=o.mapView;let s=e.bounds;if(i&&s){const n=ie(e.insetIndex)&&i.insets[e.insetIndex];var r,a;n&&(r=n.projectedUnitsToPixels({x:s.x1,y:s.y1}),a=n.projectedUnitsToPixels({x:s.x2,y:s.y2}),r=i.pixelsToProjectedUnits({x:r.x,y:r.y}),a=i.pixelsToProjectedUnits({x:a.x,y:a.y}),s={x1:r.x,y1:r.y,x2:a.x,y2:a.y}),i.fitToBounds(s,void 0,!1),e.series.isDirty=!0,o.redraw(t)}}}oe(re.prototype,{dataLabelOnNull:n.pointMembers.dataLabelOnNull,moveToTopOnHover:n.pointMembers.moveToTopOnHover,isValid:n.pointMembers.isValid});const ae=re,ne=x()["isNumber"];o={affectsMapView:!0,animation:!1,dataLabels:{crop:!1,formatter:function(){const t=this.series.chart["numberFormatter"];var e=this.point["value"];return ne(e)?t(e,-1):this.point.name||""},inside:!0,overflow:!1,padding:0,verticalAlign:"middle"},linecap:"round",marker:null,nullColor:"#f7f7f7",stickyTracking:!1,tooltip:{followPointer:!0,pointFormat:"{point.name}: {point.value}<br/>"},turboThreshold:0,allAreas:!0,borderColor:"#e6e6e6",borderWidth:1,joinBy:"hc-key",states:{hover:{halo:void 0,borderColor:"#666666",borderWidth:2},normal:{animation:!0},select:{color:"#cccccc"}},legendSymbol:"rectangle"};const le={center:[0,0],fitToGeometry:void 0,maxZoom:void 0,padding:0,projection:{name:void 0,parallels:void 0,rotation:void 0},zoom:void 0,insetOptions:{borderColor:"#cccccc",borderWidth:1,padding:"10%",relativeTo:"mapBoundingBox",units:"percent"}};var l=i(984),he=i.n(l);const ce=x()["win"],pe=he()["format"],{error:de,extend:ue,merge:me,wrap:ge}=x();function fe(t){return this.mapView&&this.mapView.lonLatToProjectedUnits(t)}function ye(t){return this.mapView&&this.mapView.projectedUnitsToLonLat(t)}function be(t,e){const o=this.options.chart.proj4||ce.proj4;var i,s,r,a,n,l,h,c,p,d;{if(o)return{jsonmarginX:i=0,jsonmarginY:s=0,jsonres:r=1,scale:a=1,xoffset:n=0,xpan:l=0,yoffset:h=0,ypan:c=0}=e,t=o(e.crs,[t.lon,t.lat]),p=e.cosAngle||e.rotation&&Math.cos(e.rotation),d=e.sinAngle||e.rotation&&Math.sin(e.rotation),{x:(((e=e.rotation?[t[0]*p+t[1]*d,-t[0]*d+t[1]*p]:t)[0]-n)*a+l)*r+i,y:-(((h-e[1])*a+c)*r-s)};de(21,!1,this)}}function xe(t,e){const o=this.options.chart.proj4||ce.proj4;var i,s,r,a,n,l,h,c;if(o){if(null!==t.y)return{jsonmarginX:l=0,jsonmarginY:i=0,jsonres:s=1,scale:r=1,xoffset:c=0,xpan:h=0,yoffset:a=0,ypan:n=0}=e,l={x:((t.x-l)/s-h)/r+c,y:((t.y-i)/s+n)/r+a},h=e.cosAngle||e.rotation&&Math.cos(e.rotation),c=e.sinAngle||e.rotation&&Math.sin(e.rotation),{lat:(t=o(e.crs,"WGS84",e.rotation?{x:l.x*h+l.y*-c,y:l.x*c+l.y*h}:l)).y,lon:t.x}}else de(21,!1,this)}function ve(t,e){e=e||Object.keys(t.objects)[0];const o=t.objects[e];if(o["hc-decoded-geojson"]&&o["hc-decoded-geojson"].title===t.title)return o["hc-decoded-geojson"];let r=t.arcs;if(t.transform){var a=t.arcs,{scale:n,translate:l}=t.transform;let o,i,s;r=[];for(let t=0,e=a.length;t<e;++t){var h=a[t];r.push(o=[]),i=0;for(let t=s=0,e=h.length;t<e;++t)o.push([(i+=h[t][0])*n[0]+l[0],(s+=h[t][1])*n[1]+l[1]])}}const i=t=>"number"==typeof t[0]?t.reduce((t,e,o)=>{let i=e<0?r[~e]:r[e];return e<0?(i=i.slice(0,0===o?i.length:i.length-1)).reverse():o&&(i=i.slice(1)),t.concat(i)},[]):t.map(i),s=o.geometries,c=[];for(let t=0,e=s.length;t<e;++t)c.push({type:"Feature",properties:s[t].properties,geometry:{type:s[t].type,coordinates:s[t].coordinates||i(s[t].arcs)}});e={type:"FeatureCollection",copyright:t.copyright,copyrightShort:t.copyrightShort,copyrightUrl:t.copyrightUrl,features:c,"hc-recommended-mapview":o["hc-recommended-mapview"],bbox:t.bbox,title:t.title};return o["hc-decoded-geojson"]=e}function Me(t,e){e=me(!0,this.options.credits,e),t.call(this,e),this.credits&&this.mapCreditsFull&&this.credits.attr({title:this.mapCreditsFull})}(e=d=d||{}).compose=function(t){const e=t.prototype;e.transformFromLatLon||(e.fromLatLonToPoint=fe,e.fromPointToLatLon=ye,e.transformFromLatLon=be,e.transformToLatLon=xe,ge(e,"addCredits",Me))},e.geojson=function(t,o="map",e){const i=[];var s=(t="Topology"===t.type?ve(t):t).features;for(let e=0,t=s.length;e<t;++e){var r,a=s[e],n=a.geometry||{},l=n.type,n=n.coordinates,a=a.properties;let t;("map"!==o&&"mapbubble"!==o||"Polygon"!==l&&"MultiPolygon"!==l)&&("mapline"!==o||"LineString"!==l&&"MultiLineString"!==l)?"mappoint"===o&&"Point"===l&&n.length&&(t={geometry:{coordinates:n,type:l}}):n.length&&(t={geometry:{coordinates:n,type:l}}),t&&(n=a&&(a.name||a.NAME),l=a&&a.lon,r=a&&a.lat,i.push(ue(t,{lat:"number"==typeof r?r:void 0,lon:"number"==typeof l?l:void 0,name:"string"==typeof n?n:void 0,properties:a})))}return e&&t.copyrightShort&&(e.chart.mapCredits=pe(e.chart.options.credits?.mapText,{geojson:t}),e.chart.mapCreditsFull=pe(e.chart.options.credits?.mapTextFull,{geojson:t})),i},e.topo2geo=ve;const we=d;(l=y=y||{}).getCenterOfPoints=function(t){var e=t.reduce((t,e)=>(t.x+=e.x,t.y+=e.y,t),{x:0,y:0});return{x:e.x/t.length,y:e.y/t.length}},l.getDistanceBetweenPoints=function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},l.getAngleBetweenPoints=function(t,e){return Math.atan2(e.x-t.x,e.y-t.y)},l.pointInPolygon=function({x:t,y:e},o){var i=o.length;let s,r,a=!1;for(s=0,r=i-1;s<i;r=s++){var[n,l]=o[s],[h,c]=o[r];e<l!=e<c&&t<(h-n)*(e-l)/(c-l)+n&&(a=!a)}return a};e=y;function Ce(t,e,o=!0){let i=e[e.length-1],s,r,a,n=t;for(let t=0;t<e.length;t++){var l=n;s=e[t],n=[],r=o?l[l.length-1]:l[0];for(let t=0;t<l.length;t++)a=l[t],Pe(i,s,a)?(Pe(i,s,r)||n.push(Le(i,s,r,a)),n.push(a)):Pe(i,s,r)&&n.push(Le(i,s,r,a)),r=a;i=s}return n}function Pe(t,e,o){return(e[0]-t[0])*(o[1]-t[1])>(e[1]-t[1])*(o[0]-t[0])}function Le(t,e,o,i){const s=[t[0]-e[0],t[1]-e[1]],r=[o[0]-i[0],o[1]-i[1]],a=t[0]*e[1]-t[1]*e[0],n=o[0]*i[1]-o[1]*i[0],l=1/(s[0]*r[1]-s[1]*r[0]),h=[(a*r[0]-n*s[0])*l,(a*r[1]-n*s[1])*l];return h.isIntersection=!0,h}var d={clipLineString:function(t,e){const o=[],i=Ce(t,e,!1);for(let t=1;t<i.length;t++)i[t].isIntersection&&i[t-1].isIntersection&&(o.push(i.splice(0,t)),t=0),t===i.length-1&&o.push(i);return o},clipPolygon:Ce};const Te=Math.sign||(t=>0===t?0:0<t?1:-1),Ae=63.78137,je=Math.PI/180,m=Math.PI/2,ze=t=>Math.tan((m+t)/2);l=class{constructor(t){var e=(t.parallels||[]).map(t=>t*je),o=e[0]||0,e=e[1]??o,i=Math.cos(o);"object"==typeof t.projectedBounds&&(this.projectedBounds=t.projectedBounds);let s=o===e?Math.sin(o):Math.log(i/Math.cos(e))/Math.log(ze(e)/ze(o));Math.abs(s)<1e-10&&(s=1e-10*(Te(s)||1)),this.n=s,this.c=i*Math.pow(ze(o),s)/s}forward(t){var{c:e,n:o,projectedBounds:i}=this,s=t[0]*je;let r=t[1]*je;0<e?r<1e-6-m&&(r=1e-6-m):r>m-1e-6&&(r=m-1e-6);const a=e/Math.pow(ze(r),o),n=a*Math.sin(o*s)*Ae,l=(e-a*Math.cos(o*s))*Ae,h=[n,l];return i&&(n<i.x1||n>i.x2||l<i.y1||l>i.y2)&&(h.outside=!0),h}inverse(t){var{c:e,n:o}=this,i=t[0]/Ae,t=e-t[1]/Ae,s=Te(o)*Math.sqrt(i*i+t*t);let r=Math.atan2(i,Math.abs(t))*Te(t);return t*o<0&&(r-=Math.PI*Te(i)*Te(t)),[r/o/je,(2*Math.atan(Math.pow(e/s,1/o))-m)/je]}};const ke=1.340264,Se=-.081106,Ie=893e-6,Be=.003796,Ee=Math.sqrt(3)/2,De=74.03120656864502;const Oe=Math.PI/4,Ve=Math.PI/180,Xe=63.78137;const Ne=Math.PI/180,g=63.78460826781007;const Ge=63.78137,Re=Math.PI/180;var y={EqualEarth:class{constructor(){this.bounds={x1:-200.37508342789243,x2:200.37508342789243,y1:-97.52595454902263,y2:97.52595454902263}}forward(t){var e=Math.PI/180,o=Math.asin(Ee*Math.sin(t[1]*e)),i=o*o,s=i*i*i;return[t[0]*e*Math.cos(o)*De/(Ee*(ke+3*Se*i+s*(7*Ie+9*Be*i))),o*De*(ke+Se*i+s*(Ie+Be*i))]}inverse(t){var e=t[0]/De,o=t[1]/De,t=180/Math.PI;let i=o,s,r,a,n,l;for(let t=0;t<12&&(s=i*i,r=s*s*s,a=i*(ke+Se*s+r*(Ie+Be*s))-o,n=ke+3*Se*s+r*(7*Ie+9*Be*s),i-=l=a/n,!(Math.abs(l)<1e-9));++t);s=i*i,r=s*s*s;e=t*Ee*e*(ke+3*Se*s+r*(7*Ie+9*Be*s))/Math.cos(i),t*=Math.asin(Math.sin(i)/Ee);return 180<Math.abs(e)?[NaN,NaN]:[e,t]}},LambertConformalConic:l,Miller:class{constructor(){this.bounds={x1:-200.37508342789243,x2:200.37508342789243,y1:-146.91480769173063,y2:146.91480769173063}}forward(t){return[t[0]*Ve*Xe,1.25*Xe*Math.log(Math.tan(Oe+.4*t[1]*Ve))]}inverse(t){return[t[0]/Xe/Ve,2.5*(Math.atan(Math.exp(t[1]/Xe*.8))-Oe)/Ve]}},Orthographic:class{constructor(){this.antimeridianCutting=!1,this.bounds={x1:-g,x2:g,y1:-g,y2:g}}forward(t){const e=t[0],o=t[1],i=o*Ne,s=[Math.cos(i)*Math.sin(e*Ne)*g,Math.sin(i)*g];return(e<-90||90<e)&&(s.outside=!0),s}inverse(t){var e=t[0]/g,t=t[1]/g,o=Math.sqrt(e*e+t*t),i=Math.asin(o),s=Math.sin(i),i=Math.cos(i);return[Math.atan2(e*s,o*i)/Ne,Math.asin(o&&t*s/o)/Ne]}},WebMercator:class{constructor(){this.bounds={x1:-200.37508342789243,x2:200.37508342789243,y1:-200.3750834278071,y2:200.3750834278071},this.maxLatitude=85.0511287798}forward(t){const e=Math.sin(t[1]*Re),o=[Ge*t[0]*Re,Ge*Math.log((1+e)/(1-e))/2];return Math.abs(t[1])>this.maxLatitude&&(o.outside=!0),o}inverse(t){return[t[0]/(Ge*Re),(2*Math.atan(Math.exp(t[1]/Ge))-Math.PI/2)/Re]}}};const{clipLineString:Ye,clipPolygon:He}=d,{clamp:We,erase:Fe}=x(),z=2*Math.PI/360,w=1e-6,C=t=>(t<-180&&(t+=360),180<t&&(t-=360),t),Ue=t=>(1-Math.cos(t))/2;class k{static add(t,e){k.registry[t]=e}static distance(t,e){const{atan2:o,sqrt:i}=Math,s=((t,e)=>{const o=Math.cos,i=t[1]*z,s=t[0]*z,r=e[1]*z,a=e[0]*z,n=r-i,l=a-s,h=Ue(n)+o(i)*o(r)*Ue(l);return h})(t,e),r=2*o(i(s),i(1-s)),a=6371e3*r;return a}static geodesic(t,e,o,i=5e5){const{atan2:s,cos:r,sin:a,sqrt:n}=Math,l=k.distance,h=t[1]*z,c=t[0]*z,p=e[1]*z,d=e[0]*z,u=r(h)*r(c),m=r(p)*r(d),g=r(h)*a(c),f=r(p)*a(d),y=a(h),b=a(p),x=l(t,e),v=x/6371e3,M=a(v),w=Math.round(x/i),C=[];if(o&&C.push(t),1<w){var P=1/w;for(let t=P;t<.999;t+=P){var L=a((1-t)*v)/M,T=a(t*v)/M,A=L*u+T*m,j=L*g+T*f,L=s(L*y+T*b,n(A*A+j*j)),T=s(j,A);C.push([T/z,L/z])}}return o&&C.push(e),C}static insertGeodesics(t){let e=t.length-1;for(;e--;){var o;10<Math.max(Math.abs(t[e][0]-t[e+1][0]),Math.abs(t[e][1]-t[e+1][1]))&&((o=k.geodesic(t[e],t[e+1])).length&&t.splice(e+1,0,...o))}}static toString(t){const{name:e,rotation:o}=t||{};return[e,o&&o.join(",")].join(";")}constructor(t={}){this.hasCoordinates=!1,this.hasGeoProjection=!1,this.maxLatitude=90;var{name:e,projectedBounds:o,rotation:i}=this.options=t;this.rotator=i?this.getRotator(i):void 0;const s=e?k.registry[e]:void 0,{def:r,rotator:a}=(s&&(this.def=new s(t)),this);r&&(this.maxLatitude=r.maxLatitude||90,this.hasGeoProjection=!0),a&&r?(this.forward=t=>r.forward(a.forward(t)),this.inverse=t=>a.inverse(r.inverse(t))):r?(this.forward=t=>r.forward(t),this.inverse=t=>r.inverse(t)):a&&(this.forward=a.forward,this.inverse=a.inverse),this.bounds="world"===o?r&&r.bounds:o}lineIntersectsBounds(t){var{x1:e,x2:o,y1:i,y2:s}=this.bounds||{},r=(t,e,o)=>{var i,[t,s]=t,r=e?0:1;if("number"==typeof o&&t[e]>=o!=s[e]>=o)return i=(o-t[e])/(s[e]-t[e]),i=t[r]+i*(s[r]-t[r]),e?[i,o]:[o,i]};let a,n=t[0];return((a=r(t,0,e))||(a=r(t,0,o)))&&(n=a,t[1]=a),n=(a=r(t,1,i))||(a=r(t,1,s))?a:n}getRotator(t){const s=t[0]*z,e=(t[1]||0)*z,o=(t[2]||0)*z,r=Math.cos(e),a=Math.sin(e),n=Math.cos(o),l=Math.sin(o);if(0!=s||0!=e||0!=o)return{forward:t=>{var e=t[0]*z+s,t=t[1]*z,o=Math.cos(t),i=Math.cos(e)*o,e=Math.sin(e)*o,o=Math.sin(t),t=o*r+i*a;return[Math.atan2(e*n-t*l,i*r-o*a)/z,Math.asin(t*n+e*l)/z]},inverse:t=>{var e=t[0]*z,t=t[1]*z,o=Math.cos(t),i=Math.cos(e)*o,e=Math.sin(e)*o,o=Math.sin(t),t=o*n-e*l;return[(Math.atan2(e*n+o*l,i*r+t*a)-s)/z,Math.asin(t*r-i*a)/z]}}}forward(t){return t}inverse(t){return t}cutOnAntimeridian(o,i){const s=[],e=[o];for(let e=0,t=o.length;e<t;++e){var r=o[e];let t=o[e-1];if(!e){if(!i)continue;t=o[o.length-1]}var a=t[0],n=r[0];(a<-90||90<a)&&(n<-90||90<n)&&0<a!=0<n&&(n=We((180-(a+360)%360)/((n+360)%360-(a+360)%360),0,1),n=t[1]+n*(r[1]-t[1]),s.push({i:e,lat:n,direction:a<0?1:-1,previousLonLat:t,lonLat:r}))}let l;if(s.length)if(i){s.length%2==1&&(l=s.slice().sort((t,e)=>Math.abs(e.lat)-Math.abs(t.lat))[0],Fe(s,l));let t=s.length-2;for(;0<=t;){var h=s[t].i,c=C(180+s[t].direction*w),p=C(180-s[t].direction*w);const f=o.splice(h,s[t+1].i-h,...k.geodesic([c,s[t].lat],[c,s[t+1].lat],!0));f.push(...k.geodesic([p,s[t+1].lat],[p,s[t].lat],!0)),e.push(f),t-=2}if(l)for(let t=0;t<e.length;t++){const{direction:y,lat:b}=l,o=e[t],x=o.indexOf(l.lonLat);if(-1<x){var d=(b<0?-1:1)*this.maxLatitude,u=C(180+y*w),m=C(180-y*w);const v=k.geodesic([u,b],[u,d],!0);for(let t=u+120*y;-180<t&&t<180;t+=120*y)v.push([t,d]);v.push(...k.geodesic([m,d],[m,l.lat],!0)),o.splice(x,0,...v);break}}}else{let t=s.length;for(;t--;){var g=s[t].i;const M=o.splice(g,o.length,[C(180+s[t].direction*w),s[t].lat]);M.unshift([C(180-s[t].direction*w),s[t].lat]),e.push(M)}}return e}path(t){const{bounds:u,def:e,rotator:o}=this,m=[],g="Polygon"===t.type||"MultiPolygon"===t.type,f=this.hasGeoProjection,y=!e||!1!==e.antimeridianCutting,i=y?o:void 0,b=y&&e||this;let x;u&&(x=[[u.x1,u.y1],[u.x2,u.y1],[u.x2,u.y2],[u.x1,u.y2]]);const s=t=>{t=t.map(e=>{if(y){let t=(e=i?i.forward(e):e)[0];e=[t=Math.abs(t-180)<w?t<180?180-w:180+w:t,e[1]]}return e});let e=[t];f&&(k.insertGeodesics(t),y&&(e=this.cutOnAntimeridian(t,g))),e.forEach(l=>{if(!(l.length<2)){let e=!1,o,i,s=!1;const p=t=>{e?m.push(["L",t[0],t[1]]):(m.push(["M",t[0],t[1]]),e=!0)};let r=!1,a=!1,n=l.map(t=>{const e=b.forward(t);return e.outside?r=!0:a=!0,e[1]===1/0?e[1]=1e10:e[1]===-1/0&&(e[1]=-1e10),e});if(y){if(g&&n.push(n[0]),r){if(!a)return;if(x)if(g)n=He(n,x);else if(u)return void Ye(n,x).forEach(t=>{e=!1,t.forEach(p)})}n.forEach(p)}else for(let t=0;t<n.length;t++){var h=l[t],c=n[t];if(c.outside)s=!0;else{if(g&&!o&&(o=h,l.push(h),n.push(c)),s&&i)if(g&&f){const d=k.geodesic(i,h);d.forEach(t=>p(b.forward(t)))}else e=!1;p(c),i=h,s=!1}}}})};return"LineString"===t.type?s(t.coordinates):"MultiLineString"===t.type?t.coordinates.forEach(t=>s(t)):"Polygon"===t.type?(t.coordinates.forEach(t=>s(t)),m.length&&m.push(["Z"])):"MultiPolygon"===t.type&&(t.coordinates.forEach(t=>{t.forEach(t=>s(t))}),m.length&&m.push(["Z"])),m}}k.registry=y;const Ze=k,_e=x()["composed"],qe=e["pointInPolygon"],Ke=we["topo2geo"],$e=p["boundsFromPath"],{addEvent:b,clamp:Je,crisp:Qe,fireEvent:to,isArray:eo,isNumber:v,isObject:oo,isString:io,merge:M,pick:so,pushUnique:ro,relativeLength:P}=x(),ao=400.979322;let no={};function lo(t,e){var{width:e,height:o}=e,e=Math.max((t.x2-t.x1)/(e/256),(t.y2-t.y1)/(o/256));return Math.log(ao/e)/Math.log(2)}function ho(t){t.seriesOptions.mapData&&this.mapView?.recommendMapView(this,[this.options.chart.map,t.seriesOptions.mapData],this.options.drilldown?.mapZooming)}class L{static compose(t){ro(_e,"MapView")&&(no=t.maps,b(t,"afterInit",function(){this.mapView=new L(this,this.options.mapView)},{order:0}),b(t,"addSeriesAsDrilldown",ho),b(t,"afterDrillUp",ho))}static compositeBounds(t){if(t.length)return t.slice(1).reduce((t,e)=>(t.x1=Math.min(t.x1,e.x1),t.y1=Math.min(t.y1,e.y1),t.x2=Math.max(t.x2,e.x2),t.y2=Math.max(t.y2,e.y2),t),M(t[0]))}static mergeInsets(t,e){var o=t=>{const o={};return t.forEach((t,e)=>{o[t&&t.id||"i"+e]=t}),o};const i=M(o(t),o(e)),s=Object.keys(i).map(t=>i[t]);return s}constructor(t,e){this.allowTransformAnimation=!0,this.eventsToUnbind=[],this.insets=[],this.padding=[0,0,0,0],this.recommendedMapView={},this instanceof co||this.recommendMapView(t,[t.options.chart.map,...(t.options.series||[]).map(t=>t.mapData)]),this.userOptions=e||{};const o=M(le,this.recommendedMapView,e);var i=this.recommendedMapView?.insets,e=e&&e.insets;i&&e&&(o.insets=L.mergeInsets(i,e)),this.chart=t,this.center=o.center,this.options=o,this.projection=new Ze(o.projection),this.playingField=t.plotBox,this.zoom=o.zoom||0,this.minZoom=o.minZoom,this.createInsets(),this.eventsToUnbind.push(b(t,"afterSetChartSize",()=>{this.playingField=this.getField(),void 0!==this.minZoom&&this.minZoom!==this.zoom||(this.fitToBounds(void 0,void 0,!1),!this.chart.hasRendered&&v(this.userOptions.zoom)&&(this.zoom=this.userOptions.zoom),this.userOptions.center&&M(!0,this.center,this.userOptions.center))})),this.setUpEvents()}createInsets(){const e=this.options,t=e.insets;t&&t.forEach(t=>{t=new co(this,M(e.insetOptions,t));this.insets.push(t)})}fitToBounds(t,e,o=!0,i){var s,r=t||this.getProjectedBounds();r&&(e=so(e,t?0:this.options.padding),s=this.getField(!1),e=eo(e)?e:[e,e,e,e],this.padding=[P(e[0],s.height),P(e[1],s.width),P(e[2],s.height),P(e[3],s.width)],this.playingField=this.getField(),e=lo(r,this.playingField),t||(this.minZoom=e),s=this.projection.inverse([(r.x2+r.x1)/2,(r.y2+r.y1)/2]),this.setView(s,e,o,i))}getField(t=!0){t=t?this.padding:[0,0,0,0];return{x:t[3],y:t[0],width:this.chart.plotWidth-t[1]-t[3],height:this.chart.plotHeight-t[0]-t[2]}}getGeoMap(t){return io(t)?no[t]&&"Topology"===no[t].type?Ke(no[t]):no[t]:oo(t,!0)?"FeatureCollection"===t.type?t:"Topology"===t.type?Ke(t):void 0:void 0}getMapBBox(){var t,e,o=this.getProjectedBounds(),i=this.getScale();if(o)return t=this.padding,e=this.projectedUnitsToPixels({x:o.x1,y:o.y2}),{width:(o.x2-o.x1)*i+t[1]+t[3],height:(o.y2-o.y1)*i+t[0]+t[2],x:e.x-t[3],y:e.y-t[0]}}getProjectedBounds(){const e=this.projection;var t=this.chart.series.reduce((t,e)=>{var o=e.getProjectedBounds&&e.getProjectedBounds();return o&&!1!==e.options.affectsMapView&&t.push(o),t},[]);const o=this.options.fitToGeometry;if(o){if(!this.fitToGeometryCache)if("MultiPoint"===o.type){const i=o.coordinates.map(t=>e.forward(t)),s=i.map(t=>t[0]),r=i.map(t=>t[1]);this.fitToGeometryCache={x1:Math.min.apply(0,s),x2:Math.max.apply(0,s),y1:Math.min.apply(0,r),y2:Math.max.apply(0,r)}}else this.fitToGeometryCache=$e(e.path(o));return this.fitToGeometryCache}return this.projection.bounds||L.compositeBounds(t)}getScale(){return 256/ao*Math.pow(2,this.zoom)}getSVGTransform(){var{x:t,y:e,width:o,height:i}=this.playingField,s=this.projection.forward(this.center),r=this.projection.hasCoordinates?-1:1,a=this.getScale(),r=a*r;return{scaleX:a,scaleY:r,translateX:t+o/2-s[0]*a,translateY:e+i/2-s[1]*r}}lonLatToPixels(t){t=this.lonLatToProjectedUnits(t);if(t)return this.projectedUnitsToPixels(t)}lonLatToProjectedUnits(t){const e=this.chart,o=e.mapTransforms;if(o){for(const a in o)if(Object.hasOwnProperty.call(o,a)&&o[a].hitZone){var i=e.transformFromLatLon(t,o[a]);if(i&&qe(i,o[a].hitZone.coordinates[0]))return i}return e.transformFromLatLon(t,o.default)}for(const n of this.insets){var s;if(n.options.geoBounds&&qe({x:t.lon,y:t.lat},n.options.geoBounds.coordinates[0]))return s=n.projection.forward([t.lon,t.lat]),s=n.projectedUnitsToPixels({x:s[0],y:s[1]}),this.pixelsToProjectedUnits(s)}var r=this.projection.forward([t.lon,t.lat]);if(!r.outside)return{x:r[0],y:r[1]}}projectedUnitsToLonLat(t){const e=this.chart,o=e.mapTransforms;if(o){for(const r in o)if(Object.hasOwnProperty.call(o,r)&&o[r].hitZone&&qe(t,o[r].hitZone.coordinates[0]))return e.transformToLatLon(t,o[r]);return e.transformToLatLon(t,o.default)}var i=this.projectedUnitsToPixels(t);for(const a of this.insets)if(a.hitZone&&qe(i,a.hitZone.coordinates[0])){const n=a.pixelsToProjectedUnits(i),s=a.projection.inverse([n.x,n.y]);return{lon:s[0],lat:s[1]}}const s=this.projection.inverse([t.x,t.y]);return{lon:s[0],lat:s[1]}}recommendMapView(t,e,o=!1){this.recommendedMapView={};const i=e.map(t=>this.getGeoMap(t)),s=[],r=(i.forEach(t=>{var e,o,i;t&&(Object.keys(this.recommendedMapView).length||(this.recommendedMapView=t["hc-recommended-mapview"]||{}),t.bbox&&([t,e,o,i]=t.bbox,s.push({x1:t,y1:e,x2:o,y2:i})))}),s.length&&L.compositeBounds(s));to(this,"onRecommendMapView",{geoBounds:r,chart:t},function(){var t,e,o,i;r&&this.recommendedMapView&&(this.recommendedMapView.projection||({x1:t,y1:e,x2:o,y2:i}=r,this.recommendedMapView.projection=180<o-t&&90<i-e?{name:"EqualEarth",parallels:[0,0],rotation:[0]}:{name:"LambertConformalConic",parallels:[e,i],rotation:[-(t+o)/2]}),this.recommendedMapView.insets||(this.recommendedMapView.insets=void 0))}),this.geoMap=i[0],o&&t.hasRendered&&!t.userOptions.mapView?.projection&&this.recommendedMapView&&this.update(this.recommendedMapView)}redraw(t){this.chart.series.forEach(t=>{t.useMapGeometry&&(t.isDirty=!0)}),this.chart.redraw(t)}setView(t,e,o=!0,i){t&&(this.center=t),"number"==typeof e&&("number"==typeof this.minZoom&&(e=Math.max(e,this.minZoom)),"number"==typeof this.options.maxZoom&&(e=Math.min(e,this.options.maxZoom)),v(e)&&(this.zoom=e));var s,r,t=this.getProjectedBounds();if(t){const a=this.projection.forward(this.center),{x:n,y:l,width:h,height:c}=this.playingField,p=this.getScale(),d=this.projectedUnitsToPixels({x:t.x1,y:t.y1}),u=this.projectedUnitsToPixels({x:t.x2,y:t.y2}),m=[(t.x1+t.x2)/2,(t.y1+t.y2)/2],g=this.chart.series.some(t=>t.isDrilling);g||(e=d.x,t=u.y,s=u.x,r=d.y,s-e<h?a[0]=m[0]:e<n&&s<n+h?a[0]+=Math.max(e-n,s-h-n)/p:n+h<s&&n<e&&(a[0]+=Math.min(s-h-n,e-n)/p),r-t<c?a[1]=m[1]:t<l&&r<l+c?a[1]-=Math.max(t-l,r-c-l)/p:l+c<r&&l<t&&(a[1]-=Math.min(r-c-l,t-l)/p),this.center=this.projection.inverse(a)),this.insets.forEach(t=>{t.options.field&&(t.hitZone=t.getHitZone(),t.playingField=t.getField())}),this.render()}to(this,"afterSetView"),o&&this.redraw(i)}projectedUnitsToPixels(t){var e=this.getScale(),o=this.projection.forward(this.center),i=this.playingField,s=i.x+i.width/2,i=i.y+i.height/2;return{x:s-e*(o[0]-t.x),y:i+e*(o[1]-t.y)}}pixelsToLonLat(t){return this.projectedUnitsToLonLat(this.pixelsToProjectedUnits(t))}pixelsToProjectedUnits(t){var{x:t,y:e}=t,o=this.getScale(),i=this.projection.forward(this.center),s=this.playingField,r=s.x+s.width/2,s=s.y+s.height/2;return{x:i[0]+(t-r)/o,y:i[1]-(e-s)/o}}setUpEvents(){const c=this["chart"];let p,d,u;var t=o=>{var{lastTouches:i,pinchDown:s}=c.pointer,r=this.projection,a=o.touches;let{mouseDownX:n,mouseDownY:l}=c,h=0;if(1===s?.length?(n=s[0].chartX,l=s[0].chartY):2===s?.length&&(n=(s[0].chartX+s[1].chartX)/2,l=(s[0].chartY+s[1].chartY)/2),2===a?.length&&i&&(s=Math.sqrt(Math.pow(i[0].chartX-i[1].chartX,2)+Math.pow(i[0].chartY-i[1].chartY,2)),i=Math.sqrt(Math.pow(a[0].chartX-a[1].chartX,2)+Math.pow(a[0].chartY-a[1].chartY,2)),h=Math.log(s/i)/Math.log(.5)),v(n)&&v(l)){s=n+","+l;let{chartX:t,chartY:e}=o.originalEvent;2===a?.length&&(t=(a[0].chartX+a[1].chartX)/2,e=(a[0].chartY+a[1].chartY)/2),s!==d&&(d=s,p=this.projection.forward(this.center),u=(this.projection.options.rotation||[0,0]).slice());var i=r.def&&r.def.bounds,s=i&&lo(i,this.playingField)||-1/0;"Orthographic"===r.options.name&&(a?.length||0)<2&&(this.minZoom||1/0)<1.3*s?(i=440/(this.getScale()*Math.min(c.plotWidth,c.plotHeight)),u&&(r=(n-t)*i-u[0],a=Je(-u[1]-(l-e)*i,-80,80),s=this.zoom,this.update({projection:{rotation:[-r,-a]}},!1),this.fitToBounds(void 0,void 0,!1),this.zoom=s,c.redraw(!1))):v(t)&&v(e)&&(i=this.getScale(),r=this.projection.hasCoordinates?1:-1,a=this.projection.inverse([p[0]+(n-t)/i,p[1]-(l-e)/i*r]),isNaN(a[0]+a[1])||this.zoomBy(h,a,void 0,!1)),o.preventDefault()}};b(c,"pan",t),b(c,"touchpan",t),b(c,"selection",t=>{var e,o,i,s;t.resetSelection?this.zoomBy():(i=t.x-c.plotLeft,s=t.y-c.plotTop,{y:e,x:o}=this.pixelsToProjectedUnits({x:i,y:s}),{y:i,x:s}=this.pixelsToProjectedUnits({x:i+t.width,y:s+t.height}),this.fitToBounds({x1:o,y1:e,x2:s,y2:i},void 0,!0,!t.originalEvent.touches&&void 0),/^touch/.test(t.originalEvent.type)||c.showResetZoom(),t.preventDefault())})}render(){this.group||(this.group=this.chart.renderer.g("map-view").attr({zIndex:4}).add())}update(t,e=!0,o){var i=t.projection,i=i&&Ze.toString(i)!==Ze.toString(this.options.projection);let s=!1;M(!0,this.userOptions,t),M(!0,this.options,t),"insets"in t&&(this.insets.forEach(t=>t.destroy()),this.insets.length=0,s=!0),(i||"fitToGeometry"in t)&&delete this.fitToGeometryCache,(i||s)&&(this.chart.series.forEach(t=>{const e=t.transformGroups;if(t.clearBounds&&t.clearBounds(),t.isDirty=!0,t.isDirtyData=!0,s&&e)for(;1<e.length;){const o=e.pop();o&&o.destroy()}}),i&&(this.projection=new Ze(this.options.projection)),s&&this.createInsets(),t.center||!Object.hasOwnProperty.call(t,"zoom")||v(t.zoom)||this.fitToBounds(void 0,void 0,!1)),t.center||v(t.zoom)?this.setView(this.options.center,t.zoom,!1):"fitToGeometry"in t&&this.fitToBounds(void 0,void 0,!1),e&&this.chart.redraw(o)}zoomBy(i,s,r,a){const n=this.chart,l=this.projection.forward(this.center);if("number"==typeof i){var h,c,i=this.zoom+i;let t,e,o;r&&([r,h]=r,c=this.getScale(),r=r-n.plotLeft-n.plotWidth/2,h=h-n.plotTop-n.plotHeight/2,e=l[0]+r/c,o=l[1]+h/c),"number"==typeof e&&"number"==typeof o&&(r=1-Math.pow(2,this.zoom)/Math.pow(2,i),h=l[0]-e,c=l[1]-o,l[0]-=h*r,l[1]+=c*r,t=this.projection.inverse(l)),this.setView(s||t,i,void 0,a)}else this.fitToBounds(void 0,void 0,void 0,a)}}class co extends L{constructor(t,e){if(super(t.chart,e),this.id=e.id,this.mapView=t,this.options=M({center:[0,0]},t.options.insetOptions,e),this.allBounds=[],this.options.geoBounds){const o=t.projection.path(this.options.geoBounds);this.geoBoundsProjectedBox=$e(o),this.geoBoundsProjectedPolygon=o.map(t=>[t[1]||0,t[2]||0])}}getField(t=!0){var e=this.hitZone;if(e){const o=t?this.padding:[0,0,0,0],i=e.coordinates[0],s=i.map(t=>t[0]),r=i.map(t=>t[1]),a=Math.min.apply(0,s)+o[3],n=Math.max.apply(0,s)-o[1],l=Math.min.apply(0,r)+o[0],h=Math.max.apply(0,r)-o[2];if(v(a)&&v(l))return{x:a,y:l,width:n-a,height:h-l}}return super.getField.call(this,t)}getHitZone(){const{chart:e,mapView:o,options:i}=this,s=(i.field||{})["coordinates"];if(s){let t=s[0];if("percent"===i.units){const r="mapBoundingBox"===i.relativeTo&&o.getMapBBox()||M(e.plotBox,{x:0,y:0});t=t.map(t=>[P(t[0]+"%",r.width,r.x),P(t[1]+"%",r.height,r.y)])}return{type:"Polygon",coordinates:[t]}}}getProjectedBounds(){return L.compositeBounds(this.allBounds)}isInside(t){var{geoBoundsProjectedBox:e,geoBoundsProjectedPolygon:o}=this;return Boolean(e&&t.x>=e.x1&&t.x<=e.x2&&t.y>=e.y1&&t.y<=e.y2&&o&&qe(t,o))}render(){const{chart:r,mapView:e,options:a}=this,o=a.borderPath||a.field;if(o&&e.group){let t=!0;this.border||(this.border=r.renderer.path().addClass("highcharts-mapview-inset-border").add(e.group),t=!1),r.styledMode||this.border.attr({stroke:a.borderColor,"stroke-width":a.borderWidth});const n=this.border.strokeWidth(),l="mapBoundingBox"===a.relativeTo&&e.getMapBBox()||e.playingField;var i=(o.coordinates||[]).reduce((t,e)=>e.reduce((t,e,o)=>{let[i,s]=e;return"percent"===a.units&&(i=r.plotLeft+P(i+"%",l.width,l.x),s=r.plotTop+P(s+"%",l.height,l.y)),i=Qe(i,n),s=Qe(s,n),t.push(0===o?["M",i,s]:["L",i,s]),t},t),[]);this.border[t?"animate":"attr"]({d:i})}}destroy(){this.border&&(this.border=this.border.destroy()),this.eventsToUnbind.forEach(t=>t())}setUpEvents(){}}const po=L,{animObject:uo,stop:mo}=x();l=x().noop;const go=h["splitPath"],{column:fo,scatter:yo}=s().seriesTypes,{extend:bo,find:xo,fireEvent:vo,getNestedProperty:Mo,isArray:wo,defined:Co,isNumber:T,isObject:Po,merge:Lo,objectEach:To,pick:Ao,splat:jo}=x();class zo extends yo{constructor(){super(...arguments),this.processedData=[]}animate(t){const{chart:e,group:o}=this,i=uo(this.options.animation);t?o.attr({translateX:e.plotLeft+e.plotWidth/2,translateY:e.plotTop+e.plotHeight/2,scaleX:.001,scaleY:.001}):o.animate({translateX:e.plotLeft,translateY:e.plotTop,scaleX:1,scaleY:1},i)}clearBounds(){this.points.forEach(t=>{delete t.bounds,delete t.insetIndex,delete t.projectedPath}),delete this.bounds}doFullTranslate(){return Boolean(this.isDirtyData||this.chart.isResizing||!this.hasRendered)}drawMapDataLabels(){super.drawDataLabels(),this.dataLabelsGroup&&this.dataLabelsGroup.clip(this.chart.clipRect)}drawPoints(){const u=this,{chart:m,group:o,transformGroups:i=[]}=this,{mapView:g,renderer:f}=m;if(g){(this.transformGroups=i)[0]||(i[0]=f.g().add(o));for(let t=0,e=g.insets.length;t<e;++t)i[t+1]||i.push(f.g().add(o));this.doFullTranslate()&&(this.points.forEach(t=>{const e=t["graphic"];t.group=i["number"==typeof t.insetIndex?t.insetIndex+1:0],e&&e.parentGroup!==t.group&&e.add(t.group)}),fo.prototype.drawPoints.apply(this),this.points.forEach(e=>{const a=e.graphic;if(a){const n=a.animate;let t="";e.name&&(t+="highcharts-name-"+e.name.replace(/ /g,"-").toLowerCase()),e.properties?.["hc-key"]&&(t+=" highcharts-key-"+e.properties["hc-key"].toString().toLowerCase()),t&&a.addClass(t),m.styledMode&&a.css(this.pointAttribs(e,e.selected?"select":void 0)),a.attr({visibility:e.visible||!e.visible&&!e.isNull?"inherit":"hidden"}),a.animate=function(t,e,o){var i,s=T(t["stroke-width"])&&!T(a["stroke-width"]),r=T(a["stroke-width"])&&!T(t["stroke-width"]),s=((s||r)&&(i=Ao(u.getStrokeWidth(u.options),1)/(m.mapView?.getScale()||1),s&&(a["stroke-width"]=i),r&&(t["stroke-width"]=i)),n.call(a,t,e,r?function(){a.element.removeAttribute("stroke-width"),delete a["stroke-width"],o&&o.apply(this,arguments)}:o));return s}}})),i.forEach((i,t)=>{const e=0===t?g:g.insets[t-1],s=e.getSVGTransform(),r=Ao(this.getStrokeWidth(this.options),1),a=s.scaleX,n=0<s.scaleY?1:-1,l=i=>{(u.points||[]).forEach(t=>{const e=t.graphic;let o;e?.["stroke-width"]&&(o=this.getStrokeWidth(t.options))&&e.attr({"stroke-width":o/i})})};if(f.globalAnimation&&m.hasRendered&&g.allowTransformAnimation){const h=Number(i.attr("translateX")),c=Number(i.attr("translateY")),p=Number(i.attr("scaleX")),o=Lo(uo(f.globalAnimation)),d=o.step;o.step=function(){d&&d.apply(this,arguments),((t,e)=>{var o=p+(a-p)*e.pos;i.attr({translateX:h+(s.translateX-h)*e.pos,translateY:c+(s.translateY-c)*e.pos,scaleX:o,scaleY:o*n,"stroke-width":r/o}),l(o)}).apply(this,arguments)},i.attr({animator:0}).animate({animator:1},o,function(){"boolean"!=typeof f.globalAnimation&&f.globalAnimation.complete&&f.globalAnimation.complete({applyDrilldown:!0}),vo(this,"mapZoomComplete")}.bind(this))}else mo(i),i.attr(Lo(s,{"stroke-width":r/a})),l(a)}),this.isDrilling||this.drawMapDataLabels()}}getProjectedBounds(){if(!this.bounds&&this.chart.mapView){const{insets:r,projection:a}=this.chart.mapView,t=[];(this.points||[]).forEach(e=>{if(e.path||e.geometry){if("string"==typeof e.path?e.path=go(e.path):wo(e.path)&&"M"===e.path[0]&&(e.path=this.chart.renderer.pathToSegments(e.path)),!e.bounds){let t=e.getProjectedBounds(a);if(t){e.labelrank=Ao(e.labelrank,(t.x2-t.x1)*(t.y2-t.y1));const{midX:o,midY:i}=t;if(r&&T(o)&&T(i)){const s=xo(r,t=>t.isInside({x:o,y:i}));s&&(delete e.projectedPath,(t=e.getProjectedBounds(s.projection))&&s.allBounds.push(t),e.insetIndex=r.indexOf(s))}e.bounds=t}}e.bounds&&void 0===e.insetIndex&&t.push(e.bounds)}}),this.bounds=po.compositeBounds(t)}return this.bounds}getStrokeWidth(t){return t[this.pointAttrToOptions?.["stroke-width"]||"borderWidth"]}hasData(){return!!this.dataTable.rowCount}pointAttribs(t,e){const{mapView:o,styledMode:i}=t.series.chart,s=i?this.colorAttribs(t):fo.prototype.pointAttribs.call(this,t,e);let r=this.getStrokeWidth(t.options);e&&(e=Lo(this.options.states&&this.options.states[e],t.options.states&&t.options.states[e]||{}),a=this.getStrokeWidth(e),Co(a)&&(r=a),s.stroke=e.borderColor??t.color),r&&o&&(r/=o.getScale());var a=this.getStrokeWidth(this.options);return s.dashstyle&&o&&T(a)&&(r=a/o.getScale()),t.visible||(s.fill=this.options.nullColor),Co(r)?s["stroke-width"]=r:delete s["stroke-width"],s["stroke-linecap"]=s["stroke-linejoin"]=this.options.linecap,s}updateData(){return!this.processedData&&super.updateData.apply(this,arguments)}setData(t,e=!0,o,i){delete this.bounds,super.setData(t,!1,void 0,i),this.processData(),this.generatePoints(),e&&this.chart.redraw(o)}dataColumnKeys(){return this.pointArrayMap}processData(){const i=this.options,e=i.data,t=this.chart,o=t.options.chart,s=this.joinBy,r=i.keys||this.pointArrayMap,a=[],n={},l=this.chart.mapView,h=l&&(Po(i.mapData,!0)?l.getGeoMap(i.mapData):l.geoMap),c=t.mapTransforms=o.mapTransforms||h?.["hc-transform"]||t.mapTransforms;let p,d;c&&To(c,t=>{t.rotation&&(t.cosAngle=Math.cos(t.rotation),t.sinAngle=Math.sin(t.rotation))});let u;wo(i.mapData)?u=i.mapData:h&&"FeatureCollection"===h.type&&(this.mapTitle=h.title,u=x().geojson(h,this.type,this)),this.processedData=[];const m=this.processedData;var g;if(e)for(let o=0,t=e.length;o<t;++o){if(g=e[o],T(g))m[o]={value:g};else if(wo(g)){let e=0;m[o]={},!i.keys&&g.length>r.length&&"string"==typeof g[0]&&(m[o]["hc-key"]=g[0],++e);for(let t=0;t<r.length;++t,++e)r[t]&&void 0!==g[e]&&(0<r[t].indexOf(".")?ae.prototype.setNestedProperty(m[o],g[e],r[t]):m[o][r[t]]=g[e])}else m[o]=e[o];s&&"_i"===s[0]&&(m[o]._i=o)}if(u){this.mapData=u,this.mapMap={};for(let t=0;t<u.length;t++)d=(p=u[t]).properties,p._i=t,s[0]&&d&&d[s[0]]&&(p[s[0]]=d[s[0]]),n[p[s[0]]]=p;if(this.mapMap=n,s[1]){const f=s[1];m.forEach(t=>{t=Mo(f,t);n[t]&&a.push(n[t])})}if(i.allAreas){if(s[1]){const b=s[1];m.forEach(t=>{a.push(Mo(b,t))})}const y="|"+a.map(function(t){return t&&t[s[0]]}).join("|")+"|";u.forEach(t=>{s[0]&&-1!==y.indexOf("|"+t[s[0]]+"|")||m.push(Lo(t,{value:null}))})}}this.dataTable.rowCount=m.length}setOptions(t){t=super.setOptions(t);let e=t.joinBy;return(e=null===t.joinBy?"_i":e)&&(this.joinBy=jo(e),this.joinBy[1]||(this.joinBy[1]=this.joinBy[0])),t}translate(){const o=this.doFullTranslate(),i=this.chart.mapView,s=i?.projection;if(!this.chart.hasRendered||!this.isDirtyData&&this.hasRendered||(this.processData(),this.generatePoints(),delete this.bounds,!i||i.userOptions.center||T(i.userOptions.zoom)||i.zoom!==i.minZoom?this.getProjectedBounds():i.fitToBounds(void 0,void 0,!1)),i){const r=i.getSVGTransform();this.points.forEach(t=>{var e=T(t.insetIndex)&&i.insets[t.insetIndex].getSVGTransform()||r;e&&t.bounds&&T(t.bounds.midX)&&T(t.bounds.midY)&&(t.plotX=t.bounds.midX*e.scaleX+e.translateX,t.plotY=t.bounds.midY*e.scaleY+e.translateY),o&&(t.shapeType="path",t.shapeArgs={d:ae.getProjectedPath(t,s)}),t.hiddenInDataClass||(t.projectedPath&&!t.projectedPath.length?t.setVisible(!1):t.visible||t.setVisible(!0))})}vo(this,"afterTranslate")}update(o){o.mapData&&this.chart.mapView?.recommendMapView(this.chart,[this.chart.options.chart.map,...(this.chart.options.series||[]).map((t,e)=>(e===this._i?o:t).mapData)],!0),super.update.apply(this,arguments)}}zo.defaultOptions=Lo(yo.defaultOptions,o),bo(zo.prototype,{type:"map",axisTypes:n.seriesMembers.axisTypes,colorAttribs:n.seriesMembers.colorAttribs,colorKey:n.seriesMembers.colorKey,directTouch:!0,drawDataLabels:l,drawGraph:l,forceDL:!0,getCenter:t.getCenter,getExtremesFromAll:!0,getSymbol:l,isCartesian:!1,parallelArrays:n.seriesMembers.parallelArrays,pointArrayMap:n.seriesMembers.pointArrayMap,pointClass:ae,preserveAspectRatio:!0,searchPoint:l,trackerGroups:n.seriesMembers.trackerGroups,useMapGeometry:!0}),n.compose(zo),s().registerSeriesType("map",zo);d=zo,y={lineWidth:1,fillColor:"none",legendSymbol:"lineMarker"};const{extend:ko,merge:So}=x();class Io extends d{pointAttribs(t,e){const o=super.pointAttribs(t,e);return o.fill=this.options.fillColor,o}}Io.defaultOptions=So(d.defaultOptions,y),ko(Io.prototype,{type:"mapline",colorProp:"stroke",pointAttrToOptions:{stroke:"color","stroke-width":"lineWidth"}}),s().registerSeriesType("mapline",Io);e=s().seriesTypes.scatter;const Bo=x()["isNumber"];class Eo extends e.prototype.pointClass{isValid(){return Boolean(this.options.geometry||Bo(this.x)&&Bo(this.y)||Bo(this.options.lon)&&Bo(this.options.lat))}}p=Eo,o={dataLabels:{crop:!1,defer:!1,enabled:!0,formatter:function(){return this.point.name},overflow:!1,style:{color:"#000000"}},legendSymbol:"lineMarker"},i(632),t=x().noop;const{map:Do,scatter:Oo}=s().seriesTypes,{extend:Vo,fireEvent:Xo,isNumber:A,merge:No}=x();class Go extends Oo{constructor(){super(...arguments),this.clearBounds=Do.prototype.clearBounds}drawDataLabels(){super.drawDataLabels(),this.dataLabelsGroup&&this.dataLabelsGroup.clip(this.chart.clipRect)}projectPoint(e){const o=this.chart.mapView;if(o){var{geometry:e,lon:i,lat:s}=e;let t=e&&"Point"===e.type&&e.coordinates;if(t=A(i)&&A(s)?[i,s]:t)return o.lonLatToProjectedUnits({lon:t[0],lat:t[1]})}}translate(){const a=this.chart.mapView;if(this.generatePoints(),this.getProjectedBounds&&this.isDirtyData&&(delete this.bounds,this.getProjectedBounds()),a){const n=a.getSVGTransform(),l=a.projection["hasCoordinates"];this.points.forEach(t=>{let{x:e=void 0,y:o=void 0}=t;var i=A(t.insetIndex)&&a.insets[t.insetIndex].getSVGTransform()||n,s=this.projectPoint(t.options)||t.properties&&this.projectPoint(t.properties);let r;s?(e=s.x,o=s.y):t.bounds&&(e=t.bounds.midX,o=t.bounds.midY,i&&A(e)&&A(o)&&(t.plotX=e*i.scaleX+i.translateX,t.plotY=o*i.scaleY+i.translateY,r=!0)),A(e)&&A(o)?r||(s=a.projectedUnitsToPixels({x:e,y:o}),t.plotX=s.x,t.plotY=l?s.y:this.chart.plotHeight-s.y):t.y=t.plotX=t.plotY=void 0,t.isInside=this.isPointInside(t),t.zone=this.zones.length?t.getZone():void 0})}Xo(this,"afterTranslate")}}Go.defaultOptions=No(Oo.defaultOptions,o);qt().prototype.symbols.mapmarker=(t,e,o,i,s)=>{var r=s&&"legend"===s.context;let a,n;r?(a=t+o/2,n=e+i):s&&"number"==typeof s.anchorX&&"number"==typeof s.anchorY?(a=s.anchorX,n=s.anchorY):(a=t+o/2,n=e+i/2,e-=i);s=r?i/3:i/2;return[["M",a,n],["C",a,n,a-s,e+1.5*s,a-s,e+s],["A",s,s,1,1,1,a+s,e+s],["C",a+s,e+1.5*s,a,n,a,n],["Z"]]},Vo(Go.prototype,{type:"mappoint",axisTypes:["colorAxis"],forceDL:!0,isCartesian:!1,pointClass:p,searchPoint:t,useMapGeometry:!0}),s().registerSeriesType("mappoint",Go);const Ro={borderColor:void 0,borderWidth:2,className:void 0,color:void 0,connectorClassName:void 0,connectorColor:void 0,connectorDistance:60,connectorWidth:1,enabled:!1,labels:{className:void 0,allowOverlap:!1,format:"",formatter:void 0,align:"right",style:{fontSize:"0.9em",color:"#000000"},x:0,y:0},maxSize:60,minSize:10,legendIndex:0,ranges:{value:void 0,borderColor:void 0,color:void 0,connectorColor:void 0},sizeBy:"area",sizeByAbsoluteValue:!1,zIndex:1,zThreshold:0},Yo=x()["noop"],{arrayMax:Ho,arrayMin:Wo,isNumber:Fo,merge:Uo,pick:Zo,stableSort:_o}=x();const qo=class{constructor(t,e){this.setState=Yo,this.init(t,e)}init(t,e){this.options=t,this.visible=!0,this.chart=e.chart,this.legend=e}addToLegend(t){t.splice(this.options.legendIndex,0,this)}drawLegendSymbol(t){const e=Zo(t.options.itemDistance,20),o=this.legendItem||{},i=this.options,s=i.ranges,r=i.connectorDistance;let a;var n,l,h;s&&s.length&&Fo(s[0].value)?(_o(s,function(t,e){return e.value-t.value}),this.ranges=s,this.setOptions(),this.render(),n=this.getMaxLabelSize(),h=2*(l=this.ranges[0].radius),a=0<(a=r-l+n.width)?a:0,this.maxLabel=n,this.movementX="left"===i.labels.align?a:0,o.labelWidth=h+a+e,o.labelHeight=h+n.height/2):t.options.bubbleLegend.autoRanges=!0}setOptions(){const o=this.ranges,i=this.options,s=this.chart.series[i.seriesIndex],r=this.legend.baseline,a={zIndex:i.zIndex,"stroke-width":i.borderWidth},n={zIndex:i.zIndex,"stroke-width":i.connectorWidth},l={align:this.legend.options.rtl||"left"===i.labels.align?"right":"left",zIndex:i.zIndex},h=s.options.marker.fillOpacity,c=this.chart.styledMode;o.forEach(function(t,e){c||(a.stroke=Zo(t.borderColor,i.borderColor,s.color),a.fill=t.color||i.color,a.fill||(a.fill=s.color,a["fill-opacity"]=h??1),n.stroke=Zo(t.connectorColor,i.connectorColor,s.color)),o[e].radius=this.getRangeRadius(t.value),o[e]=Uo(o[e],{center:o[0].radius-o[e].radius+r}),c||Uo(!0,o[e],{bubbleAttribs:Uo(a),connectorAttribs:Uo(n),labelAttribs:l})},this)}getRangeRadius(t){const e=this.options,o=this.options.seriesIndex,i=this.chart.series[o],s=e.ranges[0].value,r=e.ranges[e.ranges.length-1].value,a=e.minSize,n=e.maxSize;return i.getRadius.call(this,r,s,a,n,t)}render(){const t=this.legendItem||{},e=this.chart.renderer,o=this.options.zThreshold;this.symbols||(this.symbols={connectors:[],bubbleItems:[],labels:[]}),t.symbol=e.g("bubble-legend"),t.label=e.g("bubble-legend-item").css(this.legend.itemStyle||{}),t.symbol.translateX=0,t.symbol.translateY=0,t.symbol.add(t.label),t.label.add(t.group);for(const i of this.ranges)i.value>=o&&this.renderRange(i);this.hideOverlappingLabels()}renderRange(t){const e=this.ranges[0],o=this.legend,i=this.options,s=i.labels,r=this.chart,a=r.series[i.seriesIndex],n=r.renderer,l=this.symbols,h=l.labels,c=t.center,p=Math.abs(t.radius),d=i.connectorDistance||0,u=s.align,m=o.options.rtl,g=i.borderWidth,f=i.connectorWidth,y=e.radius||0,b=c-p-g/2+f/2,x=(b%1?1:.5)-(f%2?0:.5),v=n.styledMode;let M=m||"left"===u?-d:d;"center"===u&&(M=0,i.connectorDistance=0,t.labelAttribs.align="center"),l.bubbleItems.push(n.circle(y,c+x,p).attr(v?{}:t.bubbleAttribs).addClass((v?"highcharts-color-"+a.colorIndex+" ":"")+"highcharts-bubble-legend-symbol "+(i.className||"")).add(this.legendItem.symbol)),l.connectors.push(n.path(n.crispLine([["M",y,b],["L",y+M,b]],i.connectorWidth)).attr(v?{}:t.connectorAttribs).addClass((v?"highcharts-color-"+this.options.seriesIndex+" ":"")+"highcharts-bubble-legend-connectors "+(i.connectorClassName||"")).add(this.legendItem.symbol));const w=n.text(this.formatLabel(t)).attr(v?{}:t.labelAttribs).css(v?{}:s.style).addClass("highcharts-bubble-legend-labels "+(i.labels.className||"")).add(this.legendItem.symbol);t={x:y+M+i.labels.x,y:b+i.labels.y+.4*w.getBBox().height};w.attr(t),h.push(w),w.placed=!0,w.alignAttr=t}getMaxLabelSize(){const t=this.symbols.labels;let e,o;return t.forEach(function(t){o=t.getBBox(!0),e=!e||o.width>e.width?o:e}),e||{}}formatLabel(t){const e=this.options,o=e.labels.formatter,i=e.labels.format,s=this.chart["numberFormatter"];return i?he().format(i,t,this.chart):o?o.call(t):s(t.value,1)}hideOverlappingLabels(){const t=this.chart,e=this.options.labels.allowOverlap,o=this.symbols;!e&&o&&(t.hideOverlappingLabels(o.labels),o.labels.forEach(function(t,e){t.newOpacity?t.newOpacity!==t.oldOpacity&&o.connectors[e].show():o.connectors[e].hide()}))}getRanges(){const t=this.legend.bubbleLegend,e=t.chart.series,o=t.options.ranges;let i,s,r=Number.MAX_VALUE,a=-Number.MAX_VALUE;return e.forEach(function(t){t.isBubble&&!t.ignoreSeries&&(s=t.getColumn("z").filter(Fo)).length&&(r=Zo(t.options.zMin,Math.min(r,Math.max(Wo(s),!1===t.options.displayNegative?t.options.zThreshold:-Number.MAX_VALUE))),a=Zo(t.options.zMax,Math.max(a,Ho(s))))}),i=r===a?[{value:a}]:[{value:r},{value:(r+a)/2},{value:a,autoRanges:!0}],o.length&&o[0].radius&&i.reverse(),i.forEach(function(t,e){o&&o[e]&&(i[e]=Uo(o[e],t))}),i}predictBubbleSizes(){const t=this.chart,e=t.legend.options,o=e.floating,i="horizontal"===e.layout,s=i?t.legend.lastLineHeight:0,r=t.plotSizeX,a=t.plotSizeY,n=t.series[this.options.seriesIndex],l=n.getPxExtremes(),h=Math.ceil(l.minPxSize),c=Math.ceil(l.maxPxSize),p=Math.min(a,r);let d,u=n.options.maxSize;return o||!/%$/.test(u)?d=c:(u=parseFloat(u),d=(p+s)*u/100/(u/100+1),(i&&a-d>=r||!i&&r-d>=a)&&(d=c)),[h,Math.ceil(d)]}updateRanges(t,e){const o=this.legend.options.bubbleLegend;o.minSize=t,o.maxSize=e,o.ranges=this.getRanges()}correctSizes(){const t=this.legend,e=this.chart,o=e.series[this.options.seriesIndex],i=o.getPxExtremes(),s=i.maxPxSize,r=this.options.maxSize;1<Math.abs(Math.ceil(s)-r)&&(this.updateRanges(this.options.minSize,i.maxPxSize),t.render())}},Ko=x()["setOptions"],$o=x()["composed"],{addEvent:Jo,objectEach:Qo,pushUnique:ti,wrap:ei}=x();function oi(t,e,o){const i=this,s=i.legend,r=0<=ii(i);let a,n,l;s&&s.options.enabled&&s.bubbleLegend&&s.options.bubbleLegend.autoRanges&&r?(a=s.bubbleLegend.options,n=s.bubbleLegend.predictBubbleSizes(),s.bubbleLegend.updateRanges(n[0],n[1]),a.placed||(s.group.placed=!1,s.allItems.forEach(t=>{(l=t.legendItem||{}).group&&(l.group.translateY=void 0)})),s.render(),a.placed||(i.getMargins(),i.axes.forEach(t=>{t.setScale(),t.updateNames(),Qo(t.ticks,function(t){t.isNew=!0,t.isNewLabel=!0})}),i.getMargins()),a.placed=!0,t.call(i,e,o),s.bubbleLegend.correctSizes(),ni(s,si(s))):(t.call(i,e,o),s&&s.options.enabled&&s.bubbleLegend&&(s.render(),ni(s,si(s))))}function ii(t){var e=t.series;let o=0;for(;o<e.length;){if(e[o]&&e[o].isBubble&&e[o].visible&&e[o].dataTable.rowCount)return o;o++}return-1}function si(t){const e=t.allItems,o=[],i=e.length;let s,r,a,n=0,l=0;for(n=0;n<i;n++)if(r=e[n].legendItem||{},a=(e[n+1]||{}).legendItem||{},r.labelHeight&&(e[n].itemHeight=r.labelHeight),e[n]===e[i-1]||r.y!==a.y){for(o.push({height:0}),s=o[o.length-1],l;l<=n;l++)e[l].itemHeight>s.height&&(s.height=e[l].itemHeight);s.step=n}return o}function ri(t){const e=this,o=e.bubbleLegend,i=e.options,s=i.bubbleLegend,r=ii(e.chart);o&&o.ranges&&o.ranges.length&&(s.ranges.length&&(s.autoRanges=!!s.ranges[0].autoRanges),e.destroyItem(o)),0<=r&&i.enabled&&s.enabled&&(s.seriesIndex=r,e.bubbleLegend=new qo(s,e),e.bubbleLegend.addToLegend(t.allItems))}function ai(t){if(t.defaultPrevented)return!1;const e=this,o=t.legendItem,i=e.chart,s=o.visible;e&&e.bubbleLegend&&(o.visible=!s,o.ignoreSeries=s,t=0<=ii(i),e.bubbleLegend.visible!==t&&(e.update({bubbleLegend:{enabled:t}}),e.bubbleLegend.visible=t),o.visible=s)}function ni(t,o){const e=t.allItems,i=t.options.rtl;let s,r,a,n,l=0;e.forEach((t,e)=>{(n=t.legendItem||{}).group&&(s=n.group.translateX||0,r=n.y||0,((a=t.movementX)||i&&t.ranges)&&(a=i?s-t.options.maxSize/2:s+a,n.group.attr({translateX:a})),e>o[l].step&&l++,n.group.attr({translateY:Math.round(r+o[l].height/2)}),n.y=r+o[l].height/2)})}const li={compose:function(t,e){ti($o,"Series.BubbleLegend")&&(Ko({legend:{bubbleLegend:Ro}}),ei(t.prototype,"drawChartBox",oi),Jo(e,"afterGetAllItems",ri),Jo(e,"itemClick",ai))}};var l=i(260),hi=i.n(l),{prototype:{pointClass:d}}=s()["seriesTypes"]["scatter"];const ci=x()["extend"];class pi extends d{haloPath(t){t=(t&&this.marker&&this.marker.radius||0)+t;if(this.series.chart.inverted){const e=this.pos()||[0,0],{xAxis:o,yAxis:i,chart:s}=this.series,r=2*t;return s.renderer.symbols.circle((o?.len||0)-e[1]-t,(i?.len||0)-e[0]-t,r,r)}return hi().prototype.haloPath.call(this,t)}}ci(pi.prototype,{ttBelow:!1});y=pi;const{composed:di,noop:ui}=x(),{series:mi,seriesTypes:{column:{prototype:gi},scatter:fi}}=s(),{addEvent:yi,arrayMax:bi,arrayMin:xi,clamp:vi,extend:Mi,isNumber:j,merge:wi,pick:S,pushUnique:Ci}=x();function Pi(){const t=this.len,{coll:e,isXAxis:s,min:r}=this,a=(this.max||0)-(r||0);let n=0,l=t,h=t/a,c;"xAxis"!==e&&"yAxis"!==e||(this.series.forEach(e=>{if(e.bubblePadding&&e.reserveSpace()){this.allowZoomOutside=!0,c=!0;var o,i=e.getColumn(s?"x":"y");if(s&&((e.onPoint||e).getRadii(0,0,e),e.onPoint&&(e.radii=e.onPoint.radii)),0<a){let t=i.length;for(;t--;)j(i[t])&&this.dataMin<=i[t]&&i[t]<=this.max&&(o=e.radii&&e.radii[t]||0,n=Math.min((i[t]-r)*h-o,n),l=Math.max((i[t]-r)*h+o,l))}}}),c&&0<a&&!this.logarithmic&&(l-=t,h*=(t+Math.max(0,n)-Math.min(l,t))/t,[["min","userMin",n],["max","userMax",l]].forEach(t=>{void 0===S(this.options[t[0]],this[t[1]])&&(this[t[0]]+=t[2]/h)})))}function Li(){var{ticks:e,tickPositions:o,dataMin:i=0,dataMax:s=0,categories:t}=this,r=this.options.type;if((t?.length||"category"===r)&&this.series.find(t=>t.bubblePadding)){let t=o.length;for(;t--;){const a=e[o[t]],n=a.pos||0;(s<n||n<i)&&a.label?.hide()}}}class I extends fi{static compose(t,e,o){li.compose(e,o),Ci(di,"Series.Bubble")&&(yi(t,"foundExtremes",Pi),yi(t,"afterRender",Li))}animate(t){!t&&this.points.length<this.options.animationLimit&&this.points.forEach(function(t){const{graphic:e,plotX:o=0,plotY:i=0}=t;e&&e.width&&(this.hasRendered||e.attr({x:o,y:i,width:1,height:1}),e.animate(this.markerAttribs(t),this.options.animation))},this)}getRadii(){const t=this.getColumn("z"),e=this.getColumn("y"),o=[];let i,s,r,a=this.chart.bubbleZExtremes;var{minPxSize:n,maxPxSize:l}=this.getPxExtremes();if(!a){let e=Number.MAX_VALUE,o=-Number.MAX_VALUE,i;this.chart.series.forEach(t=>{t.bubblePadding&&t.reserveSpace()&&((t=(t.onPoint||t).getZExtremes())&&(e=Math.min(S(e,t.zMin),t.zMin),o=Math.max(S(o,t.zMax),t.zMax),i=!0))}),i?(a={zMin:e,zMax:o},this.chart.bubbleZExtremes=a):a={zMin:0,zMax:0}}for(s=0,i=t.length;s<i;s++)r=t[s],o.push(this.getRadius(a.zMin,a.zMax,n,l,r,e&&e[s]));this.radii=o}getRadius(t,e,o,i,s,r){var a=this.options,n="width"!==a.sizeBy,l=a.zThreshold;let h=e-t,c=.5;if(null===r||null===s)return null;if(j(s)){if(a.sizeByAbsoluteValue&&(s=Math.abs(s-l),e=h=Math.max(e-l,Math.abs(t-l)),t=0),s<t)return o/2-1;0<h&&(c=(s-t)/h)}return n&&0<=c&&(c=Math.sqrt(c)),Math.ceil(o+c*(i-o))/2}hasData(){return!!this.dataTable.rowCount}markerAttribs(t,e){var e=super.markerAttribs(t,e),{height:o=0,width:i=0}=e;return this.chart.inverted?Mi(e,{x:(t.plotX||0)-i/2,y:(t.plotY||0)-o/2}):e}pointAttribs(t,e){const o=this.options.marker,i=o?.fillOpacity,s=mi.prototype.pointAttribs.call(this,t,e);return s["fill-opacity"]=i??1,s}translate(){super.translate.call(this),this.getRadii(),this.translateBubble()}translateBubble(){var{data:t,options:e,radii:o}=this,i=this.getPxExtremes()["minPxSize"];let s=t.length;for(;s--;){const r=t[s],a=o?o[s]:0;"z"===this.zoneAxis&&(r.negative=(r.z||0)<(e.zThreshold||0)),j(a)&&i/2<=a?(r.marker=Mi(r.marker,{radius:a,width:2*a,height:2*a}),r.dlBox={x:r.plotX-a,y:r.plotY-a,width:2*a,height:2*a}):(r.shapeArgs=r.plotY=r.dlBox=void 0,r.isInside=!1)}}getPxExtremes(){const o=Math.min(this.chart.plotWidth,this.chart.plotHeight);var t=t=>{let e;return"string"==typeof t&&(e=/%$/.test(t),t=parseInt(t,10)),e?o*t/100:t},e=t(S(this.options.minSize,8));return{minPxSize:e,maxPxSize:Math.max(t(S(this.options.maxSize,"20%")),e)}}getZExtremes(){var t=this.options,e=this.getColumn("z").filter(j);if(e.length){var o=S(t.zMin,vi(xi(e),!1===t.displayNegative?t.zThreshold||0:-Number.MAX_VALUE,Number.MAX_VALUE)),t=S(t.zMax,bi(e));if(j(o)&&j(t))return{zMin:o,zMax:t}}}searchKDTree(t,e,o,i=ui,s=ui){return super.searchKDTree(t,e,o,(t,e,o)=>{var i=t[o]||0,o=e[o]||0;let s,r=!1;return i===o?s=t.index>e.index?t:e:i<0&&o<0?(s=i-(t.marker?.radius||0)>=o-(e.marker?.radius||0)?t:e,r=!0):s=i<o?t:e,[s,r]},(t,e,o)=>!o&&e<t||t<e)}}I.defaultOptions=wi(fi.defaultOptions,{dataLabels:{formatter:function(){const t=this.series.chart["numberFormatter"];var e=this.point["z"];return j(e)?t(e,-1):""},inside:!0,verticalAlign:"middle"},animationLimit:250,marker:{lineColor:null,lineWidth:1,fillOpacity:.5,radius:null,states:{hover:{radiusPlus:0}},symbol:"circle"},minSize:8,maxSize:"20%",softThreshold:!1,states:{hover:{halo:{size:5}}},tooltip:{pointFormat:"({point.x}, {point.y}), Size: {point.z}"},turboThreshold:0,zThreshold:0,zoneAxis:"z"}),Mi(I.prototype,{alignDataLabel:gi.alignDataLabel,applyZones:ui,bubblePadding:!0,isBubble:!0,keysAffectYAxis:["y"],pointArrayMap:["y","z"],pointClass:y,parallelArrays:["x","y","z"],trackerGroups:["group","dataLabelsGroup"],specialGroup:"group",zoneAxis:"z"}),yi(I,"updatedData",t=>{delete t.target.chart.bubbleZExtremes}),yi(I,"remove",t=>{delete t.target.chart.bubbleZExtremes}),s().registerSeriesType("bubble",I);var e=I,{prototype:{pointClass:{prototype:o}}}=s()["seriesTypes"]["map"];const Ti=x()["extend"];class Ai extends y{isValid(){return"number"==typeof this.z}}Ti(Ai.prototype,{applyOptions:o.applyOptions,getProjectedBounds:o.getProjectedBounds});p=Ai;const{map:{prototype:B},mappoint:{prototype:ji}}=s()["seriesTypes"],{extend:zi,merge:ki}=x();class Si extends e{constructor(){super(...arguments),this.clearBounds=B.clearBounds}searchPoint(t,e){return this.searchKDTree({plotX:t.chartX-this.chart.plotLeft,plotY:t.chartY-this.chart.plotTop},e,t)}translate(){ji.translate.call(this),this.getRadii(),this.translateBubble()}}Si.defaultOptions=ki(e.defaultOptions,{lineWidth:0,animationLimit:500,joinBy:"hc-key",tooltip:{pointFormat:"{point.name}: {point.z}"}}),zi(Si.prototype,{type:"mapbubble",axisTypes:["colorAxis"],getProjectedBounds:B.getProjectedBounds,isCartesian:!1,pointArrayMap:["z"],pointClass:p,processData:B.processData,projectPoint:ji.projectPoint,kdAxisArray:["plotX","plotY"],setData:B.setData,setOptions:B.setOptions,updateData:B.updateData,useMapGeometry:!0,xyFromShape:!0}),s().registerSeriesType("mapbubble",Si);const Ii=Si;var{pointClass:t}=s().seriesTypes["scatter"]["prototype"];const{clamp:Bi,defined:Ei,extend:Di,pick:Oi}=x();class Vi extends t{applyOptions(t,e){return!this.isNull&&null!==this.value||delete this.color,super.applyOptions(t,e),this.formatPrefix=this.isNull||null===this.value?"null":"point",this}getCellAttributes(){const t=this,e=t.series,o=e.options,i=(o.colsize||1)/2,s=(o.rowsize||1)/2,r=e.xAxis,a=e.yAxis,n=t.options.marker||e.options.marker,l=e.pointPlacementToXValue(),h=Oi(t.pointPadding,o.pointPadding,0),c={x1:Bi(Math.round(r.len-r.translate(t.x-i,!1,!0,!1,!0,-l)),-r.len,2*r.len),x2:Bi(Math.round(r.len-r.translate(t.x+i,!1,!0,!1,!0,-l)),-r.len,2*r.len),y1:Bi(Math.round(a.translate(t.y-s,!1,!0,!1,!0)),-a.len,2*a.len),y2:Bi(Math.round(a.translate(t.y+s,!1,!0,!1,!0)),-a.len,2*a.len)};for(const f of[["width","x"],["height","y"]]){var p=f[0],d=f[1];let t=d+"1",e=d+"2";var u=Math.abs(c[t]-c[e]),m=n&&n.lineWidth||0,g=Math.abs(c[t]+c[e])/2,p=n&&n[p];Ei(p)&&p<u&&(u=p/2+m/2,c[t]=g-u,c[e]=g+u),h&&(("x"===d&&r.reversed||"y"===d&&!a.reversed)&&(t=e,e=d+"1"),c[t]+=h,c[e]-=h)}return c}haloPath(t){if(!t)return[];var{x:e=0,y:o=0,width:i=0,height:s=0}=this.shapeArgs||{};return[["M",e-t,o-t],["L",e-t,o+s+t],["L",e+i+t,o+s+t],["L",e+i+t,o-t],["Z"]]}isValid(){return this.value!==1/0&&this.value!==-1/0}}Di(Vi.prototype,{dataLabelOnNull:!0,moveToTopOnHover:!0,ttBelow:!1});l=Vi;const Xi=x()["isNumber"];d={animation:!1,borderRadius:0,borderWidth:0,interpolation:!1,nullColor:"#f7f7f7",dataLabels:{formatter:function(){const t=this.series.chart["numberFormatter"];var e=this.point["value"];return Xi(e)?t(e,-1):""},inside:!0,verticalAlign:"middle",crop:!1,overflow:"allow",padding:0},marker:{symbol:"rect",radius:0,lineColor:void 0,states:{hover:{lineWidthPlus:0},select:{}}},clip:!0,pointRange:null,tooltip:{pointFormat:"{point.x}, {point.y}: {point.value}<br/>"},states:{hover:{halo:!1,brightness:.2}},legendSymbol:"rectangle"};const Ni=x()["doc"],{defined:Gi,pick:Ri}=x();y={colorFromPoint:function(t,e){const o=e.series.colorAxis;if(o){const i=o.toColor(t||0,e).split(")")[0].split("(")[1].split(",").map(t=>Ri(parseFloat(t),parseInt(t,10)));return i[3]=255*Ri(i[3],1),Gi(t)&&e.visible||(i[3]=0),i}return[0,0,0,0]},getContext:function(t){const{canvas:e,context:o}=t;return e&&o?(o.clearRect(0,0,e.width,e.height),o):(t.canvas=Ni.createElement("canvas"),t.context=t.canvas.getContext("2d",{willReadFrequently:!0})||void 0,t.context)}};const{series:N,seriesTypes:{column:Yi,scatter:Hi}}=s(),Wi=qt()["prototype"]["symbols"],{addEvent:Fi,extend:Ui,fireEvent:Zi,isNumber:_i,merge:qi,pick:Ki}=x(),{colorFromPoint:$i,getContext:Ji}=y;class Qi extends Hi{constructor(){super(...arguments),this.valueMax=NaN,this.valueMin=NaN,this.isDirtyCanvas=!0}drawPoints(){const e=this,t=e.options,o=t.interpolation,O=t.marker||{};if(o){const{image:s,chart:r,xAxis:a,yAxis:n}=e,{reversed:l=!1,len:h}=a,{reversed:c=!1,len:p}=n,d={width:h,height:p};if(!s||e.isDirtyData||e.isDirtyCanvas){const u=Ji(e),{canvas:m,options:{colsize:g=1,rowsize:f=1},points:y,points:{length:b}}=e,x=b-1,v=r.colorAxis&&r.colorAxis[0];if(m&&u&&v){const{min:M,max:w}=a.getExtremes(),{min:C,max:P}=n.getExtremes(),L=w-M,T=P-C,A=Math.round(L/g/8*8),j=Math.round(T/f/8*8),[z,k]=[[A,A/L,l,"ceil"],[j,j/T,!c,"floor"]].map(([e,o,t,i])=>t?t=>Math[i](e-o*t):t=>Math[i](o*t)),S=m.width=A+1,I=m.height=j+1,B=S*I,E=x/B,D=new Uint8ClampedArray(4*B);e.buildKDTree();for(let t=0;t<B;t++){var i=y[Math.ceil(E*t)],{x:V,y:X}=i;D.set($i(i.value,i),(i=V,4*Math.ceil(S*k(X-C)+z(i-M))))}u.putImageData(new ImageData(D,S),0,0),s?s.attr({...d,href:m.toDataURL("image/png",1)}):(e.directTouch=!1,e.image=r.renderer.image(m.toDataURL("image/png",1)).attr(d).add(e.group))}e.isDirtyCanvas=!1}else s.width===h&&s.height===p||s.attr(d)}else(O.enabled||e._hasPointMarkers)&&(N.prototype.drawPoints.call(e),e.points.forEach(t=>{t.graphic&&(t.graphic[e.chart.styledMode?"css":"animate"](e.colorAttribs(t)),null===t.value&&t.graphic.addClass("highcharts-null-point"))}))}getExtremes(){var{dataMin:t,dataMax:e}=N.prototype.getExtremes.call(this,this.getColumn("value"));return _i(t)&&(this.valueMin=t),_i(e)&&(this.valueMax=e),N.prototype.getExtremes.call(this)}getValidPoints(t,e){return N.prototype.getValidPoints.call(this,t,e,!0)}hasData(){return!!this.dataTable.rowCount}init(){super.init.apply(this,arguments);const t=this.options;t.pointRange=Ki(t.pointRange,t.colsize||1),this.yAxis.axisPointRange=t.rowsize||1,Wi.ellipse=Wi.circle,t.marker&&_i(t.borderRadius)&&(t.marker.r=t.borderRadius)}markerAttribs(t,e){var o,i=t.shapeArgs||{};return t.hasImage?{x:t.plotX,y:t.plotY}:e&&"normal"!==e?(t=t.options.marker||{},o=(this.options.marker||{}).states?.[e]||{},e=((t=t.states?.[e]||{}).width||o.width||i.width||0)+(t.widthPlus||o.widthPlus||0),t=(t.height||o.height||i.height||0)+(t.heightPlus||o.heightPlus||0),{x:(i.x||0)+((i.width||0)-e)/2,y:(i.y||0)+((i.height||0)-t)/2,width:e,height:t}):i}pointAttribs(t,e){const o=N.prototype.pointAttribs.call(this,t,e),i=this.options||{},s=this.chart.options.plotOptions||{},r=s.series||{},a=s.heatmap||{},n=t?.options.borderColor||i.borderColor||a.borderColor||r.borderColor,l=t?.options.borderWidth||i.borderWidth||a.borderWidth||r.borderWidth||o["stroke-width"];return o.stroke=t?.marker?.lineColor||i.marker?.lineColor||n||this.color,o["stroke-width"]=l,e&&"normal"!==e&&(t=qi(i.states?.[e],i.marker?.states?.[e],t?.options.states?.[e]||{}),o.fill=t.color||X().parse(o.fill).brighten(t.brightness||0).get(),o.stroke=t.lineColor||o.stroke),o}translate(){const t=this.options,{borderRadius:s,marker:e}=t,r=e?.symbol||"rect",a=Wi[r]?r:"rect",n=-1!==["circle","square"].indexOf(a);this.generatePoints();for(const c of this.points){var l,h=c.getCellAttributes();let t=Math.min(h.x1,h.x2),e=Math.min(h.y1,h.y2),o=Math.max(Math.abs(h.x2-h.x1),0),i=Math.max(Math.abs(h.y2-h.y1),0);c.hasImage=0===(c.marker?.symbol||r||"").indexOf("url"),n&&(l=Math.abs(o-i),t=Math.min(h.x1,h.x2)+(o<i?0:l/2),e=Math.min(h.y1,h.y2)+(o<i?l/2:0),o=i=Math.min(o,i)),c.hasImage&&(c.marker={width:o,height:i}),c.plotX=c.clientX=(h.x1+h.x2)/2,c.plotY=(h.y1+h.y2)/2,c.shapeType="path",c.shapeArgs=qi(!0,{x:t,y:e,width:o,height:i},{d:Wi[a](t,e,o,i,{r:_i(s)?s:0})})}Zi(this,"afterTranslate")}}Qi.defaultOptions=qi(Hi.defaultOptions,d),Fi(Qi,"afterDataClassLegendClick",function(){this.isDirtyCanvas=!0,this.drawPoints()}),Ui(Qi.prototype,{axisTypes:n.seriesMembers.axisTypes,colorKey:n.seriesMembers.colorKey,directTouch:!0,getExtremesFromAll:!0,keysAffectYAxis:["y"],parallelArrays:n.seriesMembers.parallelArrays,pointArrayMap:["y","value"],pointClass:l,specialGroup:"group",trackerGroups:n.seriesMembers.trackerGroups,alignDataLabel:Yi.prototype.alignDataLabel,colorAttribs:n.seriesMembers.colorAttribs,getSymbol:N.prototype.getSymbol}),n.compose(Qi),s().registerSeriesType("heatmap",Qi);const E=x(),ts=(E.ColorMapComposition=n,E.MapChart=E.MapChart||h,E.MapNavigation=E.MapNavigation||Ot,E.MapView=E.MapView||po,E.Projection=E.Projection||Ze,E.mapChart=E.Map=E.MapChart.mapChart,E.maps=E.MapChart.maps,E.geojson=we.geojson,E.topo2geo=we.topo2geo,we.compose(E.Chart),Ii.compose(E.Axis,E.Chart,E.Legend),Ot.compose(h,E.Pointer,E.SVGRenderer),po.compose(h),x());return V.default})());