!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(t._Highcharts,t._Highcharts.SeriesRegistry,t._Highcharts.Color):"function"==typeof define&&define.amd?define("highcharts/modules/tilemap",["highcharts/highcharts"],function(t){return e(t,t.SeriesRegistry,t.Color)}):"object"==typeof exports?exports["highcharts/modules/tilemap"]=e(t._Highcharts,t._Highcharts.SeriesRegistry,t._Highcharts.Color):t.Highcharts=e(t.Highcharts,t.Highcharts.SeriesRegistry,t.Highcharts.Color)}("undefined"==typeof window?this:window,(N,G,B)=>(()=>{"use strict";var t,i={512:t=>{t.exports=G},620:t=>{t.exports=B},944:t=>{t.exports=N}},s={};function o(t){var e=s[t];if(void 0!==e)return e.exports;e=s[t]={exports:{}};return i[t](e,e.exports,o),e.exports}o.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return o.d(e,{a:e}),e},o.d=(t,e)=>{for(var i in e)o.o(e,i)&&!o.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var e={},a=(o.d(e,{default:()=>K}),o(944)),a=o.n(a),r=o(512),r=o.n(r),n=o(620);let h=o.n(n)()["parse"],{addEvent:p,extend:d,merge:c,pick:g,splat:u}=a();{n=t=t||{};let l;function x(){let t=this["userOptions"];this.colorAxis=[],t.colorAxis&&(t.colorAxis=u(t.colorAxis),t.colorAxis.map(t=>new l(this,t)))}function f(e){let t=this.chart.colorAxis||[],i=t=>{t=e.allItems.indexOf(t);-1!==t&&(this.destroyItem(e.allItems[t]),e.allItems.splice(t,1))},s=[],o,a;for(t.forEach(function(t){(o=t.options)?.showInLegend&&(o.dataClasses&&o.visible?s=s.concat(t.getDataClassLegendSymbols()):o.visible&&s.push(t),t.series.forEach(function(t){t.options.showInLegend&&!o.dataClasses||("point"===t.options.legendType?t.points.forEach(function(t){i(t)}):i(t))}))}),a=s.length;a--;)e.allItems.unshift(s[a])}function y(t){t.visible&&t.item.legendColor&&t.item.legendItem.symbol.attr({fill:t.item.legendColor})}function m(e){this.chart.colorAxis?.forEach(t=>{t.update({},e.redraw)})}function b(){(this.chart.colorAxis?.length||this.colorAttribs)&&this.translateColors()}function A(){let t=this.axisTypes;t?-1===t.indexOf("colorAxis")&&t.push("colorAxis"):this.axisTypes=["colorAxis"]}function P(t){let e=this,i=t?"show":"hide";e.visible=e.options.visible=!!t,["graphic","dataLabel"].forEach(function(t){e[t]&&e[t][i]()}),this.series.buildKDTree()}function M(){let i=this,t=this.getPointsCollection(),s=this.options.nullColor,o=this.colorAxis,a=this.colorKey;t.forEach(t=>{var e=t.getNestedProperty(a),e=t.options.color||(t.isNull||null===t.value?s:o&&void 0!==e?o.toColor(e,t):t.color||i.color);e&&t.color!==e&&(t.color=e,"point"===i.options.legendType&&t.legendItem&&t.legendItem.label&&i.chart.legend.colorizeItem(t,t.visible))})}function v(){this.elem.attr("fill",h(this.start).tweenTo(h(this.end),this.pos),void 0,!0)}function L(){this.elem.attr("stroke",h(this.start).tweenTo(h(this.end),this.pos),void 0,!0)}n.compose=function(t,e,s,i,o){let a=e.prototype,r=s.prototype,n=o.prototype;if(!a.collectionsWithUpdate.includes("colorAxis")){l=t,a.collectionsWithUpdate.push("colorAxis"),a.collectionsWithInit.colorAxis=[a.addColorAxis],p(e,"afterCreateAxes",x);{s=e;let i=s.prototype.createAxis;s.prototype.createAxis=function(t,e){if("colorAxis"!==t)return i.apply(this,arguments);t=new l(this,c(e.axis,{index:this[t].length,isX:!1}));return this.isDirtyLegend=!0,this.axes.forEach(t=>{t.series=[]}),this.series.forEach(t=>{t.bindAxes(),t.isDirtyData=!0}),g(e.redraw,!0)&&this.redraw(e.animation),t}}r.fillSetter=v,r.strokeSetter=L,p(i,"afterGetAllItems",f),p(i,"afterColorizeItem",y),p(i,"afterUpdate",m),d(n,{optionalAxis:"colorAxis",translateColors:M}),d(n.pointClass.prototype,{setVisible:P}),p(o,"afterTranslate",b,{order:1}),p(o,"bindAxes",A)}},n.pointSetVisible=P}let l=t,{series:{prototype:{pointClass:S}},seriesTypes:{heatmap:{prototype:{pointClass:C}}}}=r(),w=a()["extend"];class T extends C{haloPath(){return this.series.tileShape.haloPath.apply(this,arguments)}}w(T.prototype,{setState:S.prototype.setState,setVisible:l.pointSetVisible});let _=a()["noop"],{heatmap:D,scatter:I}=r().seriesTypes,{clamp:E,pick:k}=a();function z(t,e,i){t=t.options;return{xPad:-(t.colsize||1)/e,yPad:-(t.rowsize||1)/i}}let F={hexagon:{alignDataLabel:I.prototype.alignDataLabel,getSeriesPadding:function(t){return z(t,3,2)},haloPath:function(t){if(!t)return[];var e=this.tileEdges;return[["M",e.x2-t,e.y1+t],["L",e.x3+t,e.y1+t],["L",e.x4+1.5*t,e.y2],["L",e.x3+t,e.y3-t],["L",e.x2-t,e.y3-t],["L",e.x1-1.5*t,e.y2],["Z"]]},translate:function(){let c,t=this.options,g=this.xAxis,u=this.yAxis,x=t.pointPadding||0,f=(t.colsize||1)/3,y=(t.rowsize||1)/2;for(var m of(this.generatePoints(),this.points)){let t=E(Math.floor(g.len-g.translate(m.x-2*f,0,1,0,1)),-g.len,2*g.len),e=E(Math.floor(g.len-g.translate(m.x-f,0,1,0,1)),-g.len,2*g.len),i=E(Math.floor(g.len-g.translate(m.x+f,0,1,0,1)),-g.len,2*g.len),s=E(Math.floor(g.len-g.translate(m.x+2*f,0,1,0,1)),-g.len,2*g.len),o=E(Math.floor(u.translate(m.y-y,0,1,0,1)),-u.len,2*u.len),a=E(Math.floor(u.translate(m.y,0,1,0,1)),-u.len,2*u.len),r=E(Math.floor(u.translate(m.y+y,0,1,0,1)),-u.len,2*u.len),n=m.pointPadding??x,l=n*Math.abs(e-t)/Math.abs(r-a),h=g.reversed?-l:l,p=g.reversed?-n:n,d=u.reversed?-n:n;m.x%2&&(c=c||Math.round(Math.abs(r-o)/2)*(u.reversed?-1:1),o+=c,a+=c,r+=c),m.plotX=m.clientX=(e+i)/2,m.plotY=a,m.tileEdges={x1:t+=h+p,x2:e+=p,x3:i-=p,x4:s-=h+p,y1:o-=d,y2:a,y3:r+=d},m.shapeType="path",m.shapeArgs={d:[["M",e,o],["L",i,o],["L",s,a],["L",i,r],["L",e,r],["L",t,a],["Z"]]}}this.translateColors()}},diamond:{alignDataLabel:I.prototype.alignDataLabel,getSeriesPadding:function(t){return z(t,2,2)},haloPath:function(t){if(!t)return[];var e=this.tileEdges;return[["M",e.x2,e.y1+t],["L",e.x3+t,e.y2],["L",e.x2,e.y3-t],["L",e.x1-t,e.y2],["Z"]]},translate:function(){let p,t=this.options,d=this.xAxis,c=this.yAxis,g=t.pointPadding||0,u=t.colsize||1,x=(t.rowsize||1)/2;for(var f of(this.generatePoints(),this.points)){let t=E(Math.round(d.len-d.translate(f.x-u,0,1,0,0)),-d.len,2*d.len),e=E(Math.round(d.len-d.translate(f.x+u,0,1,0,0)),-d.len,2*d.len),i=E(Math.round(c.translate(f.y-x,0,1,0,0)),-c.len,2*c.len),s=E(Math.round(c.translate(f.y,0,1,0,0)),-c.len,2*c.len),o=E(Math.round(c.translate(f.y+x,0,1,0,0)),-c.len,2*c.len),a=E(Math.round(d.len-d.translate(f.x,0,1,0,0)),-d.len,2*d.len),r=k(f.pointPadding,g),n=r*Math.abs(a-t)/Math.abs(o-s),l=d.reversed?-n:n,h=c.reversed?-r:r;f.x%2&&(p=Math.abs(o-i)/2*(c.reversed?-1:1),i+=p,s+=p,o+=p),f.plotX=f.clientX=a,f.plotY=s,f.tileEdges={x1:t+=l,x2:a,x3:e-=l,y1:i-=h,y2:s,y3:o+=h},f.shapeType="path",f.shapeArgs={d:[["M",a,i],["L",e,s],["L",a,o],["L",t,s],["Z"]]}}this.translateColors()}},circle:{alignDataLabel:I.prototype.alignDataLabel,getSeriesPadding:function(t){return z(t,2,2)},haloPath:function(t){return I.prototype.pointClass.prototype.haloPath.call(this,t+(t&&this.radius))},translate:function(){let t=this.options,o=this.xAxis,a=this.yAxis,r=t.pointPadding||0,n=(t.rowsize||1)/2,l=t.colsize||1,h,p,d,c,g=!1;for(var u of(this.generatePoints(),this.points)){let t=E(Math.round(o.len-o.translate(u.x,0,1,0,0)),-o.len,2*o.len),e=r,i=!1,s=E(Math.round(a.translate(u.y,0,1,0,0)),-a.len,2*a.len);void 0!==u.pointPadding&&(e=u.pointPadding,i=!0,g=!0),c&&!g||(d=Math.floor(Math.sqrt((h=Math.abs(E(Math.floor(o.len-o.translate(u.x+l,0,1,0,0)),-o.len,2*o.len)-t))*h+(p=Math.abs(E(Math.floor(a.translate(u.y+n,0,1,0,0)),-a.len,2*a.len)-s))*p)/2),c=Math.min(h,d,p)-e,g&&!i&&(g=!1)),u.x%2&&(s+=p*(a.reversed?-1:1)),u.plotX=u.clientX=t,u.plotY=s,u.radius=c,u.shapeType="circle",u.shapeArgs={x:t,y:s,r:c}}this.translateColors()}},square:{alignDataLabel:D.prototype.alignDataLabel,translate:D.prototype.translate,getSeriesPadding:_,haloPath:D.prototype.pointClass.prototype.haloPath}},{composed:j,noop:R}=a(),{column:H,heatmap:O,scatter:U}=r().seriesTypes,{addEvent:V,extend:Z,merge:q,pushUnique:W}=a();function Y(){if(!this.recomputingForTilemap&&"colorAxis"!==this.coll){let e=this,t=e.series.map(function(t){return t.getSeriesPixelPadding&&t.getSeriesPixelPadding(e)}).reduce(function(t,e){return(t&&t.padding)>(e&&e.padding)?t:e},void 0)||{padding:0,axisLengthFactor:1},i=Math.round(t.padding*t.axisLengthFactor);t.padding&&(e.len-=i,e.recomputingForTilemap=!0,e.setAxisTranslation(),delete e.recomputingForTilemap,e.minPixelPadding+=t.padding,e.len+=i)}}class X extends O{static compose(t){W(j,"TilemapSeries")&&V(t,"afterSetAxisTranslation",Y)}alignDataLabel(){return this.tileShape.alignDataLabel.apply(this,arguments)}drawPoints(){for(var t of(H.prototype.drawPoints.call(this),this.points))t.graphic&&t.graphic[this.chart.styledMode?"css":"animate"](this.colorAttribs(t))}getSeriesPixelPadding(t){var e=t.isXAxis,i=this.tileShape.getSeriesPadding(this);if(!i)return{padding:0,axisLengthFactor:1};var s=Math.round(t.translate(e?2*i.xPad:i.yPad,0,1,0,1)),i=Math.round(t.translate(e?i.xPad:0,0,1,0,1));return{padding:(t.single?Math.abs(s-i)/2:Math.abs(s-i))||0,axisLengthFactor:e?2:1.1}}setOptions(){var t=super.setOptions.apply(this,arguments);return this.tileShape=F[t.tileShape],t}translate(){return this.tileShape.translate.apply(this,arguments)}}X.defaultOptions=q(O.defaultOptions,{marker:null,states:{hover:{halo:{enabled:!0,size:2,opacity:.5,attributes:{zIndex:3}}}},pointPadding:2,tileShape:"hexagon"}),Z(X.prototype,{getSymbol:R,markerAttribs:U.prototype.markerAttribs,pointAttribs:H.prototype.pointAttribs,pointClass:T}),r().registerSeriesType("tilemap",X);n=a();X.compose(n.Axis);let K=a();return e.default})());