!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(t._Highcharts,t._Highcharts.SeriesRegistry,t._Highcharts.SVGElement):"function"==typeof define&&define.amd?define("highcharts/modules/organization",["highcharts/highcharts"],function(t){return e(t,t.SeriesRegistry,t.SVGElement)}):"object"==typeof exports?exports["highcharts/modules/organization"]=e(t._Highcharts,t._Highcharts.SeriesRegistry,t._Highcharts.SVGElement):t.Highcharts=e(t.Highcharts,t.Highcharts.SeriesRegistry,t.Highcharts.SVGElement)}("undefined"==typeof window?this:window,(H,R,E)=>(()=>{"use strict";var i={28:t=>{t.exports=E},512:t=>{t.exports=R},944:t=>{t.exports=H}},n={};function s(t){var e=n[t];if(void 0!==e)return e.exports;e=n[t]={exports:{}};return i[t](e,e.exports,s),e.exports}s.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return s.d(e,{a:e}),e},s.d=(t,e)=>{for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var t={},e=(s.d(t,{default:()=>F}),s(944)),e=s.n(e),r=s(512),r=s.n(r),{pointClass:o}=r().seriesTypes["sankey"]["prototype"];const{defined:a,find:h,pick:d}=e();class l extends o{constructor(t,e,i){super(t,e,i),this.isNode||(this.dataLabelOnNull=!0,this.formatPrefix="link")}getSum(){return 1}setNodeColumn(){super.setNodeColumn();const n=this,s=n.getFromNode().fromNode;if(!a(n.options.column)&&0!==n.linksTo.length&&s&&"hanging"===s.options.layout){let i=-1,e;n.options.layout=d(n.options.layout,"hanging"),n.hangsFrom=s,h(s.linksFrom,(t,e)=>{t=t.toNode===n;return t&&(i=e),t});for(let t=0;t<s.linksFrom.length;++t)(e=s.linksFrom[t]).toNode.id===n.id?t=s.linksFrom.length:i+=function e(t){let i=t.linksFrom.length;return t.linksFrom.forEach(t=>{t.id===t.toNode.linksTo[0].id?i+=e(t.toNode):i--}),i}(e.toNode);n.column=(n.column||0)+i}}}var o=l,p={borderColor:"#666666",borderRadius:3,link:{color:"#666666",lineWidth:1,radius:10,type:"default"},borderWidth:1,dataLabels:{nodeFormatter:function(){const t={width:"100%",height:"100%",display:"flex","flex-direction":"row","align-items":"center","justify-content":"center"},e={"max-height":"100%","border-radius":"50%"},i={width:"100%",padding:0,"text-align":"center","white-space":"normal"};function n(i){return Object.keys(i).reduce(function(t,e){return t+e+":"+i[e]+";"},'style="')+'"'}var{description:s,image:r,title:o}=this.point;r&&(e["max-width"]="30%",i.width="70%"),this.series.chart.renderer.forExport&&(t.display="block",i.position="absolute",i.left=r?"30%":0,i.top=0);let a="<div "+n(t)+">";return r&&(a+='<img src="'+r+'" '+n(e)+">"),a+="<div "+n(i)+">",this.point.name&&(a+="<h4 "+n({margin:0})+">"+this.point.name+"</h4>"),o&&(a+="<p "+n({margin:0})+">"+(o||"")+"</p>"),s&&(a+="<p "+n({opacity:.75,margin:"5px"})+">"+s+"</p>"),a+="</div></div>"},style:{fontWeight:"normal",fontSize:"0.9em",textAlign:"left"},useHTML:!0,linkTextPath:{attributes:{startOffset:"95%",textAnchor:"end"}}},hangingIndent:20,hangingIndentTranslation:"inherit",hangingSide:"left",minNodeLength:10,nodeWidth:50,tooltip:{nodeFormat:"{point.name}<br>{point.title}<br>{point.description}"}};function g(e,i){const n=[];for(let t=0;t<e.length;t++){var s,r,o,a,h,d,l=e[t][1],p=e[t][2];"number"==typeof l&&"number"==typeof p&&(0===t?n.push(["M",l,p]):t!==e.length-1&&i?(r=e[t-1],a=e[t+1],r&&a&&(s=r[1],r=r[2],o=a[1],a=a[2],"number"==typeof s&&"number"==typeof o&&"number"==typeof r&&"number"==typeof a&&s!==o&&r!==a&&(h=s<o?1:-1,d=r<a?1:-1,n.push(["L",l-h*Math.min(Math.abs(l-s),i),p-d*Math.min(Math.abs(p-r),i)],["C",l,p,l,p,l+h*Math.min(Math.abs(l-o),i),p+d*Math.min(Math.abs(p-a),i)])))):n.push(["L",l,p]))}return n}const m={applyRadius:g,getLinkPath:{default:function(t){var{x1:t,y1:e,x2:i,y2:n,width:s=0,inverted:r=!1,radius:o,parentVisible:a}=t,h=[["M",t,e],["L",t,e],["C",t,e,t,n,t,n],["L",t,n],["C",t,e,t,n,t,n],["L",t,n]];return a?g([["M",t,e],["L",t+s*(r?-.5:.5),e],["L",t+s*(r?-.5:.5),n],["L",i,n]],o):h},straight:function(t){var{x1:t,y1:e,x2:i,y2:n,width:s=0,inverted:r=!1,parentVisible:o}=t;return o?[["M",t,e],["L",t+s*(r?-1:1),n],["L",i,n]]:[["M",t,e],["L",t,n],["L",t,n]]},curved:function(t){var{x1:t,y1:e,x2:i,y2:n,offset:s=0,width:r=0,inverted:o=!1,parentVisible:a}=t;return a?[["M",t,e],["C",t+s,e,t-s+r*(o?-1:1),n,t+r*(o?-1:1),n],["L",i,n]]:[["M",t,e],["C",t,e,t,n,t,n],["L",i,n]]}}};var c=s(28),c=s.n(c);const x=e()["deg2rad"],{addEvent:u,merge:f,uniqueKey:y,defined:k,extend:b}=e();function L(s,t){t=f(!0,{enabled:!0,attributes:{dy:-5,startOffset:"50%",textAnchor:"middle"}},t);const r=this.renderer.url,o=this.text||this,e=o.textPath,{attributes:a,enabled:h}=t;return s=s||e&&e.path,e&&e.undo(),s&&h?(t=u(o,"afterModifyTree",e=>{if(s&&h){let t=s.attr("id");t||s.attr("id",t=y());const n={x:0,y:0};k(a.dx)&&(n.dx=a.dx,delete a.dx),k(a.dy)&&(n.dy=a.dy,delete a.dy),o.attr(n),this.attr({transform:""}),this.box&&(this.box=this.box.destroy());var i=e.nodes.slice(0);e.nodes.length=0,e.nodes[0]={tagName:"textPath",attributes:b(a,{"text-anchor":a.textAnchor,href:r+"#"+t}),children:i}}}),o.textPath={path:s,undo:t}):(o.attr({dx:0,dy:0}),delete o.textPath),this.added&&(o.textCache="",this.renderer.buildText(o)),this}function v(t){const e=t.bBox,s=this.element?.querySelector("textPath");if(s){const g=[],{b:c,h:i}=this.renderer.fontMetrics(this.element),u=i-c,f=new RegExp('(<tspan>|<tspan(?!\\sclass="highcharts-br")[^>]*>|<\\/tspan>)',"g"),y=s.innerHTML.replace(f,"").split(/<tspan class="highcharts-br"[^>]*>/),m=y.length;var n=(t,e)=>{var{x:e,y:i}=e,t=(s.getRotationOfChar(t)-90)*x,n=Math.cos(t),t=Math.sin(t);return[[e-u*n,i-u*t],[e+c*n,i+c*t]]};for(let e=0,i=0;i<m;i++){var r=y[i].length;for(let t=0;t<r;t+=5)try{var o=e+t+i,[a,h]=n(o,s.getStartPositionOfChar(o));0===t?(g.push(h),g.push(a)):(0===i&&g.unshift(h),i===m-1&&g.push(a))}catch(t){break}e+=r-1;try{var d=e+i,[l,p]=n(d,s.getEndPositionOfChar(d));g.unshift(p),g.unshift(l)}catch(t){break}}g.length&&g.push(g[0].slice()),e.polygon=g}return e}function A(t){const e=t.labelOptions,i=t.point,n=e[i.formatPrefix+"TextPath"]||e.textPath;n&&!e.useHTML&&(this.setTextPath(i.getDataLabelPath?.(this)||i.graphic,n),i.dataLabelPath&&!n.enabled&&(i.dataLabelPath=i.dataLabelPath.destroy()))}const w={compose:function(t){u(t,"afterGetBBox",v),u(t,"beforeAddingDataLabel",A);const e=t.prototype;e.setTextPath||(e.setTextPath=L)}},M=r().seriesTypes["sankey"],{css:N,crisp:P,extend:O,isNumber:T,merge:C,pick:S}=e();w.compose(c());class W extends M{alignDataLabel(i,n,t){const s=i.shapeArgs,r=n.text;if(t.useHTML&&s){i=this.options.borderWidth+2*this.options.dataLabels.padding;let t=s.width||0,e=s.height||0;this.chart.inverted&&(t=e,e=s.width||0),e-=i,t-=i,r.foreignObject?.attr({x:0,y:0,width:t,height:e}),N(r.element.parentNode,{width:t+"px",height:e+"px"}),N(r.element,{left:0,top:0,width:"100%",height:"100%",overflow:"hidden"}),n.getBBox=()=>({width:t,height:e,x:0,y:0}),n.width=t,n.height=e}super.alignDataLabel.apply(this,arguments)}createNode(t){const e=super.createNode.call(this,t);return e.getSum=()=>1,e}pointAttribs(t,e){const i=this,n=M.prototype.pointAttribs.call(i,t,e),s=(t.isNode?t:t.fromNode).level,r=i.mapOptionsToLevel[s||0]||{},o=t.options,a=r.states&&r.states[e]||{},h=S(a.borderRadius,o.borderRadius,r.borderRadius,i.options.borderRadius),d=S(a.linkColor,o.linkColor,r.linkColor,i.options.linkColor,a.link&&a.link.color,o.link&&o.link.color,r.link&&r.link.color,i.options.link&&i.options.link.color),l=S(a.linkLineWidth,o.linkLineWidth,r.linkLineWidth,i.options.linkLineWidth,a.link&&a.link.lineWidth,o.link&&o.link.lineWidth,r.link&&r.link.lineWidth,i.options.link&&i.options.link.lineWidth),p=S(a.linkOpacity,o.linkOpacity,r.linkOpacity,i.options.linkOpacity,a.link&&a.link.linkOpacity,o.link&&o.link.linkOpacity,r.link&&r.link.linkOpacity,i.options.link&&i.options.link.linkOpacity);return t.isNode?T(h)&&(n.r=h):(n.stroke=d,n["stroke-width"]=l,n.opacity=p,delete n.fill),n}translateLink(r){var o=this.chart,a=this.options,h=r.fromNode,d=r.toNode,l=S(a.linkLineWidth,a.link.lineWidth,0),p=S(a.link.offset,.5),g=S(r.options.link&&r.options.link.type,a.link.type);if(h.shapeArgs&&d.shapeArgs){var c=a.hangingIndent,u="right"===a.hangingSide,f=d.options.offset,f=/%$/.test(f)&&parseInt(f,10),y=o.inverted;let t=P((h.shapeArgs.x||0)+(h.shapeArgs.width||0),l),e=P((h.shapeArgs.y||0)+(h.shapeArgs.height||0)/2,l),i=P(d.shapeArgs.x||0,l),n=P((d.shapeArgs.y||0)+(d.shapeArgs.height||0)/2,l),s;y&&(t-=h.shapeArgs.width||0,i+=d.shapeArgs.width||0),s=this.colDistance?P(i+(y?1:-1)*(this.colDistance-this.nodeWidth)/2,l):P((i+t)/2,l),f&&(50<=f||f<=-50)&&(s=i=P(i+(y?-.5:.5)*(d.shapeArgs.width||0),l),n=d.shapeArgs.y||0,0<f&&(n+=d.shapeArgs.height||0)),d.hangsFrom===h&&(o.inverted?(e=u?P((h.shapeArgs.y||0)+c/2,l):P((h.shapeArgs.y||0)+(h.shapeArgs.height||0)-c/2,l),n=u?(d.shapeArgs.y||0)+c/2:(d.shapeArgs.y||0)+(d.shapeArgs.height||0)):e=P((h.shapeArgs.y||0)+c/2,l),s=i=P((d.shapeArgs.x||0)+(d.shapeArgs.width||0)/2,l)),r.plotX=s,r.plotY=(e+n)/2,r.shapeType="path","straight"===g?r.shapeArgs={d:[["M",t,e],["L",i,n]]}:"curved"===g?(f=Math.abs(i-t)*p*(y?-1:1),r.shapeArgs={d:[["M",t,e],["C",t+f,e,i-f,n,i,n]]}):r.shapeArgs={d:m.applyRadius([["M",t,e],["L",s,e],["L",s,n],["L",i,n]],S(a.linkRadius,a.link.radius))},r.dlBox={x:(t+i)/2,y:(e+n)/2,height:l,width:0}}}translateNode(t,e){super.translateNode(t,e);const i=this.chart,n=this.options,s=t.getSum(),r=this.translationFactor,o=Math.max(Math.round(s*r),n.minLinkWidth||0),a="right"===n.hangingSide,h=n.hangingIndent||0,d=n.hangingIndentTranslation,l=n.minNodeLength||10,p=Math.round(this.nodeWidth),g=t.shapeArgs,c=i.inverted?-1:1;let u=t.hangsFrom;if(u)if("cumulative"===d)for(g.height-=h,i.inverted&&!a&&(g.y-=c*h);u;)g.y+=(a?1:c)*h,u=u.hangsFrom;else if("shrink"===d)for(;u&&g.height>h+l;)g.height-=h,i.inverted&&!a||(g.y+=h),u=u.hangsFrom;else g.height-=h,i.inverted&&!a||(g.y+=h);t.nodeHeight=i.inverted?g.width:g.height,t.shapeArgs&&!t.hangsFrom&&(t.shapeArgs=C(t.shapeArgs,{x:(t.shapeArgs.x||0)+p/2-(t.shapeArgs.width||0)/2,y:(t.shapeArgs.y||0)+o/2-(t.shapeArgs.height||0)/2}))}drawDataLabels(){var t=this.options.dataLabels;if(t.linkTextPath&&t.linkTextPath.enabled)for(const e of this.points)e.options.dataLabels=C(e.options.dataLabels,{useHTML:!1});super.drawDataLabels()}}W.defaultOptions=C(M.defaultOptions,p),O(W.prototype,{pointClass:o}),r().registerSeriesType("organization",W);const F=e();return t.default})());