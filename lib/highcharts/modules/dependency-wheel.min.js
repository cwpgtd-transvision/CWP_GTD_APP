!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(t._Highcharts,t._Highcharts.SeriesRegistry,t._Highcharts.SVGElement):"function"==typeof define&&define.amd?define("highcharts/modules/dependency-wheel",["highcharts/highcharts"],function(t){return e(t,t.SeriesRegistry,t.SVGElement)}):"object"==typeof exports?exports["highcharts/modules/dependency-wheel"]=e(t._Highcharts,t._Highcharts.SeriesRegistry,t._Highcharts.SVGElement):t.Highcharts=e(t.Highcharts,t.Highcharts.SeriesRegistry,t.Highcharts.SVGElement)}("undefined"==typeof window?this:window,(W,Y,_)=>(()=>{"use strict";var a={28:t=>{t.exports=_},512:t=>{t.exports=Y},944:t=>{t.exports=W}},r={};function s(t){var e=r[t];if(void 0!==e)return e.exports;e=r[t]={exports:{}};return a[t](e,e.exports,s),e.exports}s.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return s.d(e,{a:e}),e},s.d=(t,e)=>{for(var a in e)s.o(e,a)&&!s.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})},s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var t={},e=(s.d(t,{default:()=>F}),s(944)),e=s.n(e),n=s(512),n=s.n(n);let{pointClass:i}=n().seriesTypes["sankey"]["prototype"],{pInt:o,wrap:h}=e(),d=class extends i{getDataLabelPath(t){let e=this,a=e.series.chart.renderer,r=e.shapeArgs,s=e.angle<0||e.angle>Math.PI,n=r.start||0,i=r.end||0;return e.dataLabelPath?(e.dataLabelPath=e.dataLabelPath.destroy(),delete e.dataLabelPath):h(t,"destroy",function(t){return e.dataLabelPath&&(e.dataLabelPath=e.dataLabelPath.destroy()),t.call(this)}),e.dataLabelPath=a.arc({open:!0,longArc:Math.abs(Math.abs(n)-Math.abs(i))<Math.PI?0:1}).attr({x:r.x,y:r.y,r:(r.r||0)+o(t.options?.distance||0),start:s?n:i,end:s?i:n,clockwise:+s}).add(a.defs),e.dataLabelPath}isValid(){return!0}},{defined:c,getAlignFactor:l,relativeLength:u}=e();{var p;(p=f=f||{}).compose=function(t,e){return t.sankeyColumn=new R(t,e),t};class R{constructor(t,e){this.points=t,this.series=e}getTranslationFactor(t){let e=this.points,a=e.slice(),r=t.chart,s=t.options.minLinkWidth||0,n,i=0,o,h=(r.plotSizeY||0)-(t.options.borderWidth||0)-(e.length-1)*t.nodePadding;for(;e.length;){for(i=h/e.sankeyColumn.sum(),n=!1,o=e.length;o--;)e[o].getSum()*i<s&&(e.splice(o,1),h=Math.max(0,h-s),n=!0);if(!n)break}for(var d of(e.length=0,a))e.push(d);return i}top(a){let r=this.series,s=r.nodePadding,t=this.points.reduce((t,e)=>(0<t&&(t+=s),t+=Math.max(e.getSum()*a,r.options.minLinkWidth||0)),0);return l(r.options.nodeAlignment||"center")*((r.chart.plotSizeY||0)-t)}left(a){let r=this.series,t=r.chart,s=r.options.equalNodes,n=t.inverted?t.plotHeight:t.plotWidth,i=r.nodePadding,e=this.points.reduce((t,e)=>(0<t&&(t+=i),t+=s?n/e.series.nodes.length-i:Math.max(e.getSum()*a,r.options.minLinkWidth||0)),0);return((t.plotSizeX||0)-Math.round(e))/2}sum(){return this.points.reduce((t,e)=>t+e.getSum(),0)}offset(e,a){let r=this.points,s=this.series,n=s.nodePadding,i=0,o;if(s.is("organization")&&e.hangsFrom)return{absoluteTop:e.hangsFrom.nodeY};for(let t=0;t<r.length;t++){var h=r[t].getSum(),d=Math.max(h*a,s.options.minLinkWidth||0),l=e.options[s.chart.inverted?"offsetHorizontal":"offsetVertical"],p=e.options.offset||0;if(o=h?d+n:0,r[t]===e)return{relativeTop:i+(c(l)?u(l,d):u(p,o))};i+=o}}}p.SankeyColumnAdditions=R}let g=f;var p=s(28),f=s.n(p);let b=e()["deg2rad"],{addEvent:y,merge:x,uniqueKey:m,defined:P,extend:v}=e();function M(s,t){t=x(!0,{enabled:!0,attributes:{dy:-5,startOffset:"50%",textAnchor:"middle"}},t);let n=this.renderer.url,i=this.text||this,e=i.textPath,{attributes:o,enabled:h}=t;return s=s||e&&e.path,e&&e.undo(),s&&h?(t=y(i,"afterModifyTree",a=>{if(s&&h){let t=s.attr("id"),e=(t||s.attr("id",t=m()),{x:0,y:0});P(o.dx)&&(e.dx=o.dx,delete o.dx),P(o.dy)&&(e.dy=o.dy,delete o.dy),i.attr(e),this.attr({transform:""}),this.box&&(this.box=this.box.destroy());var r=a.nodes.slice(0);a.nodes.length=0,a.nodes[0]={tagName:"textPath",attributes:v(o,{"text-anchor":o.textAnchor,href:n+"#"+t}),children:r}}}),i.textPath={path:s,undo:t}):(i.attr({dx:0,dy:0}),delete i.textPath),this.added&&(i.textCache="",this.renderer.buildText(i)),this}function L(d){let a=d.bBox,l=this.element?.querySelector("textPath");if(l){let r=[],{b:s,h:t}=this.renderer.fontMetrics(this.element),n=t-s,e=RegExp('(<tspan>|<tspan(?!\\sclass="highcharts-br")[^>]*>|<\\/tspan>)',"g"),i=l.innerHTML.replace(e,"").split(/<tspan class="highcharts-br"[^>]*>/),o=i.length,h=(t,e)=>{var{x:e,y:a}=e,t=(l.getRotationOfChar(t)-90)*b,r=Math.cos(t),t=Math.sin(t);return[[e-n*r,a-n*t],[e+s*r,a+s*t]]};for(let e=0,a=0;a<o;a++){var p=i[a].length;for(let t=0;t<p;t+=5)try{var c=e+t+a,[u,g]=h(c,l.getStartPositionOfChar(c));0===t?(r.push(g),r.push(u)):(0===a&&r.unshift(g),a===o-1&&r.push(u))}catch(d){break}e+=p-1;try{var f=e+a,y=l.getEndPositionOfChar(f),[x,m]=h(f,y);r.unshift(m),r.unshift(x)}catch(d){break}}r.length&&r.push(r[0].slice()),a.polygon=r}return a}function k(t){let e=t.labelOptions,a=t.point,r=e[a.formatPrefix+"TextPath"]||e.textPath;r&&!e.useHTML&&(this.setTextPath(a.getDataLabelPath?.(this)||a.graphic,r),a.dataLabelPath&&!r.enabled&&(a.dataLabelPath=a.dataLabelPath.destroy()))}let S=e()["animObject"],T=e()["deg2rad"],{pie:C,sankey:A}=n().seriesTypes,{extend:H,merge:w,relativeLength:N}=e();{p=f(),y(p,"afterGetBBox",L),y(p,"beforeAddingDataLabel",k);let t=p.prototype;t.setTextPath||(t.setTextPath=M)}class O extends A{animate(t){if(!t){let a=S(this.options.animation).duration/2/this.nodes.length,r=0;for(let e of this.nodes){let t=e.graphic;t&&(t.attr({opacity:0}),setTimeout(()=>{e.graphic&&e.graphic.animate({opacity:1},{duration:a})},a*r++))}for(var e of this.points){let t=e.graphic;!e.isNode&&t&&t.attr({opacity:0}).animate({opacity:1},this.options.animation)}}}createNode(t){let i=super.createNode(t);return i.getSum=()=>i.linksFrom.concat(i.linksTo).reduce((t,e)=>t+e.weight,0),i.offset=e=>{let a=t=>t.fromNode===i?t.toNode:t.fromNode,r=0,s=i.linksFrom.concat(i.linksTo),n;s.sort((t,e)=>a(t).index-a(e).index);for(let t=0;t<s.length;t++)if(a(s[t]).index>i.index){s=s.slice(0,t).reverse().concat(s.slice(t).reverse()),n=!0;break}n||s.reverse();for(let t=0;t<s.length;t++){if(s[t]===e)return r;r+=s[t].weight}},i}createNodeColumns(){let t=[g.compose([],this)];for(var e of this.nodes)e.column=0,t[0].push(e);return t}getNodePadding(){return this.options.nodePadding/Math.PI}translate(){let l=this.options,p=2*Math.PI/(this.chart.plotHeight+this.getNodePadding()),s=this.getCenter(),c=(l.startAngle-90)*T,t=l.borderRadius,n="object"==typeof t?t.radius:t;for(var u of(super.translate(),this.nodeColumns[0]))if(u.sum){let t=u.shapeArgs,o=s[0],h=s[1],e=s[2]/2,d=e-N(("auto"===l.nodeWidth?20:l.nodeWidth)||0,e),a=c+p*(t.y||0),r=c+p*((t.y||0)+(t.height||0));for(let i of(u.angle=a+(r-a)/2,u.shapeType="arc",u.shapeArgs={x:o,y:h,r:e,innerR:d,start:a,end:r,borderRadius:n},u.dlBox={x:o+Math.cos((a+r)/2)*(e+d)/2,y:h+Math.sin((a+r)/2)*(e+d)/2,width:1,height:1},u.linksFrom))if(i.linkBase){let s,n,t=i.linkBase.map((t,e)=>{var t=p*t,a=Math.cos(c+t)*(1+d),r=Math.sin(c+t)*(1+d);return s=l.curveFactor||0,(n=Math.abs(i.linkBase[3-e]*p-t))>Math.PI&&(n=2*Math.PI-n),(n*=d)<d&&(s*=n/d),{x:o+a,y:h+r,cpX:o+(1-s)*a,cpY:h+(1-s)*r}});i.shapeArgs={d:[["M",t[0].x,t[0].y],["A",d,d,0,0,1,t[1].x,t[1].y],["C",t[1].cpX,t[1].cpY,t[2].cpX,t[2].cpY,t[2].x,t[2].y],["A",d,d,0,0,1,t[3].x,t[3].y],["C",t[3].cpX,t[3].cpY,t[0].cpX,t[0].cpY,t[0].x,t[0].y]]}}}}}O.defaultOptions=w(A.defaultOptions,{center:[null,null],curveFactor:.6,startAngle:0,dataLabels:{textPath:{enabled:!1,attributes:{dy:5}}}}),H(O.prototype,{orderNodes:!1,getCenter:C.prototype.getCenter}),O.prototype.pointClass=d,n().registerSeriesType("dependencywheel",O);let F=e();return t.default})());