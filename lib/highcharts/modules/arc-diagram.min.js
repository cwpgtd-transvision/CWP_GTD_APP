!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(t._Highcharts,t._Highcharts.SeriesRegistry,t._Highcharts.Series,t._Highcharts.SVGRenderer,t._Highcharts.SVGElement):"function"==typeof define&&define.amd?define("highcharts/modules/arc-diagram",["highcharts/highcharts"],function(t){return e(t,t.SeriesRegistry,t.Series,t.SVGRenderer,t.SVGElement)}):"object"==typeof exports?exports["highcharts/modules/arc-diagram"]=e(t._Highcharts,t._Highcharts.SeriesRegistry,t._Highcharts.Series,t._Highcharts.SVGRenderer,t._Highcharts.SVGElement):t.Highcharts=e(t.Highcharts,t.Highcharts.SeriesRegistry,t.Highcharts.Series,t.Highcharts.SVGRenderer,t.Highcharts.SVGElement)}("undefined"==typeof window?this:window,(Z,J,Q,U,$)=>(()=>{"use strict";var o={28:t=>{t.exports=$},512:t=>{t.exports=J},540:t=>{t.exports=U},820:t=>{t.exports=Q},944:t=>{t.exports=Z}},s={};function i(t){var e=s[t];if(void 0!==e)return e.exports;e=s[t]={exports:{}};return o[t](e,e.exports,i),e.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var o in e)i.o(e,o)&&!i.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var t={},e=(i.d(t,{default:()=>K}),i(944)),e=i.n(e),n=i(512),n=i.n(n);let{prototype:r,prototype:{pointClass:{prototype:h}}}=n()["series"],{defined:a,extend:l,find:d,merge:p,pick:c}=e();function u(){return this.data=[].concat(this.points||[],this.nodes),r.destroy.apply(this,arguments)}function f(){this.nodes&&(this.nodes.forEach(t=>{t.destroy()}),this.nodes.length=0),r.setData.apply(this,arguments)}function m(t){let e=arguments,o=this.isNode?this.linksTo.concat(this.linksFrom):[this.fromNode,this.toNode];"select"!==t&&o.forEach(t=>{t&&t.series&&(h.setState.apply(t,e),t.isNode||(t.fromNode.graphic&&h.setState.apply(t.fromNode,e),t.toNode&&t.toNode.graphic&&h.setState.apply(t.toNode,e)))}),h.setState.apply(this,e)}function g(t,e,o,s){let i=this.series.options.nodes,n=this.series.options.data,r=n?.length||0,a=n?.[this.index];h.update.call(this,t,!this.isNode&&e,o,s),this.isNode&&(t=(i||[]).reduce((t,e,o)=>this.id===e.id?o:t,-1),s=p(i&&i[t]||{},n?.[this.index]||{}),n&&(a?n[this.index]=a:n.length=r),i?0<=t?i[t]=s:i.push(s):this.series.options.nodes=[s],c(e,!0)&&this.series.chart.redraw(o))}(P=N=N||{}).compose=function(t,e){let o=t.prototype,s=e.prototype;return o.setNodeState=m,o.setState=m,o.update=g,s.destroy=u,s.setData=f,e},P.createNode=function(t){let e=this.pointClass,o=(t,e)=>d(t,t=>t.id===e),s=o(this.nodes,t),n;if(!s){n=this.options.nodes&&o(this.options.nodes,t);let i=new e(this,l({className:"highcharts-node",isNode:!0,id:t,y:1},n));i.linksTo=[],i.linksFrom=[],i.getSum=function(){let e=0,o=0;return i.linksTo.forEach(t=>{e+=t.weight||0}),i.linksFrom.forEach(t=>{o+=t.weight||0}),Math.max(e,o)},i.offset=function(e,o){let s=0;for(let t=0;t<i[o].length;t++){if(i[o][t]===e)return s;s+=i[o][t].weight}},i.hasShape=function(){let e=0;return i.linksTo.forEach(t=>{t.outgoing&&e++}),!i.linksTo.length||e!==i.linksTo.length},i.index=this.nodes.push(i)-1,s=i}return s.formatPrefix="node",s.name=s.name||s.options.id||"",s.mass=c(s.options.mass,s.options.marker&&s.options.marker.radius,this.options.marker&&this.options.marker.radius,4),s},P.destroy=u,P.generatePoints=function(){let e=this.chart,o={};r.generatePoints.call(this),this.nodes||(this.nodes=[]),this.colorCounter=0,this.nodes.forEach(t=>{t.linksFrom.length=0,t.linksTo.length=0,t.level=t.options.level}),this.points.forEach(t=>{a(t.from)&&(o[t.from]||(o[t.from]=this.createNode(t.from)),o[t.from].linksFrom.push(t),t.fromNode=o[t.from],e.styledMode?t.colorIndex=c(t.options.colorIndex,o[t.from].colorIndex):t.color=t.options.color||o[t.from].color),a(t.to)&&(o[t.to]||(o[t.to]=this.createNode(t.to)),o[t.to].linksTo.push(t),t.toNode=o[t.to]),t.name=t.name||t.id},this),this.nodeLookup=o},P.setNodeState=m,P.updateNode=g;let y=N,{prototype:{pointClass:x}}=n()["seriesTypes"]["sankey"],k=e()["extend"];class b extends x{isValid(){return!0}}k(b.prototype,{setState:y.setNodeState});let{defined:S,getAlignFactor:v,relativeLength:L}=e();{var P;(P=T=T||{}).compose=function(t,e){return t.sankeyColumn=new z(t,e),t};class z{constructor(t,e){this.points=t,this.series=e}getTranslationFactor(t){let e=this.points,o=e.slice(),s=t.chart,i=t.options.minLinkWidth||0,n,r=0,a,h=(s.plotSizeY||0)-(t.options.borderWidth||0)-(e.length-1)*t.nodePadding;for(;e.length;){for(r=h/e.sankeyColumn.sum(),n=!1,a=e.length;a--;)e[a].getSum()*r<i&&(e.splice(a,1),h=Math.max(0,h-i),n=!0);if(!n)break}for(var l of(e.length=0,o))e.push(l);return r}top(o){let s=this.series,i=s.nodePadding,t=this.points.reduce((t,e)=>(0<t&&(t+=i),t+=Math.max(e.getSum()*o,s.options.minLinkWidth||0)),0);return v(s.options.nodeAlignment||"center")*((s.chart.plotSizeY||0)-t)}left(o){let s=this.series,t=s.chart,i=s.options.equalNodes,n=t.inverted?t.plotHeight:t.plotWidth,r=s.nodePadding,e=this.points.reduce((t,e)=>(0<t&&(t+=r),t+=i?n/e.series.nodes.length-r:Math.max(e.getSum()*o,s.options.minLinkWidth||0)),0);return((t.plotSizeX||0)-Math.round(e))/2}sum(){return this.points.reduce((t,e)=>t+e.getSum(),0)}offset(e,o){let s=this.points,i=this.series,n=i.nodePadding,r=0,a;if(i.is("organization")&&e.hangsFrom)return{absoluteTop:e.hangsFrom.nodeY};for(let t=0;t<s.length;t++){var h=s[t].getSum(),l=Math.max(h*o,i.options.minLinkWidth||0),d=e.options[i.chart.inverted?"offsetHorizontal":"offsetVertical"],p=e.options.offset||0;if(a=h?l+n:0,s[t]===e)return{relativeTop:r+(S(d)?L(d,l):L(p,a))};r+=a}}}P.SankeyColumnAdditions=z}let F=T;var N=i(820),R=i.n(N),P=i(540),T=i.n(P),N=i(28),P=i.n(N);let Y=e()["deg2rad"],{addEvent:C,merge:_,uniqueKey:X,defined:M,extend:B}=e();function V(i,t){t=_(!0,{enabled:!0,attributes:{dy:-5,startOffset:"50%",textAnchor:"middle"}},t);let n=this.renderer.url,r=this.text||this,e=r.textPath,{attributes:a,enabled:h}=t;return i=i||e&&e.path,e&&e.undo(),i&&h?(t=C(r,"afterModifyTree",o=>{if(i&&h){let t=i.attr("id"),e=(t||i.attr("id",t=X()),{x:0,y:0});M(a.dx)&&(e.dx=a.dx,delete a.dx),M(a.dy)&&(e.dy=a.dy,delete a.dy),r.attr(e),this.attr({transform:""}),this.box&&(this.box=this.box.destroy());var s=o.nodes.slice(0);o.nodes.length=0,o.nodes[0]={tagName:"textPath",attributes:B(a,{"text-anchor":a.textAnchor,href:n+"#"+t}),children:s}}}),r.textPath={path:i,undo:t}):(r.attr({dx:0,dy:0}),delete r.textPath),this.added&&(r.textCache="",this.renderer.buildText(r)),this}function D(l){let o=l.bBox,d=this.element?.querySelector("textPath");if(d){let s=[],{b:i,h:t}=this.renderer.fontMetrics(this.element),n=t-i,e=RegExp('(<tspan>|<tspan(?!\\sclass="highcharts-br")[^>]*>|<\\/tspan>)',"g"),r=d.innerHTML.replace(e,"").split(/<tspan class="highcharts-br"[^>]*>/),a=r.length,h=(t,e)=>{var{x:e,y:o}=e,t=(d.getRotationOfChar(t)-90)*Y,s=Math.cos(t),t=Math.sin(t);return[[e-n*s,o-n*t],[e+i*s,o+i*t]]};for(let e=0,o=0;o<a;o++){var p=r[o].length;for(let t=0;t<p;t+=5)try{var c=e+t+o,[u,f]=h(c,d.getStartPositionOfChar(c));0===t?(s.push(f),s.push(u)):(0===o&&s.unshift(f),o===a-1&&s.push(u))}catch(l){break}e+=p-1;try{var m=e+o,g=d.getEndPositionOfChar(m),[y,x]=h(m,g);s.unshift(x),s.unshift(y)}catch(l){break}}s.length&&s.push(s[0].slice()),o.polygon=s}return o}function G(t){let e=t.labelOptions,o=t.point,s=e[o.formatPrefix+"TextPath"]||e.textPath;s&&!e.useHTML&&(this.setTextPath(o.getDataLabelPath?.(this)||o.graphic,s),o.dataLabelPath&&!s.enabled&&(o.dataLabelPath=o.dataLabelPath.destroy()))}{N=P(),C(N,"afterGetBBox",D),C(N,"beforeAddingDataLabel",G);let t=N.prototype;t.setTextPath||(t.setTextPath=V)}let q=T()["prototype"]["symbols"],{column:H,sankey:W}=n()["seriesTypes"],{crisp:w,extend:j,merge:A,pick:O,relativeLength:I}=e();class E extends W{createNodeColumns(){let d=this,c=d.chart,u=F.compose([],d);return u.sankeyColumn.maxLength=c.inverted?c.plotHeight:c.plotWidth,u.sankeyColumn.getTranslationFactor=t=>{let e=u.slice(),o=this.options.minLinkWidth||0,s,i=0,n,r,a=0,h=1,l=0,d=(c.plotSizeX||0)-(t.options.marker&&t.options.marker.lineWidth||0)-(u.length-1)*t.nodePadding;for(;u.length;){for(i=d/u.sankeyColumn.sum(),s=!1,n=u.length;n--;){r=u[n].getSum()*i*h;var p=Math.min(c.plotHeight,c.plotWidth);r>p?h=Math.min(p/r,h):r<o&&(u.splice(n,1),d-=o,r=o,s=!0),l+=r*(1-h)/2,a=Math.max(a,r)}if(!s)break}return u.length=0,e.forEach(t=>{t.scale=h,u.push(t)}),u.sankeyColumn.maxRadius=a,u.sankeyColumn.scale=h,u.sankeyColumn.additionalSpace=l,i},u.sankeyColumn.offset=function(e,o){let s=e.series.options.equalNodes,i=d.nodePadding,n=Math.min(c.plotWidth,c.plotHeight,(u.sankeyColumn.maxLength||0)/d.nodes.length-i),r=u.sankeyColumn.additionalSpace||0,a;for(let t=0;t<u.length;t++){var h=u[t].getSum()*(u.sankeyColumn.scale||0),l=s?n:Math.max(h*o,d.options.minLinkWidth||0);if(a=h?l+i:0,u[t]===e)return{relativeLeft:r+I(e.options.offset||0,a)};r+=a}},d.nodes.forEach(function(t){t.column=0,u.push(t)}),[u]}translateLink(o){let t=o.fromNode,e=o.toNode,s=this.chart,i=this.translationFactor,n=o.options,r=this.options,a=O(n.linkWeight,r.linkWeight,Math.max((o.weight||0)*i*t.scale,this.options.minLinkWidth||0)),h=o.series.options.centeredLinks,l=t.nodeY,d=(t,e)=>{e=(t.offset(o,e)||0)*i;return Math.min(t.nodeX+e,t.nodeX+(t.shapeArgs&&t.shapeArgs.height||0)-a)},p=h?t.nodeX+((t.shapeArgs.height||0)-a)/2:d(t,"linksFrom"),c=h?e.nodeX+((e.shapeArgs.height||0)-a)/2:d(e,"linksTo"),u=l;p>c&&([p,c]=[c,p]),r.reversed&&([p,c]=[c,p],u=(s.plotSizeY||0)-u),o.shapeType="path",o.linkBase=[p,p+a,c,c+a];var f=(c+a-p)/Math.abs(c+a-p)*O(r.linkRadius,Math.min(Math.abs(c+a-p)/2,t.nodeY-Math.abs(a)));o.shapeArgs={d:[["M",p,u],["A",(c+a-p)/2,f,0,0,1,c+a,u],["L",c,u],["A",(c-p-a)/2,f-a,0,0,0,p+a,u],["Z"]]},o.dlBox={x:p+(c-p)/2,y:u-f,height:a,width:0},o.tooltipPos=s.inverted?[(s.plotSizeY||0)-o.dlBox.y-a/2,(s.plotSizeX||0)-o.dlBox.x]:[o.dlBox.x,o.dlBox.y+a/2],o.y=o.plotY=1,o.x=o.plotX=1,o.color||(o.color=t.color)}translateNode(s,t){var i=this.translationFactor,n=this.chart,r=n.inverted?n.plotWidth:n.plotHeight,a=this.options,r=Math.min(n.plotWidth,n.plotHeight,r/s.series.nodes.length-this.nodePadding),e=s.getSum()*(t.sankeyColumn.scale||0),r=a.equalNodes?r:Math.max(e*i,this.options.minLinkWidth||0),o=a.marker?.lineWidth||0,h=t.sankeyColumn.offset(s,i),i=w(O(h&&h.absoluteLeft,(t.sankeyColumn.left(i)||0)+(h&&h.relativeLeft||0)),o),h=A(a.marker,s.options.marker),l=h.symbol,d=h.radius,h=parseInt(a.offset,10)*((n.inverted?n.plotWidth:n.plotHeight)-(w(this.colDistance*(s.column||0)+(h.lineWidth||0)/2,o)+(t.sankeyColumn.scale||0)*(t.sankeyColumn.maxRadius||0)/2))/100;if(s.sum=e){s.nodeX=i,s.nodeY=h;let t=s.options.width||a.width||r,e=s.options.height||a.height||r,o=h;a.reversed&&(o=(n.plotSizeY||0)-h,n.inverted&&(o=(n.plotSizeY||0)-h)),this.mapOptionsToLevel&&(s.dlOptions=W.getDLOptions({level:this.mapOptionsToLevel[s.level],optionsPoint:s.options})),s.plotX=1,s.plotY=1,s.tooltipPos=n.inverted?[(n.plotSizeY||0)-o-e/2,(n.plotSizeX||0)-i-t/2]:[i+t/2,o+e/2],s.shapeType="path",s.shapeArgs={d:q[l||"circle"](i,o-(d||e)/2,d||t,d||e),width:d||t,height:d||e},s.dlBox={x:i+t/2,y:o,height:0,width:0}}else s.dlOptions={enabled:!1}}drawDataLabels(){var t;this.options.dataLabels&&(t=this.options.dataLabels.textPath,H.prototype.drawDataLabels.call(this,this.nodes),this.options.dataLabels.textPath=this.options.dataLabels.linkTextPath,H.prototype.drawDataLabels.call(this,this.data),this.options.dataLabels.textPath=t)}pointAttribs(t,e){if(t&&t.isNode){let{...t}=R().prototype.pointAttribs.apply(this,arguments);return t}return super.pointAttribs.apply(this,arguments)}markerAttribs(t){return t.isNode?super.markerAttribs.apply(this,arguments):{}}}E.defaultOptions=A(W.defaultOptions,{centeredLinks:!1,equalNodes:!1,dataLabels:{linkTextPath:{attributes:{startOffset:"25%"}}},marker:{fillOpacity:1,lineWidth:0,states:{},symbol:"circle"},offset:"100%",reversed:!1}),j(E.prototype,{orderNodes:!1}),E.prototype.pointClass=b,n().registerSeriesType("arcdiagram",E);let K=e();return t.default})());