!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(t._Highcharts,t._Highcharts.Templating):"function"==typeof define&&define.amd?define("highcharts/modules/series-label",["highcharts/highcharts"],function(t){return e(t,t.Templating)}):"object"==typeof exports?exports["highcharts/modules/series-label"]=e(t._Highcharts,t._Highcharts.Templating):t.Highcharts=e(t.Highcharts,t.Highcharts.Templating)}("undefined"==typeof window?this:window,(w,A)=>(()=>{"use strict";var o={944:t=>{t.exports=w},984:t=>{t.exports=A}},r={};function a(t){var e=r[t];if(void 0!==e)return e.exports;e=r[t]={exports:{}};return o[t](e,e.exports,a),e.exports}a.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return a.d(e,{a:e}),e},a.d=(t,e)=>{for(var o in e)a.o(e,o)&&!a.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var t={},e=(a.d(t,{default:()=>X}),a(944)),s=a.n(e),e=a(984),e=a.n(e);const i={enabled:!0,connectorAllowed:!1,connectorNeighbourDistance:24,format:void 0,formatter:void 0,minFontSize:null,maxFontSize:null,onArea:null,style:{fontSize:"0.8em",fontWeight:"bold"},useHTML:!1,boxesToAvoid:[]};function l(t,e,o,r,a,i){i=(i-e)*(o-t)-(r-e)*(a-t);return 0<i||!(i<0)}function c(t,e,o,r,a,i,n,h){return l(t,e,a,i,n,h)!==l(o,r,a,i,n,h)&&l(t,e,o,r,a,i)!==l(t,e,o,r,n,h)}var n={boxIntersectLine:function(t,e,o,r,a,i,n,h){return c(t,e,t+o,e,a,i,n,h)||c(t+o,e,t+o,e+r,a,i,n,h)||c(t,e+r,t+o,e+r,a,i,n,h)||c(t,e,t,e+r,a,i,n,h)},intersectRect:function(t,e){return!(e.left>t.right||e.right<t.left||e.top>t.bottom||e.bottom<t.top)}};const P=s()["animObject"],B=e()["format"],h=s()["setOptions"],p=s()["composed"],{boxIntersectLine:Y,intersectRect:M}=n,{addEvent:d,extend:E,fireEvent:f,isNumber:z,pick:_,pushUnique:u,syncTimeout:x}=s(),H=3;function C(t,e,o,r,a){var i=t.chart,n=t.options.label||{},h=_(n.onArea,!!t.area),s=h||n.connectorAllowed,l=i.boxesToAvoid;let c=Number.MAX_VALUE,p=Number.MAX_VALUE,d,f,u,x,g,b,m;for(b=0;l&&b<l.length;b+=1)if(M(l[b],{left:e,right:e+r.width,top:o,bottom:o+r.height}))return!1;for(b=0;b<i.series.length;b+=1){const X=i.series[b],w=X.interpolatedPoints&&[...X.interpolatedPoints];if(X.visible&&w){var y=i.plotHeight/10;for(let t=i.plotTop;t<=i.plotTop+i.plotHeight;t+=y)w.unshift({chartX:i.plotLeft,chartY:t}),w.push({chartX:i.plotLeft+i.plotWidth,chartY:t});for(m=1;m<w.length;m+=1){if(w[m].chartX>=e-16&&w[m-1].chartX<=e+r.width+16){if(Y(e,o,r.width,r.height,w[m-1].chartX,w[m-1].chartY,w[m].chartX,w[m].chartY))return!1;t===X&&!u&&a&&(u=Y(e-16,o-16,r.width+32,r.height+32,w[m-1].chartX,w[m-1].chartY,w[m].chartX,w[m].chartY))}!s&&!u||t===X&&!h||(x=e+r.width/2-w[m].chartX,g=o+r.height/2-w[m].chartY,c=Math.min(c,x*x+g*g))}if(!h&&s&&t===X&&(a&&!u||c<Math.pow(n.connectorNeighbourDistance||1,2))){for(m=1;m<w.length;m+=1)(d=Math.min(Math.pow(e+r.width/2-w[m].chartX,2)+Math.pow(o+r.height/2-w[m].chartY,2),Math.pow(e-w[m].chartX,2)+Math.pow(o-w[m].chartY,2),Math.pow(e+r.width-w[m].chartX,2)+Math.pow(o-w[m].chartY,2),Math.pow(e+r.width-w[m].chartX,2)+Math.pow(o+r.height-w[m].chartY,2),Math.pow(e-w[m].chartX,2)+Math.pow(o+r.height-w[m].chartY,2)))<p&&(p=d,f=w[m]);u=!0}}}return!(a&&!u)&&{x:e,y:o,weight:c-(f?p:0),connectorPoint:f}}function g(L){L.boxesToAvoid=[];const t=L.labelSeries||[],i=L.boxesToAvoid;L.series.forEach(a=>(a.points||[]).forEach(t=>(t.dataLabels||[]).forEach(t=>{var{width:e,height:o}=t.getBBox(),r=(t.translateX||0)+(a.xAxis?a.xAxis.pos:a.chart.plotLeft),t=(t.translateY||0)+(a.yAxis?a.yAxis.pos:a.chart.plotTop);i.push({left:r,top:t,right:r+e,bottom:t+o})}))),t.forEach(function(t){var e=t.options.label||{};t.interpolatedPoints=function(t){if(t.xAxis||t.yAxis){const p=t.points,d=[],f=t.graph||t.area,u=f&&f.element,x=t.chart.inverted,g=t.xAxis,b=t.yAxis,m=(x?b:g).pos,y=(x?g:b).pos,X=(x?g:b).len,w=(x?b:g).len,Y=t.options.label||{},M=_(Y.onArea,!!t.area),A=b.getThreshold(t.options.threshold),v={},S=x?"chartCenterX":"chartCenterY";let e,o,r,a,i,n,h;if(t.getPointSpline&&u&&u.getPointAtLength&&!M&&p.length<(t.chart.plotSizeX||0)/16){t=f.toD&&f.attr("d");for(f.toD&&f.attr({d:f.toD}),i=u.getTotalLength(),e=0;e<i;e+=16){var s=u.getPointAtLength(e),l=x?w-s.y:s.x,s=x?X-s.x:s.y;c({chartX:m+l,chartY:y+s,plotX:l,plotY:s})}t&&f.attr({d:t});const T=p[p.length-1],L=T.pos();c({chartX:m+(L?.[0]||0),chartY:y+(L?.[1]||0)})}else{i=p.length;let t;for(e=0;e<i;e+=1){const P=p[e],[B,E]=P.pos()||[],H=P["plotHigh"];if(z(B)&&z(E)){const C={plotX:B,plotY:E,chartX:m+B,chartY:y+E};if(M&&(H&&(C.plotY=H,C.chartY=y+H),x?C.chartCenterX=m+w-((H||P.plotY||0)+_(P.yBottom,A))/2:C.chartCenterY=y+((H||E)+_(P.yBottom,A))/2),t&&(o=Math.abs(C.chartX-t.chartX),r=Math.abs(C.chartY-t.chartY),16<(a=Math.max(o,r))&&a<999))for(n=Math.ceil(a/16),h=1;h<n;h+=1)c({chartX:t.chartX+(C.chartX-t.chartX)*(h/n),chartY:t.chartY+(C.chartY-t.chartY)*(h/n),[S]:(t[S]||0)+((C[S]||0)-(t[S]||0))*(h/n),plotX:(t.plotX||0)+(B-(t.plotX||0))*(h/n),plotY:(t.plotY||0)+(E-(t.plotY||0))*(h/n)});c(C),t=C}}}return d;function c(t){var e=Math.round((t.plotX||0)/8)+","+Math.round((t.plotY||0)/8);v[e]||(v[e]=1,d.push(t))}}}(t),i.push(...e.boxesToAvoid||[])}),L.series.forEach(function(c){const p=c.options.label;if(p&&(c.xAxis||c.yAxis)){const x="highcharts-color-"+_(c.colorIndex,"none"),g=!c.labelBySeries,b=p.minFontSize,m=p.maxFontSize,y=L.inverted,X=(y?c.yAxis:c.xAxis).pos,w=(y?c.xAxis:c.yAxis).pos,Y=(L.inverted?c.yAxis:c.xAxis).len,M=(L.inverted?c.xAxis:c.yAxis).len,A=c.interpolatedPoints,v=_(p.onArea,!!c.area),S=[],T=c.getColumn("x");let t,e,o,r,a,i,n=c.labelBySeries,h,s,l;if(v&&!y&&(h=[c.xAxis.toPixels(T[0]),c.xAxis.toPixels(T[T.length-1])],s=Math.min.apply(Math,h),l=Math.max.apply(Math,h)),c.visible&&!c.boosted&&A){if(!n){let t=c.name;"string"==typeof p.format?t=B(p.format,c,L):p.formatter&&(t=p.formatter.call(c)),c.labelBySeries=n=L.renderer.label(t,0,0,"connector",0,0,p.useHTML).addClass("highcharts-series-label highcharts-series-label-"+c.index+" "+(c.options.className||"")+" "+x),L.renderer.styledMode||(d="string"==typeof c.color?c.color:"#666666",n.css(E({color:v?L.renderer.getContrast(d):d},p.style||{})),n.attr({opacity:L.renderer.forExport?1:0,stroke:c.color,"stroke-width":1})),b&&m&&n.css({fontSize:b+(c.sum||0)/(c.chart.labelSeriesMaxSum||0)*(m-b)+"px"}),n.attr({padding:0,zIndex:3}).add()}for((t=n.getBBox()).width=Math.round(t.width),a=A.length-1;0<a;--a)v?(e=(A[a].chartCenterX??A[a].chartX)-t.width/2,o=(A[a].chartCenterY??A[a].chartY)-t.height/2,(i=f(e,o,t)?C(c,e,o,t):i)&&S.push(i)):(e=A[a].chartX+H,o=A[a].chartY-t.height-H,(i=f(e,o,t)?C(c,e,o,t,!0):i)&&S.push(i),e=A[a].chartX+H,o=A[a].chartY+H,(i=f(e,o,t)?C(c,e,o,t,!0):i)&&S.push(i),e=A[a].chartX-t.width-H,o=A[a].chartY+H,(i=f(e,o,t)?C(c,e,o,t,!0):i)&&S.push(i),e=A[a].chartX-t.width-H,o=A[a].chartY-t.height-H,(i=f(e,o,t)?C(c,e,o,t,!0):i)&&S.push(i));if(p.connectorAllowed&&!S.length&&!v)for(e=X+Y-t.width;e>=X;e-=16)for(o=w;o<w+M-t.height;o+=16)(r=C(c,e,o,t,!0))&&S.push(r);if(S.length){S.sort((t,e)=>e.weight-t.weight),i=S[0],(L.boxesToAvoid||[]).push({left:i.x,right:i.x+t.width,top:i.y,bottom:i.y+t.height});var d=Math.sqrt(Math.pow(Math.abs(i.x-(n.x||0)),2)+Math.pow(Math.abs(i.y-(n.y||0)),2));if(d&&c.labelBySeries){let t={opacity:L.renderer.forExport?1:0,x:i.x,y:i.y},e={opacity:1};d<=10&&(e={x:t.x,y:t.y},t={});let o;g&&((o=P(c.options.animation)).duration*=.2),c.labelBySeries.attr(E(t,{anchorX:i.connectorPoint&&(i.connectorPoint.plotX||0)+X,anchorY:i.connectorPoint&&(i.connectorPoint.plotY||0)+w})).animate(e,o),c.options.kdNow=!0,c.buildKDTree();d=c.searchPoint({chartX:i.x,chartY:i.y},!0);d&&(n.closest=[d,i.x-(d.plotX||0),i.y-(d.plotY||0)])}}else u()}else u();function f(t,e,o){var r=Math.max(X,_(s,-1/0)),a=Math.min(X+Y,_(l,1/0));return r<t&&t<=a-o.width&&e>=w&&e<=w+M-o.height}function u(){n&&(c.labelBySeries=n.destroy())}}}),f(L,"afterDrawSeriesLabels")}function b(n){if(this.renderer){const h=this;let i=P(h.renderer.globalAnimation).duration;h.labelSeries=[],h.labelSeriesMaxSum=0,h.seriesLabelTimer&&s().clearTimeout(h.seriesLabelTimer),h.series.forEach(function(t){const e=t.options.label||{},o=t.labelBySeries,r=o&&o.closest,a=t.getColumn("y");e.enabled&&t.visible&&(t.graph||t.area)&&!t.boosted&&h.labelSeries&&(h.labelSeries.push(t),e.minFontSize&&e.maxFontSize&&a.length&&(t.sum=a.reduce((t,e)=>(t||0)+(e||0),0),h.labelSeriesMaxSum=Math.max(h.labelSeriesMaxSum||0,t.sum||0)),"load"===n.type&&(i=Math.max(i,P(t.options.animation).duration)),r&&(void 0!==r[0].plotX?o.animate({x:r[0].plotX+r[1],y:r[0].plotY+r[2]}):o.attr({opacity:0})))}),h.seriesLabelTimer=x(function(){h.series&&h.labelSeries&&g(h)},h.renderer.forExport||!i?0:i)}}function m(t,e,o,r,a){var i=a&&a.anchorX,a=a&&a.anchorY;let n,h,s=o/2;return z(i)&&z(a)&&(n=[["M",i,a]],(h=(h=e-a)<0?-r-h:h)<o&&(s=i<t+o/2?h:o-h),e+r<a?n.push(["L",t+s,e+r]):a<e?n.push(["L",t+s,e]):i<t?n.push(["L",t,e+r/2]):t+o<i&&n.push(["L",t+o,e+r/2])),n||[]}const y={compose:function(t,e){u(p,"SeriesLabel")&&(d(t,"load",b),d(t,"redraw",b),e.prototype.symbols.connector=m,h({plotOptions:{series:{label:i}}}))}};e=s();y.compose(e.Chart,e.SVGRenderer);const X=s();return t.default})());