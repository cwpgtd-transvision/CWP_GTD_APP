!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(t._Highcharts,t._Highcharts.Color,t._Highcharts.RendererRegistry,t._Highcharts.SeriesRegistry):"function"==typeof define&&define.amd?define("highcharts/modules/funnel3d",["highcharts/highcharts"],function(t){return e(t,t.Color,t.RendererRegistry,t.SeriesRegistry)}):"object"==typeof exports?exports["highcharts/modules/funnel3d"]=e(t._Highcharts,t._Highcharts.Color,t._Highcharts.RendererRegistry,t._Highcharts.SeriesRegistry):t.Highcharts=e(t.Highcharts,t.Highcharts.Color,t.Highcharts.RendererRegistry,t.Highcharts.SeriesRegistry)}("undefined"==typeof window?this:window,(W,N,O,j)=>(()=>{"use strict";var r={512:t=>{t.exports=j},608:t=>{t.exports=O},620:t=>{t.exports=N},944:t=>{t.exports=W}},i={};function o(t){var e=i[t];if(void 0!==e)return e.exports;e=i[t]={exports:{}};return r[t](e,e.exports,o),e.exports}o.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return o.d(e,{a:e}),e},o.d=(t,e)=>{for(var r in e)o.o(e,r)&&!o.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var t={},e=(o.d(t,{default:()=>T}),o(944)),e=o.n(e),n=o(620),n=o.n(n),s=o(608),s=o.n(s);const m=n()["parse"],a=e()["charts"];n=s().getRendererType().prototype.Element3D;const b=e()["merge"];class d extends n{constructor(){super(...arguments),this.mainParts=["top","bottom"],this.parts=["top","bottom","frontUpper","backUpper","frontLower","backLower","rightUpper","rightLower"],this.sideGroups=["upperGroup","lowerGroup"],this.sideParts={upperGroup:["frontUpper","backUpper","rightUpper"],lowerGroup:["frontLower","backLower","rightLower"]},this.pathType="funnel3d"}opacitySetter(t){const e=this,r=parseFloat(t),i=e.parts,o=a[e.renderer.chartIndex],n="group-opacity-"+r+"-"+o.index;if(e.parts=e.mainParts,e.singleSetterForParts("opacity",r),e.parts=i,!o.renderer.filterId){o.renderer.definition({tagName:"filter",attributes:{id:n},children:[{tagName:"feComponentTransfer",children:[{tagName:"feFuncA",attributes:{type:"table",tableValues:"0 "+r}}]}]});for(const s of e.sideGroups)e[s].attr({filter:"url(#"+n+")"});if(e.renderer.styledMode){o.renderer.definition({tagName:"style",textContent:".highcharts-"+n+" {filter:url(#"+n+")}"});for(const d of e.sideGroups)e[d].addClass("highcharts-"+n)}}return e}fillSetter(t){let e=m(t);const r=this,i=e.rgba[3],o={top:m(t).brighten(.1).get(),bottom:m(t).brighten(-.2).get()};if(i<1?(e.rgba[3]=1,e=e.get("rgb"),r.attr({opacity:i})):e=t,(e=e.linearGradient||e.radialGradient||!r.gradientForSides?e:{linearGradient:{x1:0,x2:1,y1:1,y2:1},stops:[[0,m(t).brighten(-.2).get()],[.5,t],[1,m(t).brighten(-.2).get()]]}).linearGradient)for(const c of r.sideGroups){var n=r[c].gradientBox,s=e.linearGradient,d=b(e,{linearGradient:{x1:n.x+s.x1*n.width,y1:n.y+s.y1*n.height,x2:n.x+s.x2*n.width,y2:n.y+s.y2*n.height}});for(const g of r.sideParts[c])o[g]=d}else if(b(!0,o,{frontUpper:e,backUpper:e,rightUpper:e,frontLower:e,backLower:e,rightLower:e}),e.radialGradient)for(const f of r.sideGroups){var a=r[f].gradientBox,h=a.x+a.width/2,p=a.y+a.height/2,l=Math.min(a.width,a.height);for(const y of r.sideParts[f])r[y].setRadialReference([h,p,l])}if(r.singleSetterForParts("fill",null,o),r.color=r.fill=t,e.linearGradient)for(const u of[r.frontLower,r.frontUpper]){const x=u.element,w=x&&r.renderer.gradients[x.gradient];w&&"userSpaceOnUse"!==w.attr("gradientUnits")&&w.attr({gradientUnits:"userSpaceOnUse"})}return r}adjustForGradient(){var r;for(const i of this.sideGroups){let t={x:Number.MAX_VALUE,y:Number.MAX_VALUE},e={x:-Number.MAX_VALUE,y:-Number.MAX_VALUE};for(const o of this.sideParts[i]){const n=this[o];r=n.getBBox(!0),t={x:Math.min(t.x,r.x),y:Math.min(t.y,r.y)},e={x:Math.max(e.x,r.x+r.width),y:Math.max(e.y,r.y+r.height)}}this[i].gradientBox={x:t.x,width:e.x-t.x,y:t.y,height:e.y-t.y}}}zIndexSetter(){return this.finishedOnAdd&&this.adjustForGradient(),this.renderer.Element.prototype.zIndexSetter.apply(this,arguments)}onAdd(){this.adjustForGradient(),this.finishedOnAdd=!0}}const h=d,w=e()["charts"],{error:v,extend:p,merge:A}=e();function l(t){const e=this.element3d("funnel3d",t),r=this.styledMode,i={"stroke-width":1,stroke:"none"};e.upperGroup=this.g("funnel3d-upper-group").attr({zIndex:e.frontUpper.zIndex}).add(e);for(const o of[e.frontUpper,e.backUpper,e.rightUpper])r||o.attr(i),o.add(e.upperGroup);e.lowerGroup=this.g("funnel3d-lower-group").attr({zIndex:e.frontLower.zIndex}).add(e);for(const n of[e.frontLower,e.backLower,e.rightLower])r||n.attr(i),n.add(e.lowerGroup);return e.gradientForSides=t.gradientForSides,e}function c(t){this.getCylinderEnd||v("A required Highcharts module is missing: cylinder.js",!0,w[this.chartIndex]);var e=this,r=w[e.chartIndex],i=t.alphaCorrection=90-Math.abs(r.options.chart.options3d.alpha%180-90),o=this.cuboidPath.call(e,A(t,{depth:t.width,width:(t.width+t.bottom.width)/2})),n=o.isTop,s=!o.isFront,d=!!t.middle,a=e.getCylinderEnd(r,A(t,{x:t.x-t.width/2,z:t.z-t.width/2,alphaCorrection:i})),h=t.bottom.width,p=A(t,{width:h,x:t.x-h/2,z:t.z-h/2,alphaCorrection:i}),l=e.getCylinderEnd(r,p,!0);let c=h,g=p,f=l,y=l,u;d&&(c=t.middle.width,g=A(t,{y:t.y+t.middle.fraction*t.height,width:c,x:t.x-c/2,z:t.z-c/2}),f=e.getCylinderEnd(r,g,!1),y=e.getCylinderEnd(r,g,!1));const x={top:a,bottom:l,frontUpper:e.getCylinderFront(a,f),zIndexes:{group:o.zIndexes.group,top:0!==n?0:3,bottom:1!==n?0:3,frontUpper:s?2:1,backUpper:s?1:2,rightUpper:s?2:1}};return x.backUpper=e.getCylinderBack(a,f),u=Math.min(c,t.width)/Math.max(c,t.width)!=1,x.rightUpper=e.getCylinderFront(e.getCylinderEnd(r,A(t,{x:t.x-t.width/2,z:t.z-t.width/2,alphaCorrection:u?-i:0}),!1),e.getCylinderEnd(r,A(g,{alphaCorrection:u?-i:0}),!d)),d&&(u=Math.min(c,h)/Math.max(c,h)!=1,A(!0,x,{frontLower:e.getCylinderFront(y,l),backLower:e.getCylinderBack(y,l),rightLower:e.getCylinderFront(e.getCylinderEnd(r,A(p,{alphaCorrection:u?-i:0}),!0),e.getCylinderEnd(r,A(g,{alphaCorrection:u?-i:0}),!1)),zIndexes:{frontLower:s?2:1,backLower:s?1:2,rightLower:s?1:2}})),x}var n={compose:function(t){const e=t.prototype;e.funnel3d||(e.Element3D.types.funnel3d=h,p(e,{funnel3d:l,funnel3dPath:c}))}},g={center:["50%","50%"],width:"90%",neckWidth:"30%",height:"100%",neckHeight:"25%",reversed:!1,gradientForSides:!0,animation:!1,edgeWidth:0,colorByPoint:!0,showInLegend:!1,dataLabels:{align:"right",crop:!1,inside:!1,overflow:"allow"}},f=o(512),f=o.n(f),y=f()["seriesTypes"]["column"];const u=e()["extend"];class x extends y.prototype.pointClass{}u(x.prototype,{shapeType:"funnel3d"});y=x;const C=e()["deg2rad"],L=e()["pick"];function z(t,e,r,i){const o=e.options.chart.options3d,s=L(i,!!r&&e.inverted),d={x:e.plotWidth/2,y:e.plotHeight/2,z:o.depth/2,vd:L(o.depth,1)*L(o.viewDistance,0)},a=e.scale3d||1,n=C*o.beta*(s?-1:1),h=C*o.alpha*(s?-1:1),p={cosA:Math.cos(h),cosB:Math.cos(-n),sinA:Math.sin(h),sinB:Math.sin(-n)};return r||(d.x+=e.plotLeft,d.y+=e.plotTop),t.map(function(t){i=(s?t.y:t.x)-d.x,o=(s?t.x:t.y)-d.y,t=(t.z||0)-d.z;const e={x:(n=p).cosB*i-n.sinB*t,y:-n.sinA*n.sinB*i+n.cosA*o-n.cosB*n.sinA*t,z:n.cosA*n.sinB*i+n.sinA*o+n.cosA*n.cosB*t},r=U(e,d,d.vd);var i,o,n;return r.x=r.x*a+d.x,r.y=r.y*a+d.y,r.z=e.z*a+d.z,{x:s?r.y:r.x,y:s?r.x:r.y,z:r.z}})}function U(t,e,r){e=0<r&&r<Number.POSITIVE_INFINITY?r/(t.z+e.z+r):1;return{x:t.x*e,y:t.y*e}}function G(t){let e=0,r,i;for(r=0;r<t.length;r++)i=(r+1)%t.length,e+=t[r].x*t[i].y-t[i].x*t[r].y;return e/2}var M={perspective:z,perspective3D:U,pointCameraDistance:function(t,e){const r=e.options.chart.options3d,i=e.plotWidth/2,o=e.plotHeight/2,n=L(r.depth,1)*L(r.viewDistance,0)+r.depth,s=Math.sqrt(Math.pow(i-L(t.plotX,t.x),2)+Math.pow(o-L(t.plotY,t.y),2)+Math.pow(n-L(t.plotZ,t.z),2));return s},shapeArea:G,shapeArea3D:function(t,e,r){return G(z(t,e,r))}},E=e()["noop"];const P=M["perspective"],{series:k,seriesTypes:{column:S}}=f(),{extend:F,merge:H,pick:B,relativeLength:I}=e();class R extends S{alignDataLabel(t,e,r){const i=this,o=t.dlBoxRaw,n=i.chart.inverted,s=t.plotY>B(i.translatedThreshold,i.yAxis.len),d=B(r.inside,!!i.options.stacking),a={x:o.x,y:o.y,height:0};r.align=B(r.align,!n||d?"center":s?"right":"left"),r.verticalAlign=B(r.verticalAlign,n||d?"middle":s?"top":"bottom"),"top"!==r.verticalAlign&&(a.y+=o.bottom/("bottom"===r.verticalAlign?1:2)),a.width=i.getWidthAt(a.y),i.options.reversed&&(a.width=o.fullWidth-a.width),d?a.x-=a.width/2:"left"===r.align?(r.align="right",a.x-=1.5*a.width):"right"===r.align?(r.align="left",a.x+=a.width/2):a.x-=a.width/2,t.dlBox=a,S.prototype.alignDataLabel.apply(i,arguments)}bindAxes(){k.prototype.bindAxes.apply(this,arguments),F(this.xAxis.options,{gridLineWidth:0,lineWidth:0,title:void 0,tickPositions:[]}),H(!0,this.yAxis.options,{gridLineWidth:0,title:void 0,labels:{enabled:!1}})}translate(){k.prototype.translate.apply(this,arguments);const t=this,e=t.chart,r=t.options,i=r.reversed,o=r.ignoreHiddenPoint,n=e.plotWidth,s=e.plotHeight,d=r.center,a=I(d[0],n),h=I(d[1],s),p=I(r.width,n),l=I(r.height,s),c=I(r.neckWidth,n),g=I(r.neckHeight,s),f=h-l/2+l-g,y=t.points;let u=0,x=0,w,m,b,v,A,C,L,z,U;t.getWidthAt=m=function(t){var e=h-l/2;return t>f||l===g?c:c+(p-c)*(1-(t-e)/(l-g))},t.center=[a,h,l],t.centerX=a;for(const G of y)o&&!1===G.visible||(u+=G.y);for(const M of y)L=null,b=u?M.y/u:0,A=h-l/2+x*l,C=A+b*l,w=m(A),z=C-A,U={gradientForSides:B(M.options.gradientForSides,r.gradientForSides),x:a,y:A,height:z,width:w,z:1,top:{width:w}},w=m(C),U.bottom={fraction:b,width:w},A>=f?U.isCylinder=!0:C>f&&(L=C,w=m(f),C=f,U.bottom.width=w,U.middle={fraction:z?(f-A)/z:0,width:w}),i&&(U.y=A=h+l/2-(x+b)*l,U.middle&&(U.middle.fraction=1-(z?U.middle.fraction:0)),w=U.width,U.width=U.bottom.width,U.bottom.width=w),M.shapeArgs=F(M.shapeArgs,U),M.percentage=100*b,M.plotX=a,M.plotY=i?h+l/2-(x+b/2)*l:(A+(L||C))/2,v=P([{x:a,y:M.plotY,z:i?-(p-m(M.plotY))/2:-m(M.plotY)/2}],e,!0)[0],M.tooltipPos=[v.x,v.y],M.dlBoxRaw={x:a,width:m(M.plotY),y:A,bottom:U.height||0,fullWidth:p},o&&!1===M.visible||(x+=b)}}R.compose=n.compose,R.defaultOptions=H(S.defaultOptions,g),F(R.prototype,{pointClass:y,translate3dShapes:E}),f().registerSeriesType("funnel3d",R);const _=R,T=(_.compose(s().getRendererType()),e());return t.default})());