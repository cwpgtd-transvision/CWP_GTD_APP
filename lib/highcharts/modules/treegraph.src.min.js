!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(t._Highcharts,t._Highcharts.SeriesRegistry,t._Highcharts.SVGRenderer,t._Highcharts.Point,t._Highcharts.Color,t._Highcharts.SVGElement):"function"==typeof define&&define.amd?define("highcharts/modules/treegraph",["highcharts/highcharts"],function(t){return e(t,t.SeriesRegistry,t.SVGRenderer,t.Point,t.Color,t.SVGElement)}):"object"==typeof exports?exports["highcharts/modules/treegraph"]=e(t._Highcharts,t._Highcharts.SeriesRegistry,t._Highcharts.SVGRenderer,t._Highcharts.Point,t._Highcharts.Color,t._Highcharts.SVGElement):t.Highcharts=e(t.Highcharts,t.Highcharts.SeriesRegistry,t.Highcharts.SVGRenderer,t.Highcharts.Point,t.Highcharts.Color,t.Highcharts.SVGElement)}("undefined"==typeof window?this:window,(nt,at,lt,ht,dt,pt)=>(()=>{"use strict";var i={28:t=>{t.exports=pt},260:t=>{t.exports=ht},512:t=>{t.exports=at},540:t=>{t.exports=lt},620:t=>{t.exports=dt},944:t=>{t.exports=nt}},o={};function s(t){var e=o[t];if(void 0!==e)return e.exports;e=o[t]={exports:{}};return i[t](e,e.exports,s),e.exports}s.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return s.d(e,{a:e}),e},s.d=(t,e)=>{for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var t={},e=(s.d(t,{default:()=>rt}),s(944)),e=s.n(e);function h(e,i){const o=[];for(let t=0;t<e.length;t++){var s,r,n,a,l,h,d=e[t][1],p=e[t][2];"number"==typeof d&&"number"==typeof p&&(0===t?o.push(["M",d,p]):t!==e.length-1&&i?(r=e[t-1],a=e[t+1],r&&a&&(s=r[1],r=r[2],n=a[1],a=a[2],"number"==typeof s&&"number"==typeof n&&"number"==typeof r&&"number"==typeof a&&s!==n&&r!==a&&(l=s<n?1:-1,h=r<a?1:-1,o.push(["L",d-l*Math.min(Math.abs(d-s),i),p-h*Math.min(Math.abs(p-r),i)],["C",d,p,d,p,d+l*Math.min(Math.abs(d-n),i),p+h*Math.min(Math.abs(p-a),i)])))):o.push(["L",d,p]))}return o}var r={applyRadius:h,getLinkPath:{default:function(t){var{x1:t,y1:e,x2:i,y2:o,width:s=0,inverted:r=!1,radius:n,parentVisible:a}=t,l=[["M",t,e],["L",t,e],["C",t,e,t,o,t,o],["L",t,o],["C",t,e,t,o,t,o],["L",t,o]];return a?h([["M",t,e],["L",t+s*(r?-.5:.5),e],["L",t+s*(r?-.5:.5),o],["L",i,o]],n):l},straight:function(t){var{x1:t,y1:e,x2:i,y2:o,width:s=0,inverted:r=!1,parentVisible:n}=t;return n?[["M",t,e],["L",t+s*(r?-1:1),o],["L",i,o]]:[["M",t,e],["L",t,o],["L",t,o]]},curved:function(t){var{x1:t,y1:e,x2:i,y2:o,offset:s=0,width:r=0,inverted:n=!1,parentVisible:a}=t;return a?[["M",t,e],["C",t+s,e,t-s+r*(n?-1:1),o,t+r*(n?-1:1),o],["L",i,o]]:[["M",t,e],["C",t,e,t,o,t,o],["L",i,o]]}}},n=s(512),n=s.n(n),a=s(540),a=s.n(a),{prototype:{NodeClass:l}}=n()["seriesTypes"]["treemap"];class W extends l{constructor(){super(...arguments),this.mod=0,this.shift=0,this.change=0,this.children=[],this.preX=0,this.hidden=!1,this.wasVisited=!1,this.collapsed=!1}nextLeft(){return this.getLeftMostChild()||this.thread}nextRight(){return this.getRightMostChild()||this.thread}getAncestor(t,e){return t.ancestor.children[0]===this.children[0]?t.ancestor:e}getLeftMostSibling(){var t=this.getParent();if(t)for(const e of t.children)if(e&&e.point.visible)return e}hasChildren(){var e=this.children;for(let t=0;t<e.length;t++)if(e[t].point.visible)return!0;return!1}getLeftSibling(){var t=this.getParent();if(t){var e=t.children;for(let t=this.relativeXPosition-1;0<=t;t--)if(e[t]&&e[t].point.visible)return e[t]}}getLeftMostChild(){var e=this.children;for(let t=0;t<e.length;t++)if(e[t].point.visible)return e[t]}getRightMostChild(){var e=this.children;for(let t=e.length-1;0<=t;t--)if(e[t].point.visible)return e[t]}getParent(){return this.parentNode}getFirstChild(){var e=this.children;for(let t=0;t<e.length;t++)if(e[t].point.visible)return e[t]}}const d=W;var l=s(260),p=s.n(l),{prototype:{pointClass:l}}=n()["seriesTypes"]["treemap"];const{addEvent:c,fireEvent:I,merge:f}=e();class u extends l{constructor(){super(...arguments),this.dataLabelOnHidden=!0,this.isLink=!1,this.setState=p().prototype.setState}draw(){super.draw.apply(this,arguments);const t=this.graphic;t&&t.animate({visibility:this.visible?"inherit":"hidden"}),this.renderCollapseButton()}renderCollapseButton(){const t=this,e=t.series,i=t.graphic&&t.graphic.parentGroup,o=e.mapOptionsToLevel[t.node.level||0]||{},s=f(e.options.collapseButton,o.collapseButton,t.options.collapseButton),{width:r,height:n,shape:a,style:l}=s,h=this.series.chart,d=!t.visible||!t.collapsed&&s.onlyOnHover&&"hover"!==t.state?0:1;var p,c,u;t.shapeArgs&&(this.collapseButtonOptions=s,t.collapseButton?t.node.children.length&&s.enabled?({x:p,y:c}=this.getCollapseBtnPosition(s),t.collapseButton.attr({text:t.collapsed?"+":"-",rotation:h.inverted?90:0,rotationOriginX:r/2,rotationOriginY:n/2,visibility:t.visible?"inherit":"hidden"}).animate({x:p,y:c,opacity:d})):(t.collapseButton.destroy(),delete t.collapseButton):t.node.children.length&&s.enabled&&({x:p,y:c}=this.getCollapseBtnPosition(s),u=s.fillColor||t.color||"#cccccc",t.collapseButton=h.renderer.label(t.collapsed?"+":"-",p,c,a).attr({height:n-4,width:r-4,padding:2,fill:u,rotation:h.inverted?90:0,rotationOriginX:r/2,rotationOriginY:n/2,stroke:s.lineColor||"#ffffff","stroke-width":s.lineWidth,"text-align":"center",align:"center",zIndex:1,opacity:d,visibility:t.visible?"inherit":"hidden"}).addClass("highcharts-tracker").addClass("highcharts-collapse-button").removeClass("highcharts-no-tooltip").css(f({color:"string"==typeof u?h.renderer.getContrast(u):"#333333"},l)).add(i),t.collapseButton.element.point=t))}toggleCollapse(t){const e=this.series;this.update({collapsed:t??!this.collapsed},!1,void 0,!1),I(e,"toggleCollapse"),e.redraw()}destroy(){this.collapseButton&&(this.collapseButton.destroy(),delete this.collapseButton,this.collapseButton=void 0),this.linkToParent&&(this.linkToParent.destroy(),delete this.linkToParent),super.destroy.apply(this,arguments)}getCollapseBtnPosition(t){var e=this.series.chart.inverted,i=t.width,o=t.height,{x:s=0,y:r=0,width:n=0,height:a=0}=this.shapeArgs||{};return{x:s+t.x+(e?.3*-o:n+-.3*i),y:r+a/2-o/2+t.y}}}c(u,"mouseOut",function(){const t=this.collapseButton,e=this.collapseButtonOptions;t&&e?.onlyOnHover&&!this.collapsed&&t.animate({opacity:0})}),c(u,"mouseOver",function(){this.collapseButton&&this.visible&&this.collapseButton.animate({opacity:1},this.series.options.states?.hover?.animation)}),c(u,"click",function(){this.toggleCollapse()});var l=u,g=s(620),V=s.n(g);const{extend:v,isArray:E,isNumber:y,isObject:b,merge:m,pick:x,relativeLength:D}=e();const L={getColor:function(t,e){const i=e.index,o=e.mapOptionsToLevel,s=e.parentColor,r=e.parentColorIndex,n=e.series,a=e.colors,l=e.siblings,h=n.points,d=n.chart.options.chart;let p,c,u,f,g,v;var y;return t&&(p=h[t.i],c=o[t.level]||{},p&&c.colorByPoint&&(f=p.index%(a?a.length:d.colorCount),u=a&&a[f]),n.chart.styledMode||(g=x(p&&p.options.color,c&&c.color,u,s&&(t=s,(y=c&&c.colorVariation)&&"brightness"===y.key&&i&&l?V().parse(t).brighten(y.to*(i/l)).get():t),n.color)),v=x(p&&p.options.colorIndex,c&&c.colorIndex,f,r,e.colorIndex)),{color:g,colorIndex:v}},getLevelOptions:function(t){const e={};let r,i,o,n,s,a;if(b(t))for(n=y(t.from)?t.from:1,a=t.levels,i={},r=b(t.defaults)?t.defaults:{},E(a)&&(i=a.reduce((t,e)=>{let i,o,s;return b(e)&&y(e.level)&&(s=m({},e),o=x(s.levelIsConstant,r.levelIsConstant),delete s.levelIsConstant,delete s.level,i=e.level+(o?0:n-1),b(t[i])?m(!0,t[i],s):t[i]=s),t},{})),s=y(t.to)?t.to:1,o=0;o<=s;o++)e[o]=m({},r,b(i[o])?i[o]:{});return e},getNodeWidth:function(t,e){var{chart:t,options:i}=t,{nodeDistance:i=0,nodeWidth:o=0}=i,{plotSizeX:t=1}=t;return"auto"!==o?D(o,t):"string"==typeof i&&/%$/.test(i)?t/(e+parseFloat(i)/100*(e-1)):(o=Number(i),(t+o)/(e||1)-o)},setTreeValues:function o(s,r){const t=r.before,e=r.idRoot,i=r.mapIdToNode,n=i[e],a=!1!==r.levelIsConstant,l=r.points,h=l[s.i],d=h&&h.options||{},p=[];let c=0;s.levelDynamic=s.level-(a?0:n.level),s.name=x(h&&h.name,""),s.visible=e===s.id||!0===r.visible,(s="function"==typeof t?t(s,r):s).children.forEach((t,e)=>{var i=v({},r);v(i,{index:e,siblings:s.children.length,visible:s.visible}),t=o(t,i),p.push(t),t.visible&&(c+=t.val)});var u=x(d.value,c);return s.visible=0<=u&&(0<c||s.visible),s.children=p,s.childrenTotal=c,s.isLeaf=s.visible&&!c,s.val=u,s},updateRootId:function(t){let e,i;return b(t)&&(i=b(t.options)?t.options:{},e=x(t.rootNode,i.rootId,""),b(t.userOptions)&&(t.userOptions.rootId=e),t.rootNode=e),e}},{pick:_,extend:z}=e();var{prototype:{pointClass:g}}=n()["seriesTypes"]["column"];class Y extends g{constructor(t,e,i,o){super(t,e,i),this.dataLabelOnNull=!0,this.formatPrefix="link",this.isLink=!0,this.node={},this.formatPrefix="link",this.dataLabelOnNull=!0,o&&(this.fromNode=o.node.parentNode.point,this.visible=o.visible,this.toNode=o,this.id=this.toNode.id+"-"+this.fromNode.id)}update(t,e,i,o){var s={id:this.id,formatPrefix:this.formatPrefix};p().prototype.update.call(this,t,!this.isLink&&e,i,o),this.visible=this.toNode.visible,z(this,s),_(e,!0)&&this.series.chart.redraw(i)}}g=Y;class k{static createDummyNode(t,e,i){const o=new d;return o.id=t.id+"-"+i,o.ancestor=t,o.children.push(e),o.parent=t.id,o.parentNode=t,o.point=e.point,o.level=e.level-i,o.relativeXPosition=e.relativeXPosition,o.visible=e.visible,t.children[e.relativeXPosition]=o,e.oldParentNode=t,e.relativeXPosition=0,e.parentNode=o,e.parent=o.id,o}calculatePositions(t){var e=this,i=t.nodeList,t=(this.resetValues(i),t.tree);t&&(e.calculateRelativeX(t,0),e.beforeLayout(i),e.firstWalk(t),e.secondWalk(t,-t.preX),e.afterLayout(i))}beforeLayout(t){for(const i of t)for(var e of i.children)if(e&&1<e.level-i.level){let t=e.level-i.level-1;for(;0<t;)e=k.createDummyNode(i,e,t),t--}}resetValues(t){for(const e of t)e.mod=0,(e.ancestor=e).shift=0,e.thread=void 0,e.change=0,e.preX=0}calculateRelativeX(t,e){var i=t.children;for(let t=0,e=i.length;t<e;++t)this.calculateRelativeX(i[t],t);t.relativeXPosition=e}firstWalk(e){let i;if(e.hasChildren()){let t=e.getLeftMostChild();for(const r of e.children)this.firstWalk(r),t=this.apportion(r,t);this.executeShifts(e);var o=e.getLeftMostChild(),s=e.getRightMostChild(),o=(o.preX+s.preX)/2;(i=e.getLeftSibling())?(e.preX=i.preX+1,e.mod=e.preX-o):e.preX=o}else(i=e.getLeftSibling())?(e.preX=i.preX+1,e.mod=e.preX):e.preX=0}secondWalk(t,e){t.yPosition=t.preX+e,t.xPosition=t.level;for(const i of t.children)this.secondWalk(i,e+t.mod)}executeShifts(e){let i=0,o=0;for(let t=e.children.length-1;0<=t;t--){const s=e.children[t];s.preX+=i,s.mod+=i,o+=s.change,i+=s.shift+o}}apportion(l,h){var d=l.getLeftSibling();if(d){let t=l,e=l,i=d,o=t.getLeftMostSibling(),s=t.mod,r=e.mod,n=i.mod,a=o.mod;for(;i&&i.nextRight()&&t&&t.nextLeft();){i=i.nextRight(),o=o.nextLeft(),t=t.nextLeft(),(e=e.nextRight()).ancestor=l;var p=i.preX+n-(t.preX+s)+1;0<p&&(this.moveSubtree(l.getAncestor(i,h),l,p),s+=p,r+=p),n+=i.mod,s+=t.mod,a+=o.mod,r+=e.mod}i&&i.nextRight()&&!e.nextRight()&&(e.thread=i.nextRight(),e.mod+=n-r),t&&t.nextLeft()&&!o.nextLeft()&&(o.thread=t.nextLeft(),o.mod+=s-a),h=l}return h}moveSubtree(t,e,i){var o=e.relativeXPosition-t.relativeXPosition;e.change-=i/o,e.shift+=i,e.preX+=i,e.mod+=i,t.change+=i/o}afterLayout(t){for(const e of t)e.oldParentNode&&(e.relativeXPosition=e.parentNode.relativeXPosition,e.parent=e.oldParentNode.parent,e.parentNode=e.oldParentNode,delete e.oldParentNode.children[e.relativeXPosition],(e.oldParentNode.children[e.relativeXPosition]=e).oldParentNode=void 0)}}const G=k;var F={reversed:!1,marker:{radius:10,lineWidth:0,symbol:"circle",fillOpacity:1,states:{}},link:{color:"#666666",lineWidth:1,radius:10,cursor:"default",type:"curved"},collapseButton:{onlyOnHover:!0,enabled:!0,lineWidth:1,x:0,y:0,height:18,width:18,shape:"circle",style:{cursor:"pointer",fontWeight:"bold",fontSize:"1em"}},fillSpace:!1,tooltip:{linkFormat:"{point.fromNode.id} → {point.toNode.id}",pointFormat:"{point.id}"},dataLabels:{defer:!0,linkTextPath:{attributes:{startOffset:"50%"}},enabled:!0,linkFormatter:()=>"",padding:5,style:{textOverflow:"none"}},nodeDistance:30,nodeWidth:void 0},P=s(28),P=s.n(P);const j=e()["deg2rad"],{addEvent:C,merge:q,uniqueKey:$,defined:T,extend:K}=e();function U(s,t){t=q(!0,{enabled:!0,attributes:{dy:-5,startOffset:"50%",textAnchor:"middle"}},t);const r=this.renderer.url,n=this.text||this,e=n.textPath,{attributes:a,enabled:l}=t;return s=s||e&&e.path,e&&e.undo(),s&&l?(t=C(n,"afterModifyTree",e=>{if(s&&l){let t=s.attr("id");t||s.attr("id",t=$());const o={x:0,y:0};T(a.dx)&&(o.dx=a.dx,delete a.dx),T(a.dy)&&(o.dy=a.dy,delete a.dy),n.attr(o),this.attr({transform:""}),this.box&&(this.box=this.box.destroy());var i=e.nodes.slice(0);e.nodes.length=0,e.nodes[0]={tagName:"textPath",attributes:K(a,{"text-anchor":a.textAnchor,href:r+"#"+t}),children:i}}}),n.textPath={path:s,undo:t}):(n.attr({dx:0,dy:0}),delete n.textPath),this.added&&(n.textCache="",this.renderer.buildText(n)),this}function J(t){const e=t.bBox,s=this.element?.querySelector("textPath");if(s){const c=[],{b:u,h:i}=this.renderer.fontMetrics(this.element),f=i-u,g=new RegExp('(<tspan>|<tspan(?!\\sclass="highcharts-br")[^>]*>|<\\/tspan>)',"g"),v=s.innerHTML.replace(g,"").split(/<tspan class="highcharts-br"[^>]*>/),y=v.length;var o=(t,e)=>{var{x:e,y:i}=e,t=(s.getRotationOfChar(t)-90)*j,o=Math.cos(t),t=Math.sin(t);return[[e-f*o,i-f*t],[e+u*o,i+u*t]]};for(let e=0,i=0;i<y;i++){var r=v[i].length;for(let t=0;t<r;t+=5)try{var n=e+t+i,[a,l]=o(n,s.getStartPositionOfChar(n));0===t?(c.push(l),c.push(a)):(0===i&&c.unshift(l),i===y-1&&c.push(a))}catch(t){break}e+=r-1;try{var h=e+i,[d,p]=o(h,s.getEndPositionOfChar(h));c.unshift(p),c.unshift(d)}catch(t){break}}c.length&&c.push(c[0].slice()),e.polygon=c}return e}function Q(t){const e=t.labelOptions,i=t.point,o=e[i.formatPrefix+"TextPath"]||e.textPath;o&&!e.useHTML&&(this.setTextPath(i.getDataLabelPath?.(this)||i.graphic,o),i.dataLabelPath&&!o.enabled&&(i.dataLabelPath=i.dataLabelPath.destroy()))}const Z={compose:function(t){C(t,"afterGetBBox",J),C(t,"beforeAddingDataLabel",Q);const e=t.prototype;e.setTextPath||(e.setTextPath=U)}},tt=r["getLinkPath"],{series:{prototype:w},seriesTypes:{treemap:M,column:X}}=n(),et=a()["prototype"]["symbols"],{getLevelOptions:it,getNodeWidth:ot}=L,{arrayMax:st,crisp:N,extend:O,merge:S,pick:B,relativeLength:A,splat:R}=e();Z.compose(P());class H extends M{constructor(){super(...arguments),this.nodeList=[],this.links=[]}init(){super.init.apply(this,arguments),this.layoutAlgorythm=new G;const i=this,t=this.chart.labelCollectors;t.some(t=>"collectorFunc"===t.name)||t.push(function(){const t=[];if(i.options.dataLabels&&!R(i.options.dataLabels)[0].allowOverlap)for(const e of i.links||[])e.dataLabel&&t.push(e.dataLabel);return t})}getLayoutModifiers(){const t=this.chart,d=this,p=t.plotSizeX,c=t.plotSizeY,u=st(this.points.map(t=>t.node.xPosition));let f=1/0,g=-1/0,v=1/0,y=-1/0,b=0,m=0,x=0,L=0;this.points.forEach(e=>{if(!this.options.fillSpace||e.visible){const i=e.node,o=d.mapOptionsToLevel[e.node.level]||{},s=S(this.options.marker,o.marker,e.options.marker),r=s.width??ot(this,u),n=A(s.radius||0,Math.min(p,c)),a=s.symbol,l="circle"!==a&&s.height?A(s.height,c):2*n,h="circle"!==a&&r?A(r,p):2*n;i.nodeSizeX=h,i.nodeSizeY=l;let t;i.xPosition<=f&&(f=i.xPosition,t=s.lineWidth||0,m=Math.max(h+t,m)),i.xPosition>=g&&(g=i.xPosition,t=s.lineWidth||0,b=Math.max(h+t,b)),i.yPosition<=v&&(v=i.yPosition,t=s.lineWidth||0,L=Math.max(l+t,L)),i.yPosition>=y&&(y=i.yPosition,t=s.lineWidth||0,x=Math.max(l+t,x))}});var e=y===v?1:(c-(L+x)/2)/(y-v),i=y===v?c/2:-e*v+L/2,o=g===f?1:(p-(b+b)/2)/(g-f);return{ax:o,bx:g===f?p/2:-o*f+m/2,ay:e,by:i}}getLinks(){const i=this,o=[];return this.data.forEach(t=>{var e=i.mapOptionsToLevel[t.node.level||0]||{};t.node.parent?(e=S(e,t.options),!t.linkToParent||t.linkToParent.destroyed?(e=new i.LinkClass(i,e,void 0,t),t.linkToParent=e):(t.collapsed=B(t.collapsed,(this.mapOptionsToLevel[t.node.level]||{}).collapsed),t.linkToParent.visible=t.linkToParent.toNode.visible),t.linkToParent.index=o.push(t.linkToParent)-1):t.linkToParent&&(i.links.splice(t.linkToParent.index),t.linkToParent.destroy(),delete t.linkToParent)}),o}buildTree(t,e,i,o,s){var r=this.points[e];return i=r&&r.level||i,super.buildTree.call(this,t,e,i,o,s)}markerAttribs(){return{}}setCollapsedStatus(t,e){const i=t.point;i&&(i.collapsed=B(i.collapsed,(this.mapOptionsToLevel[t.level]||{}).collapsed),e=!1!==(i.visible=e)&&!i.collapsed),t.children.forEach(t=>{this.setCollapsedStatus(t,e)})}drawTracker(){X.prototype.drawTracker.apply(this,arguments),X.prototype.drawTracker.call(this,this.links)}translate(){var t=this,e=t.options;let i=L.updateRootId(t),o;w.translate.call(t);var s=t.tree=t.getTree();o=t.nodeMap[i],""===i||o&&o.children.length||(t.setRootNode("",!1),i=t.rootNode,o=t.nodeMap[i]),t.mapOptionsToLevel=it({from:o.level+1,levels:e.levels,to:s.height,defaults:{levelIsConstant:t.options.levelIsConstant,colorByPoint:e.colorByPoint}}),this.setCollapsedStatus(s,!0),t.links=t.getLinks(),t.setTreeValues(s),this.layoutAlgorythm.calculatePositions(t),t.layoutModifier=this.getLayoutModifiers(),this.points.forEach(t=>{this.translateNode(t)}),this.points.forEach(t=>{t.linkToParent&&this.translateLink(t.linkToParent)}),e.colorByPoint||t.setColorRecursive(t.tree)}translateLink(i){var o=i.fromNode,s=i.toNode,r=this.options.link?.lineWidth||0,n=B(this.options.link?.curveFactor,.5),a=B(i.options.link?.type,this.options.link?.type,"default");if(o.shapeArgs&&s.shapeArgs){var l=o.shapeArgs.width||0,h=this.chart.inverted,d=N((o.shapeArgs.y||0)+(o.shapeArgs.height||0)/2,r),p=N((s.shapeArgs.y||0)+(s.shapeArgs.height||0)/2,r);let t=N((o.shapeArgs.x||0)+l,r),e=N(s.shapeArgs.x||0,r);h&&(t-=l,e+=s.shapeArgs.width||0);var o=s.node.xPosition-o.node.xPosition,c=(i.shapeType="path",Math.abs(e-t)+l),c=c/o-l,o=c*n*(h?-1:1),l=N((e+t)/2,r);i.plotX=l,i.plotY=p,i.shapeArgs={d:tt[a]({x1:t,y1:d,x2:e,y2:p,width:c,offset:o,inverted:h,parentVisible:s.visible,radius:this.options.link?.radius})},i.dlBox={x:(t+e)/2,y:(d+p)/2,height:r,width:0},i.tooltipPos=h?[(this.chart.plotSizeY||0)-i.dlBox.y,(this.chart.plotSizeX||0)-i.dlBox.x]:[i.dlBox.x,i.dlBox.y]}}drawNodeLabels(t){var i=this,e=i.mapOptionsToLevel;let o,s;for(const r of t){if(s=e[r.node.level],o={style:{}},s&&s.dataLabels&&(o=S(o,s.dataLabels),i.hasDataLabels=()=>!0),r.shapeArgs&&i.options.dataLabels){const n={};let{width:t=0,height:e=0}=r.shapeArgs;i.chart.inverted&&([t,e]=[e,t]),R(i.options.dataLabels)[0].style?.width||(n.width=t+"px"),R(i.options.dataLabels)[0].style?.lineClamp||(n.lineClamp=Math.floor(e/16)),O(o.style,n),r.dataLabel?.css(n)}r.dlOptions=S(o,r.options.dataLabels)}w.drawDataLabels.call(this,t)}alignDataLabel(t,e){const i=t.visible;t.visible=!0,super.alignDataLabel.apply(this,arguments),e.animate({opacity:!1===i?0:1},void 0,function(){i||e.hide()}),t.visible=i}drawDataLabels(){this.options.dataLabels&&(this.options.dataLabels=R(this.options.dataLabels),this.drawNodeLabels(this.points),w.drawDataLabels.call(this,this.links))}destroy(){if(this.links){for(const t of this.links)t.destroy();this.links.length=0}return w.destroy.apply(this,arguments)}pointAttribs(t,e){var i=this,o=t&&i.mapOptionsToLevel[t.node.level||0]||{},s=t&&t.options,r=o.states&&o.states[e]||{};t&&(t.options.marker=S(i.options.marker,o.marker,t.options.marker));const n=B(r&&r.link&&r.link.color,s&&s.link&&s.link.color,o&&o.link&&o.link.color,i.options.link&&i.options.link.color),a=B(r&&r.link&&r.link.lineWidth,s&&s.link&&s.link.lineWidth,o&&o.link&&o.link.lineWidth,i.options.link&&i.options.link.lineWidth),l=w.pointAttribs.call(i,t,e);return t&&(t.isLink&&(l.stroke=n,l["stroke-width"]=a,delete l.fill),t.visible||(l.opacity=0)),l}drawPoints(){M.prototype.drawPoints.apply(this,arguments),X.prototype.drawPoints.call(this,this.links)}translateNode(t){const e=this.chart,i=t.node,o=e.plotSizeY,s=e.plotSizeX,{ax:r,bx:n,ay:a,by:l}=this.layoutModifier,h=r*i.xPosition+n,d=a*i.yPosition+l,p=this.mapOptionsToLevel[i.level]||{},c=S(this.options.marker,p.marker,t.options.marker),u=c.symbol,f=i.nodeSizeY,g=i.nodeSizeX,v=this.options.reversed,y=i.x=e.inverted?s-g/2-h:h-g/2,b=i.y=v?d-f/2:o-d-f/2,m=B(t.options.borderRadius,p.borderRadius,this.options.borderRadius),x=et[u||"circle"];if(void 0===x?(t.hasImage=!0,t.shapeType="image",t.imageUrl=u.match(/^url\((.*?)\)$/)[1]):t.shapeType="path",!t.visible&&t.linkToParent){var L=t.linkToParent.fromNode;if(L){const k=L.shapeArgs||{},{x:h=0,y:d=0,width:g=0,height:f=0}=k;t.shapeArgs||(t.shapeArgs={}),t.hasImage||O(t.shapeArgs,{d:x(h,d,g,f,m?{r:m}:void 0)}),O(t.shapeArgs,{x:h,y:d}),t.plotX=L.plotX,t.plotY=L.plotY}}else t.plotX=y,t.plotY=b,t.shapeArgs={x:y,y:b,width:g,height:f,cursor:t.node.isLeaf?"default":"pointer"},t.hasImage||(t.shapeArgs.d=x(y,b,g,f,m?{r:m}:void 0));t.tooltipPos=e.inverted?[o-b-f/2,s-y-g/2]:[y+g/2,b]}}H.defaultOptions=S(M.defaultOptions,F),O(H.prototype,{forceDL:!0,pointClass:l,NodeClass:d,LinkClass:g,isCartesian:!1}),n().registerSeriesType("treegraph",H);const rt=e();return t.default})());