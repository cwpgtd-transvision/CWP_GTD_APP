!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(t._Highcharts,t._Highcharts.Templating):"function"==typeof define&&define.amd?define("highcharts/modules/series-label",["highcharts/highcharts"],function(t){return e(t,t.Templating)}):"object"==typeof exports?exports["highcharts/modules/series-label"]=e(t._Highcharts,t._Highcharts.Templating):t.Highcharts=e(t.Highcharts,t.Highcharts.Templating)}("undefined"==typeof window?this:window,(y,X)=>(()=>{"use strict";var r={944:t=>{t.exports=y},984:t=>{t.exports=X}},o={};function a(t){var e=o[t];if(void 0!==e)return e.exports;e=o[t]={exports:{}};return r[t](e,e.exports,a),e.exports}a.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return a.d(e,{a:e}),e},a.d=(t,e)=>{for(var r in e)a.o(e,r)&&!a.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var t={},e=(a.d(t,{default:()=>m}),a(944)),l=a.n(e),e=a(984),e=a.n(e);let i={enabled:!0,connectorAllowed:!1,connectorNeighbourDistance:24,format:void 0,formatter:void 0,minFontSize:null,maxFontSize:null,onArea:null,style:{fontSize:"0.8em",fontWeight:"bold"},useHTML:!1,boxesToAvoid:[]};function s(t,e,r,o,a,i){i=(i-e)*(r-t)-(o-e)*(a-t);return 0<i||!(i<0)}function c(t,e,r,o,a,i,h,n){return s(t,e,a,i,h,n)!==s(r,o,a,i,h,n)&&s(t,e,r,o,a,i)!==s(t,e,r,o,h,n)}let P=l()["animObject"],B=e()["format"],h=l()["setOptions"],n=l()["composed"],{boxIntersectLine:w,intersectRect:Y}={boxIntersectLine:function(t,e,r,o,a,i,h,n){return c(t,e,t+r,e,a,i,h,n)||c(t+r,e,t+r,e+o,a,i,h,n)||c(t,e+o,t+r,e+o,a,i,h,n)||c(t,e,t,e+o,a,i,h,n)},intersectRect:function(t,e){return!(e.left>t.right||e.right<t.left||e.top>t.bottom||e.bottom<t.top)}},{addEvent:p,extend:E,fireEvent:d,isNumber:A,pick:H,pushUnique:f,syncTimeout:u}=l();function C(r,o,a,i,h){let n=r.chart,l=r.options.label||{},s=H(l.onArea,!!r.area),c=s||l.connectorAllowed,t=n.boxesToAvoid,p=Number.MAX_VALUE,d=Number.MAX_VALUE,f,u,x,g,b,m,y;for(m=0;t&&m<t.length;m+=1)if(Y(t[m],{left:o,right:o+i.width,top:a,bottom:a+i.height}))return!1;for(m=0;m<n.series.length;m+=1){let t=n.series[m],e=t.interpolatedPoints&&[...t.interpolatedPoints];if(t.visible&&e){var X=n.plotHeight/10;for(let t=n.plotTop;t<=n.plotTop+n.plotHeight;t+=X)e.unshift({chartX:n.plotLeft,chartY:t}),e.push({chartX:n.plotLeft+n.plotWidth,chartY:t});for(y=1;y<e.length;y+=1){if(e[y].chartX>=o-16&&e[y-1].chartX<=o+i.width+16){if(w(o,a,i.width,i.height,e[y-1].chartX,e[y-1].chartY,e[y].chartX,e[y].chartY))return!1;r===t&&!x&&h&&(x=w(o-16,a-16,i.width+32,i.height+32,e[y-1].chartX,e[y-1].chartY,e[y].chartX,e[y].chartY))}!c&&!x||r===t&&!s||(p=Math.min(p,(g=o+i.width/2-e[y].chartX)*g+(b=a+i.height/2-e[y].chartY)*b))}if(!s&&c&&r===t&&(h&&!x||p<Math.pow(l.connectorNeighbourDistance||1,2))){for(y=1;y<e.length;y+=1)(f=Math.min(Math.pow(o+i.width/2-e[y].chartX,2)+Math.pow(a+i.height/2-e[y].chartY,2),Math.pow(o-e[y].chartX,2)+Math.pow(a-e[y].chartY,2),Math.pow(o+i.width-e[y].chartX,2)+Math.pow(a-e[y].chartY,2),Math.pow(o+i.width-e[y].chartX,2)+Math.pow(a+i.height-e[y].chartY,2),Math.pow(o-e[y].chartX,2)+Math.pow(a+i.height-e[y].chartY,2)))<d&&(d=f,u=e[y]);x=!0}}}return(!h||!!x)&&{x:o,y:a,weight:p-(u?d:0),connectorPoint:u}}function x(n){if(this.renderer){let h=this,i=P(h.renderer.globalAnimation).duration;h.labelSeries=[],h.labelSeriesMaxSum=0,h.seriesLabelTimer&&l().clearTimeout(h.seriesLabelTimer),h.series.forEach(function(t){let e=t.options.label||{},r=t.labelBySeries,o=r&&r.closest,a=t.getColumn("y");e.enabled&&t.visible&&(t.graph||t.area)&&!t.boosted&&h.labelSeries&&(h.labelSeries.push(t),e.minFontSize&&e.maxFontSize&&a.length&&(t.sum=a.reduce((t,e)=>(t||0)+(e||0),0),h.labelSeriesMaxSum=Math.max(h.labelSeriesMaxSum||0,t.sum||0)),"load"===n.type&&(i=Math.max(i,P(t.options.animation).duration)),o&&(void 0!==o[0].plotX?r.animate({x:o[0].plotX+o[1],y:o[0].plotY+o[2]}):r.attr({opacity:0})))}),h.seriesLabelTimer=u(function(){if(h.series&&h.labelSeries){var L=h;L.boxesToAvoid=[];let t=L.labelSeries||[],i=L.boxesToAvoid;L.series.forEach(a=>(a.points||[]).forEach(t=>(t.dataLabels||[]).forEach(t=>{var{width:e,height:r}=t.getBBox(),o=(t.translateX||0)+(a.xAxis?a.xAxis.pos:a.chart.plotLeft),t=(t.translateY||0)+(a.yAxis?a.yAxis.pos:a.chart.plotTop);i.push({left:o,top:t,right:o+e,bottom:t+r})}))),t.forEach(function(t){var e=t.options.label||{};t.interpolatedPoints=function(x){let g,b,m,y,X;if(x.xAxis||x.yAxis){let t=x.points,r=[],e=x.graph||x.area,o=e&&e.element,h=x.chart.inverted,a=x.xAxis,i=x.yAxis,n=(h?i:a).pos,l=(h?a:i).pos,s=(h?a:i).len,c=(h?i:a).len,p=H((x.options.label||{}).onArea,!!x.area),d=i.getThreshold(x.options.threshold),f={},u=h?"chartCenterX":"chartCenterY";if(x.getPointSpline&&o&&o.getPointAtLength&&!p&&t.length<(x.chart.plotSizeX||0)/16){x=e.toD&&e.attr("d");for(e.toD&&e.attr({d:e.toD}),m=o.getTotalLength(),g=0;g<m;g+=16){var w=o.getPointAtLength(g),Y=h?c-w.y:w.x,w=h?s-w.x:w.y;M({chartX:n+Y,chartY:l+w,plotX:Y,plotY:w})}x&&e.attr({d:x});x=t[t.length-1].pos();M({chartX:n+(x?.[0]||0),chartY:l+(x?.[1]||0)})}else{let i;for(g=0,m=t.length;g<m;g+=1){let e=t[g],[r,o]=e.pos()||[],a=e["plotHigh"];if(A(r)&&A(o)){let t={plotX:r,plotY:o,chartX:n+r,chartY:l+o};if(p&&(a&&(t.plotY=a,t.chartY=l+a),h?t.chartCenterX=n+c-((a||e.plotY||0)+H(e.yBottom,d))/2:t.chartCenterY=l+((a||o)+H(e.yBottom,d))/2),i&&16<(b=Math.max(Math.abs(t.chartX-i.chartX),Math.abs(t.chartY-i.chartY)))&&b<999)for(X=1,y=Math.ceil(b/16);X<y;X+=1)M({chartX:i.chartX+(t.chartX-i.chartX)*(X/y),chartY:i.chartY+(t.chartY-i.chartY)*(X/y),[u]:(i[u]||0)+((t[u]||0)-(i[u]||0))*(X/y),plotX:(i.plotX||0)+(r-(i.plotX||0))*(X/y),plotY:(i.plotY||0)+(o-(i.plotY||0))*(X/y)});M(t),i=t}}}return r;function M(t){var e=Math.round((t.plotX||0)/8)+","+Math.round((t.plotY||0)/8);f[e]||(f[e]=1,r.push(t))}}}(t),i.push(...e.boxesToAvoid||[])}),L.series.forEach(function(M){let A=M.options.label;if(A&&(M.xAxis||M.yAxis)){let e="highcharts-color-"+H(M.colorIndex,"none"),o=!M.labelBySeries,r=A.minFontSize,a=A.maxFontSize,t=L.inverted,i=(t?M.yAxis:M.xAxis).pos,h=(t?M.xAxis:M.yAxis).pos,n=(L.inverted?M.yAxis:M.xAxis).len,l=(L.inverted?M.xAxis:M.yAxis).len,s=M.interpolatedPoints,c=H(A.onArea,!!M.area),p=[],d=M.getColumn("x"),f,u,x,g,b,m,y=M.labelBySeries,X,w,Y;if(c&&!t&&(X=[M.xAxis.toPixels(d[0]),M.xAxis.toPixels(d[d.length-1])],w=Math.min.apply(Math,X),Y=Math.max.apply(Math,X)),M.visible&&!M.boosted&&s){if(!y){let t=M.name;"string"==typeof A.format?t=B(A.format,M,L):A.formatter&&(t=A.formatter.call(M)),M.labelBySeries=y=L.renderer.label(t,0,0,"connector",0,0,A.useHTML).addClass("highcharts-series-label highcharts-series-label-"+M.index+" "+(M.options.className||"")+" "+e),L.renderer.styledMode||(v="string"==typeof M.color?M.color:"#666666",y.css(E({color:c?L.renderer.getContrast(v):v},A.style||{})),y.attr({opacity:+!!L.renderer.forExport,stroke:M.color,"stroke-width":1})),r&&a&&y.css({fontSize:r+(M.sum||0)/(M.chart.labelSeriesMaxSum||0)*(a-r)+"px"}),y.attr({padding:0,zIndex:3}).add()}for((f=y.getBBox()).width=Math.round(f.width),b=s.length-1;0<b;--b)c?S(u=(s[b].chartCenterX??s[b].chartX)-f.width/2,x=(s[b].chartCenterY??s[b].chartY)-f.height/2,f)&&(m=C(M,u,x,f)):((m=S(u=s[b].chartX+3,x=s[b].chartY-f.height-3,f)?C(M,u,x,f,!0):m)&&p.push(m),(m=S(u=s[b].chartX+3,x=s[b].chartY+3,f)?C(M,u,x,f,!0):m)&&p.push(m),(m=S(u=s[b].chartX-f.width-3,x=s[b].chartY+3,f)?C(M,u,x,f,!0):m)&&p.push(m),S(u=s[b].chartX-f.width-3,x=s[b].chartY-f.height-3,f)&&(m=C(M,u,x,f,!0))),m&&p.push(m);if(A.connectorAllowed&&!p.length&&!c)for(u=i+n-f.width;u>=i;u-=16)for(x=h;x<h+l-f.height;x+=16)(g=C(M,u,x,f,!0))&&p.push(g);if(p.length){p.sort((t,e)=>e.weight-t.weight),m=p[0],(L.boxesToAvoid||[]).push({left:m.x,right:m.x+f.width,top:m.y,bottom:m.y+f.height});var v=Math.sqrt(Math.pow(Math.abs(m.x-(y.x||0)),2)+Math.pow(Math.abs(m.y-(y.y||0)),2));if(v&&M.labelBySeries){let t,e={opacity:+!!L.renderer.forExport,x:m.x,y:m.y},r={opacity:1};v<=10&&(r={x:e.x,y:e.y},e={}),o&&((t=P(M.options.animation)).duration*=.2),M.labelBySeries.attr(E(e,{anchorX:m.connectorPoint&&(m.connectorPoint.plotX||0)+i,anchorY:m.connectorPoint&&(m.connectorPoint.plotY||0)+h})).animate(r,t),M.options.kdNow=!0,M.buildKDTree();v=M.searchPoint({chartX:m.x,chartY:m.y},!0);v&&(y.closest=[v,m.x-(v.plotX||0),m.y-(v.plotY||0)])}}else T()}else T();function S(t,e,r){var o=Math.max(i,H(w,-1/0)),a=Math.min(i+n,H(Y,1/0));return o<t&&t<=a-r.width&&e>=h&&e<=h+l-r.height}function T(){y&&(M.labelBySeries=y.destroy())}}}),d(L,"afterDrawSeriesLabels")}},h.renderer.forExport||!i?0:i)}}function g(t,e,r,o,a){let i=a&&a.anchorX,h=a&&a.anchorY,n,l,s=r/2;return A(i)&&A(h)&&(n=[["M",i,h]],(l=(l=e-h)<0?-o-l:l)<r&&(s=i<t+r/2?l:r-l),e+o<h?n.push(["L",t+s,e+o]):h<e?n.push(["L",t+s,e]):i<t?n.push(["L",t,e+o/2]):t+r<i&&n.push(["L",t+r,e+o/2])),n||[]}var b,e=l();b=e.Chart,e=e.SVGRenderer,f(n,"SeriesLabel")&&(p(b,"load",x),p(b,"redraw",x),e.prototype.symbols.connector=g,h({plotOptions:{series:{label:i}}}));let m=l();return t.default})());