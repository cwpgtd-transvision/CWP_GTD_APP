!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(t._Highcharts,t._Highcharts.Color,t._Highcharts.RendererRegistry,t._Highcharts.SeriesRegistry):"function"==typeof define&&define.amd?define("highcharts/modules/funnel3d",["highcharts/highcharts"],function(t){return e(t,t.Color,t.RendererRegistry,t.SeriesRegistry)}):"object"==typeof exports?exports["highcharts/modules/funnel3d"]=e(t._Highcharts,t._Highcharts.Color,t._Highcharts.RendererRegistry,t._Highcharts.SeriesRegistry):t.Highcharts=e(t.Highcharts,t.Highcharts.Color,t.Highcharts.RendererRegistry,t.Highcharts.SeriesRegistry)}("undefined"==typeof window?this:window,(R,E,P,_)=>(()=>{"use strict";var r={512:t=>{t.exports=_},608:t=>{t.exports=P},620:t=>{t.exports=E},944:t=>{t.exports=R}},i={};function o(t){var e=i[t];if(void 0!==e)return e.exports;e=i[t]={exports:{}};return r[t](e,e.exports,o),e.exports}o.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return o.d(e,{a:e}),e},o.d=(t,e)=>{for(var r in e)o.o(e,r)&&!o.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var t={},e=(o.d(t,{default:()=>I}),o(944)),e=o.n(e),n=o(620),n=o.n(n),s=o(608),s=o.n(s);let x=n()["parse"],h=e()["charts"],d=s().getRendererType().prototype["Element3D"],u=e()["merge"],a=class extends d{constructor(){super(...arguments),this.mainParts=["top","bottom"],this.parts=["top","bottom","frontUpper","backUpper","frontLower","backLower","rightUpper","rightLower"],this.sideGroups=["upperGroup","lowerGroup"],this.sideParts={upperGroup:["frontUpper","backUpper","rightUpper"],lowerGroup:["frontLower","backLower","rightLower"]},this.pathType="funnel3d"}opacitySetter(t){let e=parseFloat(t),r=this.parts,i=h[this.renderer.chartIndex],o="group-opacity-"+e+"-"+i.index;if(this.parts=this.mainParts,this.singleSetterForParts("opacity",e),this.parts=r,!i.renderer.filterId){for(var n of(i.renderer.definition({tagName:"filter",attributes:{id:o},children:[{tagName:"feComponentTransfer",children:[{tagName:"feFuncA",attributes:{type:"table",tableValues:"0 "+e}}]}]}),this.sideGroups))this[n].attr({filter:"url(#"+o+")"});if(this.renderer.styledMode)for(var s of(i.renderer.definition({tagName:"style",textContent:".highcharts-"+o+" {filter:url(#"+o+")}"}),this.sideGroups))this[s].addClass("highcharts-"+o)}return this}fillSetter(t){let e=x(t),r=e.rgba[3],i={top:x(t).brighten(.1).get(),bottom:x(t).brighten(-.2).get()};if(r<1?(e.rgba[3]=1,e=e.get("rgb"),this.attr({opacity:r})):e=t,(e=e.linearGradient||e.radialGradient||!this.gradientForSides?e:{linearGradient:{x1:0,x2:1,y1:1,y2:1},stops:[[0,x(t).brighten(-.2).get()],[.5,t],[1,x(t).brighten(-.2).get()]]}).linearGradient)for(var o of this.sideGroups){var n,s=this[o].gradientBox,h=e.linearGradient,d=u(e,{linearGradient:{x1:s.x+h.x1*s.width,y1:s.y+h.y1*s.height,x2:s.x+h.x2*s.width,y2:s.y+h.y2*s.height}});for(n of this.sideParts[o])i[n]=d}else if(u(!0,i,{frontUpper:e,backUpper:e,rightUpper:e,frontLower:e,backLower:e,rightLower:e}),e.radialGradient)for(var a of this.sideGroups){var p,l=this[a].gradientBox,g=l.x+l.width/2,c=l.y+l.height/2,f=Math.min(l.width,l.height);for(p of this.sideParts[a])this[p].setRadialReference([g,c,f])}if(this.singleSetterForParts("fill",null,i),this.color=this.fill=t,e.linearGradient)for(var y of[this.frontLower,this.frontUpper]){let t=y.element,e=t&&this.renderer.gradients[t.gradient];e&&"userSpaceOnUse"!==e.attr("gradientUnits")&&e.attr({gradientUnits:"userSpaceOnUse"})}return this}adjustForGradient(){var r;for(r of this.sideGroups){let t={x:Number.MAX_VALUE,y:Number.MAX_VALUE},e={x:-Number.MAX_VALUE,y:-Number.MAX_VALUE};for(var i of this.sideParts[r])i=this[i].getBBox(!0),t={x:Math.min(t.x,i.x),y:Math.min(t.y,i.y)},e={x:Math.max(e.x,i.x+i.width),y:Math.max(e.y,i.y+i.height)};this[r].gradientBox={x:t.x,width:e.x-t.x,y:t.y,height:e.y-t.y}}}zIndexSetter(){return this.finishedOnAdd&&this.adjustForGradient(),this.renderer.Element.prototype.zIndexSetter.apply(this,arguments)}onAdd(){this.adjustForGradient(),this.finishedOnAdd=!0}},w=e()["charts"],{error:m,extend:p,merge:b}=e();function l(t){let e=this.element3d("funnel3d",t),r=this.styledMode,i={"stroke-width":1,stroke:"none"};for(var o of(e.upperGroup=this.g("funnel3d-upper-group").attr({zIndex:e.frontUpper.zIndex}).add(e),[e.frontUpper,e.backUpper,e.rightUpper]))r||o.attr(i),o.add(e.upperGroup);for(var n of(e.lowerGroup=this.g("funnel3d-lower-group").attr({zIndex:e.frontLower.zIndex}).add(e),[e.frontLower,e.backLower,e.rightLower]))r||n.attr(i),n.add(e.lowerGroup);return e.gradientForSides=t.gradientForSides,e}function g(t){this.getCylinderEnd||m("A required Highcharts module is missing: cylinder.js",!0,w[this.chartIndex]);let e=w[this.chartIndex],r=t.alphaCorrection=90-Math.abs(e.options.chart.options3d.alpha%180-90),i=this.cuboidPath.call(this,b(t,{depth:t.width,width:(t.width+t.bottom.width)/2})),o=i.isTop,n=!i.isFront,s=!!t.middle,h=this.getCylinderEnd(e,b(t,{x:t.x-t.width/2,z:t.z-t.width/2,alphaCorrection:r})),d=t.bottom.width,a=b(t,{width:d,x:t.x-d/2,z:t.z-d/2,alphaCorrection:r}),p=this.getCylinderEnd(e,a,!0),l=d,g=a,c=p,f=p,y,x=(s&&(l=t.middle.width,g=b(t,{y:t.y+t.middle.fraction*t.height,width:l,x:t.x-l/2,z:t.z-l/2}),c=this.getCylinderEnd(e,g,!1),f=this.getCylinderEnd(e,g,!1)),{top:h,bottom:p,frontUpper:this.getCylinderFront(h,c),zIndexes:{group:i.zIndexes.group,top:3*(0===o),bottom:3*(1===o),frontUpper:n?2:1,backUpper:n?1:2,rightUpper:n?2:1}});return x.backUpper=this.getCylinderBack(h,c),y=Math.min(l,t.width)/Math.max(l,t.width)!=1,x.rightUpper=this.getCylinderFront(this.getCylinderEnd(e,b(t,{x:t.x-t.width/2,z:t.z-t.width/2,alphaCorrection:y?-r:0}),!1),this.getCylinderEnd(e,b(g,{alphaCorrection:y?-r:0}),!s)),s&&(y=Math.min(l,d)/Math.max(l,d)!=1,b(!0,x,{frontLower:this.getCylinderFront(f,p),backLower:this.getCylinderBack(f,p),rightLower:this.getCylinderFront(this.getCylinderEnd(e,b(a,{alphaCorrection:y?-r:0}),!0),this.getCylinderEnd(e,b(g,{alphaCorrection:y?-r:0}),!1)),zIndexes:{frontLower:n?2:1,backLower:n?1:2,rightLower:n?1:2}})),x}n=o(512),n=o.n(n);let c=n()["seriesTypes"]["column"],f=e()["extend"];class y extends c.prototype.pointClass{}f(y.prototype,{shapeType:"funnel3d"});let v=e()["deg2rad"],A=e()["pick"];function C(t,e,r,i){let o=e.options.chart.options3d,n=A(i,!!r&&e.inverted),s={x:e.plotWidth/2,y:e.plotHeight/2,z:o.depth/2,vd:A(o.depth,1)*A(o.viewDistance,0)},h=e.scale3d||1,d=v*o.beta*(n?-1:1),a=v*o.alpha*(n?-1:1),p={cosA:Math.cos(a),cosB:Math.cos(-d),sinA:Math.sin(a),sinB:Math.sin(-d)};return r||(s.x+=e.plotLeft,s.y+=e.plotTop),t.map(function(t){var e,r;e=(n?t.y:t.x)-s.x,r=(n?t.x:t.y)-s.y,t=(t.z||0)-s.z;let i={x:p.cosB*e-p.sinB*t,y:-p.sinA*p.sinB*e+p.cosA*r-p.cosB*p.sinA*t,z:p.cosA*p.sinB*e+p.sinA*r+p.cosA*p.cosB*t},o=L(i,s,s.vd);return o.x=o.x*h+s.x,o.y=o.y*h+s.y,o.z=i.z*h+s.z,{x:n?o.y:o.x,y:n?o.x:o.y,z:o.z}})}function L(t,e,r){e=0<r&&r<Number.POSITIVE_INFINITY?r/(t.z+e.z+r):1;return{x:t.x*e,y:t.y*e}}let z=e()["noop"],k={perspective:C}["perspective"],{series:S,seriesTypes:{column:U}}=n(),{extend:M,merge:G,pick:F,relativeLength:B}=e();class H extends U{alignDataLabel(t,e,r){let i=t.dlBoxRaw,o=this.chart.inverted,n=t.plotY>F(this.translatedThreshold,this.yAxis.len),s=F(r.inside,!!this.options.stacking),h={x:i.x,y:i.y,height:0};r.align=F(r.align,!o||s?"center":n?"right":"left"),r.verticalAlign=F(r.verticalAlign,o||s?"middle":n?"top":"bottom"),"top"!==r.verticalAlign&&(h.y+=i.bottom/("bottom"===r.verticalAlign?1:2)),h.width=this.getWidthAt(h.y),this.options.reversed&&(h.width=i.fullWidth-h.width),s?h.x-=h.width/2:"left"===r.align?(r.align="right",h.x-=1.5*h.width):"right"===r.align?(r.align="left",h.x+=h.width/2):h.x-=h.width/2,t.dlBox=h,U.prototype.alignDataLabel.apply(this,arguments)}bindAxes(){S.prototype.bindAxes.apply(this,arguments),M(this.xAxis.options,{gridLineWidth:0,lineWidth:0,title:void 0,tickPositions:[]}),G(!0,this.yAxis.options,{gridLineWidth:0,title:void 0,labels:{enabled:!1}})}translate(){S.prototype.translate.apply(this,arguments);let t=this.chart,e=this.options,r=e.reversed,i=e.ignoreHiddenPoint,o=t.plotWidth,n=t.plotHeight,s=e.center,h=B(s[0],o),d=B(s[1],n),a=B(e.width,o),p=B(e.height,n),l=B(e.neckWidth,o),g=B(e.neckHeight,n),c=d-p/2+p-g,f=this.points,y=0,x=0,u,w,m,b,v,A,C,L,z;for(var U of(this.getWidthAt=w=function(t){return t>c||p===g?l:l+(a-l)*(1-(t-(d-p/2))/(p-g))},this.center=[h,d,p],this.centerX=h,f))i&&!1===U.visible||(y+=U.y);for(var G of f)C=null,m=y?G.y/y:0,A=(v=d-p/2+x*p)+m*p,u=w(v),L=A-v,(z={gradientForSides:F(G.options.gradientForSides,e.gradientForSides),x:h,y:v,height:L,width:u,z:1,top:{width:u}}).bottom={fraction:m,width:u=w(A)},v>=c?z.isCylinder=!0:A>c&&(C=A,u=w(c),A=c,z.bottom.width=u,z.middle={fraction:L?(c-v)/L:0,width:u}),r&&(z.y=v=d+p/2-(x+m)*p,z.middle&&(z.middle.fraction=1-(L?z.middle.fraction:0)),u=z.width,z.width=z.bottom.width,z.bottom.width=u),G.shapeArgs=M(G.shapeArgs,z),G.percentage=100*m,G.plotX=h,G.plotY=r?d+p/2-(x+m/2)*p:(v+(C||A))/2,b=k([{x:h,y:G.plotY,z:r?-(a-w(G.plotY))/2:-w(G.plotY)/2}],t,!0)[0],G.tooltipPos=[b.x,b.y],G.dlBoxRaw={x:h,width:w(G.plotY),y:v,bottom:z.height||0,fullWidth:a},i&&!1===G.visible||(x+=m)}}H.compose=function(t){let e=t.prototype;e.funnel3d||(e.Element3D.types.funnel3d=a,p(e,{funnel3d:l,funnel3dPath:g}))},H.defaultOptions=G(U.defaultOptions,{center:["50%","50%"],width:"90%",neckWidth:"30%",height:"100%",neckHeight:"25%",reversed:!1,gradientForSides:!0,animation:!1,edgeWidth:0,colorByPoint:!0,showInLegend:!1,dataLabels:{align:"right",crop:!1,inside:!1,overflow:"allow"}}),M(H.prototype,{pointClass:y,translate3dShapes:z}),n().registerSeriesType("funnel3d",H),H.compose(s().getRendererType());let I=e();return t.default})());