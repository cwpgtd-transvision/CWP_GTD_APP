!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(t._Highcharts,t._Highcharts.SeriesRegistry,t._Highcharts.SVGElement):"function"==typeof define&&define.amd?define("highcharts/modules/dependency-wheel",["highcharts/highcharts"],function(t){return e(t,t.SeriesRegistry,t.SVGElement)}):"object"==typeof exports?exports["highcharts/modules/dependency-wheel"]=e(t._Highcharts,t._Highcharts.SeriesRegistry,t._Highcharts.SVGElement):t.Highcharts=e(t.Highcharts,t.Highcharts.SeriesRegistry,t.Highcharts.SVGElement)}("undefined"==typeof window?this:window,(Y,_,j)=>(()=>{"use strict";var a={28:t=>{t.exports=j},512:t=>{t.exports=_},944:t=>{t.exports=Y}},n={};function s(t){var e=n[t];if(void 0!==e)return e.exports;e=n[t]={exports:{}};return a[t](e,e.exports,s),e.exports}s.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return s.d(e,{a:e}),e},s.d=(t,e)=>{for(var a in e)s.o(e,a)&&!s.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})},s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var t={},e=(s.d(t,{default:()=>R}),s(944)),e=s.n(e),r=s(512),r=s.n(r),{pointClass:o}=r().seriesTypes["sankey"]["prototype"];const{pInt:i,wrap:h}=e();class d extends o{getDataLabelPath(t){const e=this,a=e.series.chart.renderer,n=e.shapeArgs,s=e.angle<0||e.angle>Math.PI,r=n.start||0,o=n.end||0;return e.dataLabelPath?(e.dataLabelPath=e.dataLabelPath.destroy(),delete e.dataLabelPath):h(t,"destroy",function(t){return e.dataLabelPath&&(e.dataLabelPath=e.dataLabelPath.destroy()),t.call(this)}),e.dataLabelPath=a.arc({open:!0,longArc:Math.abs(Math.abs(r)-Math.abs(o))<Math.PI?0:1}).attr({x:n.x,y:n.y,r:(n.r||0)+i(t.options?.distance||0),start:s?r:o,end:s?o:r,clockwise:+s}).add(a.defs),e.dataLabelPath}isValid(){return!0}}var o=d,c={center:[null,null],curveFactor:.6,startAngle:0,dataLabels:{textPath:{enabled:!1,attributes:{dy:5}}}};const{defined:p,getAlignFactor:l,relativeLength:u}=e();{var g;(g=y=y||{}).compose=function(t,e){const a=t;return a.sankeyColumn=new W(a,e),a};class W{constructor(t,e){this.points=t,this.series=e}getTranslationFactor(t){const e=this.points,a=e.slice(),n=t.chart,s=t.options.minLinkWidth||0;let r,o=0,i,h=(n.plotSizeY||0)-(t.options.borderWidth||0)-(e.length-1)*t.nodePadding;for(;e.length;){for(o=h/e.sankeyColumn.sum(),r=!1,i=e.length;i--;)e[i].getSum()*o<s&&(e.splice(i,1),h=Math.max(0,h-s),r=!0);if(!r)break}e.length=0;for(const d of a)e.push(d);return o}top(a){const n=this.series,s=n.nodePadding,t=this.points.reduce((t,e)=>{return 0<t&&(t+=s),t+=Math.max(e.getSum()*a,n.options.minLinkWidth||0)},0);return l(n.options.nodeAlignment||"center")*((n.chart.plotSizeY||0)-t)}left(a){const n=this.series,t=n.chart,s=n.options.equalNodes,r=t.inverted?t.plotHeight:t.plotWidth,o=n.nodePadding,e=this.points.reduce((t,e)=>{return 0<t&&(t+=o),t+=s?r/e.series.nodes.length-o:Math.max(e.getSum()*a,n.options.minLinkWidth||0)},0);return((t.plotSizeX||0)-Math.round(e))/2}sum(){return this.points.reduce((t,e)=>t+e.getSum(),0)}offset(e,a){const n=this.points,s=this.series,r=s.nodePadding;let o=0,i;if(s.is("organization")&&e.hangsFrom)return{absoluteTop:e.hangsFrom.nodeY};for(let t=0;t<n.length;t++){var h=n[t].getSum(),d=Math.max(h*a,s.options.minLinkWidth||0),c=e.options[s.chart.inverted?"offsetHorizontal":"offsetVertical"],l=e.options.offset||0;if(i=h?d+r:0,n[t]===e)return{relativeTop:o+(p(c)?u(c,d):u(l,i))};o+=i}}}g.SankeyColumnAdditions=W}const f=y;var g=s(28),y=s.n(g);const m=e()["deg2rad"],{addEvent:x,merge:b,uniqueKey:P,defined:v,extend:M}=e();function L(s,t){t=b(!0,{enabled:!0,attributes:{dy:-5,startOffset:"50%",textAnchor:"middle"}},t);const r=this.renderer.url,o=this.text||this,e=o.textPath,{attributes:i,enabled:h}=t;return s=s||e&&e.path,e&&e.undo(),s&&h?(t=x(o,"afterModifyTree",e=>{if(s&&h){let t=s.attr("id");t||s.attr("id",t=P());const n={x:0,y:0};v(i.dx)&&(n.dx=i.dx,delete i.dx),v(i.dy)&&(n.dy=i.dy,delete i.dy),o.attr(n),this.attr({transform:""}),this.box&&(this.box=this.box.destroy());var a=e.nodes.slice(0);e.nodes.length=0,e.nodes[0]={tagName:"textPath",attributes:M(i,{"text-anchor":i.textAnchor,href:r+"#"+t}),children:a}}}),o.textPath={path:s,undo:t}):(o.attr({dx:0,dy:0}),delete o.textPath),this.added&&(o.textCache="",this.renderer.buildText(o)),this}function k(t){const e=t.bBox,s=this.element?.querySelector("textPath");if(s){const p=[],{b:u,h:a}=this.renderer.fontMetrics(this.element),g=a-u,f=new RegExp('(<tspan>|<tspan(?!\\sclass="highcharts-br")[^>]*>|<\\/tspan>)',"g"),y=s.innerHTML.replace(f,"").split(/<tspan class="highcharts-br"[^>]*>/),x=y.length;var n=(t,e)=>{var{x:e,y:a}=e,t=(s.getRotationOfChar(t)-90)*m,n=Math.cos(t),t=Math.sin(t);return[[e-g*n,a-g*t],[e+u*n,a+u*t]]};for(let e=0,a=0;a<x;a++){var r=y[a].length;for(let t=0;t<r;t+=5)try{var o=e+t+a,[i,h]=n(o,s.getStartPositionOfChar(o));0===t?(p.push(h),p.push(i)):(0===a&&p.unshift(h),a===x-1&&p.push(i))}catch(t){break}e+=r-1;try{var d=e+a,[c,l]=n(d,s.getEndPositionOfChar(d));p.unshift(l),p.unshift(c)}catch(t){break}}p.length&&p.push(p[0].slice()),e.polygon=p}return e}function S(t){const e=t.labelOptions,a=t.point,n=e[a.formatPrefix+"TextPath"]||e.textPath;n&&!e.useHTML&&(this.setTextPath(a.getDataLabelPath?.(this)||a.graphic,n),a.dataLabelPath&&!n.enabled&&(a.dataLabelPath=a.dataLabelPath.destroy()))}const T={compose:function(t){x(t,"afterGetBBox",k),x(t,"beforeAddingDataLabel",S);const e=t.prototype;e.setTextPath||(e.setTextPath=L)}},C=e()["animObject"],w=e()["deg2rad"];var{pie:g,sankey:A}=r().seriesTypes;const{extend:H,merge:N,relativeLength:O}=e();T.compose(y());class F extends A{animate(t){var e=this;if(!t){const a=C(e.options.animation).duration,n=a/2/e.nodes.length;let t=0;for(const s of e.nodes){const r=s.graphic;r&&(r.attr({opacity:0}),setTimeout(()=>{s.graphic&&s.graphic.animate({opacity:1},{duration:n})},n*t++))}for(const o of e.points){const i=o.graphic;!o.isNode&&i&&i.attr({opacity:0}).animate({opacity:1},e.options.animation)}}}createNode(t){const o=super.createNode(t);return o.getSum=()=>o.linksFrom.concat(o.linksTo).reduce((t,e)=>t+e.weight,0),o.offset=e=>{const a=t=>t.fromNode===o?t.toNode:t.fromNode;let n=0,s=o.linksFrom.concat(o.linksTo),r;s.sort((t,e)=>a(t).index-a(e).index);for(let t=0;t<s.length;t++)if(a(s[t]).index>o.index){s=s.slice(0,t).reverse().concat(s.slice(t).reverse()),r=!0;break}r||s.reverse();for(let t=0;t<s.length;t++){if(s[t]===e)return n;n+=s[t].weight}},o}createNodeColumns(){const t=[f.compose([],this)];for(const e of this.nodes)e.column=0,t[0].push(e);return t}getNodePadding(){return this.options.nodePadding/Math.PI}translate(){const o=this.options,i=2*Math.PI/(this.chart.plotHeight+this.getNodePadding()),t=this.getCenter(),h=(o.startAngle-90)*w,e=o.borderRadius,a="object"==typeof e?e.radius:e;super.translate();for(const s of this.nodeColumns[0])if(s.sum){const r=s.shapeArgs,d=t[0],c=t[1],l=t[2]/2,p="auto"===o.nodeWidth?20:o.nodeWidth,u=l-O(p||0,l),g=h+i*(r.y||0),f=h+i*((r.y||0)+(r.height||0));s.angle=g+(f-g)/2,s.shapeType="arc",s.shapeArgs={x:d,y:c,r:l,innerR:u,start:g,end:f,borderRadius:a},s.dlBox={x:d+Math.cos((g+f)/2)*(l+u)/2,y:c+Math.sin((g+f)/2)*(l+u)/2,width:1,height:1};for(const y of s.linksFrom)if(y.linkBase){let s,r;var n=y.linkBase.map((t,e)=>{var t=i*t,a=Math.cos(h+t)*(1+u),n=Math.sin(h+t)*(1+u);return s=o.curveFactor||0,(r=Math.abs(y.linkBase[3-e]*i-t))>Math.PI&&(r=2*Math.PI-r),(r*=u)<u&&(s*=r/u),{x:d+a,y:c+n,cpX:d+(1-s)*a,cpY:c+(1-s)*n}});y.shapeArgs={d:[["M",n[0].x,n[0].y],["A",u,u,0,0,1,n[1].x,n[1].y],["C",n[1].cpX,n[1].cpY,n[2].cpX,n[2].cpY,n[2].x,n[2].y],["A",u,u,0,0,1,n[3].x,n[3].y],["C",n[3].cpX,n[3].cpY,n[0].cpX,n[0].cpY,n[0].x,n[0].y]]}}}}}F.defaultOptions=N(A.defaultOptions,c),H(F.prototype,{orderNodes:!1,getCenter:g.prototype.getCenter}),F.prototype.pointClass=o,r().registerSeriesType("dependencywheel",F);const R=e();return t.default})());